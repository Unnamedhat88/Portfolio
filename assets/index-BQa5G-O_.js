function Bz(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function Kh(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var tS={exports:{}},Pg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _w;function Fz(){if(_w)return Pg;_w=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,r){var o=null;if(r!==void 0&&(o=""+r),s.key!==void 0&&(o=""+s.key),"key"in s){r={};for(var c in s)c!=="key"&&(r[c]=s[c])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:o,ref:s!==void 0?s:null,props:r}}return Pg.Fragment=e,Pg.jsx=t,Pg.jsxs=t,Pg}var bw;function Hz(){return bw||(bw=1,tS.exports=Fz()),tS.exports}var Ze=Hz(),nS={exports:{}},an={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function Vz(){if(Sw)return an;Sw=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(X){return X===null||typeof X!="object"?null:(X=g&&X[g]||X["@@iterator"],typeof X=="function"?X:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,A={};function M(X,ie,Ee){this.props=X,this.context=ie,this.refs=A,this.updater=Ee||_}M.prototype.isReactComponent={},M.prototype.setState=function(X,ie){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ie,"setState")},M.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function T(){}T.prototype=M.prototype;function C(X,ie,Ee){this.props=X,this.context=ie,this.refs=A,this.updater=Ee||_}var D=C.prototype=new T;D.constructor=C,b(D,M.prototype),D.isPureReactComponent=!0;var N=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function P(X,ie,Ee,Ue,re,Ce){return Ee=Ce.ref,{$$typeof:i,type:X,key:ie,ref:Ee!==void 0?Ee:null,props:Ce}}function G(X,ie){return P(X.type,ie,void 0,void 0,void 0,X.props)}function B(X){return typeof X=="object"&&X!==null&&X.$$typeof===i}function U(X){var ie={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Ee){return ie[Ee]})}var j=/\/+/g;function ae(X,ie){return typeof X=="object"&&X!==null&&X.key!=null?U(""+X.key):ie.toString(36)}function ne(){}function de(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(ne,ne):(X.status="pending",X.then(function(ie){X.status==="pending"&&(X.status="fulfilled",X.value=ie)},function(ie){X.status==="pending"&&(X.status="rejected",X.reason=ie)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function he(X,ie,Ee,Ue,re){var Ce=typeof X;(Ce==="undefined"||Ce==="boolean")&&(X=null);var Be=!1;if(X===null)Be=!0;else switch(Ce){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(X.$$typeof){case i:case e:Be=!0;break;case m:return Be=X._init,he(Be(X._payload),ie,Ee,Ue,re)}}if(Be)return re=re(X),Be=Ue===""?"."+ae(X,0):Ue,N(re)?(Ee="",Be!=null&&(Ee=Be.replace(j,"$&/")+"/"),he(re,ie,Ee,"",function(Ct){return Ct})):re!=null&&(B(re)&&(re=G(re,Ee+(re.key==null||X&&X.key===re.key?"":(""+re.key).replace(j,"$&/")+"/")+Be)),ie.push(re)),1;Be=0;var qe=Ue===""?".":Ue+":";if(N(X))for(var Ke=0;Ke<X.length;Ke++)Ue=X[Ke],Ce=qe+ae(Ue,Ke),Be+=he(Ue,ie,Ee,Ce,re);else if(Ke=v(X),typeof Ke=="function")for(X=Ke.call(X),Ke=0;!(Ue=X.next()).done;)Ue=Ue.value,Ce=qe+ae(Ue,Ke++),Be+=he(Ue,ie,Ee,Ce,re);else if(Ce==="object"){if(typeof X.then=="function")return he(de(X),ie,Ee,Ue,re);throw ie=String(X),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Be}function F(X,ie,Ee){if(X==null)return X;var Ue=[],re=0;return he(X,Ue,"","",function(Ce){return ie.call(Ee,Ce,re++)}),Ue}function W(X){if(X._status===-1){var ie=X._result;ie=ie(),ie.then(function(Ee){(X._status===0||X._status===-1)&&(X._status=1,X._result=Ee)},function(Ee){(X._status===0||X._status===-1)&&(X._status=2,X._result=Ee)}),X._status===-1&&(X._status=0,X._result=ie)}if(X._status===1)return X._result.default;throw X._result}var Z=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function fe(){}return an.Children={map:F,forEach:function(X,ie,Ee){F(X,function(){ie.apply(this,arguments)},Ee)},count:function(X){var ie=0;return F(X,function(){ie++}),ie},toArray:function(X){return F(X,function(ie){return ie})||[]},only:function(X){if(!B(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},an.Component=M,an.Fragment=t,an.Profiler=s,an.PureComponent=C,an.StrictMode=n,an.Suspense=f,an.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,an.__COMPILER_RUNTIME={__proto__:null,c:function(X){return I.H.useMemoCache(X)}},an.cache=function(X){return function(){return X.apply(null,arguments)}},an.cloneElement=function(X,ie,Ee){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Ue=b({},X.props),re=X.key,Ce=void 0;if(ie!=null)for(Be in ie.ref!==void 0&&(Ce=void 0),ie.key!==void 0&&(re=""+ie.key),ie)!L.call(ie,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&ie.ref===void 0||(Ue[Be]=ie[Be]);var Be=arguments.length-2;if(Be===1)Ue.children=Ee;else if(1<Be){for(var qe=Array(Be),Ke=0;Ke<Be;Ke++)qe[Ke]=arguments[Ke+2];Ue.children=qe}return P(X.type,re,void 0,void 0,Ce,Ue)},an.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:r,_context:X},X},an.createElement=function(X,ie,Ee){var Ue,re={},Ce=null;if(ie!=null)for(Ue in ie.key!==void 0&&(Ce=""+ie.key),ie)L.call(ie,Ue)&&Ue!=="key"&&Ue!=="__self"&&Ue!=="__source"&&(re[Ue]=ie[Ue]);var Be=arguments.length-2;if(Be===1)re.children=Ee;else if(1<Be){for(var qe=Array(Be),Ke=0;Ke<Be;Ke++)qe[Ke]=arguments[Ke+2];re.children=qe}if(X&&X.defaultProps)for(Ue in Be=X.defaultProps,Be)re[Ue]===void 0&&(re[Ue]=Be[Ue]);return P(X,Ce,void 0,void 0,null,re)},an.createRef=function(){return{current:null}},an.forwardRef=function(X){return{$$typeof:c,render:X}},an.isValidElement=B,an.lazy=function(X){return{$$typeof:m,_payload:{_status:-1,_result:X},_init:W}},an.memo=function(X,ie){return{$$typeof:d,type:X,compare:ie===void 0?null:ie}},an.startTransition=function(X){var ie=I.T,Ee={};I.T=Ee;try{var Ue=X(),re=I.S;re!==null&&re(Ee,Ue),typeof Ue=="object"&&Ue!==null&&typeof Ue.then=="function"&&Ue.then(fe,Z)}catch(Ce){Z(Ce)}finally{I.T=ie}},an.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},an.use=function(X){return I.H.use(X)},an.useActionState=function(X,ie,Ee){return I.H.useActionState(X,ie,Ee)},an.useCallback=function(X,ie){return I.H.useCallback(X,ie)},an.useContext=function(X){return I.H.useContext(X)},an.useDebugValue=function(){},an.useDeferredValue=function(X,ie){return I.H.useDeferredValue(X,ie)},an.useEffect=function(X,ie,Ee){var Ue=I.H;if(typeof Ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ue.useEffect(X,ie)},an.useId=function(){return I.H.useId()},an.useImperativeHandle=function(X,ie,Ee){return I.H.useImperativeHandle(X,ie,Ee)},an.useInsertionEffect=function(X,ie){return I.H.useInsertionEffect(X,ie)},an.useLayoutEffect=function(X,ie){return I.H.useLayoutEffect(X,ie)},an.useMemo=function(X,ie){return I.H.useMemo(X,ie)},an.useOptimistic=function(X,ie){return I.H.useOptimistic(X,ie)},an.useReducer=function(X,ie,Ee){return I.H.useReducer(X,ie,Ee)},an.useRef=function(X){return I.H.useRef(X)},an.useState=function(X){return I.H.useState(X)},an.useSyncExternalStore=function(X,ie,Ee){return I.H.useSyncExternalStore(X,ie,Ee)},an.useTransition=function(){return I.H.useTransition()},an.version="19.1.0",an}var Ew;function am(){return Ew||(Ew=1,nS.exports=Vz()),nS.exports}var V=am();const se=Kh(V),Gz=Bz({__proto__:null,default:se},[V]);var iS={exports:{}},Ig={},sS={exports:{}},rS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw;function kz(){return Tw||(Tw=1,function(i){function e(F,W){var Z=F.length;F.push(W);e:for(;0<Z;){var fe=Z-1>>>1,X=F[fe];if(0<s(X,W))F[fe]=W,F[Z]=X,Z=fe;else break e}}function t(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var W=F[0],Z=F.pop();if(Z!==W){F[0]=Z;e:for(var fe=0,X=F.length,ie=X>>>1;fe<ie;){var Ee=2*(fe+1)-1,Ue=F[Ee],re=Ee+1,Ce=F[re];if(0>s(Ue,Z))re<X&&0>s(Ce,Ue)?(F[fe]=Ce,F[re]=Z,fe=re):(F[fe]=Ue,F[Ee]=Z,fe=Ee);else if(re<X&&0>s(Ce,Z))F[fe]=Ce,F[re]=Z,fe=re;else break e}}return W}function s(F,W){var Z=F.sortIndex-W.sortIndex;return Z!==0?Z:F.id-W.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var f=[],d=[],m=1,g=null,v=3,_=!1,b=!1,A=!1,M=!1,T=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function N(F){for(var W=t(d);W!==null;){if(W.callback===null)n(d);else if(W.startTime<=F)n(d),W.sortIndex=W.expirationTime,e(f,W);else break;W=t(d)}}function I(F){if(A=!1,N(F),!b)if(t(f)!==null)b=!0,L||(L=!0,ae());else{var W=t(d);W!==null&&he(I,W.startTime-F)}}var L=!1,P=-1,G=5,B=-1;function U(){return M?!0:!(i.unstable_now()-B<G)}function j(){if(M=!1,L){var F=i.unstable_now();B=F;var W=!0;try{e:{b=!1,A&&(A=!1,C(P),P=-1),_=!0;var Z=v;try{t:{for(N(F),g=t(f);g!==null&&!(g.expirationTime>F&&U());){var fe=g.callback;if(typeof fe=="function"){g.callback=null,v=g.priorityLevel;var X=fe(g.expirationTime<=F);if(F=i.unstable_now(),typeof X=="function"){g.callback=X,N(F),W=!0;break t}g===t(f)&&n(f),N(F)}else n(f);g=t(f)}if(g!==null)W=!0;else{var ie=t(d);ie!==null&&he(I,ie.startTime-F),W=!1}}break e}finally{g=null,v=Z,_=!1}W=void 0}}finally{W?ae():L=!1}}}var ae;if(typeof D=="function")ae=function(){D(j)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,de=ne.port2;ne.port1.onmessage=j,ae=function(){de.postMessage(null)}}else ae=function(){T(j,0)};function he(F,W){P=T(function(){F(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(F){F.callback=null},i.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<F?Math.floor(1e3/F):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(F){switch(v){case 1:case 2:case 3:var W=3;break;default:W=v}var Z=v;v=W;try{return F()}finally{v=Z}},i.unstable_requestPaint=function(){M=!0},i.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=v;v=F;try{return W()}finally{v=Z}},i.unstable_scheduleCallback=function(F,W,Z){var fe=i.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?fe+Z:fe):Z=fe,F){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Z+X,F={id:m++,callback:W,priorityLevel:F,startTime:Z,expirationTime:X,sortIndex:-1},Z>fe?(F.sortIndex=Z,e(d,F),t(f)===null&&F===t(d)&&(A?(C(P),P=-1):A=!0,he(I,Z-fe))):(F.sortIndex=X,e(f,F),b||_||(b=!0,L||(L=!0,ae()))),F},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(F){var W=v;return function(){var Z=v;v=W;try{return F.apply(this,arguments)}finally{v=Z}}}}(rS)),rS}var Mw;function $z(){return Mw||(Mw=1,sS.exports=kz()),sS.exports}var aS={exports:{}},ir={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw;function Xz(){if(Aw)return ir;Aw=1;var i=am();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(f,d,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:f,containerInfo:d,implementation:m}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ir.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ir.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return r(f,d,null,m)},ir.flushSync=function(f){var d=o.T,m=n.p;try{if(o.T=null,n.p=2,f)return f()}finally{o.T=d,n.p=m,n.d.f()}},ir.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(f,d))},ir.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},ir.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,g=c(m,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,_=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?n.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:_}):m==="script"&&n.d.X(f,{crossOrigin:g,integrity:v,fetchPriority:_,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ir.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);n.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(f)},ir.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,g=c(m,d.crossOrigin);n.d.L(f,m,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ir.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=c(d.as,d.crossOrigin);n.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(f)},ir.requestFormReset=function(f){n.d.r(f)},ir.unstable_batchedUpdates=function(f,d){return f(d)},ir.useFormState=function(f,d,m){return o.H.useFormState(f,d,m)},ir.useFormStatus=function(){return o.H.useHostTransitionStatus()},ir.version="19.1.0",ir}var ww;function jN(){if(ww)return aS.exports;ww=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),aS.exports=Xz(),aS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw;function qz(){if(Rw)return Ig;Rw=1;var i=$z(),e=am(),t=jN();function n(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var l=a,p=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(p=l.return),a=l.return;while(a)}return l.tag===3?p:null}function o(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function c(a){if(r(a)!==a)throw Error(n(188))}function f(a){var l=a.alternate;if(!l){if(l=r(a),l===null)throw Error(n(188));return l!==a?null:a}for(var p=a,y=l;;){var S=p.return;if(S===null)break;var w=S.alternate;if(w===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===w.child){for(w=S.child;w;){if(w===p)return c(S),a;if(w===y)return c(S),l;w=w.sibling}throw Error(n(188))}if(p.return!==y.return)p=S,y=w;else{for(var z=!1,k=S.child;k;){if(k===p){z=!0,p=S,y=w;break}if(k===y){z=!0,y=S,p=w;break}k=k.sibling}if(!z){for(k=w.child;k;){if(k===p){z=!0,p=w,y=S;break}if(k===y){z=!0,y=w,p=S;break}k=k.sibling}if(!z)throw Error(n(189))}}if(p.alternate!==y)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?a:l}function d(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=d(a),l!==null)return l;a=a.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),D=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function ae(a){return a===null||typeof a!="object"?null:(a=j&&a[j]||a["@@iterator"],typeof a=="function"?a:null)}var ne=Symbol.for("react.client.reference");function de(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ne?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case M:return"Profiler";case A:return"StrictMode";case I:return"Suspense";case L:return"SuspenseList";case B:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case _:return"Portal";case D:return(a.displayName||"Context")+".Provider";case C:return(a._context.displayName||"Context")+".Consumer";case N:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case P:return l=a.displayName||null,l!==null?l:de(a.type)||"Memo";case G:l=a._payload,a=a._init;try{return de(a(l))}catch{}}return null}var he=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},fe=[],X=-1;function ie(a){return{current:a}}function Ee(a){0>X||(a.current=fe[X],fe[X]=null,X--)}function Ue(a,l){X++,fe[X]=a.current,a.current=l}var re=ie(null),Ce=ie(null),Be=ie(null),qe=ie(null);function Ke(a,l){switch(Ue(Be,l),Ue(Ce,a),Ue(re,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?YA(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=YA(l),a=WA(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Ee(re),Ue(re,a)}function Ct(){Ee(re),Ee(Ce),Ee(Be)}function bt(a){a.memoizedState!==null&&Ue(qe,a);var l=re.current,p=WA(l,a.type);l!==p&&(Ue(Ce,a),Ue(re,p))}function $t(a){Ce.current===a&&(Ee(re),Ee(Ce)),qe.current===a&&(Ee(qe),Dg._currentValue=Z)}var jt=Object.prototype.hasOwnProperty,Nt=i.unstable_scheduleCallback,te=i.unstable_cancelCallback,_n=i.unstable_shouldYield,Fe=i.unstable_requestPaint,Pe=i.unstable_now,Ie=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,Ne=i.unstable_UserBlockingPriority,Y=i.unstable_NormalPriority,H=i.unstable_LowPriority,Q=i.unstable_IdlePriority,pe=i.log,De=i.unstable_setDisableYieldValue,Me=null,et=null;function We(a){if(typeof pe=="function"&&De(a),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(Me,a)}catch{}}var tt=Math.clz32?Math.clz32:pt,Zt=Math.log,Ye=Math.LN2;function pt(a){return a>>>=0,a===0?32:31-(Zt(a)/Ye|0)|0}var yt=256,vt=4194304;function st(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Xt(a,l,p){var y=a.pendingLanes;if(y===0)return 0;var S=0,w=a.suspendedLanes,z=a.pingedLanes;a=a.warmLanes;var k=y&134217727;return k!==0?(y=k&~w,y!==0?S=st(y):(z&=k,z!==0?S=st(z):p||(p=k&~a,p!==0&&(S=st(p))))):(k=y&~w,k!==0?S=st(k):z!==0?S=st(z):p||(p=y&~a,p!==0&&(S=st(p)))),S===0?0:l!==0&&l!==S&&(l&w)===0&&(w=S&-S,p=l&-l,w>=p||w===32&&(p&4194048)!==0)?l:S}function wt(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function bn(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ue(){var a=yt;return yt<<=1,(yt&4194048)===0&&(yt=256),a}function ct(){var a=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),a}function Oe(a){for(var l=[],p=0;31>p;p++)l.push(a);return l}function ke(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ft(a,l,p,y,S,w){var z=a.pendingLanes;a.pendingLanes=p,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=p,a.entangledLanes&=p,a.errorRecoveryDisabledLanes&=p,a.shellSuspendCounter=0;var k=a.entanglements,J=a.expirationTimes,_e=a.hiddenUpdates;for(p=z&~p;0<p;){var Ve=31-tt(p),$e=1<<Ve;k[Ve]=0,J[Ve]=-1;var Se=_e[Ve];if(Se!==null)for(_e[Ve]=null,Ve=0;Ve<Se.length;Ve++){var we=Se[Ve];we!==null&&(we.lane&=-536870913)}p&=~$e}y!==0&&ut(a,y,0),w!==0&&S===0&&a.tag!==0&&(a.suspendedLanes|=w&~(z&~l))}function ut(a,l,p){a.pendingLanes|=l,a.suspendedLanes&=~l;var y=31-tt(l);a.entangledLanes|=l,a.entanglements[y]=a.entanglements[y]|1073741824|p&4194090}function qt(a,l){var p=a.entangledLanes|=l;for(a=a.entanglements;p;){var y=31-tt(p),S=1<<y;S&l|a[y]&l&&(a[y]|=l),p&=~S}}function Pn(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function ai(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function gn(){var a=W.p;return a!==0?a:(a=window.event,a===void 0?32:pw(a.type))}function js(a,l){var p=W.p;try{return W.p=a,l()}finally{W.p=p}}var Hi=Math.random().toString(36).slice(2),Di="__reactFiber$"+Hi,Vi="__reactProps$"+Hi,As="__reactContainer$"+Hi,Ys="__reactEvents$"+Hi,_f="__reactListeners$"+Hi,ca="__reactHandles$"+Hi,Us="__reactResources$"+Hi,ua="__reactMarker$"+Hi;function Vn(a){delete a[Di],delete a[Vi],delete a[Ys],delete a[_f],delete a[ca]}function fa(a){var l=a[Di];if(l)return l;for(var p=a.parentNode;p;){if(l=p[As]||p[Di]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(a=JA(a);a!==null;){if(p=a[Di])return p;a=JA(a)}return l}a=p,p=a.parentNode}return null}function ha(a){if(a=a[Di]||a[As]){var l=a.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return a}return null}function tl(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(n(33))}function fo(a){var l=a[Us];return l||(l=a[Us]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Oi(a){a[ua]=!0}var Qc=new Set,Jc={};function da(a,l){$(a,l),$(a+"Capture",l)}function $(a,l){for(Jc[a]=l,a=0;a<l.length;a++)Qc.add(l[a])}var ce=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Te={},Ae={};function ge(a){return jt.call(Ae,a)?!0:jt.call(Te,a)?!1:ce.test(a)?Ae[a]=!0:(Te[a]=!0,!1)}function je(a,l,p){if(ge(l))if(p===null)a.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var y=l.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+p)}}function rt(a,l,p){if(p===null)a.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+p)}}function ot(a,l,p,y){if(y===null)a.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(p);return}a.setAttributeNS(l,p,""+y)}}var gt,Pt;function Rt(a){if(gt===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);gt=l&&l[1]||"",Pt=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gt+a+Pt}var Et=!1;function cn(a,l){if(!a||Et)return"";Et=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(l){var $e=function(){throw Error()};if(Object.defineProperty($e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($e,[])}catch(we){var Se=we}Reflect.construct(a,[],$e)}else{try{$e.call()}catch(we){Se=we}a.call($e.prototype)}}else{try{throw Error()}catch(we){Se=we}($e=a())&&typeof $e.catch=="function"&&$e.catch(function(){})}}catch(we){if(we&&Se&&typeof we.stack=="string")return[we.stack,Se.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=y.DetermineComponentFrameRoot(),z=w[0],k=w[1];if(z&&k){var J=z.split(`
`),_e=k.split(`
`);for(S=y=0;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;for(;S<_e.length&&!_e[S].includes("DetermineComponentFrameRoot");)S++;if(y===J.length||S===_e.length)for(y=J.length-1,S=_e.length-1;1<=y&&0<=S&&J[y]!==_e[S];)S--;for(;1<=y&&0<=S;y--,S--)if(J[y]!==_e[S]){if(y!==1||S!==1)do if(y--,S--,0>S||J[y]!==_e[S]){var Ve=`
`+J[y].replace(" at new "," at ");return a.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",a.displayName)),Ve}while(1<=y&&0<=S);break}}}finally{Et=!1,Error.prepareStackTrace=p}return(p=a?a.displayName||a.name:"")?Rt(p):""}function Mn(a){switch(a.tag){case 26:case 27:case 5:return Rt(a.type);case 16:return Rt("Lazy");case 13:return Rt("Suspense");case 19:return Rt("SuspenseList");case 0:case 15:return cn(a.type,!1);case 11:return cn(a.type.render,!1);case 1:return cn(a.type,!0);case 31:return Rt("Activity");default:return""}}function oi(a){try{var l="";do l+=Mn(a),a=a.return;while(a);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function fn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function dn(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Dt(a){var l=dn(a)?"checked":"value",p=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),y=""+a[l];if(!a.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,w=p.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return S.call(this)},set:function(z){y=""+z,w.call(this,z)}}),Object.defineProperty(a,l,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(z){y=""+z},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function hi(a){a._valueTracker||(a._valueTracker=Dt(a))}function Sn(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var p=l.getValue(),y="";return a&&(y=dn(a)?a.checked?"true":"false":a.value),a=y,a!==p?(l.setValue(a),!0):!1}function cs(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Ua=/[\n"\\]/g;function $n(a){return a.replace(Ua,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function za(a,l,p,y,S,w,z,k){a.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?a.type=z:a.removeAttribute("type"),l!=null?z==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+fn(l)):a.value!==""+fn(l)&&(a.value=""+fn(l)):z!=="submit"&&z!=="reset"||a.removeAttribute("value"),l!=null?us(a,z,fn(l)):p!=null?us(a,z,fn(p)):y!=null&&a.removeAttribute("value"),S==null&&w!=null&&(a.defaultChecked=!!w),S!=null&&(a.checked=S&&typeof S!="function"&&typeof S!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?a.name=""+fn(k):a.removeAttribute("name")}function Gn(a,l,p,y,S,w,z,k){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),l!=null||p!=null){if(!(w!=="submit"&&w!=="reset"||l!=null))return;p=p!=null?""+fn(p):"",l=l!=null?""+fn(l):p,k||l===a.value||(a.value=l),a.defaultValue=l}y=y??S,y=typeof y!="function"&&typeof y!="symbol"&&!!y,a.checked=k?a.checked:!!y,a.defaultChecked=!!y,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(a.name=z)}function us(a,l,p){l==="number"&&cs(a.ownerDocument)===a||a.defaultValue===""+p||(a.defaultValue=""+p)}function Li(a,l,p,y){if(a=a.options,l){l={};for(var S=0;S<p.length;S++)l["$"+p[S]]=!0;for(p=0;p<a.length;p++)S=l.hasOwnProperty("$"+a[p].value),a[p].selected!==S&&(a[p].selected=S),S&&y&&(a[p].defaultSelected=!0)}else{for(p=""+fn(p),l=null,S=0;S<a.length;S++){if(a[S].value===p){a[S].selected=!0,y&&(a[S].defaultSelected=!0);return}l!==null||a[S].disabled||(l=a[S])}l!==null&&(l.selected=!0)}}function Zi(a,l,p){if(l!=null&&(l=""+fn(l),l!==a.value&&(a.value=l),p==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=p!=null?""+fn(p):""}function Ki(a,l,p,y){if(l==null){if(y!=null){if(p!=null)throw Error(n(92));if(he(y)){if(1<y.length)throw Error(n(93));y=y[0]}p=y}p==null&&(p=""),l=p}p=fn(l),a.defaultValue=p,y=a.textContent,y===p&&y!==""&&y!==null&&(a.value=y)}function zs(a,l){if(l){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=l;return}}a.textContent=l}var Pa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bf(a,l,p){var y=l.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":y?a.setProperty(l,p):typeof p!="number"||p===0||Pa.has(l)?l==="float"?a.cssFloat=p:a[l]=(""+p).trim():a[l]=p+"px"}function Sf(a,l,p){if(l!=null&&typeof l!="object")throw Error(n(62));if(a=a.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||l!=null&&l.hasOwnProperty(y)||(y.indexOf("--")===0?a.setProperty(y,""):y==="float"?a.cssFloat="":a[y]="");for(var S in l)y=l[S],l.hasOwnProperty(S)&&p[S]!==y&&bf(a,S,y)}else for(var w in l)l.hasOwnProperty(w)&&bf(a,w,l[w])}function nd(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Em=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),by=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ef(a){return by.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var id=null;function sd(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var nl=null,Kl=null;function Tm(a){var l=ha(a);if(l&&(a=l.stateNode)){var p=a[Vi]||null;e:switch(a=l.stateNode,l.type){case"input":if(za(a,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),l=p.name,p.type==="radio"&&l!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+$n(""+l)+'"][type="radio"]'),l=0;l<p.length;l++){var y=p[l];if(y!==a&&y.form===a.form){var S=y[Vi]||null;if(!S)throw Error(n(90));za(y,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(l=0;l<p.length;l++)y=p[l],y.form===a.form&&Sn(y)}break e;case"textarea":Zi(a,p.value,p.defaultValue);break e;case"select":l=p.value,l!=null&&Li(a,!!p.multiple,l,!1)}}}var Tf=!1;function Mm(a,l,p){if(Tf)return a(l,p);Tf=!0;try{var y=a(l);return y}finally{if(Tf=!1,(nl!==null||Kl!==null)&&(Qa(),nl&&(l=nl,a=Kl,Kl=nl=null,Tm(l),a)))for(l=0;l<a.length;l++)Tm(a[l])}}function eu(a,l){var p=a.stateNode;if(p===null)return null;var y=p[Vi]||null;if(y===null)return null;p=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(n(231,l,typeof p));return p}var Ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mf=!1;if(Ia)try{var tu={};Object.defineProperty(tu,"passive",{get:function(){Mf=!0}}),window.addEventListener("test",tu,tu),window.removeEventListener("test",tu,tu)}catch{Mf=!1}var ho=null,Am=null,rd=null;function wm(){if(rd)return rd;var a,l=Am,p=l.length,y,S="value"in ho?ho.value:ho.textContent,w=S.length;for(a=0;a<p&&l[a]===S[a];a++);var z=p-a;for(y=1;y<=z&&l[p-y]===S[w-y];y++);return rd=S.slice(a,1<y?1-y:void 0)}function il(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function nu(){return!0}function Af(){return!1}function Ps(a){function l(p,y,S,w,z){this._reactName=p,this._targetInst=S,this.type=y,this.nativeEvent=w,this.target=z,this.currentTarget=null;for(var k in a)a.hasOwnProperty(k)&&(p=a[k],this[k]=p?p(w):w[k]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?nu:Af,this.isPropagationStopped=Af,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),l}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iu=Ps(sl),su=m({},sl,{view:0,detail:0}),Sy=Ps(su),po,ru,au,ou=m({},su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rf,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==au&&(au&&a.type==="mousemove"?(po=a.screenX-au.screenX,ru=a.screenY-au.screenY):ru=po=0,au=a),po)},movementY:function(a){return"movementY"in a?a.movementY:ru}}),Rm=Ps(ou),Ey=m({},ou,{dataTransfer:0}),xb=Ps(Ey),fs=m({},su,{relatedTarget:0}),ad=Ps(fs),Ty=m({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),My=Ps(Ty),Ay=m({},sl,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),wy=Ps(Ay),wf=m({},sl,{data:0}),od=Ps(wf),Ry={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ny={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cm(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Ny[a])?!!l[a]:!1}function Rf(){return Cm}var Dy=m({},su,{key:function(a){if(a.key){var l=Ry[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=il(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Cy[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rf,charCode:function(a){return a.type==="keypress"?il(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?il(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Nm=Ps(Dy),Dm=m({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ld=Ps(Dm),Oy=m({},su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rf}),Om=Ps(Oy),Ly=m({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),mo=Ps(Ly),Lm=m({},ou,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),_b=Ps(Lm),Uy=m({},sl,{newState:0,oldState:0}),rl=Ps(Uy),go=[9,13,27,32],Cf=Ia&&"CompositionEvent"in window,Ql=null;Ia&&"documentMode"in document&&(Ql=document.documentMode);var Nf=Ia&&"TextEvent"in window&&!Ql,Df=Ia&&(!Cf||Ql&&8<Ql&&11>=Ql),al=" ",hs=!1;function Of(a,l){switch(a){case"keyup":return go.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Um(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ol=!1;function Lf(a,l){switch(a){case"compositionend":return Um(l);case"keypress":return l.which!==32?null:(hs=!0,al);case"textInput":return a=l.data,a===al&&hs?null:a;default:return null}}function zm(a,l){if(ol)return a==="compositionend"||!Cf&&Of(a,l)?(a=wm(),rd=Am=ho=null,ol=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Df&&l.locale!=="ko"?null:l.data;default:return null}}var cd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pm(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!cd[a.type]:l==="textarea"}function Ws(a,l,p,y){nl?Kl?Kl.push(y):Kl=[y]:nl=y,l=Lv(l,"onChange"),0<l.length&&(p=new iu("onChange","change",null,p,y),a.push({event:p,listeners:l}))}var lu=null,Jl=null;function zy(a){kA(a,0)}function Uf(a){var l=tl(a);if(Sn(l))return a}function ud(a,l){if(a==="change")return l}var fd=!1;if(Ia){var hd;if(Ia){var cu="oninput"in document;if(!cu){var uu=document.createElement("div");uu.setAttribute("oninput","return;"),cu=typeof uu.oninput=="function"}hd=cu}else hd=!1;fd=hd&&(!document.documentMode||9<document.documentMode)}function li(){lu&&(lu.detachEvent("onpropertychange",Py),Jl=lu=null)}function Py(a){if(a.propertyName==="value"&&Uf(Jl)){var l=[];Ws(l,Jl,a,sd(a)),Mm(zy,l)}}function bb(a,l,p){a==="focusin"?(li(),lu=l,Jl=p,lu.attachEvent("onpropertychange",Py)):a==="focusout"&&li()}function Iy(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Uf(Jl)}function zf(a,l){if(a==="click")return Uf(l)}function ll(a,l){if(a==="input"||a==="change")return Uf(l)}function By(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Zs=typeof Object.is=="function"?Object.is:By;function pa(a,l){if(Zs(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var p=Object.keys(a),y=Object.keys(l);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!jt.call(l,S)||!Zs(a[S],l[S]))return!1}return!0}function Ks(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Im(a,l){var p=Ks(a);a=0;for(var y;p;){if(p.nodeType===3){if(y=a+p.textContent.length,a<=l&&y>=l)return{node:p,offset:l-a};a=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Ks(p)}}function Bm(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?Bm(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function Fm(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=cs(a.document);l instanceof a.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)a=l.contentWindow;else break;l=cs(a.document)}return l}function Pf(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var Hm=Ia&&"documentMode"in document&&11>=document.documentMode,yo=null,dd=null,If=null,pd=!1;function Vm(a,l,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;pd||yo==null||yo!==cs(y)||(y=yo,"selectionStart"in y&&Pf(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),If&&pa(If,y)||(If=y,y=Lv(dd,"onSelect"),0<y.length&&(l=new iu("onSelect","select",null,l,p),a.push({event:l,listeners:y}),l.target=yo)))}function ds(a,l){var p={};return p[a.toLowerCase()]=l.toLowerCase(),p["Webkit"+a]="webkit"+l,p["Moz"+a]="moz"+l,p}var cl={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionrun:ds("Transition","TransitionRun"),transitionstart:ds("Transition","TransitionStart"),transitioncancel:ds("Transition","TransitionCancel"),transitionend:ds("Transition","TransitionEnd")},md={},Fy={};Ia&&(Fy=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function vo(a){if(md[a])return md[a];if(!cl[a])return a;var l=cl[a],p;for(p in l)if(l.hasOwnProperty(p)&&p in Fy)return md[a]=l[p];return a}var Is=vo("animationend"),Gm=vo("animationiteration"),Qs=vo("animationstart"),Hy=vo("transitionrun"),xo=vo("transitionstart"),fu=vo("transitioncancel"),_o=vo("transitionend"),gd=new Map,Bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bf.push("scrollEnd");function Qi(a,l){gd.set(a,l),da(l,[a])}var km=new WeakMap;function ps(a,l){if(typeof a=="object"&&a!==null){var p=km.get(a);return p!==void 0?p:(l={value:a,source:l,stack:oi(l)},km.set(a,l),l)}return{value:a,source:l,stack:oi(l)}}var ws=[],Gr=0,yd=0;function Ff(){for(var a=Gr,l=yd=Gr=0;l<a;){var p=ws[l];ws[l++]=null;var y=ws[l];ws[l++]=null;var S=ws[l];ws[l++]=null;var w=ws[l];if(ws[l++]=null,y!==null&&S!==null){var z=y.pending;z===null?S.next=S:(S.next=z.next,z.next=S),y.pending=S}w!==0&&$m(p,S,w)}}function ul(a,l,p,y){ws[Gr++]=a,ws[Gr++]=l,ws[Gr++]=p,ws[Gr++]=y,yd|=y,a.lanes|=y,a=a.alternate,a!==null&&(a.lanes|=y)}function vd(a,l,p,y){return ul(a,l,p,y),hu(a)}function bo(a,l){return ul(a,null,null,l),hu(a)}function $m(a,l,p){a.lanes|=p;var y=a.alternate;y!==null&&(y.lanes|=p);for(var S=!1,w=a.return;w!==null;)w.childLanes|=p,y=w.alternate,y!==null&&(y.childLanes|=p),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(S=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,S&&l!==null&&(S=31-tt(p),a=w.hiddenUpdates,y=a[S],y===null?a[S]=[l]:y.push(l),l.lane=p|536870912),w):null}function hu(a){if(50<Ka)throw Ka=0,yc=null,Error(n(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var fl={};function Xm(a,l,p,y){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Js(a,l,p,y){return new Xm(a,l,p,y)}function Hf(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Si(a,l){var p=a.alternate;return p===null?(p=Js(a.tag,l,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=l,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&65011712,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,l=a.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p.refCleanup=a.refCleanup,p}function qm(a,l){a.flags&=65011714;var p=a.alternate;return p===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=p.childLanes,a.lanes=p.lanes,a.child=p.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=p.memoizedProps,a.memoizedState=p.memoizedState,a.updateQueue=p.updateQueue,a.type=p.type,l=p.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function Ji(a,l,p,y,S,w){var z=0;if(y=a,typeof a=="function")Hf(a)&&(z=1);else if(typeof a=="string")z=Mz(a,p,re.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case B:return a=Js(31,p,l,S),a.elementType=B,a.lanes=w,a;case b:return hl(p.children,S,w,l);case A:z=8,S|=24;break;case M:return a=Js(12,p,l,S|2),a.elementType=M,a.lanes=w,a;case I:return a=Js(13,p,l,S),a.elementType=I,a.lanes=w,a;case L:return a=Js(19,p,l,S),a.elementType=L,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case T:case D:z=10;break e;case C:z=9;break e;case N:z=11;break e;case P:z=14;break e;case G:z=16,y=null;break e}z=29,p=Error(n(130,a===null?"null":typeof a,"")),y=null}return l=Js(z,p,l,S),l.elementType=a,l.type=y,l.lanes=w,l}function hl(a,l,p,y){return a=Js(7,a,y,l),a.lanes=p,a}function Vf(a,l,p){return a=Js(6,a,null,l),a.lanes=p,a}function xd(a,l,p){return l=Js(4,a.children!==null?a.children:[],a.key,l),l.lanes=p,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var du=[],er=0,Gf=null,pu=0,ms=[],yr=0,dl=null,Ba=1,Fa="";function So(a,l){du[er++]=pu,du[er++]=Gf,Gf=a,pu=l}function _d(a,l,p){ms[yr++]=Ba,ms[yr++]=Fa,ms[yr++]=dl,dl=a;var y=Ba;a=Fa;var S=32-tt(y)-1;y&=~(1<<S),p+=1;var w=32-tt(l)+S;if(30<w){var z=S-S%5;w=(y&(1<<z)-1).toString(32),y>>=z,S-=z,Ba=1<<32-tt(l)+S|p<<S|y,Fa=w+a}else Ba=1<<w|p<<S|y,Fa=a}function jm(a){a.return!==null&&(So(a,1),_d(a,1,0))}function Ym(a){for(;a===Gf;)Gf=du[--er],du[er]=null,pu=du[--er],du[er]=null;for(;a===dl;)dl=ms[--yr],ms[yr]=null,Fa=ms[--yr],ms[yr]=null,Ba=ms[--yr],ms[yr]=null}var Bs=null,di=null,Cn=!1,kr=null,vr=!1,bd=Error(n(519));function pl(a){var l=Error(n(418,""));throw ec(ps(l,a)),bd}function Vy(a){var l=a.stateNode,p=a.type,y=a.memoizedProps;switch(l[Di]=a,l[Vi]=y,p){case"dialog":yn("cancel",l),yn("close",l);break;case"iframe":case"object":case"embed":yn("load",l);break;case"video":case"audio":for(p=0;p<Mg.length;p++)yn(Mg[p],l);break;case"source":yn("error",l);break;case"img":case"image":case"link":yn("error",l),yn("load",l);break;case"details":yn("toggle",l);break;case"input":yn("invalid",l),Gn(l,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),hi(l);break;case"select":yn("invalid",l);break;case"textarea":yn("invalid",l),Ki(l,y.value,y.defaultValue,y.children),hi(l)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||l.textContent===""+p||y.suppressHydrationWarning===!0||jA(l.textContent,p)?(y.popover!=null&&(yn("beforetoggle",l),yn("toggle",l)),y.onScroll!=null&&yn("scroll",l),y.onScrollEnd!=null&&yn("scrollend",l),y.onClick!=null&&(l.onclick=Uv),l=!0):l=!1,l||pl(a)}function Wm(a){for(Bs=a.return;Bs;)switch(Bs.tag){case 5:case 13:vr=!1;return;case 27:case 3:vr=!0;return;default:Bs=Bs.return}}function ma(a){if(a!==Bs)return!1;if(!Cn)return Wm(a),Cn=!0,!1;var l=a.tag,p;if((p=l!==3&&l!==27)&&((p=l===5)&&(p=a.type,p=!(p!=="form"&&p!=="button")||Vb(a.type,a.memoizedProps)),p=!p),p&&di&&pl(a),Wm(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8)if(p=a.data,p==="/$"){if(l===0){di=Po(a.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++;a=a.nextSibling}di=null}}else l===27?(l=di,Fu(a.type)?(a=Xb,Xb=null,di=a):di=l):di=Bs?Po(a.stateNode.nextSibling):null;return!0}function mu(){di=Bs=null,Cn=!1}function On(){var a=kr;return a!==null&&(Ut===null?Ut=a:Ut.push.apply(Ut,a),kr=null),a}function ec(a){kr===null?kr=[a]:kr.push(a)}var Zm=ie(null),ml=null,Eo=null;function gl(a,l,p){Ue(Zm,l._currentValue),l._currentValue=p}function To(a){a._currentValue=Zm.current,Ee(Zm)}function Km(a,l,p){for(;a!==null;){var y=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),a===p)break;a=a.return}}function kf(a,l,p,y){var S=a.child;for(S!==null&&(S.return=a);S!==null;){var w=S.dependencies;if(w!==null){var z=S.child;w=w.firstContext;e:for(;w!==null;){var k=w;w=S;for(var J=0;J<l.length;J++)if(k.context===l[J]){w.lanes|=p,k=w.alternate,k!==null&&(k.lanes|=p),Km(w.return,p,a),y||(z=null);break e}w=k.next}}else if(S.tag===18){if(z=S.return,z===null)throw Error(n(341));z.lanes|=p,w=z.alternate,w!==null&&(w.lanes|=p),Km(z,p,a),z=null}else z=S.child;if(z!==null)z.return=S;else for(z=S;z!==null;){if(z===a){z=null;break}if(S=z.sibling,S!==null){S.return=z.return,z=S;break}z=z.return}S=z}}function $r(a,l,p,y){a=null;for(var S=l,w=!1;S!==null;){if(!w){if((S.flags&524288)!==0)w=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var z=S.alternate;if(z===null)throw Error(n(387));if(z=z.memoizedProps,z!==null){var k=S.type;Zs(S.pendingProps.value,z.value)||(a!==null?a.push(k):a=[k])}}else if(S===qe.current){if(z=S.alternate,z===null)throw Error(n(387));z.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(a!==null?a.push(Dg):a=[Dg])}S=S.return}a!==null&&kf(l,a,p,y),l.flags|=262144}function $f(a){for(a=a.firstContext;a!==null;){if(!Zs(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ha(a){ml=a,Eo=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function gi(a){return Sd(ml,a)}function Xf(a,l){return ml===null&&Ha(a),Sd(a,l)}function Sd(a,l){var p=l._currentValue;if(l={context:l,memoizedValue:p,next:null},Eo===null){if(a===null)throw Error(n(308));Eo=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else Eo=Eo.next=l;return p}var Qm=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(p,y){a.push(y)}};this.abort=function(){l.aborted=!0,a.forEach(function(p){return p()})}},Sb=i.unstable_scheduleCallback,Gy=i.unstable_NormalPriority,Ui={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ed(){return{controller:new Qm,data:new Map,refCount:0}}function gu(a){a.refCount--,a.refCount===0&&Sb(Gy,function(){a.controller.abort()})}var yu=null,qf=0,Kt=0,vu=null;function xr(a,l){if(yu===null){var p=yu=[];qf=0,Kt=Ob(),vu={status:"pending",value:void 0,then:function(y){p.push(y)}}}return qf++,l.then(Td,Td),l}function Td(){if(--qf===0&&yu!==null){vu!==null&&(vu.status="fulfilled");var a=yu;yu=null,Kt=0,vu=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function Eb(a,l){var p=[],y={status:"pending",value:null,reason:null,then:function(S){p.push(S)}};return a.then(function(){y.status="fulfilled",y.value=l;for(var S=0;S<p.length;S++)(0,p[S])(l)},function(S){for(y.status="rejected",y.reason=S,S=0;S<p.length;S++)(0,p[S])(void 0)}),y}var jf=F.S;F.S=function(a,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&xr(a,l),jf!==null&&jf(a,l)};var Xr=ie(null);function yl(){var a=Xr.current;return a!==null?a:Yt.pooledCache}function Yf(a,l){l===null?Ue(Xr,Xr.current):Ue(Xr,l.pool)}function Md(){var a=yl();return a===null?null:{parent:Ui._currentValue,pool:a}}var Wf=Error(n(460)),Jm=Error(n(474)),ga=Error(n(542)),Zf={then:function(){}};function Ad(a){return a=a.status,a==="fulfilled"||a==="rejected"}function xu(){}function wd(a,l,p){switch(p=a[p],p===void 0?a.push(l):p!==l&&(l.then(xu,xu),l=p),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,ky(a),a;default:if(typeof l.status=="string")l.then(xu,xu);else{if(a=Yt,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=l,a.status="pending",a.then(function(y){if(l.status==="pending"){var S=l;S.status="fulfilled",S.value=y}},function(y){if(l.status==="pending"){var S=l;S.status="rejected",S.reason=y}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,ky(a),a}throw qr=l,Wf}}var qr=null;function eg(){if(qr===null)throw Error(n(459));var a=qr;return qr=null,a}function ky(a){if(a===Wf||a===ga)throw Error(n(483))}var Mo=!1;function tg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ft(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Va(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ao(a,l,p){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Ln&2)!==0){var S=y.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),y.pending=l,l=hu(a),$m(a,null,p),l}return ul(a,y,l,p),hu(a)}function tc(a,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194048)!==0)){var y=l.lanes;y&=a.pendingLanes,p|=y,l.lanes=p,qt(a,p)}}function _u(a,l){var p=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var z={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};w===null?S=w=z:w=w.next=z,p=p.next}while(p!==null);w===null?S=w=l:w=w.next=l}else S=w=l;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:w,shared:y.shared,callbacks:y.callbacks},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=l:a.next=l,p.lastBaseUpdate=l}var ng=!1;function Kf(){if(ng){var a=vu;if(a!==null)throw a}}function bu(a,l,p,y){ng=!1;var S=a.updateQueue;Mo=!1;var w=S.firstBaseUpdate,z=S.lastBaseUpdate,k=S.shared.pending;if(k!==null){S.shared.pending=null;var J=k,_e=J.next;J.next=null,z===null?w=_e:z.next=_e,z=J;var Ve=a.alternate;Ve!==null&&(Ve=Ve.updateQueue,k=Ve.lastBaseUpdate,k!==z&&(k===null?Ve.firstBaseUpdate=_e:k.next=_e,Ve.lastBaseUpdate=J))}if(w!==null){var $e=S.baseState;z=0,Ve=_e=J=null,k=w;do{var Se=k.lane&-536870913,we=Se!==k.lane;if(we?(Ot&Se)===Se:(y&Se)===Se){Se!==0&&Se===Kt&&(ng=!0),Ve!==null&&(Ve=Ve.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var kt=a,It=k;Se=l;var ni=p;switch(It.tag){case 1:if(kt=It.payload,typeof kt=="function"){$e=kt.call(ni,$e,Se);break e}$e=kt;break e;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=It.payload,Se=typeof kt=="function"?kt.call(ni,$e,Se):kt,Se==null)break e;$e=m({},$e,Se);break e;case 2:Mo=!0}}Se=k.callback,Se!==null&&(a.flags|=64,we&&(a.flags|=8192),we=S.callbacks,we===null?S.callbacks=[Se]:we.push(Se))}else we={lane:Se,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Ve===null?(_e=Ve=we,J=$e):Ve=Ve.next=we,z|=Se;if(k=k.next,k===null){if(k=S.shared.pending,k===null)break;we=k,k=we.next,we.next=null,S.lastBaseUpdate=we,S.shared.pending=null}}while(!0);Ve===null&&(J=$e),S.baseState=J,S.firstBaseUpdate=_e,S.lastBaseUpdate=Ve,w===null&&(S.shared.lanes=0),Ta|=z,a.lanes=z,a.memoizedState=$e}}function Su(a,l){if(typeof a!="function")throw Error(n(191,a));a.call(l)}function $y(a,l){var p=a.callbacks;if(p!==null)for(a.callbacks=null,a=0;a<p.length;a++)Su(p[a],l)}var Eu=ie(null),Rd=ie(0);function Xy(a,l){a=Qr,Ue(Rd,a),Ue(Eu,l),Qr=a|l.baseLanes}function ig(){Ue(Rd,Qr),Ue(Eu,Eu.current)}function Qf(){Qr=Rd.current,Ee(Eu),Ee(Rd)}var wo=0,Qt=null,In=null,zi=null,Cd=!1,vl=!1,Fs=!1,Gi=0,jr=0,gs=null,qy=0;function Ei(){throw Error(n(321))}function Rs(a,l){if(l===null)return!1;for(var p=0;p<l.length&&p<a.length;p++)if(!Zs(a[p],l[p]))return!1;return!0}function Ro(a,l,p,y,S,w){return wo=w,Qt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,F.H=a===null||a.memoizedState===null?Bd:xg,Fs=!1,w=p(y,S),Fs=!1,vl&&(w=Yy(l,p,y,S)),jy(a),w}function jy(a){F.H=th;var l=In!==null&&In.next!==null;if(wo=0,zi=In=Qt=null,Cd=!1,jr=0,gs=null,l)throw Error(n(300));a===null||es||(a=a.dependencies,a!==null&&$f(a)&&(es=!0))}function Yy(a,l,p,y){Qt=a;var S=0;do{if(vl&&(gs=null),jr=0,vl=!1,25<=S)throw Error(n(301));if(S+=1,zi=In=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}F.H=_v,w=l(p,y)}while(vl);return w}function Tb(){var a=F.H,l=a.useState()[0];return l=typeof l.then=="function"?ya(l):l,a=a.useState()[0],(In!==null?In.memoizedState:null)!==a&&(Qt.flags|=1024),l}function sg(){var a=Gi!==0;return Gi=0,a}function Nd(a,l,p){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~p}function rg(a){if(Cd){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Cd=!1}wo=0,zi=In=Qt=null,vl=!1,jr=Gi=0,gs=null}function Hs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zi===null?Qt.memoizedState=zi=a:zi=zi.next=a,zi}function Pi(){if(In===null){var a=Qt.alternate;a=a!==null?a.memoizedState:null}else a=In.next;var l=zi===null?Qt.memoizedState:zi.next;if(l!==null)zi=l,In=a;else{if(a===null)throw Qt.alternate===null?Error(n(467)):Error(n(310));In=a,a={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},zi===null?Qt.memoizedState=zi=a:zi=zi.next=a}return zi}function xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ya(a){var l=jr;return jr+=1,gs===null&&(gs=[]),a=wd(gs,a,l),l=Qt,(zi===null?l.memoizedState:zi.next)===null&&(l=l.alternate,F.H=l===null||l.memoizedState===null?Bd:xg),a}function Dd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ya(a);if(a.$$typeof===D)return gi(a)}throw Error(n(438,String(a)))}function ag(a){var l=null,p=Qt.updateQueue;if(p!==null&&(l=p.memoCache),l==null){var y=Qt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(l={data:y.data.map(function(S){return S.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),p===null&&(p=xl(),Qt.updateQueue=p),p.memoCache=l,p=l.data[l.index],p===void 0)for(p=l.data[l.index]=Array(a),y=0;y<a;y++)p[y]=U;return l.index++,p}function Co(a,l){return typeof l=="function"?l(a):l}function _l(a){var l=Pi();return og(l,In,a)}function og(a,l,p){var y=a.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=p;var S=a.baseQueue,w=y.pending;if(w!==null){if(S!==null){var z=S.next;S.next=w.next,w.next=z}l.baseQueue=S=w,y.pending=null}if(w=a.baseState,S===null)a.memoizedState=w;else{l=S.next;var k=z=null,J=null,_e=l,Ve=!1;do{var $e=_e.lane&-536870913;if($e!==_e.lane?(Ot&$e)===$e:(wo&$e)===$e){var Se=_e.revertLane;if(Se===0)J!==null&&(J=J.next={lane:0,revertLane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),$e===Kt&&(Ve=!0);else if((wo&Se)===Se){_e=_e.next,Se===Kt&&(Ve=!0);continue}else $e={lane:0,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},J===null?(k=J=$e,z=w):J=J.next=$e,Qt.lanes|=Se,Ta|=Se;$e=_e.action,Fs&&p(w,$e),w=_e.hasEagerState?_e.eagerState:p(w,$e)}else Se={lane:$e,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},J===null?(k=J=Se,z=w):J=J.next=Se,Qt.lanes|=$e,Ta|=$e;_e=_e.next}while(_e!==null&&_e!==l);if(J===null?z=w:J.next=k,!Zs(w,a.memoizedState)&&(es=!0,Ve&&(p=vu,p!==null)))throw p;a.memoizedState=w,a.baseState=z,a.baseQueue=J,y.lastRenderedState=w}return S===null&&(y.lanes=0),[a.memoizedState,y.dispatch]}function lg(a){var l=Pi(),p=l.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=a;var y=p.dispatch,S=p.pending,w=l.memoizedState;if(S!==null){p.pending=null;var z=S=S.next;do w=a(w,z.action),z=z.next;while(z!==S);Zs(w,l.memoizedState)||(es=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),p.lastRenderedState=w}return[w,y]}function Wy(a,l,p){var y=Qt,S=Pi(),w=Cn;if(w){if(p===void 0)throw Error(n(407));p=p()}else p=l();var z=!Zs((In||S).memoizedState,p);z&&(S.memoizedState=p,es=!0),S=S.queue;var k=Ky.bind(null,y,S,a);if(Au(2048,8,k,[a]),S.getSnapshot!==l||z||zi!==null&&zi.memoizedState.tag&1){if(y.flags|=2048,Mu(9,Jf(),Zy.bind(null,y,S,p,l),null),Yt===null)throw Error(n(349));w||(wo&124)!==0||Tu(y,l,p)}return p}function Tu(a,l,p){a.flags|=16384,a={getSnapshot:l,value:p},l=Qt.updateQueue,l===null?(l=xl(),Qt.updateQueue=l,l.stores=[a]):(p=l.stores,p===null?l.stores=[a]:p.push(a))}function Zy(a,l,p,y){l.value=p,l.getSnapshot=y,Qy(l)&&Jy(a)}function Ky(a,l,p){return p(function(){Qy(l)&&Jy(a)})}function Qy(a){var l=a.getSnapshot;a=a.value;try{var p=l();return!Zs(a,p)}catch{return!0}}function Jy(a){var l=bo(a,2);l!==null&&ks(l,a,2)}function cg(a){var l=Hs();if(typeof a=="function"){var p=a;if(a=p(),Fs){We(!0);try{p()}finally{We(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:a},l}function ev(a,l,p,y){return a.baseState=p,og(a,In,typeof y=="function"?y:Co)}function Mb(a,l,p,y,S){if(Id(a))throw Error(n(485));if(a=l.action,a!==null){var w={payload:S,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){w.listeners.push(z)}};F.T!==null?p(!0):w.isTransition=!1,y(w),p=l.pending,p===null?(w.next=l.pending=w,tv(l,w)):(w.next=p.next,l.pending=p.next=w)}}function tv(a,l){var p=l.action,y=l.payload,S=a.state;if(l.isTransition){var w=F.T,z={};F.T=z;try{var k=p(S,y),J=F.S;J!==null&&J(z,k),nv(a,l,k)}catch(_e){ug(a,l,_e)}finally{F.T=w}}else try{w=p(S,y),nv(a,l,w)}catch(_e){ug(a,l,_e)}}function nv(a,l,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){iv(a,l,y)},function(y){return ug(a,l,y)}):iv(a,l,p)}function iv(a,l,p){l.status="fulfilled",l.value=p,sv(l),a.state=p,l=a.pending,l!==null&&(p=l.next,p===l?a.pending=null:(p=p.next,l.next=p,tv(a,p)))}function ug(a,l,p){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do l.status="rejected",l.reason=p,sv(l),l=l.next;while(l!==y)}a.action=null}function sv(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function fg(a,l){return l}function rv(a,l){if(Cn){var p=Yt.formState;if(p!==null){e:{var y=Qt;if(Cn){if(di){t:{for(var S=di,w=vr;S.nodeType!==8;){if(!w){S=null;break t}if(S=Po(S.nextSibling),S===null){S=null;break t}}w=S.data,S=w==="F!"||w==="F"?S:null}if(S){di=Po(S.nextSibling),y=S.data==="F!";break e}}pl(y)}y=!1}y&&(l=p[0])}}return p=Hs(),p.memoizedState=p.baseState=l,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fg,lastRenderedState:l},p.queue=y,p=vv.bind(null,Qt,y),y.dispatch=p,y=cg(!1),w=Pd.bind(null,Qt,!1,y.queue),y=Hs(),S={state:l,dispatch:null,action:a,pending:null},y.queue=S,p=Mb.bind(null,Qt,S,w,p),S.dispatch=p,y.memoizedState=a,[l,p,!1]}function av(a){var l=Pi();return ov(l,In,a)}function ov(a,l,p){if(l=og(a,l,fg)[0],a=_l(Co)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var y=ya(l)}catch(z){throw z===Wf?ga:z}else y=l;l=Pi();var S=l.queue,w=S.dispatch;return p!==l.memoizedState&&(Qt.flags|=2048,Mu(9,Jf(),Ab.bind(null,S,p),null)),[y,w,a]}function Ab(a,l){a.action=l}function lv(a){var l=Pi(),p=In;if(p!==null)return ov(l,p,a);Pi(),l=l.memoizedState,p=Pi();var y=p.queue.dispatch;return p.memoizedState=a,[l,y,!1]}function Mu(a,l,p,y){return a={tag:a,create:p,deps:y,inst:l,next:null},l=Qt.updateQueue,l===null&&(l=xl(),Qt.updateQueue=l),p=l.lastEffect,p===null?l.lastEffect=a.next=a:(y=p.next,p.next=a,a.next=y,l.lastEffect=a),a}function Jf(){return{destroy:void 0,resource:void 0}}function hg(){return Pi().memoizedState}function Od(a,l,p,y){var S=Hs();y=y===void 0?null:y,Qt.flags|=a,S.memoizedState=Mu(1|l,Jf(),p,y)}function Au(a,l,p,y){var S=Pi();y=y===void 0?null:y;var w=S.memoizedState.inst;In!==null&&y!==null&&Rs(y,In.memoizedState.deps)?S.memoizedState=Mu(l,w,p,y):(Qt.flags|=a,S.memoizedState=Mu(1|l,w,p,y))}function dg(a,l){Od(8390656,8,a,l)}function pg(a,l){Au(2048,8,a,l)}function Ld(a,l){return Au(4,2,a,l)}function Ud(a,l){return Au(4,4,a,l)}function cv(a,l){if(typeof l=="function"){a=a();var p=l(a);return function(){typeof p=="function"?p():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function uv(a,l,p){p=p!=null?p.concat([a]):null,Au(4,4,cv.bind(null,l,a),p)}function mg(){}function fv(a,l){var p=Pi();l=l===void 0?null:l;var y=p.memoizedState;return l!==null&&Rs(l,y[1])?y[0]:(p.memoizedState=[a,l],a)}function gg(a,l){var p=Pi();l=l===void 0?null:l;var y=p.memoizedState;if(l!==null&&Rs(l,y[1]))return y[0];if(y=a(),Fs){We(!0);try{a()}finally{We(!1)}}return p.memoizedState=[y,l],y}function zd(a,l,p){return p===void 0||(wo&1073741824)!==0?a.memoizedState=l:(a.memoizedState=p,a=Wd(),Qt.lanes|=a,Ta|=a,p)}function hv(a,l,p,y){return Zs(p,l)?p:Eu.current!==null?(a=zd(a,p,y),Zs(a,l)||(es=!0),a):(wo&42)===0?(es=!0,a.memoizedState=p):(a=Wd(),Qt.lanes|=a,Ta|=a,l)}function dv(a,l,p,y,S){var w=W.p;W.p=w!==0&&8>w?w:8;var z=F.T,k={};F.T=k,Pd(a,!1,l,p);try{var J=S(),_e=F.S;if(_e!==null&&_e(k,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var Ve=Eb(J,y);eh(a,l,Ve,xi(a))}else eh(a,l,y,xi(a))}catch($e){eh(a,l,{then:function(){},status:"rejected",reason:$e},xi())}finally{W.p=w,F.T=z}}function wb(){}function yg(a,l,p,y){if(a.tag!==5)throw Error(n(476));var S=pv(a).queue;dv(a,S,l,Z,p===null?wb:function(){return mv(a),p(y)})}function pv(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:Z},next:null};var p={};return l.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:p},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function mv(a){var l=pv(a).next.queue;eh(a,l,{},xi())}function vg(){return gi(Dg)}function gv(){return Pi().memoizedState}function yv(){return Pi().memoizedState}function Rb(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var p=xi();a=Va(p);var y=Ao(l,a,p);y!==null&&(ks(y,l,p),tc(y,l,p)),l={cache:Ed()},a.payload=l;return}l=l.return}}function Cb(a,l,p){var y=xi();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},Id(a)?xv(l,p):(p=vd(a,l,p,y),p!==null&&(ks(p,a,y),_r(p,l,y)))}function vv(a,l,p){var y=xi();eh(a,l,p,y)}function eh(a,l,p,y){var S={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(Id(a))xv(l,S);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var z=l.lastRenderedState,k=w(z,p);if(S.hasEagerState=!0,S.eagerState=k,Zs(k,z))return ul(a,l,S,0),Yt===null&&Ff(),!1}catch{}finally{}if(p=vd(a,l,S,y),p!==null)return ks(p,a,y),_r(p,l,y),!0}return!1}function Pd(a,l,p,y){if(y={lane:2,revertLane:Ob(),action:y,hasEagerState:!1,eagerState:null,next:null},Id(a)){if(l)throw Error(n(479))}else l=vd(a,p,y,2),l!==null&&ks(l,a,2)}function Id(a){var l=a.alternate;return a===Qt||l!==null&&l===Qt}function xv(a,l){vl=Cd=!0;var p=a.pending;p===null?l.next=l:(l.next=p.next,p.next=l),a.pending=l}function _r(a,l,p){if((p&4194048)!==0){var y=l.lanes;y&=a.pendingLanes,p|=y,l.lanes=p,qt(a,p)}}var th={readContext:gi,use:Dd,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useLayoutEffect:Ei,useInsertionEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useSyncExternalStore:Ei,useId:Ei,useHostTransitionStatus:Ei,useFormState:Ei,useActionState:Ei,useOptimistic:Ei,useMemoCache:Ei,useCacheRefresh:Ei},Bd={readContext:gi,use:Dd,useCallback:function(a,l){return Hs().memoizedState=[a,l===void 0?null:l],a},useContext:gi,useEffect:dg,useImperativeHandle:function(a,l,p){p=p!=null?p.concat([a]):null,Od(4194308,4,cv.bind(null,l,a),p)},useLayoutEffect:function(a,l){return Od(4194308,4,a,l)},useInsertionEffect:function(a,l){Od(4,2,a,l)},useMemo:function(a,l){var p=Hs();l=l===void 0?null:l;var y=a();if(Fs){We(!0);try{a()}finally{We(!1)}}return p.memoizedState=[y,l],y},useReducer:function(a,l,p){var y=Hs();if(p!==void 0){var S=p(l);if(Fs){We(!0);try{p(l)}finally{We(!1)}}}else S=l;return y.memoizedState=y.baseState=S,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:S},y.queue=a,a=a.dispatch=Cb.bind(null,Qt,a),[y.memoizedState,a]},useRef:function(a){var l=Hs();return a={current:a},l.memoizedState=a},useState:function(a){a=cg(a);var l=a.queue,p=vv.bind(null,Qt,l);return l.dispatch=p,[a.memoizedState,p]},useDebugValue:mg,useDeferredValue:function(a,l){var p=Hs();return zd(p,a,l)},useTransition:function(){var a=cg(!1);return a=dv.bind(null,Qt,a.queue,!0,!1),Hs().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,p){var y=Qt,S=Hs();if(Cn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=l(),Yt===null)throw Error(n(349));(Ot&124)!==0||Tu(y,l,p)}S.memoizedState=p;var w={value:p,getSnapshot:l};return S.queue=w,dg(Ky.bind(null,y,w,a),[a]),y.flags|=2048,Mu(9,Jf(),Zy.bind(null,y,w,p,l),null),p},useId:function(){var a=Hs(),l=Yt.identifierPrefix;if(Cn){var p=Fa,y=Ba;p=(y&~(1<<32-tt(y)-1)).toString(32)+p,l=""+l+"R"+p,p=Gi++,0<p&&(l+="H"+p.toString(32)),l+=""}else p=qy++,l=""+l+"r"+p.toString(32)+"";return a.memoizedState=l},useHostTransitionStatus:vg,useFormState:rv,useActionState:rv,useOptimistic:function(a){var l=Hs();l.memoizedState=l.baseState=a;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=p,l=Pd.bind(null,Qt,!0,p),p.dispatch=l,[a,l]},useMemoCache:ag,useCacheRefresh:function(){return Hs().memoizedState=Rb.bind(null,Qt)}},xg={readContext:gi,use:Dd,useCallback:fv,useContext:gi,useEffect:pg,useImperativeHandle:uv,useInsertionEffect:Ld,useLayoutEffect:Ud,useMemo:gg,useReducer:_l,useRef:hg,useState:function(){return _l(Co)},useDebugValue:mg,useDeferredValue:function(a,l){var p=Pi();return hv(p,In.memoizedState,a,l)},useTransition:function(){var a=_l(Co)[0],l=Pi().memoizedState;return[typeof a=="boolean"?a:ya(a),l]},useSyncExternalStore:Wy,useId:gv,useHostTransitionStatus:vg,useFormState:av,useActionState:av,useOptimistic:function(a,l){var p=Pi();return ev(p,In,a,l)},useMemoCache:ag,useCacheRefresh:yv},_v={readContext:gi,use:Dd,useCallback:fv,useContext:gi,useEffect:pg,useImperativeHandle:uv,useInsertionEffect:Ld,useLayoutEffect:Ud,useMemo:gg,useReducer:lg,useRef:hg,useState:function(){return lg(Co)},useDebugValue:mg,useDeferredValue:function(a,l){var p=Pi();return In===null?zd(p,a,l):hv(p,In.memoizedState,a,l)},useTransition:function(){var a=lg(Co)[0],l=Pi().memoizedState;return[typeof a=="boolean"?a:ya(a),l]},useSyncExternalStore:Wy,useId:gv,useHostTransitionStatus:vg,useFormState:lv,useActionState:lv,useOptimistic:function(a,l){var p=Pi();return In!==null?ev(p,In,a,l):(p.baseState=a,[a,p.queue.dispatch])},useMemoCache:ag,useCacheRefresh:yv},nc=null,nh=0;function ih(a){var l=nh;return nh+=1,nc===null&&(nc=[]),wd(nc,a,l)}function wu(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function Fd(a,l){throw l.$$typeof===g?Error(n(525)):(a=Object.prototype.toString.call(l),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function bv(a){var l=a._init;return l(a._payload)}function Sv(a){function l(me,le){if(a){var xe=me.deletions;xe===null?(me.deletions=[le],me.flags|=16):xe.push(le)}}function p(me,le){if(!a)return null;for(;le!==null;)l(me,le),le=le.sibling;return null}function y(me){for(var le=new Map;me!==null;)me.key!==null?le.set(me.key,me):le.set(me.index,me),me=me.sibling;return le}function S(me,le){return me=Si(me,le),me.index=0,me.sibling=null,me}function w(me,le,xe){return me.index=xe,a?(xe=me.alternate,xe!==null?(xe=xe.index,xe<le?(me.flags|=67108866,le):xe):(me.flags|=67108866,le)):(me.flags|=1048576,le)}function z(me){return a&&me.alternate===null&&(me.flags|=67108866),me}function k(me,le,xe,Ge){return le===null||le.tag!==6?(le=Vf(xe,me.mode,Ge),le.return=me,le):(le=S(le,xe),le.return=me,le)}function J(me,le,xe,Ge){var _t=xe.type;return _t===b?Ve(me,le,xe.props.children,Ge,xe.key):le!==null&&(le.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===G&&bv(_t)===le.type)?(le=S(le,xe.props),wu(le,xe),le.return=me,le):(le=Ji(xe.type,xe.key,xe.props,null,me.mode,Ge),wu(le,xe),le.return=me,le)}function _e(me,le,xe,Ge){return le===null||le.tag!==4||le.stateNode.containerInfo!==xe.containerInfo||le.stateNode.implementation!==xe.implementation?(le=xd(xe,me.mode,Ge),le.return=me,le):(le=S(le,xe.children||[]),le.return=me,le)}function Ve(me,le,xe,Ge,_t){return le===null||le.tag!==7?(le=hl(xe,me.mode,Ge,_t),le.return=me,le):(le=S(le,xe),le.return=me,le)}function $e(me,le,xe){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return le=Vf(""+le,me.mode,xe),le.return=me,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case v:return xe=Ji(le.type,le.key,le.props,null,me.mode,xe),wu(xe,le),xe.return=me,xe;case _:return le=xd(le,me.mode,xe),le.return=me,le;case G:var Ge=le._init;return le=Ge(le._payload),$e(me,le,xe)}if(he(le)||ae(le))return le=hl(le,me.mode,xe,null),le.return=me,le;if(typeof le.then=="function")return $e(me,ih(le),xe);if(le.$$typeof===D)return $e(me,Xf(me,le),xe);Fd(me,le)}return null}function Se(me,le,xe,Ge){var _t=le!==null?le.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return _t!==null?null:k(me,le,""+xe,Ge);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case v:return xe.key===_t?J(me,le,xe,Ge):null;case _:return xe.key===_t?_e(me,le,xe,Ge):null;case G:return _t=xe._init,xe=_t(xe._payload),Se(me,le,xe,Ge)}if(he(xe)||ae(xe))return _t!==null?null:Ve(me,le,xe,Ge,null);if(typeof xe.then=="function")return Se(me,le,ih(xe),Ge);if(xe.$$typeof===D)return Se(me,le,Xf(me,xe),Ge);Fd(me,xe)}return null}function we(me,le,xe,Ge,_t){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return me=me.get(xe)||null,k(le,me,""+Ge,_t);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case v:return me=me.get(Ge.key===null?xe:Ge.key)||null,J(le,me,Ge,_t);case _:return me=me.get(Ge.key===null?xe:Ge.key)||null,_e(le,me,Ge,_t);case G:var mn=Ge._init;return Ge=mn(Ge._payload),we(me,le,xe,Ge,_t)}if(he(Ge)||ae(Ge))return me=me.get(xe)||null,Ve(le,me,Ge,_t,null);if(typeof Ge.then=="function")return we(me,le,xe,ih(Ge),_t);if(Ge.$$typeof===D)return we(me,le,xe,Xf(le,Ge),_t);Fd(le,Ge)}return null}function kt(me,le,xe,Ge){for(var _t=null,mn=null,At=le,Bt=le=0,Ds=null;At!==null&&Bt<xe.length;Bt++){At.index>Bt?(Ds=At,At=null):Ds=At.sibling;var zn=Se(me,At,xe[Bt],Ge);if(zn===null){At===null&&(At=Ds);break}a&&At&&zn.alternate===null&&l(me,At),le=w(zn,le,Bt),mn===null?_t=zn:mn.sibling=zn,mn=zn,At=Ds}if(Bt===xe.length)return p(me,At),Cn&&So(me,Bt),_t;if(At===null){for(;Bt<xe.length;Bt++)At=$e(me,xe[Bt],Ge),At!==null&&(le=w(At,le,Bt),mn===null?_t=At:mn.sibling=At,mn=At);return Cn&&So(me,Bt),_t}for(At=y(At);Bt<xe.length;Bt++)Ds=we(At,me,Bt,xe[Bt],Ge),Ds!==null&&(a&&Ds.alternate!==null&&At.delete(Ds.key===null?Bt:Ds.key),le=w(Ds,le,Bt),mn===null?_t=Ds:mn.sibling=Ds,mn=Ds);return a&&At.forEach(function($u){return l(me,$u)}),Cn&&So(me,Bt),_t}function It(me,le,xe,Ge){if(xe==null)throw Error(n(151));for(var _t=null,mn=null,At=le,Bt=le=0,Ds=null,zn=xe.next();At!==null&&!zn.done;Bt++,zn=xe.next()){At.index>Bt?(Ds=At,At=null):Ds=At.sibling;var $u=Se(me,At,zn.value,Ge);if($u===null){At===null&&(At=Ds);break}a&&At&&$u.alternate===null&&l(me,At),le=w($u,le,Bt),mn===null?_t=$u:mn.sibling=$u,mn=$u,At=Ds}if(zn.done)return p(me,At),Cn&&So(me,Bt),_t;if(At===null){for(;!zn.done;Bt++,zn=xe.next())zn=$e(me,zn.value,Ge),zn!==null&&(le=w(zn,le,Bt),mn===null?_t=zn:mn.sibling=zn,mn=zn);return Cn&&So(me,Bt),_t}for(At=y(At);!zn.done;Bt++,zn=xe.next())zn=we(At,me,Bt,zn.value,Ge),zn!==null&&(a&&zn.alternate!==null&&At.delete(zn.key===null?Bt:zn.key),le=w(zn,le,Bt),mn===null?_t=zn:mn.sibling=zn,mn=zn);return a&&At.forEach(function(Iz){return l(me,Iz)}),Cn&&So(me,Bt),_t}function ni(me,le,xe,Ge){if(typeof xe=="object"&&xe!==null&&xe.type===b&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case v:e:{for(var _t=xe.key;le!==null;){if(le.key===_t){if(_t=xe.type,_t===b){if(le.tag===7){p(me,le.sibling),Ge=S(le,xe.props.children),Ge.return=me,me=Ge;break e}}else if(le.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===G&&bv(_t)===le.type){p(me,le.sibling),Ge=S(le,xe.props),wu(Ge,xe),Ge.return=me,me=Ge;break e}p(me,le);break}else l(me,le);le=le.sibling}xe.type===b?(Ge=hl(xe.props.children,me.mode,Ge,xe.key),Ge.return=me,me=Ge):(Ge=Ji(xe.type,xe.key,xe.props,null,me.mode,Ge),wu(Ge,xe),Ge.return=me,me=Ge)}return z(me);case _:e:{for(_t=xe.key;le!==null;){if(le.key===_t)if(le.tag===4&&le.stateNode.containerInfo===xe.containerInfo&&le.stateNode.implementation===xe.implementation){p(me,le.sibling),Ge=S(le,xe.children||[]),Ge.return=me,me=Ge;break e}else{p(me,le);break}else l(me,le);le=le.sibling}Ge=xd(xe,me.mode,Ge),Ge.return=me,me=Ge}return z(me);case G:return _t=xe._init,xe=_t(xe._payload),ni(me,le,xe,Ge)}if(he(xe))return kt(me,le,xe,Ge);if(ae(xe)){if(_t=ae(xe),typeof _t!="function")throw Error(n(150));return xe=_t.call(xe),It(me,le,xe,Ge)}if(typeof xe.then=="function")return ni(me,le,ih(xe),Ge);if(xe.$$typeof===D)return ni(me,le,Xf(me,xe),Ge);Fd(me,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint"?(xe=""+xe,le!==null&&le.tag===6?(p(me,le.sibling),Ge=S(le,xe),Ge.return=me,me=Ge):(p(me,le),Ge=Vf(xe,me.mode,Ge),Ge.return=me,me=Ge),z(me)):p(me,le)}return function(me,le,xe,Ge){try{nh=0;var _t=ni(me,le,xe,Ge);return nc=null,_t}catch(At){if(At===Wf||At===ga)throw At;var mn=Js(29,At,null,me.mode);return mn.lanes=Ge,mn.return=me,mn}finally{}}}var ic=Sv(!0),Ev=Sv(!1),Xn=ie(null),va=null;function bl(a){var l=a.alternate;Ue(Ti,Ti.current&1),Ue(Xn,a),va===null&&(l===null||Eu.current!==null||l.memoizedState!==null)&&(va=a)}function Tv(a){if(a.tag===22){if(Ue(Ti,Ti.current),Ue(Xn,a),va===null){var l=a.alternate;l!==null&&l.memoizedState!==null&&(va=a)}}else Sl()}function Sl(){Ue(Ti,Ti.current),Ue(Xn,Xn.current)}function Ga(a){Ee(Xn),va===a&&(va=null),Ee(Ti)}var Ti=ie(0);function No(a){for(var l=a;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||$b(p)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function El(a,l,p,y){l=a.memoizedState,p=p(y,l),p=p==null?l:m({},l,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var Vs={enqueueSetState:function(a,l,p){a=a._reactInternals;var y=xi(),S=Va(y);S.payload=l,p!=null&&(S.callback=p),l=Ao(a,S,y),l!==null&&(ks(l,a,y),tc(l,a,y))},enqueueReplaceState:function(a,l,p){a=a._reactInternals;var y=xi(),S=Va(y);S.tag=1,S.payload=l,p!=null&&(S.callback=p),l=Ao(a,S,y),l!==null&&(ks(l,a,y),tc(l,a,y))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var p=xi(),y=Va(p);y.tag=2,l!=null&&(y.callback=l),l=Ao(a,y,p),l!==null&&(ks(l,a,p),tc(l,a,p))}};function Mv(a,l,p,y,S,w,z){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,w,z):l.prototype&&l.prototype.isPureReactComponent?!pa(p,y)||!pa(S,w):!0}function Av(a,l,p,y){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,y),l.state!==a&&Vs.enqueueReplaceState(l,l.state,null)}function ka(a,l){var p=l;if("ref"in l){p={};for(var y in l)y!=="ref"&&(p[y]=l[y])}if(a=a.defaultProps){p===l&&(p=m({},p));for(var S in a)p[S]===void 0&&(p[S]=a[S])}return p}var sc=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function sh(a){sc(a)}function Hd(a){console.error(a)}function wv(a){sc(a)}function Vd(a,l){try{var p=a.onUncaughtError;p(l.value,{componentStack:l.stack})}catch(y){setTimeout(function(){throw y})}}function Yr(a,l,p){try{var y=a.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function Gd(a,l,p){return p=Va(p),p.tag=3,p.payload={element:null},p.callback=function(){Vd(a,l)},p}function Rv(a){return a=Va(a),a.tag=3,a}function kd(a,l,p,y){var S=p.type.getDerivedStateFromError;if(typeof S=="function"){var w=y.value;a.payload=function(){return S(w)},a.callback=function(){Yr(l,p,y)}}var z=p.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(a.callback=function(){Yr(l,p,y),typeof S!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var k=y.stack;this.componentDidCatch(y.value,{componentStack:k!==null?k:""})})}function Nb(a,l,p,y,S){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(l=p.alternate,l!==null&&$r(l,p,S,!0),p=Xn.current,p!==null){switch(p.tag){case 13:return va===null?u():p.alternate===null&&si===0&&(si=3),p.flags&=-257,p.flags|=65536,p.lanes=S,y===Zf?p.flags|=16384:(l=p.updateQueue,l===null?p.updateQueue=new Set([y]):l.add(y),Re(a,y,S)),!1;case 22:return p.flags|=65536,y===Zf?p.flags|=16384:(l=p.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=l):(p=l.retryQueue,p===null?l.retryQueue=new Set([y]):p.add(y)),Re(a,y,S)),!1}throw Error(n(435,p.tag))}return Re(a,y,S),u(),!1}if(Cn)return l=Xn.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=S,y!==bd&&(a=Error(n(422),{cause:y}),ec(ps(a,p)))):(y!==bd&&(l=Error(n(423),{cause:y}),ec(ps(l,p))),a=a.current.alternate,a.flags|=65536,S&=-S,a.lanes|=S,y=ps(y,p),S=Gd(a.stateNode,y,S),_u(a,S),si!==4&&(si=2)),!1;var w=Error(n(520),{cause:y});if(w=ps(w,p),Un===null?Un=[w]:Un.push(w),si!==4&&(si=2),l===null)return!0;y=ps(y,p),p=l;do{switch(p.tag){case 3:return p.flags|=65536,a=S&-S,p.lanes|=a,a=Gd(p.stateNode,y,a),_u(p,a),!1;case 1:if(l=p.type,w=p.stateNode,(p.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Rr===null||!Rr.has(w))))return p.flags|=65536,S&=-S,p.lanes|=S,S=Rv(S),kd(S,a,p,y),_u(p,S),!1}p=p.return}while(p!==null);return!1}var Cv=Error(n(461)),es=!1;function Mi(a,l,p,y){l.child=a===null?Ev(l,null,p,y):ic(l,a.child,p,y)}function tr(a,l,p,y,S){p=p.render;var w=l.ref;if("ref"in y){var z={};for(var k in y)k!=="ref"&&(z[k]=y[k])}else z=y;return Ha(l),y=Ro(a,l,p,z,w,S),k=sg(),a!==null&&!es?(Nd(a,l,S),ts(a,l,S)):(Cn&&k&&jm(l),l.flags|=1,Mi(a,l,y,S),l.child)}function nr(a,l,p,y,S){if(a===null){var w=p.type;return typeof w=="function"&&!Hf(w)&&w.defaultProps===void 0&&p.compare===null?(l.tag=15,l.type=w,_g(a,l,w,y,S)):(a=Ji(p.type,null,y,l,l.mode,S),a.ref=l.ref,a.return=l,l.child=a)}if(w=a.child,!rh(a,S)){var z=w.memoizedProps;if(p=p.compare,p=p!==null?p:pa,p(z,y)&&a.ref===l.ref)return ts(a,l,S)}return l.flags|=1,a=Si(w,y),a.ref=l.ref,a.return=l,l.child=a}function _g(a,l,p,y,S){if(a!==null){var w=a.memoizedProps;if(pa(w,y)&&a.ref===l.ref)if(es=!1,l.pendingProps=y=w,rh(a,S))(a.flags&131072)!==0&&(es=!0);else return l.lanes=a.lanes,ts(a,l,S)}return Ru(a,l,p,y,S)}function rc(a,l,p){var y=l.pendingProps,S=y.children,w=a!==null?a.memoizedState:null;if(y.mode==="hidden"){if((l.flags&128)!==0){if(y=w!==null?w.baseLanes|p:p,a!==null){for(S=l.child=a.child,w=0;S!==null;)w=w|S.lanes|S.childLanes,S=S.sibling;l.childLanes=w&~y}else l.childLanes=0,l.child=null;return ac(a,l,y,p)}if((p&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&Yf(l,w!==null?w.cachePool:null),w!==null?Xy(l,w):ig(),Tv(l);else return l.lanes=l.childLanes=536870912,ac(a,l,w!==null?w.baseLanes|p:p,p)}else w!==null?(Yf(l,w.cachePool),Xy(l,w),Sl(),l.memoizedState=null):(a!==null&&Yf(l,null),ig(),Sl());return Mi(a,l,S,p),l.child}function ac(a,l,p,y){var S=yl();return S=S===null?null:{parent:Ui._currentValue,pool:S},l.memoizedState={baseLanes:p,cachePool:S},a!==null&&Yf(l,null),ig(),Tv(l),a!==null&&$r(a,l,y,!0),null}function oc(a,l){var p=l.ref;if(p===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(a===null||a.ref!==p)&&(l.flags|=4194816)}}function Ru(a,l,p,y,S){return Ha(l),p=Ro(a,l,p,y,void 0,S),y=sg(),a!==null&&!es?(Nd(a,l,S),ts(a,l,S)):(Cn&&y&&jm(l),l.flags|=1,Mi(a,l,p,S),l.child)}function br(a,l,p,y,S,w){return Ha(l),l.updateQueue=null,p=Yy(l,y,p,S),jy(a),y=sg(),a!==null&&!es?(Nd(a,l,w),ts(a,l,w)):(Cn&&y&&jm(l),l.flags|=1,Mi(a,l,p,w),l.child)}function Sr(a,l,p,y,S){if(Ha(l),l.stateNode===null){var w=fl,z=p.contextType;typeof z=="object"&&z!==null&&(w=gi(z)),w=new p(y,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Vs,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=y,w.state=l.memoizedState,w.refs={},tg(l),z=p.contextType,w.context=typeof z=="object"&&z!==null?gi(z):fl,w.state=l.memoizedState,z=p.getDerivedStateFromProps,typeof z=="function"&&(El(l,p,z,y),w.state=l.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(z=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),z!==w.state&&Vs.enqueueReplaceState(w,w.state,null),bu(l,y,w,S),Kf(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),y=!0}else if(a===null){w=l.stateNode;var k=l.memoizedProps,J=ka(p,k);w.props=J;var _e=w.context,Ve=p.contextType;z=fl,typeof Ve=="object"&&Ve!==null&&(z=gi(Ve));var $e=p.getDerivedStateFromProps;Ve=typeof $e=="function"||typeof w.getSnapshotBeforeUpdate=="function",k=l.pendingProps!==k,Ve||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k||_e!==z)&&Av(l,w,y,z),Mo=!1;var Se=l.memoizedState;w.state=Se,bu(l,y,w,S),Kf(),_e=l.memoizedState,k||Se!==_e||Mo?(typeof $e=="function"&&(El(l,p,$e,y),_e=l.memoizedState),(J=Mo||Mv(l,p,J,y,Se,_e,z))?(Ve||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=_e),w.props=y,w.state=_e,w.context=z,y=J):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{w=l.stateNode,Ft(a,l),z=l.memoizedProps,Ve=ka(p,z),w.props=Ve,$e=l.pendingProps,Se=w.context,_e=p.contextType,J=fl,typeof _e=="object"&&_e!==null&&(J=gi(_e)),k=p.getDerivedStateFromProps,(_e=typeof k=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(z!==$e||Se!==J)&&Av(l,w,y,J),Mo=!1,Se=l.memoizedState,w.state=Se,bu(l,y,w,S),Kf();var we=l.memoizedState;z!==$e||Se!==we||Mo||a!==null&&a.dependencies!==null&&$f(a.dependencies)?(typeof k=="function"&&(El(l,p,k,y),we=l.memoizedState),(Ve=Mo||Mv(l,p,Ve,y,Se,we,J)||a!==null&&a.dependencies!==null&&$f(a.dependencies))?(_e||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(y,we,J),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(y,we,J)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||z===a.memoizedProps&&Se===a.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||z===a.memoizedProps&&Se===a.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=we),w.props=y,w.state=we,w.context=J,y=Ve):(typeof w.componentDidUpdate!="function"||z===a.memoizedProps&&Se===a.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||z===a.memoizedProps&&Se===a.memoizedState||(l.flags|=1024),y=!1)}return w=y,oc(a,l),y=(l.flags&128)!==0,w||y?(w=l.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,a!==null&&y?(l.child=ic(l,a.child,null,S),l.child=ic(l,null,p,S)):Mi(a,l,p,S),l.memoizedState=w.state,a=l.child):a=ts(a,l,S),a}function Tl(a,l,p,y){return mu(),l.flags|=256,Mi(a,l,p,y),l.child}var xa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _a(a){return{baseLanes:a,cachePool:Md()}}function ki(a,l,p){return a=a!==null?a.childLanes&~p:0,l&&(a|=Jr),a}function Cu(a,l,p){var y=l.pendingProps,S=!1,w=(l.flags&128)!==0,z;if((z=w)||(z=a!==null&&a.memoizedState===null?!1:(Ti.current&2)!==0),z&&(S=!0,l.flags&=-129),z=(l.flags&32)!==0,l.flags&=-33,a===null){if(Cn){if(S?bl(l):Sl(),Cn){var k=di,J;if(J=k){e:{for(J=k,k=vr;J.nodeType!==8;){if(!k){k=null;break e}if(J=Po(J.nextSibling),J===null){k=null;break e}}k=J}k!==null?(l.memoizedState={dehydrated:k,treeContext:dl!==null?{id:Ba,overflow:Fa}:null,retryLane:536870912,hydrationErrors:null},J=Js(18,null,null,0),J.stateNode=k,J.return=l,l.child=J,Bs=l,di=null,J=!0):J=!1}J||pl(l)}if(k=l.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return $b(k)?l.lanes=32:l.lanes=536870912,null;Ga(l)}return k=y.children,y=y.fallback,S?(Sl(),S=l.mode,k=lc({mode:"hidden",children:k},S),y=hl(y,S,p,null),k.return=l,y.return=l,k.sibling=y,l.child=k,S=l.child,S.memoizedState=_a(p),S.childLanes=ki(a,z,p),l.memoizedState=xa,y):(bl(l),$a(l,k))}if(J=a.memoizedState,J!==null&&(k=J.dehydrated,k!==null)){if(w)l.flags&256?(bl(l),l.flags&=-257,l=ys(a,l,p)):l.memoizedState!==null?(Sl(),l.child=a.child,l.flags|=128,l=null):(Sl(),S=y.fallback,k=l.mode,y=lc({mode:"visible",children:y.children},k),S=hl(S,k,p,null),S.flags|=2,y.return=l,S.return=l,y.sibling=S,l.child=y,ic(l,a.child,null,p),y=l.child,y.memoizedState=_a(p),y.childLanes=ki(a,z,p),l.memoizedState=xa,l=S);else if(bl(l),$b(k)){if(z=k.nextSibling&&k.nextSibling.dataset,z)var _e=z.dgst;z=_e,y=Error(n(419)),y.stack="",y.digest=z,ec({value:y,source:null,stack:null}),l=ys(a,l,p)}else if(es||$r(a,l,p,!1),z=(p&a.childLanes)!==0,es||z){if(z=Yt,z!==null&&(y=p&-p,y=(y&42)!==0?1:Pn(y),y=(y&(z.suspendedLanes|p))!==0?0:y,y!==0&&y!==J.retryLane))throw J.retryLane=y,bo(a,y),ks(z,a,y),Cv;k.data==="$?"||u(),l=ys(a,l,p)}else k.data==="$?"?(l.flags|=192,l.child=a.child,l=null):(a=J.treeContext,di=Po(k.nextSibling),Bs=l,Cn=!0,kr=null,vr=!1,a!==null&&(ms[yr++]=Ba,ms[yr++]=Fa,ms[yr++]=dl,Ba=a.id,Fa=a.overflow,dl=l),l=$a(l,y.children),l.flags|=4096);return l}return S?(Sl(),S=y.fallback,k=l.mode,J=a.child,_e=J.sibling,y=Si(J,{mode:"hidden",children:y.children}),y.subtreeFlags=J.subtreeFlags&65011712,_e!==null?S=Si(_e,S):(S=hl(S,k,p,null),S.flags|=2),S.return=l,y.return=l,y.sibling=S,l.child=y,y=S,S=l.child,k=a.child.memoizedState,k===null?k=_a(p):(J=k.cachePool,J!==null?(_e=Ui._currentValue,J=J.parent!==_e?{parent:_e,pool:_e}:J):J=Md(),k={baseLanes:k.baseLanes|p,cachePool:J}),S.memoizedState=k,S.childLanes=ki(a,z,p),l.memoizedState=xa,y):(bl(l),p=a.child,a=p.sibling,p=Si(p,{mode:"visible",children:y.children}),p.return=l,p.sibling=null,a!==null&&(z=l.deletions,z===null?(l.deletions=[a],l.flags|=16):z.push(a)),l.child=p,l.memoizedState=null,p)}function $a(a,l){return l=lc({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function lc(a,l){return a=Js(22,a,null,l),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function ys(a,l,p){return ic(l,a.child,null,p),a=$a(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function vs(a,l,p){a.lanes|=l;var y=a.alternate;y!==null&&(y.lanes|=l),Km(a.return,l,p)}function En(a,l,p,y,S){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=y,w.tail=p,w.tailMode=S)}function Wr(a,l,p){var y=l.pendingProps,S=y.revealOrder,w=y.tail;if(Mi(a,l,y.children,p),y=Ti.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&vs(a,p,l);else if(a.tag===19)vs(a,p,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}switch(Ue(Ti,y),S){case"forwards":for(p=l.child,S=null;p!==null;)a=p.alternate,a!==null&&No(a)===null&&(S=p),p=p.sibling;p=S,p===null?(S=l.child,l.child=null):(S=p.sibling,p.sibling=null),En(l,!1,S,p,w);break;case"backwards":for(p=null,S=l.child,l.child=null;S!==null;){if(a=S.alternate,a!==null&&No(a)===null){l.child=S;break}a=S.sibling,S.sibling=p,p=S,S=a}En(l,!0,p,null,w);break;case"together":En(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ts(a,l,p){if(a!==null&&(l.dependencies=a.dependencies),Ta|=l.lanes,(p&l.childLanes)===0)if(a!==null){if($r(a,l,p,!1),(p&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(n(153));if(l.child!==null){for(a=l.child,p=Si(a,a.pendingProps),l.child=p,p.return=l;a.sibling!==null;)a=a.sibling,p=p.sibling=Si(a,a.pendingProps),p.return=l;p.sibling=null}return l.child}function rh(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&$f(a)))}function Zr(a,l,p){switch(l.tag){case 3:Ke(l,l.stateNode.containerInfo),gl(l,Ui,a.memoizedState.cache),mu();break;case 27:case 5:bt(l);break;case 4:Ke(l,l.stateNode.containerInfo);break;case 10:gl(l,l.type,l.memoizedProps.value);break;case 13:var y=l.memoizedState;if(y!==null)return y.dehydrated!==null?(bl(l),l.flags|=128,null):(p&l.child.childLanes)!==0?Cu(a,l,p):(bl(l),a=ts(a,l,p),a!==null?a.sibling:null);bl(l);break;case 19:var S=(a.flags&128)!==0;if(y=(p&l.childLanes)!==0,y||($r(a,l,p,!1),y=(p&l.childLanes)!==0),S){if(y)return Wr(a,l,p);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Ue(Ti,Ti.current),y)break;return null;case 22:case 23:return l.lanes=0,rc(a,l,p);case 24:gl(l,Ui,a.memoizedState.cache)}return ts(a,l,p)}function cc(a,l,p){if(a!==null)if(a.memoizedProps!==l.pendingProps)es=!0;else{if(!rh(a,p)&&(l.flags&128)===0)return es=!1,Zr(a,l,p);es=(a.flags&131072)!==0}else es=!1,Cn&&(l.flags&1048576)!==0&&_d(l,pu,l.index);switch(l.lanes=0,l.tag){case 16:e:{a=l.pendingProps;var y=l.elementType,S=y._init;if(y=S(y._payload),l.type=y,typeof y=="function")Hf(y)?(a=ka(y,a),l.tag=1,l=Sr(null,l,y,a,p)):(l.tag=0,l=Ru(null,l,y,a,p));else{if(y!=null){if(S=y.$$typeof,S===N){l.tag=11,l=tr(null,l,y,a,p);break e}else if(S===P){l.tag=14,l=nr(null,l,y,a,p);break e}}throw l=de(y)||y,Error(n(306,l,""))}}return l;case 0:return Ru(a,l,l.type,l.pendingProps,p);case 1:return y=l.type,S=ka(y,l.pendingProps),Sr(a,l,y,S,p);case 3:e:{if(Ke(l,l.stateNode.containerInfo),a===null)throw Error(n(387));y=l.pendingProps;var w=l.memoizedState;S=w.element,Ft(a,l),bu(l,y,null,p);var z=l.memoizedState;if(y=z.cache,gl(l,Ui,y),y!==w.cache&&kf(l,[Ui],p,!0),Kf(),y=z.element,w.isDehydrated)if(w={element:y,isDehydrated:!1,cache:z.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=Tl(a,l,y,p);break e}else if(y!==S){S=ps(Error(n(424)),l),ec(S),l=Tl(a,l,y,p);break e}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(di=Po(a.firstChild),Bs=l,Cn=!0,kr=null,vr=!0,p=Ev(l,null,y,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(mu(),y===S){l=ts(a,l,p);break e}Mi(a,l,y,p)}l=l.child}return l;case 26:return oc(a,l),a===null?(p=iw(l.type,null,l.pendingProps,null))?l.memoizedState=p:Cn||(p=l.type,a=l.pendingProps,y=zv(Be.current).createElement(p),y[Di]=l,y[Vi]=a,$s(y,p,a),Oi(y),l.stateNode=y):l.memoizedState=iw(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return bt(l),a===null&&Cn&&(y=l.stateNode=ew(l.type,l.pendingProps,Be.current),Bs=l,vr=!0,S=di,Fu(l.type)?(Xb=S,di=Po(y.firstChild)):di=S),Mi(a,l,l.pendingProps.children,p),oc(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&Cn&&((S=y=di)&&(y=hz(y,l.type,l.pendingProps,vr),y!==null?(l.stateNode=y,Bs=l,di=Po(y.firstChild),vr=!1,S=!0):S=!1),S||pl(l)),bt(l),S=l.type,w=l.pendingProps,z=a!==null?a.memoizedProps:null,y=w.children,Vb(S,w)?y=null:z!==null&&Vb(S,z)&&(l.flags|=32),l.memoizedState!==null&&(S=Ro(a,l,Tb,null,null,p),Dg._currentValue=S),oc(a,l),Mi(a,l,y,p),l.child;case 6:return a===null&&Cn&&((a=p=di)&&(p=dz(p,l.pendingProps,vr),p!==null?(l.stateNode=p,Bs=l,di=null,a=!0):a=!1),a||pl(l)),null;case 13:return Cu(a,l,p);case 4:return Ke(l,l.stateNode.containerInfo),y=l.pendingProps,a===null?l.child=ic(l,null,y,p):Mi(a,l,y,p),l.child;case 11:return tr(a,l,l.type,l.pendingProps,p);case 7:return Mi(a,l,l.pendingProps,p),l.child;case 8:return Mi(a,l,l.pendingProps.children,p),l.child;case 12:return Mi(a,l,l.pendingProps.children,p),l.child;case 10:return y=l.pendingProps,gl(l,l.type,y.value),Mi(a,l,y.children,p),l.child;case 9:return S=l.type._context,y=l.pendingProps.children,Ha(l),S=gi(S),y=y(S),l.flags|=1,Mi(a,l,y,p),l.child;case 14:return nr(a,l,l.type,l.pendingProps,p);case 15:return _g(a,l,l.type,l.pendingProps,p);case 19:return Wr(a,l,p);case 31:return y=l.pendingProps,p=l.mode,y={mode:y.mode,children:y.children},a===null?(p=lc(y,p),p.ref=l.ref,l.child=p,p.return=l,l=p):(p=Si(a.child,y),p.ref=l.ref,l.child=p,p.return=l,l=p),l;case 22:return rc(a,l,p);case 24:return Ha(l),y=gi(Ui),a===null?(S=yl(),S===null&&(S=Yt,w=Ed(),S.pooledCache=w,w.refCount++,w!==null&&(S.pooledCacheLanes|=p),S=w),l.memoizedState={parent:y,cache:S},tg(l),gl(l,Ui,S)):((a.lanes&p)!==0&&(Ft(a,l),bu(l,null,null,p),Kf()),S=a.memoizedState,w=l.memoizedState,S.parent!==y?(S={parent:y,cache:y},l.memoizedState=S,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=S),gl(l,Ui,y)):(y=w.cache,gl(l,Ui,y),y!==S.cache&&kf(l,[Ui],p,!0))),Mi(a,l,l.pendingProps.children,p),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function ba(a){a.flags|=4}function ah(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!lw(l)){if(l=Xn.current,l!==null&&((Ot&4194048)===Ot?va!==null:(Ot&62914560)!==Ot&&(Ot&536870912)===0||l!==va))throw qr=Zf,Jm;a.flags|=8192}}function Do(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?ct():536870912,a.lanes|=l,wn|=l)}function uc(a,l){if(!Cn)switch(a.tailMode){case"hidden":l=a.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function Qn(a){var l=a.alternate!==null&&a.alternate.child===a.child,p=0,y=0;if(l)for(var S=a.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&65011712,y|=S.flags&65011712,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=y,a.childLanes=p,l}function bg(a,l,p){var y=l.pendingProps;switch(Ym(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(l),null;case 1:return Qn(l),null;case 3:return p=l.stateNode,y=null,a!==null&&(y=a.memoizedState.cache),l.memoizedState.cache!==y&&(l.flags|=2048),To(Ui),Ct(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(a===null||a.child===null)&&(ma(l)?ba(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,On())),Qn(l),null;case 26:return p=l.memoizedState,a===null?(ba(l),p!==null?(Qn(l),ah(l,p)):(Qn(l),l.flags&=-16777217)):p?p!==a.memoizedState?(ba(l),Qn(l),ah(l,p)):(Qn(l),l.flags&=-16777217):(a.memoizedProps!==y&&ba(l),Qn(l),l.flags&=-16777217),null;case 27:$t(l),p=Be.current;var S=l.type;if(a!==null&&l.stateNode!=null)a.memoizedProps!==y&&ba(l);else{if(!y){if(l.stateNode===null)throw Error(n(166));return Qn(l),null}a=re.current,ma(l)?Vy(l):(a=ew(S,y,p),l.stateNode=a,ba(l))}return Qn(l),null;case 5:if($t(l),p=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==y&&ba(l);else{if(!y){if(l.stateNode===null)throw Error(n(166));return Qn(l),null}if(a=re.current,ma(l))Vy(l);else{switch(S=zv(Be.current),a){case 1:a=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:a=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":a=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":a=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":a=S.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof y.is=="string"?S.createElement("select",{is:y.is}):S.createElement("select"),y.multiple?a.multiple=!0:y.size&&(a.size=y.size);break;default:a=typeof y.is=="string"?S.createElement(p,{is:y.is}):S.createElement(p)}}a[Di]=l,a[Vi]=y;e:for(S=l.child;S!==null;){if(S.tag===5||S.tag===6)a.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===l)break e;for(;S.sibling===null;){if(S.return===null||S.return===l)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}l.stateNode=a;e:switch($s(a,p,y),p){case"button":case"input":case"select":case"textarea":a=!!y.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ba(l)}}return Qn(l),l.flags&=-16777217,null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==y&&ba(l);else{if(typeof y!="string"&&l.stateNode===null)throw Error(n(166));if(a=Be.current,ma(l)){if(a=l.stateNode,p=l.memoizedProps,y=null,S=Bs,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}a[Di]=l,a=!!(a.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||jA(a.nodeValue,p)),a||pl(l)}else a=zv(a).createTextNode(y),a[Di]=l,l.stateNode=a}return Qn(l),null;case 13:if(y=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(S=ma(l),y!==null&&y.dehydrated!==null){if(a===null){if(!S)throw Error(n(318));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[Di]=l}else mu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Qn(l),S=!1}else S=On(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=S),S=!0;if(!S)return l.flags&256?(Ga(l),l):(Ga(l),null)}if(Ga(l),(l.flags&128)!==0)return l.lanes=p,l;if(p=y!==null,a=a!==null&&a.memoizedState!==null,p){y=l.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool);var w=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(w=y.memoizedState.cachePool.pool),w!==S&&(y.flags|=2048)}return p!==a&&p&&(l.child.flags|=8192),Do(l,l.updateQueue),Qn(l),null;case 4:return Ct(),a===null&&Pb(l.stateNode.containerInfo),Qn(l),null;case 10:return To(l.type),Qn(l),null;case 19:if(Ee(Ti),S=l.memoizedState,S===null)return Qn(l),null;if(y=(l.flags&128)!==0,w=S.rendering,w===null)if(y)uc(S,!1);else{if(si!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(w=No(a),w!==null){for(l.flags|=128,uc(S,!1),a=w.updateQueue,l.updateQueue=a,Do(l,a),l.subtreeFlags=0,a=p,p=l.child;p!==null;)qm(p,a),p=p.sibling;return Ue(Ti,Ti.current&1|2),l.child}a=a.sibling}S.tail!==null&&Pe()>Cs&&(l.flags|=128,y=!0,uc(S,!1),l.lanes=4194304)}else{if(!y)if(a=No(w),a!==null){if(l.flags|=128,y=!0,a=a.updateQueue,l.updateQueue=a,Do(l,a),uc(S,!0),S.tail===null&&S.tailMode==="hidden"&&!w.alternate&&!Cn)return Qn(l),null}else 2*Pe()-S.renderingStartTime>Cs&&p!==536870912&&(l.flags|=128,y=!0,uc(S,!1),l.lanes=4194304);S.isBackwards?(w.sibling=l.child,l.child=w):(a=S.last,a!==null?a.sibling=w:l.child=w,S.last=w)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=Pe(),l.sibling=null,a=Ti.current,Ue(Ti,y?a&1|2:a&1),l):(Qn(l),null);case 22:case 23:return Ga(l),Qf(),y=l.memoizedState!==null,a!==null?a.memoizedState!==null!==y&&(l.flags|=8192):y&&(l.flags|=8192),y?(p&536870912)!==0&&(l.flags&128)===0&&(Qn(l),l.subtreeFlags&6&&(l.flags|=8192)):Qn(l),p=l.updateQueue,p!==null&&Do(l,p.retryQueue),p=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),y=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==p&&(l.flags|=2048),a!==null&&Ee(Xr),null;case 24:return p=null,a!==null&&(p=a.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),To(Ui),Qn(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function Nu(a,l){switch(Ym(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return To(Ui),Ct(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return $t(l),null;case 13:if(Ga(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(n(340));mu()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Ee(Ti),null;case 4:return Ct(),null;case 10:return To(l.type),null;case 22:case 23:return Ga(l),Qf(),a!==null&&Ee(Xr),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return To(Ui),null;case 25:return null;default:return null}}function Du(a,l){switch(Ym(l),l.tag){case 3:To(Ui),Ct();break;case 26:case 27:case 5:$t(l);break;case 4:Ct();break;case 13:Ga(l);break;case 19:Ee(Ti);break;case 10:To(l.type);break;case 22:case 23:Ga(l),Qf(),a!==null&&Ee(Xr);break;case 24:To(Ui)}}function fc(a,l){try{var p=l.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var S=y.next;p=S;do{if((p.tag&a)===a){y=void 0;var w=p.create,z=p.inst;y=w(),z.destroy=y}p=p.next}while(p!==S)}}catch(k){oe(l,l.return,k)}}function Er(a,l,p){try{var y=l.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var w=S.next;y=w;do{if((y.tag&a)===a){var z=y.inst,k=z.destroy;if(k!==void 0){z.destroy=void 0,S=l;var J=p,_e=k;try{_e()}catch(Ve){oe(S,J,Ve)}}}y=y.next}while(y!==w)}}catch(Ve){oe(l,l.return,Ve)}}function hc(a){var l=a.updateQueue;if(l!==null){var p=a.stateNode;try{$y(l,p)}catch(y){oe(a,a.return,y)}}}function Oo(a,l,p){p.props=ka(a.type,a.memoizedProps),p.state=a.memoizedState;try{p.componentWillUnmount()}catch(y){oe(a,l,y)}}function dc(a,l){try{var p=a.ref;if(p!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof p=="function"?a.refCleanup=p(y):p.current=y}}catch(S){oe(a,l,S)}}function Xa(a,l){var p=a.ref,y=a.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(S){oe(a,l,S)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(S){oe(a,l,S)}else p.current=null}function Ou(a){var l=a.type,p=a.memoizedProps,y=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(S){oe(a,a.return,S)}}function oh(a,l,p){try{var y=a.stateNode;oz(y,a.type,p,l),y[Vi]=l}catch(S){oe(a,a.return,S)}}function lh(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Fu(a.type)||a.tag===4}function Ml(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||lh(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Fu(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Al(a,l,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(a,l):(l=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,l.appendChild(a),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=Uv));else if(y!==4&&(y===27&&Fu(a.type)&&(p=a.stateNode,l=null),a=a.child,a!==null))for(Al(a,l,p),a=a.sibling;a!==null;)Al(a,l,p),a=a.sibling}function wl(a,l,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?p.insertBefore(a,l):p.appendChild(a);else if(y!==4&&(y===27&&Fu(a.type)&&(p=a.stateNode),a=a.child,a!==null))for(wl(a,l,p),a=a.sibling;a!==null;)wl(a,l,p),a=a.sibling}function Rl(a){var l=a.stateNode,p=a.memoizedProps;try{for(var y=a.type,S=l.attributes;S.length;)l.removeAttributeNode(S[0]);$s(l,y,p),l[Di]=a,l[Vi]=p}catch(w){oe(a,a.return,w)}}var qa=!1,Jn=!1,Lu=!1,Tr=typeof WeakSet=="function"?WeakSet:Set,qn=null;function $i(a,l){if(a=a.containerInfo,Fb=Vv,a=Fm(a),Pf(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var S=y.anchorOffset,w=y.focusNode;y=y.focusOffset;try{p.nodeType,w.nodeType}catch{p=null;break e}var z=0,k=-1,J=-1,_e=0,Ve=0,$e=a,Se=null;t:for(;;){for(var we;$e!==p||S!==0&&$e.nodeType!==3||(k=z+S),$e!==w||y!==0&&$e.nodeType!==3||(J=z+y),$e.nodeType===3&&(z+=$e.nodeValue.length),(we=$e.firstChild)!==null;)Se=$e,$e=we;for(;;){if($e===a)break t;if(Se===p&&++_e===S&&(k=z),Se===w&&++Ve===y&&(J=z),(we=$e.nextSibling)!==null)break;$e=Se,Se=$e.parentNode}$e=we}p=k===-1||J===-1?null:{start:k,end:J}}else p=null}p=p||{start:0,end:0}}else p=null;for(Hb={focusedElem:a,selectionRange:p},Vv=!1,qn=l;qn!==null;)if(l=qn,a=l.child,(l.subtreeFlags&1024)!==0&&a!==null)a.return=l,qn=a;else for(;qn!==null;){switch(l=qn,w=l.alternate,a=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,p=l,S=w.memoizedProps,w=w.memoizedState,y=p.stateNode;try{var kt=ka(p.type,S,p.elementType===p.type);a=y.getSnapshotBeforeUpdate(kt,w),y.__reactInternalSnapshotBeforeUpdate=a}catch(It){oe(p,p.return,It)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,p=a.nodeType,p===9)kb(a);else if(p===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":kb(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=l.sibling,a!==null){a.return=l.return,qn=a;break}qn=l.return}}function Lo(a,l,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Gs(a,p),y&4&&fc(5,p);break;case 1:if(Gs(a,p),y&4)if(a=p.stateNode,l===null)try{a.componentDidMount()}catch(z){oe(p,p.return,z)}else{var S=ka(p.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(S,l,a.__reactInternalSnapshotBeforeUpdate)}catch(z){oe(p,p.return,z)}}y&64&&hc(p),y&512&&dc(p,p.return);break;case 3:if(Gs(a,p),y&64&&(a=p.updateQueue,a!==null)){if(l=null,p.child!==null)switch(p.child.tag){case 27:case 5:l=p.child.stateNode;break;case 1:l=p.child.stateNode}try{$y(a,l)}catch(z){oe(p,p.return,z)}}break;case 27:l===null&&y&4&&Rl(p);case 26:case 5:Gs(a,p),l===null&&y&4&&Ou(p),y&512&&dc(p,p.return);break;case 12:Gs(a,p);break;case 13:Gs(a,p),y&4&&Cl(a,p),y&64&&(a=p.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(p=ri.bind(null,p),pz(a,p))));break;case 22:if(y=p.memoizedState!==null||qa,!y){l=l!==null&&l.memoizedState!==null||Jn,S=qa;var w=Jn;qa=y,(Jn=l)&&!w?ja(a,p,(p.subtreeFlags&8772)!==0):Gs(a,p),qa=S,Jn=w}break;case 30:break;default:Gs(a,p)}}function nn(a){var l=a.alternate;l!==null&&(a.alternate=null,nn(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Vn(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Lt=null,An=!1;function Kr(a,l,p){for(p=p.child;p!==null;)pc(a,l,p),p=p.sibling}function pc(a,l,p){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(Me,p)}catch{}switch(p.tag){case 26:Jn||Xa(p,l),Kr(a,l,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Jn||Xa(p,l);var y=Lt,S=An;Fu(p.type)&&(Lt=p.stateNode,An=!1),Kr(a,l,p),wg(p.stateNode),Lt=y,An=S;break;case 5:Jn||Xa(p,l);case 6:if(y=Lt,S=An,Lt=null,Kr(a,l,p),Lt=y,An=S,Lt!==null)if(An)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(p.stateNode)}catch(w){oe(p,l,w)}else try{Lt.removeChild(p.stateNode)}catch(w){oe(p,l,w)}break;case 18:Lt!==null&&(An?(a=Lt,QA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,p.stateNode),zg(a)):QA(Lt,p.stateNode));break;case 4:y=Lt,S=An,Lt=p.stateNode.containerInfo,An=!0,Kr(a,l,p),Lt=y,An=S;break;case 0:case 11:case 14:case 15:Jn||Er(2,p,l),Jn||Er(4,p,l),Kr(a,l,p);break;case 1:Jn||(Xa(p,l),y=p.stateNode,typeof y.componentWillUnmount=="function"&&Oo(p,l,y)),Kr(a,l,p);break;case 21:Kr(a,l,p);break;case 22:Jn=(y=Jn)||p.memoizedState!==null,Kr(a,l,p),Jn=y;break;default:Kr(a,l,p)}}function Cl(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{zg(a)}catch(p){oe(l,l.return,p)}}function $d(a){switch(a.tag){case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new Tr),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new Tr),l;default:throw Error(n(435,a.tag))}}function mc(a,l){var p=$d(a);l.forEach(function(y){var S=Ht.bind(null,a,y);p.has(y)||(p.add(y),y.then(S,S))})}function ns(a,l){var p=l.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y],w=a,z=l,k=z;e:for(;k!==null;){switch(k.tag){case 27:if(Fu(k.type)){Lt=k.stateNode,An=!1;break e}break;case 5:Lt=k.stateNode,An=!1;break e;case 3:case 4:Lt=k.stateNode.containerInfo,An=!0;break e}k=k.return}if(Lt===null)throw Error(n(160));pc(w,z,S),Lt=null,An=!1,w=S.alternate,w!==null&&(w.return=null),S.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)Xd(l,a),l=l.sibling}var Sa=null;function Xd(a,l){var p=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ns(l,a),yi(a),y&4&&(Er(3,a,a.return),fc(3,a),Er(5,a,a.return));break;case 1:ns(l,a),yi(a),y&512&&(Jn||p===null||Xa(p,p.return)),y&64&&qa&&(a=a.updateQueue,a!==null&&(y=a.callbacks,y!==null&&(p=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var S=Sa;if(ns(l,a),yi(a),y&512&&(Jn||p===null||Xa(p,p.return)),y&4){var w=p!==null?p.memoizedState:null;if(y=a.memoizedState,p===null)if(y===null)if(a.stateNode===null){e:{y=a.type,p=a.memoizedProps,S=S.ownerDocument||S;t:switch(y){case"title":w=S.getElementsByTagName("title")[0],(!w||w[ua]||w[Di]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=S.createElement(y),S.head.insertBefore(w,S.querySelector("head > title"))),$s(w,y,p),w[Di]=a,Oi(w),y=w;break e;case"link":var z=aw("link","href",S).get(y+(p.href||""));if(z){for(var k=0;k<z.length;k++)if(w=z[k],w.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&w.getAttribute("rel")===(p.rel==null?null:p.rel)&&w.getAttribute("title")===(p.title==null?null:p.title)&&w.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){z.splice(k,1);break t}}w=S.createElement(y),$s(w,y,p),S.head.appendChild(w);break;case"meta":if(z=aw("meta","content",S).get(y+(p.content||""))){for(k=0;k<z.length;k++)if(w=z[k],w.getAttribute("content")===(p.content==null?null:""+p.content)&&w.getAttribute("name")===(p.name==null?null:p.name)&&w.getAttribute("property")===(p.property==null?null:p.property)&&w.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&w.getAttribute("charset")===(p.charSet==null?null:p.charSet)){z.splice(k,1);break t}}w=S.createElement(y),$s(w,y,p),S.head.appendChild(w);break;default:throw Error(n(468,y))}w[Di]=a,Oi(w),y=w}a.stateNode=y}else ow(S,a.type,a.stateNode);else a.stateNode=rw(S,y,a.memoizedProps);else w!==y?(w===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):w.count--,y===null?ow(S,a.type,a.stateNode):rw(S,y,a.memoizedProps)):y===null&&a.stateNode!==null&&oh(a,a.memoizedProps,p.memoizedProps)}break;case 27:ns(l,a),yi(a),y&512&&(Jn||p===null||Xa(p,p.return)),p!==null&&y&4&&oh(a,a.memoizedProps,p.memoizedProps);break;case 5:if(ns(l,a),yi(a),y&512&&(Jn||p===null||Xa(p,p.return)),a.flags&32){S=a.stateNode;try{zs(S,"")}catch(we){oe(a,a.return,we)}}y&4&&a.stateNode!=null&&(S=a.memoizedProps,oh(a,S,p!==null?p.memoizedProps:S)),y&1024&&(Lu=!0);break;case 6:if(ns(l,a),yi(a),y&4){if(a.stateNode===null)throw Error(n(162));y=a.memoizedProps,p=a.stateNode;try{p.nodeValue=y}catch(we){oe(a,a.return,we)}}break;case 3:if(Bv=null,S=Sa,Sa=Pv(l.containerInfo),ns(l,a),Sa=S,yi(a),y&4&&p!==null&&p.memoizedState.isDehydrated)try{zg(l.containerInfo)}catch(we){oe(a,a.return,we)}Lu&&(Lu=!1,Nl(a));break;case 4:y=Sa,Sa=Pv(a.stateNode.containerInfo),ns(l,a),yi(a),Sa=y;break;case 12:ns(l,a),yi(a);break;case 13:ns(l,a),yi(a),a.child.flags&8192&&a.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(kn=Pe()),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,mc(a,y)));break;case 22:S=a.memoizedState!==null;var J=p!==null&&p.memoizedState!==null,_e=qa,Ve=Jn;if(qa=_e||S,Jn=Ve||J,ns(l,a),Jn=Ve,qa=_e,yi(a),y&8192)e:for(l=a.stateNode,l._visibility=S?l._visibility&-2:l._visibility|1,S&&(p===null||J||qa||Jn||Mr(a)),p=null,l=a;;){if(l.tag===5||l.tag===26){if(p===null){J=p=l;try{if(w=J.stateNode,S)z=w.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{k=J.stateNode;var $e=J.memoizedProps.style,Se=$e!=null&&$e.hasOwnProperty("display")?$e.display:null;k.style.display=Se==null||typeof Se=="boolean"?"":(""+Se).trim()}}catch(we){oe(J,J.return,we)}}}else if(l.tag===6){if(p===null){J=l;try{J.stateNode.nodeValue=S?"":J.memoizedProps}catch(we){oe(J,J.return,we)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;p===l&&(p=null),l=l.return}p===l&&(p=null),l.sibling.return=l.return,l=l.sibling}y&4&&(y=a.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,mc(a,p))));break;case 19:ns(l,a),yi(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,mc(a,y)));break;case 30:break;case 21:break;default:ns(l,a),yi(a)}}function yi(a){var l=a.flags;if(l&2){try{for(var p,y=a.return;y!==null;){if(lh(y)){p=y;break}y=y.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var S=p.stateNode,w=Ml(a);wl(a,w,S);break;case 5:var z=p.stateNode;p.flags&32&&(zs(z,""),p.flags&=-33);var k=Ml(a);wl(a,k,z);break;case 3:case 4:var J=p.stateNode.containerInfo,_e=Ml(a);Al(a,_e,J);break;default:throw Error(n(161))}}catch(Ve){oe(a,a.return,Ve)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function Nl(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;Nl(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function Gs(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Lo(a,l.alternate,l),l=l.sibling}function Mr(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:Er(4,l,l.return),Mr(l);break;case 1:Xa(l,l.return);var p=l.stateNode;typeof p.componentWillUnmount=="function"&&Oo(l,l.return,p),Mr(l);break;case 27:wg(l.stateNode);case 26:case 5:Xa(l,l.return),Mr(l);break;case 22:l.memoizedState===null&&Mr(l);break;case 30:Mr(l);break;default:Mr(l)}a=a.sibling}}function ja(a,l,p){for(p=p&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var y=l.alternate,S=a,w=l,z=w.flags;switch(w.tag){case 0:case 11:case 15:ja(S,w,p),fc(4,w);break;case 1:if(ja(S,w,p),y=w,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(_e){oe(y,y.return,_e)}if(y=w,S=y.updateQueue,S!==null){var k=y.stateNode;try{var J=S.shared.hiddenCallbacks;if(J!==null)for(S.shared.hiddenCallbacks=null,S=0;S<J.length;S++)Su(J[S],k)}catch(_e){oe(y,y.return,_e)}}p&&z&64&&hc(w),dc(w,w.return);break;case 27:Rl(w);case 26:case 5:ja(S,w,p),p&&y===null&&z&4&&Ou(w),dc(w,w.return);break;case 12:ja(S,w,p);break;case 13:ja(S,w,p),p&&z&4&&Cl(S,w);break;case 22:w.memoizedState===null&&ja(S,w,p),dc(w,w.return);break;case 30:break;default:ja(S,w,p)}l=l.sibling}}function qd(a,l){var p=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==p&&(a!=null&&a.refCount++,p!=null&&gu(p))}function jd(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&gu(a))}function jn(a,l,p,y){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Yd(a,l,p,y),l=l.sibling}function Yd(a,l,p,y){var S=l.flags;switch(l.tag){case 0:case 11:case 15:jn(a,l,p,y),S&2048&&fc(9,l);break;case 1:jn(a,l,p,y);break;case 3:jn(a,l,p,y),S&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&gu(a)));break;case 12:if(S&2048){jn(a,l,p,y),a=l.stateNode;try{var w=l.memoizedProps,z=w.id,k=w.onPostCommit;typeof k=="function"&&k(z,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(J){oe(l,l.return,J)}}else jn(a,l,p,y);break;case 13:jn(a,l,p,y);break;case 23:break;case 22:w=l.stateNode,z=l.alternate,l.memoizedState!==null?w._visibility&2?jn(a,l,p,y):Ea(a,l):w._visibility&2?jn(a,l,p,y):(w._visibility|=2,Uo(a,l,p,y,(l.subtreeFlags&10256)!==0)),S&2048&&qd(z,l);break;case 24:jn(a,l,p,y),S&2048&&jd(l.alternate,l);break;default:jn(a,l,p,y)}}function Uo(a,l,p,y,S){for(S=S&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var w=a,z=l,k=p,J=y,_e=z.flags;switch(z.tag){case 0:case 11:case 15:Uo(w,z,k,J,S),fc(8,z);break;case 23:break;case 22:var Ve=z.stateNode;z.memoizedState!==null?Ve._visibility&2?Uo(w,z,k,J,S):Ea(w,z):(Ve._visibility|=2,Uo(w,z,k,J,S)),S&&_e&2048&&qd(z.alternate,z);break;case 24:Uo(w,z,k,J,S),S&&_e&2048&&jd(z.alternate,z);break;default:Uo(w,z,k,J,S)}l=l.sibling}}function Ea(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var p=a,y=l,S=y.flags;switch(y.tag){case 22:Ea(p,y),S&2048&&qd(y.alternate,y);break;case 24:Ea(p,y),S&2048&&jd(y.alternate,y);break;default:Ea(p,y)}l=l.sibling}}var Ar=8192;function Uu(a){if(a.subtreeFlags&Ar)for(a=a.child;a!==null;)Nv(a),a=a.sibling}function Nv(a){switch(a.tag){case 26:Uu(a),a.flags&Ar&&a.memoizedState!==null&&wz(Sa,a.memoizedState,a.memoizedProps);break;case 5:Uu(a);break;case 3:case 4:var l=Sa;Sa=Pv(a.stateNode.containerInfo),Uu(a),Sa=l;break;case 22:a.memoizedState===null&&(l=a.alternate,l!==null&&l.memoizedState!==null?(l=Ar,Ar=16777216,Uu(a),Ar=l):Uu(a));break;default:Uu(a)}}function Dv(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function ei(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var y=l[p];qn=y,Wa(y,a)}Dv(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Sg(a),a=a.sibling}function Sg(a){switch(a.tag){case 0:case 11:case 15:ei(a),a.flags&2048&&Er(9,a,a.return);break;case 3:ei(a);break;case 12:ei(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,Ya(a)):ei(a);break;default:ei(a)}}function Ya(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var p=0;p<l.length;p++){var y=l[p];qn=y,Wa(y,a)}Dv(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:Er(8,l,l.return),Ya(l);break;case 22:p=l.stateNode,p._visibility&2&&(p._visibility&=-3,Ya(l));break;default:Ya(l)}a=a.sibling}}function Wa(a,l){for(;qn!==null;){var p=qn;switch(p.tag){case 0:case 11:case 15:Er(8,p,l);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:gu(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,qn=y;else e:for(p=a;qn!==null;){y=qn;var S=y.sibling,w=y.return;if(nn(y),y===p){qn=null;break e}if(S!==null){S.return=w,qn=S;break e}qn=w}}}var vi={getCacheForType:function(a){var l=gi(Ui),p=l.data.get(a);return p===void 0&&(p=a(),l.data.set(a,p)),p}},Eg=typeof WeakMap=="function"?WeakMap:Map,Ln=0,Yt=null,un=null,Ot=0,en=0,pi=null,wr=!1,zu=!1,Pu=!1,Qr=0,si=0,Ta=0,Za=0,gc=0,Jr=0,wn=0,Un=null,Ut=null,pn=!1,kn=0,Cs=1/0,ea=null,Rr=null,Xi=0,Ns=null,Yn=null,Cr=0,zo=0,ch=null,Nr=null,Ka=0,yc=null;function xi(){if((Ln&2)!==0&&Ot!==0)return Ot&-Ot;if(F.T!==null){var a=Kt;return a!==0?a:Ob()}return gn()}function Wd(){Jr===0&&(Jr=(Ot&536870912)===0||Cn?ue():536870912);var a=Xn.current;return a!==null&&(a.flags|=32),Jr}function ks(a,l,p){(a===Yt&&(en===2||en===9)||a.cancelPendingCommit!==null)&&(Ol(a,0),Ma(a,Ot,Jr,!1)),ke(a,p),((Ln&2)===0||a!==Yt)&&(a===Yt&&((Ln&2)===0&&(Za|=p),si===4&&Ma(a,Ot,Jr,!1)),zl(a))}function Iu(a,l,p){if((Ln&6)!==0)throw Error(n(327));var y=!p&&(l&124)===0&&(l&a.expiredLanes)===0||wt(a,l),S=y?E(a,l):h(a,l,!0),w=y;do{if(S===0){zu&&!y&&Ma(a,l,0,!1);break}else{if(p=a.current.alternate,w&&!Dl(p)){S=h(a,l,!1),w=!1;continue}if(S===2){if(w=l,a.errorRecoveryDisabledLanes&w)var z=0;else z=a.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){l=z;e:{var k=a;S=Un;var J=k.current.memoizedState.isDehydrated;if(J&&(Ol(k,z).flags|=256),z=h(k,z,!1),z!==2){if(Pu&&!J){k.errorRecoveryDisabledLanes|=w,Za|=w,S=4;break e}w=Ut,Ut=S,w!==null&&(Ut===null?Ut=w:Ut.push.apply(Ut,w))}S=z}if(w=!1,S!==2)continue}}if(S===1){Ol(a,0),Ma(a,l,0,!0);break}e:{switch(y=a,w=S,w){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Ma(y,l,Jr,!wr);break e;case 2:Ut=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(S=kn+300-Pe(),10<S)){if(Ma(y,l,Jr,!wr),Xt(y,0,!0)!==0)break e;y.timeoutHandle=ZA(uh.bind(null,y,p,Ut,ea,pn,l,Jr,Za,wn,wr,w,2,-0,0),S);break e}uh(y,p,Ut,ea,pn,l,Jr,Za,wn,wr,w,0,-0,0)}}break}while(!0);zl(a)}function uh(a,l,p,y,S,w,z,k,J,_e,Ve,$e,Se,we){if(a.timeoutHandle=-1,$e=l.subtreeFlags,($e&8192||($e&16785408)===16785408)&&(Ng={stylesheets:null,count:0,unsuspend:Az},Nv(l),$e=Rz(),$e!==null)){a.cancelPendingCommit=$e(nt.bind(null,a,l,w,p,y,S,z,k,J,Ve,1,Se,we)),Ma(a,w,z,!_e);return}nt(a,l,w,p,y,S,z,k,J)}function Dl(a){for(var l=a;;){var p=l.tag;if((p===0||p===11||p===15)&&l.flags&16384&&(p=l.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var S=p[y],w=S.getSnapshot;S=S.value;try{if(!Zs(w(),S))return!1}catch{return!1}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ma(a,l,p,y){l&=~gc,l&=~Za,a.suspendedLanes|=l,a.pingedLanes&=~l,y&&(a.warmLanes|=l),y=a.expirationTimes;for(var S=l;0<S;){var w=31-tt(S),z=1<<w;y[w]=-1,S&=~z}p!==0&&ut(a,p,l)}function Qa(){return(Ln&6)===0?(Tg(0),!1):!0}function vc(){if(un!==null){if(en===0)var a=un.return;else a=un,Eo=ml=null,rg(a),nc=null,nh=0,a=un;for(;a!==null;)Du(a.alternate,a),a=a.return;un=null}}function Ol(a,l){var p=a.timeoutHandle;p!==-1&&(a.timeoutHandle=-1,cz(p)),p=a.cancelPendingCommit,p!==null&&(a.cancelPendingCommit=null,p()),vc(),Yt=a,un=p=Si(a.current,null),Ot=l,en=0,pi=null,wr=!1,zu=wt(a,l),Pu=!1,wn=Jr=gc=Za=Ta=si=0,Ut=Un=null,pn=!1,(l&8)!==0&&(l|=l&32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&=l;0<y;){var S=31-tt(y),w=1<<S;l|=a[S],y&=~w}return Qr=l,Ff(),p}function Zd(a,l){Qt=null,F.H=th,l===Wf||l===ga?(l=eg(),en=3):l===Jm?(l=eg(),en=4):en=l===Cv?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,pi=l,un===null&&(si=1,Vd(a,ps(l,a.current)))}function Bu(){var a=F.H;return F.H=th,a===null?th:a}function Kd(){var a=F.A;return F.A=vi,a}function u(){si=4,wr||(Ot&4194048)!==Ot&&Xn.current!==null||(zu=!0),(Ta&134217727)===0&&(Za&134217727)===0||Yt===null||Ma(Yt,Ot,Jr,!1)}function h(a,l,p){var y=Ln;Ln|=2;var S=Bu(),w=Kd();(Yt!==a||Ot!==l)&&(ea=null,Ol(a,l)),l=!1;var z=si;e:do try{if(en!==0&&un!==null){var k=un,J=pi;switch(en){case 8:vc(),z=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(l=!0);var _e=en;if(en=0,pi=null,ee(a,k,J,_e),p&&zu){z=0;break e}break;default:_e=en,en=0,pi=null,ee(a,k,J,_e)}}x(),z=si;break}catch(Ve){Zd(a,Ve)}while(!0);return l&&a.shellSuspendCounter++,Eo=ml=null,Ln=y,F.H=S,F.A=w,un===null&&(Yt=null,Ot=0,Ff()),z}function x(){for(;un!==null;)O(un)}function E(a,l){var p=Ln;Ln|=2;var y=Bu(),S=Kd();Yt!==a||Ot!==l?(ea=null,Cs=Pe()+500,Ol(a,l)):zu=wt(a,l);e:do try{if(en!==0&&un!==null){l=un;var w=pi;t:switch(en){case 1:en=0,pi=null,ee(a,l,w,1);break;case 2:case 9:if(Ad(w)){en=0,pi=null,q(l);break}l=function(){en!==2&&en!==9||Yt!==a||(en=7),zl(a)},w.then(l,l);break e;case 3:en=7;break e;case 4:en=5;break e;case 7:Ad(w)?(en=0,pi=null,q(l)):(en=0,pi=null,ee(a,l,w,7));break;case 5:var z=null;switch(un.tag){case 26:z=un.memoizedState;case 5:case 27:var k=un;if(!z||lw(z)){en=0,pi=null;var J=k.sibling;if(J!==null)un=J;else{var _e=k.return;_e!==null?(un=_e,ye(_e)):un=null}break t}}en=0,pi=null,ee(a,l,w,5);break;case 6:en=0,pi=null,ee(a,l,w,6);break;case 8:vc(),si=6;break e;default:throw Error(n(462))}}R();break}catch(Ve){Zd(a,Ve)}while(!0);return Eo=ml=null,F.H=y,F.A=S,Ln=p,un!==null?0:(Yt=null,Ot=0,Ff(),si)}function R(){for(;un!==null&&!_n();)O(un)}function O(a){var l=cc(a.alternate,a,Qr);a.memoizedProps=a.pendingProps,l===null?ye(a):un=l}function q(a){var l=a,p=l.alternate;switch(l.tag){case 15:case 0:l=br(p,l,l.pendingProps,l.type,void 0,Ot);break;case 11:l=br(p,l,l.pendingProps,l.type.render,l.ref,Ot);break;case 5:rg(l);default:Du(p,l),l=un=qm(l,Qr),l=cc(p,l,Qr)}a.memoizedProps=a.pendingProps,l===null?ye(a):un=l}function ee(a,l,p,y){Eo=ml=null,rg(l),nc=null,nh=0;var S=l.return;try{if(Nb(a,S,l,p,Ot)){si=1,Vd(a,ps(p,a.current)),un=null;return}}catch(w){if(S!==null)throw un=S,w;si=1,Vd(a,ps(p,a.current)),un=null;return}l.flags&32768?(Cn||y===1?a=!0:zu||(Ot&536870912)!==0?a=!1:(wr=a=!0,(y===2||y===9||y===3||y===6)&&(y=Xn.current,y!==null&&y.tag===13&&(y.flags|=16384))),He(l,a)):ye(l)}function ye(a){var l=a;do{if((l.flags&32768)!==0){He(l,wr);return}a=l.return;var p=bg(l.alternate,l,Qr);if(p!==null){un=p;return}if(l=l.sibling,l!==null){un=l;return}un=l=a}while(l!==null);si===0&&(si=5)}function He(a,l){do{var p=Nu(a.alternate,a);if(p!==null){p.flags&=32767,un=p;return}if(p=a.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!l&&(a=a.sibling,a!==null)){un=a;return}un=a=p}while(a!==null);si=6,un=null}function nt(a,l,p,y,S,w,z,k,J){a.cancelPendingCommit=null;do Ll();while(Xi!==0);if((Ln&6)!==0)throw Error(n(327));if(l!==null){if(l===a.current)throw Error(n(177));if(w=l.lanes|l.childLanes,w|=yd,ft(a,p,w,z,k,J),a===Yt&&(un=Yt=null,Ot=0),Yn=l,Ns=a,Cr=p,zo=w,ch=S,Nr=y,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Nn(Y,function(){return Ul(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||y){y=F.T,F.T=null,S=W.p,W.p=2,z=Ln,Ln|=4;try{$i(a,l,p)}finally{Ln=z,W.p=S,F.T=y}}Xi=1,ht(),mt(),Wt()}}function ht(){if(Xi===1){Xi=0;var a=Ns,l=Yn,p=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||p){p=F.T,F.T=null;var y=W.p;W.p=2;var S=Ln;Ln|=4;try{Xd(l,a);var w=Hb,z=Fm(a.containerInfo),k=w.focusedElem,J=w.selectionRange;if(z!==k&&k&&k.ownerDocument&&Bm(k.ownerDocument.documentElement,k)){if(J!==null&&Pf(k)){var _e=J.start,Ve=J.end;if(Ve===void 0&&(Ve=_e),"selectionStart"in k)k.selectionStart=_e,k.selectionEnd=Math.min(Ve,k.value.length);else{var $e=k.ownerDocument||document,Se=$e&&$e.defaultView||window;if(Se.getSelection){var we=Se.getSelection(),kt=k.textContent.length,It=Math.min(J.start,kt),ni=J.end===void 0?It:Math.min(J.end,kt);!we.extend&&It>ni&&(z=ni,ni=It,It=z);var me=Im(k,It),le=Im(k,ni);if(me&&le&&(we.rangeCount!==1||we.anchorNode!==me.node||we.anchorOffset!==me.offset||we.focusNode!==le.node||we.focusOffset!==le.offset)){var xe=$e.createRange();xe.setStart(me.node,me.offset),we.removeAllRanges(),It>ni?(we.addRange(xe),we.extend(le.node,le.offset)):(xe.setEnd(le.node,le.offset),we.addRange(xe))}}}}for($e=[],we=k;we=we.parentNode;)we.nodeType===1&&$e.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<$e.length;k++){var Ge=$e[k];Ge.element.scrollLeft=Ge.left,Ge.element.scrollTop=Ge.top}}Vv=!!Fb,Hb=Fb=null}finally{Ln=S,W.p=y,F.T=p}}a.current=l,Xi=2}}function mt(){if(Xi===2){Xi=0;var a=Ns,l=Yn,p=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||p){p=F.T,F.T=null;var y=W.p;W.p=2;var S=Ln;Ln|=4;try{Lo(a,l.alternate,l)}finally{Ln=S,W.p=y,F.T=p}}Xi=3}}function Wt(){if(Xi===4||Xi===3){Xi=0,Fe();var a=Ns,l=Yn,p=Cr,y=Nr;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Xi=5:(Xi=0,Yn=Ns=null,Dr(a,a.pendingLanes));var S=a.pendingLanes;if(S===0&&(Rr=null),ai(p),l=l.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(Me,l,void 0,(l.current.flags&128)===128)}catch{}if(y!==null){l=F.T,S=W.p,W.p=2,F.T=null;try{for(var w=a.onRecoverableError,z=0;z<y.length;z++){var k=y[z];w(k.value,{componentStack:k.stack})}}finally{F.T=l,W.p=S}}(Cr&3)!==0&&Ll(),zl(a),S=a.pendingLanes,(p&4194090)!==0&&(S&42)!==0?a===yc?Ka++:(Ka=0,yc=a):Ka=0,Tg(0)}}function Dr(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,gu(l)))}function Ll(a){return ht(),mt(),Wt(),Ul()}function Ul(){if(Xi!==5)return!1;var a=Ns,l=zo;zo=0;var p=ai(Cr),y=F.T,S=W.p;try{W.p=32>p?32:p,F.T=null,p=ch,ch=null;var w=Ns,z=Cr;if(Xi=0,Yn=Ns=null,Cr=0,(Ln&6)!==0)throw Error(n(331));var k=Ln;if(Ln|=4,Sg(w.current),Yd(w,w.current,z,p),Ln=k,Tg(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(Me,w)}catch{}return!0}finally{W.p=S,F.T=y,Dr(a,l)}}function be(a,l,p){l=ps(p,l),l=Gd(a.stateNode,l,2),a=Ao(a,l,2),a!==null&&(ke(a,2),zl(a))}function oe(a,l,p){if(a.tag===3)be(a,a,p);else for(;l!==null;){if(l.tag===3){be(l,a,p);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Rr===null||!Rr.has(y))){a=ps(p,a),p=Rv(2),y=Ao(l,p,2),y!==null&&(kd(p,y,l,a),ke(y,2),zl(y));break}}l=l.return}}function Re(a,l,p){var y=a.pingCache;if(y===null){y=a.pingCache=new Eg;var S=new Set;y.set(l,S)}else S=y.get(l),S===void 0&&(S=new Set,y.set(l,S));S.has(p)||(Pu=!0,S.add(p),a=Qe.bind(null,a,l,p),l.then(a,a))}function Qe(a,l,p){var y=a.pingCache;y!==null&&y.delete(l),a.pingedLanes|=a.suspendedLanes&p,a.warmLanes&=~p,Yt===a&&(Ot&p)===p&&(si===4||si===3&&(Ot&62914560)===Ot&&300>Pe()-kn?(Ln&2)===0&&Ol(a,0):gc|=p,wn===Ot&&(wn=0)),zl(a)}function Mt(a,l){l===0&&(l=ct()),a=bo(a,l),a!==null&&(ke(a,l),zl(a))}function ri(a){var l=a.memoizedState,p=0;l!==null&&(p=l.retryLane),Mt(a,p)}function Ht(a,l){var p=0;switch(a.tag){case 13:var y=a.stateNode,S=a.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(n(314))}y!==null&&y.delete(l),Mt(a,p)}function Nn(a,l){return Nt(a,l)}var Ai=null,hn=null,Ja=!1,Qd=!1,Db=!1,fh=0;function zl(a){a!==hn&&a.next===null&&(hn===null?Ai=hn=a:hn=hn.next=a),Qd=!0,Ja||(Ja=!0,ez())}function Tg(a,l){if(!Db&&Qd){Db=!0;do for(var p=!1,y=Ai;y!==null;){if(a!==0){var S=y.pendingLanes;if(S===0)var w=0;else{var z=y.suspendedLanes,k=y.pingedLanes;w=(1<<31-tt(42|a)+1)-1,w&=S&~(z&~k),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(p=!0,HA(y,w))}else w=Ot,w=Xt(y,y===Yt?w:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(w&3)===0||wt(y,w)||(p=!0,HA(y,w));y=y.next}while(p);Db=!1}}function JU(){IA()}function IA(){Qd=Ja=!1;var a=0;fh!==0&&(lz()&&(a=fh),fh=0);for(var l=Pe(),p=null,y=Ai;y!==null;){var S=y.next,w=BA(y,l);w===0?(y.next=null,p===null?Ai=S:p.next=S,S===null&&(hn=p)):(p=y,(a!==0||(w&3)!==0)&&(Qd=!0)),y=S}Tg(a)}function BA(a,l){for(var p=a.suspendedLanes,y=a.pingedLanes,S=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var z=31-tt(w),k=1<<z,J=S[z];J===-1?((k&p)===0||(k&y)!==0)&&(S[z]=bn(k,l)):J<=l&&(a.expiredLanes|=k),w&=~k}if(l=Yt,p=Ot,p=Xt(a,a===l?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,p===0||a===l&&(en===2||en===9)||a.cancelPendingCommit!==null)return y!==null&&y!==null&&te(y),a.callbackNode=null,a.callbackPriority=0;if((p&3)===0||wt(a,p)){if(l=p&-p,l===a.callbackPriority)return l;switch(y!==null&&te(y),ai(p)){case 2:case 8:p=Ne;break;case 32:p=Y;break;case 268435456:p=Q;break;default:p=Y}return y=FA.bind(null,a),p=Nt(p,y),a.callbackPriority=l,a.callbackNode=p,l}return y!==null&&y!==null&&te(y),a.callbackPriority=2,a.callbackNode=null,2}function FA(a,l){if(Xi!==0&&Xi!==5)return a.callbackNode=null,a.callbackPriority=0,null;var p=a.callbackNode;if(Ll()&&a.callbackNode!==p)return null;var y=Ot;return y=Xt(a,a===Yt?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(Iu(a,y,l),BA(a,Pe()),a.callbackNode!=null&&a.callbackNode===p?FA.bind(null,a):null)}function HA(a,l){if(Ll())return null;Iu(a,l,!0)}function ez(){uz(function(){(Ln&6)!==0?Nt(Je,JU):IA()})}function Ob(){return fh===0&&(fh=ue()),fh}function VA(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ef(""+a)}function GA(a,l){var p=l.ownerDocument.createElement("input");return p.name=l.name,p.value=l.value,a.id&&p.setAttribute("form",a.id),l.parentNode.insertBefore(p,l),a=new FormData(a),p.parentNode.removeChild(p),a}function tz(a,l,p,y,S){if(l==="submit"&&p&&p.stateNode===S){var w=VA((S[Vi]||null).action),z=y.submitter;z&&(l=(l=z[Vi]||null)?VA(l.formAction):z.getAttribute("formAction"),l!==null&&(w=l,z=null));var k=new iu("action","action",null,y,S);a.push({event:k,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(fh!==0){var J=z?GA(S,z):new FormData(S);yg(p,{pending:!0,data:J,method:S.method,action:w},null,J)}}else typeof w=="function"&&(k.preventDefault(),J=z?GA(S,z):new FormData(S),yg(p,{pending:!0,data:J,method:S.method,action:w},w,J))},currentTarget:S}]})}}for(var Lb=0;Lb<Bf.length;Lb++){var Ub=Bf[Lb],nz=Ub.toLowerCase(),iz=Ub[0].toUpperCase()+Ub.slice(1);Qi(nz,"on"+iz)}Qi(Is,"onAnimationEnd"),Qi(Gm,"onAnimationIteration"),Qi(Qs,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(Hy,"onTransitionRun"),Qi(xo,"onTransitionStart"),Qi(fu,"onTransitionCancel"),Qi(_o,"onTransitionEnd"),$("onMouseEnter",["mouseout","mouseover"]),$("onMouseLeave",["mouseout","mouseover"]),$("onPointerEnter",["pointerout","pointerover"]),$("onPointerLeave",["pointerout","pointerover"]),da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),da("onBeforeInput",["compositionend","keypress","textInput","paste"]),da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sz=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mg));function kA(a,l){l=(l&4)!==0;for(var p=0;p<a.length;p++){var y=a[p],S=y.event;y=y.listeners;e:{var w=void 0;if(l)for(var z=y.length-1;0<=z;z--){var k=y[z],J=k.instance,_e=k.currentTarget;if(k=k.listener,J!==w&&S.isPropagationStopped())break e;w=k,S.currentTarget=_e;try{w(S)}catch(Ve){sc(Ve)}S.currentTarget=null,w=J}else for(z=0;z<y.length;z++){if(k=y[z],J=k.instance,_e=k.currentTarget,k=k.listener,J!==w&&S.isPropagationStopped())break e;w=k,S.currentTarget=_e;try{w(S)}catch(Ve){sc(Ve)}S.currentTarget=null,w=J}}}}function yn(a,l){var p=l[Ys];p===void 0&&(p=l[Ys]=new Set);var y=a+"__bubble";p.has(y)||($A(l,a,2,!1),p.add(y))}function zb(a,l,p){var y=0;l&&(y|=4),$A(p,a,y,l)}var Ov="_reactListening"+Math.random().toString(36).slice(2);function Pb(a){if(!a[Ov]){a[Ov]=!0,Qc.forEach(function(p){p!=="selectionchange"&&(sz.has(p)||zb(p,!1,a),zb(p,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Ov]||(l[Ov]=!0,zb("selectionchange",!1,l))}}function $A(a,l,p,y){switch(pw(l)){case 2:var S=Dz;break;case 8:S=Oz;break;default:S=Zb}p=S.bind(null,l,p,a),S=void 0,!Mf||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),y?S!==void 0?a.addEventListener(l,p,{capture:!0,passive:S}):a.addEventListener(l,p,!0):S!==void 0?a.addEventListener(l,p,{passive:S}):a.addEventListener(l,p,!1)}function Ib(a,l,p,y,S){var w=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var z=y.tag;if(z===3||z===4){var k=y.stateNode.containerInfo;if(k===S)break;if(z===4)for(z=y.return;z!==null;){var J=z.tag;if((J===3||J===4)&&z.stateNode.containerInfo===S)return;z=z.return}for(;k!==null;){if(z=fa(k),z===null)return;if(J=z.tag,J===5||J===6||J===26||J===27){y=w=z;continue e}k=k.parentNode}}y=y.return}Mm(function(){var _e=w,Ve=sd(p),$e=[];e:{var Se=gd.get(a);if(Se!==void 0){var we=iu,kt=a;switch(a){case"keypress":if(il(p)===0)break e;case"keydown":case"keyup":we=Nm;break;case"focusin":kt="focus",we=ad;break;case"focusout":kt="blur",we=ad;break;case"beforeblur":case"afterblur":we=ad;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Rm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=xb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=Om;break;case Is:case Gm:case Qs:we=My;break;case _o:we=mo;break;case"scroll":case"scrollend":we=Sy;break;case"wheel":we=_b;break;case"copy":case"cut":case"paste":we=wy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=ld;break;case"toggle":case"beforetoggle":we=rl}var It=(l&4)!==0,ni=!It&&(a==="scroll"||a==="scrollend"),me=It?Se!==null?Se+"Capture":null:Se;It=[];for(var le=_e,xe;le!==null;){var Ge=le;if(xe=Ge.stateNode,Ge=Ge.tag,Ge!==5&&Ge!==26&&Ge!==27||xe===null||me===null||(Ge=eu(le,me),Ge!=null&&It.push(Ag(le,Ge,xe))),ni)break;le=le.return}0<It.length&&(Se=new we(Se,kt,null,p,Ve),$e.push({event:Se,listeners:It}))}}if((l&7)===0){e:{if(Se=a==="mouseover"||a==="pointerover",we=a==="mouseout"||a==="pointerout",Se&&p!==id&&(kt=p.relatedTarget||p.fromElement)&&(fa(kt)||kt[As]))break e;if((we||Se)&&(Se=Ve.window===Ve?Ve:(Se=Ve.ownerDocument)?Se.defaultView||Se.parentWindow:window,we?(kt=p.relatedTarget||p.toElement,we=_e,kt=kt?fa(kt):null,kt!==null&&(ni=r(kt),It=kt.tag,kt!==ni||It!==5&&It!==27&&It!==6)&&(kt=null)):(we=null,kt=_e),we!==kt)){if(It=Rm,Ge="onMouseLeave",me="onMouseEnter",le="mouse",(a==="pointerout"||a==="pointerover")&&(It=ld,Ge="onPointerLeave",me="onPointerEnter",le="pointer"),ni=we==null?Se:tl(we),xe=kt==null?Se:tl(kt),Se=new It(Ge,le+"leave",we,p,Ve),Se.target=ni,Se.relatedTarget=xe,Ge=null,fa(Ve)===_e&&(It=new It(me,le+"enter",kt,p,Ve),It.target=xe,It.relatedTarget=ni,Ge=It),ni=Ge,we&&kt)t:{for(It=we,me=kt,le=0,xe=It;xe;xe=Jd(xe))le++;for(xe=0,Ge=me;Ge;Ge=Jd(Ge))xe++;for(;0<le-xe;)It=Jd(It),le--;for(;0<xe-le;)me=Jd(me),xe--;for(;le--;){if(It===me||me!==null&&It===me.alternate)break t;It=Jd(It),me=Jd(me)}It=null}else It=null;we!==null&&XA($e,Se,we,It,!1),kt!==null&&ni!==null&&XA($e,ni,kt,It,!0)}}e:{if(Se=_e?tl(_e):window,we=Se.nodeName&&Se.nodeName.toLowerCase(),we==="select"||we==="input"&&Se.type==="file")var _t=ud;else if(Pm(Se))if(fd)_t=ll;else{_t=Iy;var mn=bb}else we=Se.nodeName,!we||we.toLowerCase()!=="input"||Se.type!=="checkbox"&&Se.type!=="radio"?_e&&nd(_e.elementType)&&(_t=ud):_t=zf;if(_t&&(_t=_t(a,_e))){Ws($e,_t,p,Ve);break e}mn&&mn(a,Se,_e),a==="focusout"&&_e&&Se.type==="number"&&_e.memoizedProps.value!=null&&us(Se,"number",Se.value)}switch(mn=_e?tl(_e):window,a){case"focusin":(Pm(mn)||mn.contentEditable==="true")&&(yo=mn,dd=_e,If=null);break;case"focusout":If=dd=yo=null;break;case"mousedown":pd=!0;break;case"contextmenu":case"mouseup":case"dragend":pd=!1,Vm($e,p,Ve);break;case"selectionchange":if(Hm)break;case"keydown":case"keyup":Vm($e,p,Ve)}var At;if(Cf)e:{switch(a){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else ol?Of(a,p)&&(Bt="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&(Bt="onCompositionStart");Bt&&(Df&&p.locale!=="ko"&&(ol||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&ol&&(At=wm()):(ho=Ve,Am="value"in ho?ho.value:ho.textContent,ol=!0)),mn=Lv(_e,Bt),0<mn.length&&(Bt=new od(Bt,a,null,p,Ve),$e.push({event:Bt,listeners:mn}),At?Bt.data=At:(At=Um(p),At!==null&&(Bt.data=At)))),(At=Nf?Lf(a,p):zm(a,p))&&(Bt=Lv(_e,"onBeforeInput"),0<Bt.length&&(mn=new od("onBeforeInput","beforeinput",null,p,Ve),$e.push({event:mn,listeners:Bt}),mn.data=At)),tz($e,a,_e,p,Ve)}kA($e,l)})}function Ag(a,l,p){return{instance:a,listener:l,currentTarget:p}}function Lv(a,l){for(var p=l+"Capture",y=[];a!==null;){var S=a,w=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||w===null||(S=eu(a,p),S!=null&&y.unshift(Ag(a,S,w)),S=eu(a,l),S!=null&&y.push(Ag(a,S,w))),a.tag===3)return y;a=a.return}return[]}function Jd(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function XA(a,l,p,y,S){for(var w=l._reactName,z=[];p!==null&&p!==y;){var k=p,J=k.alternate,_e=k.stateNode;if(k=k.tag,J!==null&&J===y)break;k!==5&&k!==26&&k!==27||_e===null||(J=_e,S?(_e=eu(p,w),_e!=null&&z.unshift(Ag(p,_e,J))):S||(_e=eu(p,w),_e!=null&&z.push(Ag(p,_e,J)))),p=p.return}z.length!==0&&a.push({event:l,listeners:z})}var rz=/\r\n?/g,az=/\u0000|\uFFFD/g;function qA(a){return(typeof a=="string"?a:""+a).replace(rz,`
`).replace(az,"")}function jA(a,l){return l=qA(l),qA(a)===l}function Uv(){}function ti(a,l,p,y,S,w){switch(p){case"children":typeof y=="string"?l==="body"||l==="textarea"&&y===""||zs(a,y):(typeof y=="number"||typeof y=="bigint")&&l!=="body"&&zs(a,""+y);break;case"className":rt(a,"class",y);break;case"tabIndex":rt(a,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":rt(a,p,y);break;case"style":Sf(a,y,w);break;case"data":if(l!=="object"){rt(a,"data",y);break}case"src":case"href":if(y===""&&(l!=="a"||p!=="href")){a.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(p);break}y=Ef(""+y),a.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){a.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(p==="formAction"?(l!=="input"&&ti(a,l,"name",S.name,S,null),ti(a,l,"formEncType",S.formEncType,S,null),ti(a,l,"formMethod",S.formMethod,S,null),ti(a,l,"formTarget",S.formTarget,S,null)):(ti(a,l,"encType",S.encType,S,null),ti(a,l,"method",S.method,S,null),ti(a,l,"target",S.target,S,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(p);break}y=Ef(""+y),a.setAttribute(p,y);break;case"onClick":y!=null&&(a.onclick=Uv);break;case"onScroll":y!=null&&yn("scroll",a);break;case"onScrollEnd":y!=null&&yn("scrollend",a);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(S.children!=null)throw Error(n(60));a.innerHTML=p}}break;case"multiple":a.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":a.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){a.removeAttribute("xlink:href");break}p=Ef(""+y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(p,""+y):a.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(p,""):a.removeAttribute(p);break;case"capture":case"download":y===!0?a.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(p,y):a.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?a.setAttribute(p,y):a.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?a.removeAttribute(p):a.setAttribute(p,y);break;case"popover":yn("beforetoggle",a),yn("toggle",a),je(a,"popover",y);break;case"xlinkActuate":ot(a,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ot(a,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ot(a,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ot(a,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ot(a,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ot(a,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ot(a,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ot(a,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ot(a,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":je(a,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Em.get(p)||p,je(a,p,y))}}function Bb(a,l,p,y,S,w){switch(p){case"style":Sf(a,y,w);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(S.children!=null)throw Error(n(60));a.innerHTML=p}}break;case"children":typeof y=="string"?zs(a,y):(typeof y=="number"||typeof y=="bigint")&&zs(a,""+y);break;case"onScroll":y!=null&&yn("scroll",a);break;case"onScrollEnd":y!=null&&yn("scrollend",a);break;case"onClick":y!=null&&(a.onclick=Uv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jc.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(S=p.endsWith("Capture"),l=p.slice(2,S?p.length-7:void 0),w=a[Vi]||null,w=w!=null?w[p]:null,typeof w=="function"&&a.removeEventListener(l,w,S),typeof y=="function")){typeof w!="function"&&w!==null&&(p in a?a[p]=null:a.hasAttribute(p)&&a.removeAttribute(p)),a.addEventListener(l,y,S);break e}p in a?a[p]=y:y===!0?a.setAttribute(p,""):je(a,p,y)}}}function $s(a,l,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yn("error",a),yn("load",a);var y=!1,S=!1,w;for(w in p)if(p.hasOwnProperty(w)){var z=p[w];if(z!=null)switch(w){case"src":y=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:ti(a,l,w,z,p,null)}}S&&ti(a,l,"srcSet",p.srcSet,p,null),y&&ti(a,l,"src",p.src,p,null);return;case"input":yn("invalid",a);var k=w=z=S=null,J=null,_e=null;for(y in p)if(p.hasOwnProperty(y)){var Ve=p[y];if(Ve!=null)switch(y){case"name":S=Ve;break;case"type":z=Ve;break;case"checked":J=Ve;break;case"defaultChecked":_e=Ve;break;case"value":w=Ve;break;case"defaultValue":k=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(n(137,l));break;default:ti(a,l,y,Ve,p,null)}}Gn(a,w,k,J,_e,z,S,!1),hi(a);return;case"select":yn("invalid",a),y=z=w=null;for(S in p)if(p.hasOwnProperty(S)&&(k=p[S],k!=null))switch(S){case"value":w=k;break;case"defaultValue":z=k;break;case"multiple":y=k;default:ti(a,l,S,k,p,null)}l=w,p=z,a.multiple=!!y,l!=null?Li(a,!!y,l,!1):p!=null&&Li(a,!!y,p,!0);return;case"textarea":yn("invalid",a),w=S=y=null;for(z in p)if(p.hasOwnProperty(z)&&(k=p[z],k!=null))switch(z){case"value":y=k;break;case"defaultValue":S=k;break;case"children":w=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(n(91));break;default:ti(a,l,z,k,p,null)}Ki(a,y,S,w),hi(a);return;case"option":for(J in p)if(p.hasOwnProperty(J)&&(y=p[J],y!=null))switch(J){case"selected":a.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:ti(a,l,J,y,p,null)}return;case"dialog":yn("beforetoggle",a),yn("toggle",a),yn("cancel",a),yn("close",a);break;case"iframe":case"object":yn("load",a);break;case"video":case"audio":for(y=0;y<Mg.length;y++)yn(Mg[y],a);break;case"image":yn("error",a),yn("load",a);break;case"details":yn("toggle",a);break;case"embed":case"source":case"link":yn("error",a),yn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in p)if(p.hasOwnProperty(_e)&&(y=p[_e],y!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:ti(a,l,_e,y,p,null)}return;default:if(nd(l)){for(Ve in p)p.hasOwnProperty(Ve)&&(y=p[Ve],y!==void 0&&Bb(a,l,Ve,y,p,void 0));return}}for(k in p)p.hasOwnProperty(k)&&(y=p[k],y!=null&&ti(a,l,k,y,p,null))}function oz(a,l,p,y){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,w=null,z=null,k=null,J=null,_e=null,Ve=null;for(we in p){var $e=p[we];if(p.hasOwnProperty(we)&&$e!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":J=$e;default:y.hasOwnProperty(we)||ti(a,l,we,null,y,$e)}}for(var Se in y){var we=y[Se];if($e=p[Se],y.hasOwnProperty(Se)&&(we!=null||$e!=null))switch(Se){case"type":w=we;break;case"name":S=we;break;case"checked":_e=we;break;case"defaultChecked":Ve=we;break;case"value":z=we;break;case"defaultValue":k=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(n(137,l));break;default:we!==$e&&ti(a,l,Se,we,y,$e)}}za(a,z,k,J,_e,Ve,w,S);return;case"select":we=z=k=Se=null;for(w in p)if(J=p[w],p.hasOwnProperty(w)&&J!=null)switch(w){case"value":break;case"multiple":we=J;default:y.hasOwnProperty(w)||ti(a,l,w,null,y,J)}for(S in y)if(w=y[S],J=p[S],y.hasOwnProperty(S)&&(w!=null||J!=null))switch(S){case"value":Se=w;break;case"defaultValue":k=w;break;case"multiple":z=w;default:w!==J&&ti(a,l,S,w,y,J)}l=k,p=z,y=we,Se!=null?Li(a,!!p,Se,!1):!!y!=!!p&&(l!=null?Li(a,!!p,l,!0):Li(a,!!p,p?[]:"",!1));return;case"textarea":we=Se=null;for(k in p)if(S=p[k],p.hasOwnProperty(k)&&S!=null&&!y.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:ti(a,l,k,null,y,S)}for(z in y)if(S=y[z],w=p[z],y.hasOwnProperty(z)&&(S!=null||w!=null))switch(z){case"value":Se=S;break;case"defaultValue":we=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:S!==w&&ti(a,l,z,S,y,w)}Zi(a,Se,we);return;case"option":for(var kt in p)if(Se=p[kt],p.hasOwnProperty(kt)&&Se!=null&&!y.hasOwnProperty(kt))switch(kt){case"selected":a.selected=!1;break;default:ti(a,l,kt,null,y,Se)}for(J in y)if(Se=y[J],we=p[J],y.hasOwnProperty(J)&&Se!==we&&(Se!=null||we!=null))switch(J){case"selected":a.selected=Se&&typeof Se!="function"&&typeof Se!="symbol";break;default:ti(a,l,J,Se,y,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var It in p)Se=p[It],p.hasOwnProperty(It)&&Se!=null&&!y.hasOwnProperty(It)&&ti(a,l,It,null,y,Se);for(_e in y)if(Se=y[_e],we=p[_e],y.hasOwnProperty(_e)&&Se!==we&&(Se!=null||we!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(n(137,l));break;default:ti(a,l,_e,Se,y,we)}return;default:if(nd(l)){for(var ni in p)Se=p[ni],p.hasOwnProperty(ni)&&Se!==void 0&&!y.hasOwnProperty(ni)&&Bb(a,l,ni,void 0,y,Se);for(Ve in y)Se=y[Ve],we=p[Ve],!y.hasOwnProperty(Ve)||Se===we||Se===void 0&&we===void 0||Bb(a,l,Ve,Se,y,we);return}}for(var me in p)Se=p[me],p.hasOwnProperty(me)&&Se!=null&&!y.hasOwnProperty(me)&&ti(a,l,me,null,y,Se);for($e in y)Se=y[$e],we=p[$e],!y.hasOwnProperty($e)||Se===we||Se==null&&we==null||ti(a,l,$e,Se,y,we)}var Fb=null,Hb=null;function zv(a){return a.nodeType===9?a:a.ownerDocument}function YA(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function WA(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function Vb(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Gb=null;function lz(){var a=window.event;return a&&a.type==="popstate"?a===Gb?!1:(Gb=a,!0):(Gb=null,!1)}var ZA=typeof setTimeout=="function"?setTimeout:void 0,cz=typeof clearTimeout=="function"?clearTimeout:void 0,KA=typeof Promise=="function"?Promise:void 0,uz=typeof queueMicrotask=="function"?queueMicrotask:typeof KA<"u"?function(a){return KA.resolve(null).then(a).catch(fz)}:ZA;function fz(a){setTimeout(function(){throw a})}function Fu(a){return a==="head"}function QA(a,l){var p=l,y=0,S=0;do{var w=p.nextSibling;if(a.removeChild(p),w&&w.nodeType===8)if(p=w.data,p==="/$"){if(0<y&&8>y){p=y;var z=a.ownerDocument;if(p&1&&wg(z.documentElement),p&2&&wg(z.body),p&4)for(p=z.head,wg(p),z=p.firstChild;z;){var k=z.nextSibling,J=z.nodeName;z[ua]||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&z.rel.toLowerCase()==="stylesheet"||p.removeChild(z),z=k}}if(S===0){a.removeChild(w),zg(l);return}S--}else p==="$"||p==="$?"||p==="$!"?S++:y=p.charCodeAt(0)-48;else y=0;p=w}while(p);zg(l)}function kb(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var p=l;switch(l=l.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":kb(p),Vn(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}a.removeChild(p)}}function hz(a,l,p,y){for(;a.nodeType===1;){var S=p;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!y&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(y){if(!a[ua])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==S.rel||a.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||a.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||a.getAttribute("title")!==(S.title==null?null:S.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(S.src==null?null:S.src)||a.getAttribute("type")!==(S.type==null?null:S.type)||a.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var w=S.name==null?null:""+S.name;if(S.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=Po(a.nextSibling),a===null)break}return null}function dz(a,l,p){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!p||(a=Po(a.nextSibling),a===null))return null;return a}function $b(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function pz(a,l){var p=a.ownerDocument;if(a.data!=="$?"||p.readyState==="complete")l();else{var y=function(){l(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),a._reactRetry=y}}function Po(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return a}var Xb=null;function JA(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return a;l--}else p==="/$"&&l++}a=a.previousSibling}return null}function ew(a,l,p){switch(l=zv(p),a){case"html":if(a=l.documentElement,!a)throw Error(n(452));return a;case"head":if(a=l.head,!a)throw Error(n(453));return a;case"body":if(a=l.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function wg(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);Vn(a)}var eo=new Map,tw=new Set;function Pv(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var xc=W.d;W.d={f:mz,r:gz,D:yz,C:vz,L:xz,m:_z,X:Sz,S:bz,M:Ez};function mz(){var a=xc.f(),l=Qa();return a||l}function gz(a){var l=ha(a);l!==null&&l.tag===5&&l.type==="form"?mv(l):xc.r(a)}var ep=typeof document>"u"?null:document;function nw(a,l,p){var y=ep;if(y&&typeof l=="string"&&l){var S=$n(l);S='link[rel="'+a+'"][href="'+S+'"]',typeof p=="string"&&(S+='[crossorigin="'+p+'"]'),tw.has(S)||(tw.add(S),a={rel:a,crossOrigin:p,href:l},y.querySelector(S)===null&&(l=y.createElement("link"),$s(l,"link",a),Oi(l),y.head.appendChild(l)))}}function yz(a){xc.D(a),nw("dns-prefetch",a,null)}function vz(a,l){xc.C(a,l),nw("preconnect",a,l)}function xz(a,l,p){xc.L(a,l,p);var y=ep;if(y&&a&&l){var S='link[rel="preload"][as="'+$n(l)+'"]';l==="image"&&p&&p.imageSrcSet?(S+='[imagesrcset="'+$n(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(S+='[imagesizes="'+$n(p.imageSizes)+'"]')):S+='[href="'+$n(a)+'"]';var w=S;switch(l){case"style":w=tp(a);break;case"script":w=np(a)}eo.has(w)||(a=m({rel:"preload",href:l==="image"&&p&&p.imageSrcSet?void 0:a,as:l},p),eo.set(w,a),y.querySelector(S)!==null||l==="style"&&y.querySelector(Rg(w))||l==="script"&&y.querySelector(Cg(w))||(l=y.createElement("link"),$s(l,"link",a),Oi(l),y.head.appendChild(l)))}}function _z(a,l){xc.m(a,l);var p=ep;if(p&&a){var y=l&&typeof l.as=="string"?l.as:"script",S='link[rel="modulepreload"][as="'+$n(y)+'"][href="'+$n(a)+'"]',w=S;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=np(a)}if(!eo.has(w)&&(a=m({rel:"modulepreload",href:a},l),eo.set(w,a),p.querySelector(S)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Cg(w)))return}y=p.createElement("link"),$s(y,"link",a),Oi(y),p.head.appendChild(y)}}}function bz(a,l,p){xc.S(a,l,p);var y=ep;if(y&&a){var S=fo(y).hoistableStyles,w=tp(a);l=l||"default";var z=S.get(w);if(!z){var k={loading:0,preload:null};if(z=y.querySelector(Rg(w)))k.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":l},p),(p=eo.get(w))&&qb(a,p);var J=z=y.createElement("link");Oi(J),$s(J,"link",a),J._p=new Promise(function(_e,Ve){J.onload=_e,J.onerror=Ve}),J.addEventListener("load",function(){k.loading|=1}),J.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Iv(z,l,y)}z={type:"stylesheet",instance:z,count:1,state:k},S.set(w,z)}}}function Sz(a,l){xc.X(a,l);var p=ep;if(p&&a){var y=fo(p).hoistableScripts,S=np(a),w=y.get(S);w||(w=p.querySelector(Cg(S)),w||(a=m({src:a,async:!0},l),(l=eo.get(S))&&jb(a,l),w=p.createElement("script"),Oi(w),$s(w,"link",a),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(S,w))}}function Ez(a,l){xc.M(a,l);var p=ep;if(p&&a){var y=fo(p).hoistableScripts,S=np(a),w=y.get(S);w||(w=p.querySelector(Cg(S)),w||(a=m({src:a,async:!0,type:"module"},l),(l=eo.get(S))&&jb(a,l),w=p.createElement("script"),Oi(w),$s(w,"link",a),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(S,w))}}function iw(a,l,p,y){var S=(S=Be.current)?Pv(S):null;if(!S)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(l=tp(p.href),p=fo(S).hoistableStyles,y=p.get(l),y||(y={type:"style",instance:null,count:0,state:null},p.set(l,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){a=tp(p.href);var w=fo(S).hoistableStyles,z=w.get(a);if(z||(S=S.ownerDocument||S,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,z),(w=S.querySelector(Rg(a)))&&!w._p&&(z.instance=w,z.state.loading=5),eo.has(a)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},eo.set(a,p),w||Tz(S,a,p,z.state))),l&&y===null)throw Error(n(528,""));return z}if(l&&y!==null)throw Error(n(529,""));return null;case"script":return l=p.async,p=p.src,typeof p=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=np(p),p=fo(S).hoistableScripts,y=p.get(l),y||(y={type:"script",instance:null,count:0,state:null},p.set(l,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function tp(a){return'href="'+$n(a)+'"'}function Rg(a){return'link[rel="stylesheet"]['+a+"]"}function sw(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function Tz(a,l,p,y){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?y.loading=1:(l=a.createElement("link"),y.preload=l,l.addEventListener("load",function(){return y.loading|=1}),l.addEventListener("error",function(){return y.loading|=2}),$s(l,"link",p),Oi(l),a.head.appendChild(l))}function np(a){return'[src="'+$n(a)+'"]'}function Cg(a){return"script[async]"+a}function rw(a,l,p){if(l.count++,l.instance===null)switch(l.type){case"style":var y=a.querySelector('style[data-href~="'+$n(p.href)+'"]');if(y)return l.instance=y,Oi(y),y;var S=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement("style"),Oi(y),$s(y,"style",S),Iv(y,p.precedence,a),l.instance=y;case"stylesheet":S=tp(p.href);var w=a.querySelector(Rg(S));if(w)return l.state.loading|=4,l.instance=w,Oi(w),w;y=sw(p),(S=eo.get(S))&&qb(y,S),w=(a.ownerDocument||a).createElement("link"),Oi(w);var z=w;return z._p=new Promise(function(k,J){z.onload=k,z.onerror=J}),$s(w,"link",y),l.state.loading|=4,Iv(w,p.precedence,a),l.instance=w;case"script":return w=np(p.src),(S=a.querySelector(Cg(w)))?(l.instance=S,Oi(S),S):(y=p,(S=eo.get(w))&&(y=m({},p),jb(y,S)),a=a.ownerDocument||a,S=a.createElement("script"),Oi(S),$s(S,"link",y),a.head.appendChild(S),l.instance=S);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(y=l.instance,l.state.loading|=4,Iv(y,p.precedence,a));return l.instance}function Iv(a,l,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=y.length?y[y.length-1]:null,w=S,z=0;z<y.length;z++){var k=y[z];if(k.dataset.precedence===l)w=k;else if(w!==S)break}w?w.parentNode.insertBefore(a,w.nextSibling):(l=p.nodeType===9?p.head:p,l.insertBefore(a,l.firstChild))}function qb(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function jb(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var Bv=null;function aw(a,l,p){if(Bv===null){var y=new Map,S=Bv=new Map;S.set(p,y)}else S=Bv,y=S.get(p),y||(y=new Map,S.set(p,y));if(y.has(a))return y;for(y.set(a,null),p=p.getElementsByTagName(a),S=0;S<p.length;S++){var w=p[S];if(!(w[ua]||w[Di]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var z=w.getAttribute(l)||"";z=a+z;var k=y.get(z);k?k.push(w):y.set(z,[w])}}return y}function ow(a,l,p){a=a.ownerDocument||a,a.head.insertBefore(p,l==="title"?a.querySelector("head > title"):null)}function Mz(a,l,p){if(p===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function lw(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Ng=null;function Az(){}function wz(a,l,p){if(Ng===null)throw Error(n(475));var y=Ng;if(l.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var S=tp(p.href),w=a.querySelector(Rg(S));if(w){a=w._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(y.count++,y=Fv.bind(y),a.then(y,y)),l.state.loading|=4,l.instance=w,Oi(w);return}w=a.ownerDocument||a,p=sw(p),(S=eo.get(S))&&qb(p,S),w=w.createElement("link"),Oi(w);var z=w;z._p=new Promise(function(k,J){z.onload=k,z.onerror=J}),$s(w,"link",p),l.instance=w}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(y.count++,l=Fv.bind(y),a.addEventListener("load",l),a.addEventListener("error",l))}}function Rz(){if(Ng===null)throw Error(n(475));var a=Ng;return a.stylesheets&&a.count===0&&Yb(a,a.stylesheets),0<a.count?function(l){var p=setTimeout(function(){if(a.stylesheets&&Yb(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(p)}}:null}function Fv(){if(this.count--,this.count===0){if(this.stylesheets)Yb(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Hv=null;function Yb(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Hv=new Map,l.forEach(Cz,a),Hv=null,Fv.call(a))}function Cz(a,l){if(!(l.state.loading&4)){var p=Hv.get(a);if(p)var y=p.get(null);else{p=new Map,Hv.set(a,p);for(var S=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<S.length;w++){var z=S[w];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(p.set(z.dataset.precedence,z),y=z)}y&&p.set(null,y)}S=l.instance,z=S.getAttribute("data-precedence"),w=p.get(z)||y,w===y&&p.set(null,S),p.set(z,S),this.count++,y=Fv.bind(this),S.addEventListener("load",y),S.addEventListener("error",y),w?w.parentNode.insertBefore(S,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(S,a.firstChild)),l.state.loading|=4}}var Dg={$$typeof:D,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function Nz(a,l,p,y,S,w,z,k){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oe(0),this.hiddenUpdates=Oe(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=w,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function cw(a,l,p,y,S,w,z,k,J,_e,Ve,$e){return a=new Nz(a,l,p,z,k,J,_e,$e),l=1,w===!0&&(l|=24),w=Js(3,null,null,l),a.current=w,w.stateNode=a,l=Ed(),l.refCount++,a.pooledCache=l,l.refCount++,w.memoizedState={element:y,isDehydrated:p,cache:l},tg(w),a}function uw(a){return a?(a=fl,a):fl}function fw(a,l,p,y,S,w){S=uw(S),y.context===null?y.context=S:y.pendingContext=S,y=Va(l),y.payload={element:p},w=w===void 0?null:w,w!==null&&(y.callback=w),p=Ao(a,y,l),p!==null&&(ks(p,a,l),tc(p,a,l))}function hw(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<l?p:l}}function Wb(a,l){hw(a,l),(a=a.alternate)&&hw(a,l)}function dw(a){if(a.tag===13){var l=bo(a,67108864);l!==null&&ks(l,a,67108864),Wb(a,67108864)}}var Vv=!0;function Dz(a,l,p,y){var S=F.T;F.T=null;var w=W.p;try{W.p=2,Zb(a,l,p,y)}finally{W.p=w,F.T=S}}function Oz(a,l,p,y){var S=F.T;F.T=null;var w=W.p;try{W.p=8,Zb(a,l,p,y)}finally{W.p=w,F.T=S}}function Zb(a,l,p,y){if(Vv){var S=Kb(y);if(S===null)Ib(a,l,y,Gv,p),mw(a,y);else if(Uz(S,a,l,p,y))y.stopPropagation();else if(mw(a,y),l&4&&-1<Lz.indexOf(a)){for(;S!==null;){var w=ha(S);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var z=st(w.pendingLanes);if(z!==0){var k=w;for(k.pendingLanes|=2,k.entangledLanes|=2;z;){var J=1<<31-tt(z);k.entanglements[1]|=J,z&=~J}zl(w),(Ln&6)===0&&(Cs=Pe()+500,Tg(0))}}break;case 13:k=bo(w,2),k!==null&&ks(k,w,2),Qa(),Wb(w,2)}if(w=Kb(y),w===null&&Ib(a,l,y,Gv,p),w===S)break;S=w}S!==null&&y.stopPropagation()}else Ib(a,l,y,null,p)}}function Kb(a){return a=sd(a),Qb(a)}var Gv=null;function Qb(a){if(Gv=null,a=fa(a),a!==null){var l=r(a);if(l===null)a=null;else{var p=l.tag;if(p===13){if(a=o(l),a!==null)return a;a=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return Gv=a,null}function pw(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ie()){case Je:return 2;case Ne:return 8;case Y:case H:return 32;case Q:return 268435456;default:return 32}default:return 32}}var Jb=!1,Hu=null,Vu=null,Gu=null,Og=new Map,Lg=new Map,ku=[],Lz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mw(a,l){switch(a){case"focusin":case"focusout":Hu=null;break;case"dragenter":case"dragleave":Vu=null;break;case"mouseover":case"mouseout":Gu=null;break;case"pointerover":case"pointerout":Og.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lg.delete(l.pointerId)}}function Ug(a,l,p,y,S,w){return a===null||a.nativeEvent!==w?(a={blockedOn:l,domEventName:p,eventSystemFlags:y,nativeEvent:w,targetContainers:[S]},l!==null&&(l=ha(l),l!==null&&dw(l)),a):(a.eventSystemFlags|=y,l=a.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),a)}function Uz(a,l,p,y,S){switch(l){case"focusin":return Hu=Ug(Hu,a,l,p,y,S),!0;case"dragenter":return Vu=Ug(Vu,a,l,p,y,S),!0;case"mouseover":return Gu=Ug(Gu,a,l,p,y,S),!0;case"pointerover":var w=S.pointerId;return Og.set(w,Ug(Og.get(w)||null,a,l,p,y,S)),!0;case"gotpointercapture":return w=S.pointerId,Lg.set(w,Ug(Lg.get(w)||null,a,l,p,y,S)),!0}return!1}function gw(a){var l=fa(a.target);if(l!==null){var p=r(l);if(p!==null){if(l=p.tag,l===13){if(l=o(p),l!==null){a.blockedOn=l,js(a.priority,function(){if(p.tag===13){var y=xi();y=Pn(y);var S=bo(p,y);S!==null&&ks(S,p,y),Wb(p,y)}});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function kv(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var p=Kb(a.nativeEvent);if(p===null){p=a.nativeEvent;var y=new p.constructor(p.type,p);id=y,p.target.dispatchEvent(y),id=null}else return l=ha(p),l!==null&&dw(l),a.blockedOn=p,!1;l.shift()}return!0}function yw(a,l,p){kv(a)&&p.delete(l)}function zz(){Jb=!1,Hu!==null&&kv(Hu)&&(Hu=null),Vu!==null&&kv(Vu)&&(Vu=null),Gu!==null&&kv(Gu)&&(Gu=null),Og.forEach(yw),Lg.forEach(yw)}function $v(a,l){a.blockedOn===l&&(a.blockedOn=null,Jb||(Jb=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zz)))}var Xv=null;function vw(a){Xv!==a&&(Xv=a,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Xv===a&&(Xv=null);for(var l=0;l<a.length;l+=3){var p=a[l],y=a[l+1],S=a[l+2];if(typeof y!="function"){if(Qb(y||p)===null)continue;break}var w=ha(p);w!==null&&(a.splice(l,3),l-=3,yg(w,{pending:!0,data:S,method:p.method,action:y},y,S))}}))}function zg(a){function l(J){return $v(J,a)}Hu!==null&&$v(Hu,a),Vu!==null&&$v(Vu,a),Gu!==null&&$v(Gu,a),Og.forEach(l),Lg.forEach(l);for(var p=0;p<ku.length;p++){var y=ku[p];y.blockedOn===a&&(y.blockedOn=null)}for(;0<ku.length&&(p=ku[0],p.blockedOn===null);)gw(p),p.blockedOn===null&&ku.shift();if(p=(a.ownerDocument||a).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var S=p[y],w=p[y+1],z=S[Vi]||null;if(typeof w=="function")z||vw(p);else if(z){var k=null;if(w&&w.hasAttribute("formAction")){if(S=w,z=w[Vi]||null)k=z.formAction;else if(Qb(S)!==null)continue}else k=z.action;typeof k=="function"?p[y+1]=k:(p.splice(y,3),y-=3),vw(p)}}}function eS(a){this._internalRoot=a}qv.prototype.render=eS.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(n(409));var p=l.current,y=xi();fw(p,y,a,l,null,null)},qv.prototype.unmount=eS.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;fw(a.current,2,null,a,null,null),Qa(),l[As]=null}};function qv(a){this._internalRoot=a}qv.prototype.unstable_scheduleHydration=function(a){if(a){var l=gn();a={blockedOn:null,target:a,priority:l};for(var p=0;p<ku.length&&l!==0&&l<ku[p].priority;p++);ku.splice(p,0,a),p===0&&gw(a)}};var xw=e.version;if(xw!=="19.1.0")throw Error(n(527,xw,"19.1.0"));W.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=f(l),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var Pz={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jv.isDisabled&&jv.supportsFiber)try{Me=jv.inject(Pz),et=jv}catch{}}return Ig.createRoot=function(a,l){if(!s(a))throw Error(n(299));var p=!1,y="",S=sh,w=Hd,z=wv,k=null;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(S=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(z=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(k=l.unstable_transitionCallbacks)),l=cw(a,1,!1,null,null,p,y,S,w,z,k,null),a[As]=l.current,Pb(a),new eS(l)},Ig.hydrateRoot=function(a,l,p){if(!s(a))throw Error(n(299));var y=!1,S="",w=sh,z=Hd,k=wv,J=null,_e=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(S=p.identifierPrefix),p.onUncaughtError!==void 0&&(w=p.onUncaughtError),p.onCaughtError!==void 0&&(z=p.onCaughtError),p.onRecoverableError!==void 0&&(k=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(J=p.unstable_transitionCallbacks),p.formState!==void 0&&(_e=p.formState)),l=cw(a,1,!0,l,p??null,y,S,w,z,k,J,_e),l.context=uw(null),p=l.current,y=xi(),y=Pn(y),S=Va(y),S.callback=null,Ao(p,S,y),p=y,l.current.lanes=p,ke(l,p),zl(l),a[As]=l.current,Pb(a),new qv(l)},Ig.version="19.1.0",Ig}var Cw;function jz(){if(Cw)return iS.exports;Cw=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),iS.exports=qz(),iS.exports}var Yz=jz();function Wi(){return Wi=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Wi.apply(null,arguments)}var b1=jN();const Wz=Kh(b1);function Zz(i,e){typeof i=="function"?i(e):i!=null&&(i.current=e)}function Kz(...i){return e=>i.forEach(t=>Zz(t,e))}const YN=V.forwardRef((i,e)=>{const{children:t,...n}=i,s=V.Children.toArray(t),r=s.find(Jz);if(r){const o=r.props.children,c=s.map(f=>f===r?V.Children.count(o)>1?V.Children.only(null):V.isValidElement(o)?o.props.children:null:f);return V.createElement(JE,Wi({},n,{ref:e}),V.isValidElement(o)?V.cloneElement(o,void 0,c):null)}return V.createElement(JE,Wi({},n,{ref:e}),t)});YN.displayName="Slot";const JE=V.forwardRef((i,e)=>{const{children:t,...n}=i;return V.isValidElement(t)?V.cloneElement(t,{...eP(n,t.props),ref:Kz(e,t.ref)}):V.Children.count(t)>1?V.Children.only(null):null});JE.displayName="SlotClone";const Qz=({children:i})=>V.createElement(V.Fragment,null,i);function Jz(i){return V.isValidElement(i)&&i.type===Qz}function eP(i,e){const t={...e};for(const n in e){const s=i[n],r=e[n];/^on[A-Z]/.test(n)?s&&r?t[n]=(...c)=>{r(...c),s(...c)}:s&&(t[n]=s):n==="style"?t[n]={...s,...r}:n==="className"&&(t[n]=[s,r].filter(Boolean).join(" "))}return{...i,...t}}const tP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],nP=tP.reduce((i,e)=>{const t=V.forwardRef((n,s)=>{const{asChild:r,...o}=n,c=r?YN:e;return V.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),V.createElement(c,Wi({},o,{ref:s}))});return t.displayName=`Primitive.${e}`,{...i,[e]:t}},{}),iP=V.forwardRef((i,e)=>{var t;const{container:n=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...s}=i;return n?Wz.createPortal(V.createElement(nP.div,Wi({},s,{ref:e})),n):null}),sP=iP;var Nw=Object.prototype.hasOwnProperty;function u_(i,e){var t,n;if(i===e)return!0;if(i&&e&&(t=i.constructor)===e.constructor){if(t===Date)return i.getTime()===e.getTime();if(t===RegExp)return i.toString()===e.toString();if(t===Array){if((n=i.length)===e.length)for(;n--&&u_(i[n],e[n]););return n===-1}if(!t||typeof i=="object"){n=0;for(t in i)if(Nw.call(i,t)&&++n&&!Nw.call(e,t)||!(t in e)||!u_(i[t],e[t]))return!1;return Object.keys(e).length===n}}return i!==i&&e!==e}function WN(i,e){if(Object.is(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;const t=Object.keys(i);if(t.length!==Object.keys(e).length)return!1;for(let n=0;n<t.length;n++)if(!Object.prototype.hasOwnProperty.call(e,t[n])||!Object.is(i[t[n]],e[t[n]]))return!1;return!0}var S1=function(e,t,n,s){this.name=e,this.fn=t,this.args=n,this.modifiers=s};S1.prototype._test=function(e){var t=this.fn;try{Pp(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return Pp(this.modifiers.slice(),t,this)(e)}catch{return!1}};S1.prototype._check=function(e){try{Pp(this.modifiers.slice(),this.fn,this)(e)}catch{if(Pp(this.modifiers.slice(),function(n){return n},this)(!1))return}if(!Pp(this.modifiers.slice(),this.fn,this)(e))throw null};S1.prototype._testAsync=function(e){var t=this;return new Promise(function(n,s){KN(t.modifiers.slice(),t.fn,t)(e).then(function(r){r?n(e):s(null)}).catch(function(r){return s(r)})})};function ZN(i,e){return e===void 0&&(e="simple"),typeof i=="object"?i[e]:i}function Pp(i,e,t){if(i.length){var n=i.shift(),s=Pp(i,e,t);return n.perform(s,t)}else return ZN(e)}function KN(i,e,t){if(i.length){var n=i.shift(),s=KN(i,e,t);return n.performAsync(s,t)}else return function(r){return Promise.resolve(ZN(e,"async")(r))}}var rP=function(e,t,n){this.name=e,this.perform=t,this.performAsync=n},eM=function(i){function e(t,n,s,r){for(var o=[],c=arguments.length-4;c-- >0;)o[c]=arguments[c+4];i.call(this,o),i.captureStackTrace&&i.captureStackTrace(this,e),this.rule=t,this.value=n,this.cause=s,this.target=r}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e,e}(Error),kl=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};kl.prototype._applyRule=function(e,t){var n=this;return function(){for(var s=[],r=arguments.length;r--;)s[r]=arguments[r];return n.chain.push(new S1(t,e.apply(n,s),s,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}};kl.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new rP(t,e.simple,e.async)),this};kl.prototype._clone=function(){return new kl(this.chain.slice(),this.nextRuleModifiers.slice())};kl.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};kl.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(n){try{n._check(e)}catch(s){t.push(new eM(n,e,s))}}),t};kl.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(n){throw new eM(t,e,n)}})};kl.prototype.testAsync=function(e){var t=this;return new Promise(function(n,s){QN(e,t.chain.slice(),n,s)})};function QN(i,e,t,n){if(e.length){var s=e.shift();s._testAsync(i).then(function(){QN(i,e,t,n)},function(r){n(new eM(s,i,r))})}else t(i)}var Dw=function(i,e){return e&&typeof i=="string"&&i.trim().length===0?!0:i==null};function aP(i,e){return e===void 0&&(e=!1),{simple:function(t){return Dw(t,e)||i.check(t)===void 0},async:function(t){return Dw(t,e)||i.testAsync(t)}}}function ra(){return typeof Proxy<"u"?JN(new kl):eT(new kl)}var D0={};ra.extend=function(i){Object.assign(D0,i)};ra.clearCustomRules=function(){D0={}};function JN(i){return new Proxy(i,{get:function(t,n){if(n in t)return t[n];var s=JN(i._clone());if(n in f_)return s._applyModifier(f_[n],n);if(n in D0)return s._applyRule(D0[n],n);if(n in tT)return s._applyRule(tT[n],n)}})}function eT(i){var e=function(s,r){return Object.keys(s).forEach(function(o){r[o]=function(){for(var c=[],f=arguments.length;f--;)c[f]=arguments[f];var d=eT(r._clone()),m=d._applyRule(s[o],o).apply(void 0,c);return m}}),r},t=e(tT,i),n=e(D0,t);return Object.keys(f_).forEach(function(s){Object.defineProperty(n,s,{get:function(){var r=eT(n._clone());return r._applyModifier(f_[s],s)}})}),n}var f_={not:{simple:function(i){return function(e){return!i(e)}},async:function(i){return function(e){return Promise.resolve(i(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(i){return function(e){return Yv(e).some(function(t){try{return i(t)}catch{return!1}})}},async:function(i){return function(e){return Promise.all(Yv(e).map(function(t){try{return i(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(i){return function(e){return e!==!1&&Yv(e).every(i)}},async:function(i){return function(e){return Promise.all(Yv(e).map(i)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(i,e){return function(t){return Ow(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i(t):i(t)}},async:function(i,e){return function(t){return Promise.resolve(i(t)).then(function(n){return Ow(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n:n}).catch(function(){return!1})}}}};function Ow(i){return i&&i.name==="schema"&&i.args.length>0&&typeof i.args[0]=="object"}function Yv(i){return typeof i=="string"?i.split(""):i}var tT={equal:function(i){return function(e){return e==i}},exact:function(i){return function(e){return e===i}},number:function(i){return i===void 0&&(i=!0),function(e){return typeof e=="number"&&(i||isFinite(e))}},integer:function(){return function(i){var e=Number.isInteger||oP;return e(i)}},numeric:function(){return function(i){return!isNaN(parseFloat(i))&&isFinite(i)}},string:function(){return ip("string")},boolean:function(){return ip("boolean")},undefined:function(){return ip("undefined")},null:function(){return ip("null")},array:function(){return ip("array")},object:function(){return ip("object")},instanceOf:function(i){return function(e){return e instanceof i}},pattern:function(i){return function(e){return i.test(e)}},lowercase:function(){return function(i){return typeof i=="boolean"||i===i.toLowerCase()&&i.trim()!==""}},uppercase:function(){return function(i){return i===i.toUpperCase()&&i.trim()!==""}},vowel:function(){return function(i){return/^[aeiou]+$/i.test(i)}},consonant:function(){return function(i){return/^(?=[^aeiou])([a-z]+)$/i.test(i)}},first:function(i){return function(e){return e[0]==i}},last:function(i){return function(e){return e[e.length-1]==i}},empty:function(){return function(i){return i.length===0}},length:function(i,e){return function(t){return t.length>=i&&t.length<=(e||i)}},minLength:function(i){return function(e){return e.length>=i}},maxLength:function(i){return function(e){return e.length<=i}},negative:function(){return function(i){return i<0}},positive:function(){return function(i){return i>=0}},between:function(i,e){return function(t){return t>=i&&t<=e}},range:function(i,e){return function(t){return t>=i&&t<=e}},lessThan:function(i){return function(e){return e<i}},lessThanOrEqual:function(i){return function(e){return e<=i}},greaterThan:function(i){return function(e){return e>i}},greaterThanOrEqual:function(i){return function(e){return e>=i}},even:function(){return function(i){return i%2===0}},odd:function(){return function(i){return i%2!==0}},includes:function(i){return function(e){return~e.indexOf(i)}},schema:function(i){return lP(i)},passesAnyOf:function(){for(var i=[],e=arguments.length;e--;)i[e]=arguments[e];return function(t){return i.some(function(n){return n.test(t)})}},optional:aP};function ip(i){return function(e){return Array.isArray(e)&&i==="array"||e===null&&i==="null"||typeof e===i}}function oP(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i}function lP(i){return{simple:function(e){var t=[];if(Object.keys(i).forEach(function(n){var s=i[n];try{s.check((e||{})[n])}catch(r){r.target=n,t.push(r)}}),t.length>0)throw t;return!0},async:function(e){var t=[],n=Object.keys(i).map(function(s){var r=i[s];return r.testAsync((e||{})[s]).catch(function(o){o.target=s,t.push(o)})});return Promise.all(n).then(function(){if(t.length>0)throw t;return!0})}}}var ii="colors",Or="sizes",xt="space",cP={gap:xt,gridGap:xt,columnGap:xt,gridColumnGap:xt,rowGap:xt,gridRowGap:xt,inset:xt,insetBlock:xt,insetBlockEnd:xt,insetBlockStart:xt,insetInline:xt,insetInlineEnd:xt,insetInlineStart:xt,margin:xt,marginTop:xt,marginRight:xt,marginBottom:xt,marginLeft:xt,marginBlock:xt,marginBlockEnd:xt,marginBlockStart:xt,marginInline:xt,marginInlineEnd:xt,marginInlineStart:xt,padding:xt,paddingTop:xt,paddingRight:xt,paddingBottom:xt,paddingLeft:xt,paddingBlock:xt,paddingBlockEnd:xt,paddingBlockStart:xt,paddingInline:xt,paddingInlineEnd:xt,paddingInlineStart:xt,top:xt,right:xt,bottom:xt,left:xt,scrollMargin:xt,scrollMarginTop:xt,scrollMarginRight:xt,scrollMarginBottom:xt,scrollMarginLeft:xt,scrollMarginX:xt,scrollMarginY:xt,scrollMarginBlock:xt,scrollMarginBlockEnd:xt,scrollMarginBlockStart:xt,scrollMarginInline:xt,scrollMarginInlineEnd:xt,scrollMarginInlineStart:xt,scrollPadding:xt,scrollPaddingTop:xt,scrollPaddingRight:xt,scrollPaddingBottom:xt,scrollPaddingLeft:xt,scrollPaddingX:xt,scrollPaddingY:xt,scrollPaddingBlock:xt,scrollPaddingBlockEnd:xt,scrollPaddingBlockStart:xt,scrollPaddingInline:xt,scrollPaddingInlineEnd:xt,scrollPaddingInlineStart:xt,fontSize:"fontSizes",background:ii,backgroundColor:ii,backgroundImage:ii,borderImage:ii,border:ii,borderBlock:ii,borderBlockEnd:ii,borderBlockStart:ii,borderBottom:ii,borderBottomColor:ii,borderColor:ii,borderInline:ii,borderInlineEnd:ii,borderInlineStart:ii,borderLeft:ii,borderLeftColor:ii,borderRight:ii,borderRightColor:ii,borderTop:ii,borderTopColor:ii,caretColor:ii,color:ii,columnRuleColor:ii,fill:ii,outline:ii,outlineColor:ii,stroke:ii,textDecorationColor:ii,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Or,minBlockSize:Or,maxBlockSize:Or,inlineSize:Or,minInlineSize:Or,maxInlineSize:Or,width:Or,minWidth:Or,maxWidth:Or,height:Or,minHeight:Or,maxHeight:Or,flexBasis:Or,gridTemplateColumns:Or,gridTemplateRows:Or,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},uP=(i,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,om=()=>{const i=Object.create(null);return(e,t,...n)=>{const s=(r=>JSON.stringify(r,uP))(e);return s in i?i[s]:i[s]=t(e,...n)}},Ih=Symbol.for("sxs.internal"),tM=(i,e)=>Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)),Lw=i=>{for(const e in i)return!0;return!1},{hasOwnProperty:fP}=Object.prototype,nT=i=>i.includes("-")?i:i.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),hP=/\s+(?![^()]*\))/,sp=i=>e=>i(...typeof e=="string"?String(e).split(hP):[e]),Uw={appearance:i=>({WebkitAppearance:i,appearance:i}),backfaceVisibility:i=>({WebkitBackfaceVisibility:i,backfaceVisibility:i}),backdropFilter:i=>({WebkitBackdropFilter:i,backdropFilter:i}),backgroundClip:i=>({WebkitBackgroundClip:i,backgroundClip:i}),boxDecorationBreak:i=>({WebkitBoxDecorationBreak:i,boxDecorationBreak:i}),clipPath:i=>({WebkitClipPath:i,clipPath:i}),content:i=>({content:i.includes('"')||i.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(i)?i:`"${i}"`}),hyphens:i=>({WebkitHyphens:i,hyphens:i}),maskImage:i=>({WebkitMaskImage:i,maskImage:i}),maskSize:i=>({WebkitMaskSize:i,maskSize:i}),tabSize:i=>({MozTabSize:i,tabSize:i}),textSizeAdjust:i=>({WebkitTextSizeAdjust:i,textSizeAdjust:i}),userSelect:i=>({WebkitUserSelect:i,userSelect:i}),marginBlock:sp((i,e)=>({marginBlockStart:i,marginBlockEnd:e||i})),marginInline:sp((i,e)=>({marginInlineStart:i,marginInlineEnd:e||i})),maxSize:sp((i,e)=>({maxBlockSize:i,maxInlineSize:e||i})),minSize:sp((i,e)=>({minBlockSize:i,minInlineSize:e||i})),paddingBlock:sp((i,e)=>({paddingBlockStart:i,paddingBlockEnd:e||i})),paddingInline:sp((i,e)=>({paddingInlineStart:i,paddingInlineEnd:e||i}))},oS=/([\d.]+)([^]*)/,dP=(i,e)=>i.length?i.reduce((t,n)=>(t.push(...e.map(s=>s.includes("&")?s.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(s)?`:is(${n})`:n):n+" "+s)),t),[]):e,pP=(i,e)=>i in mP&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,n,s,r)=>n+(s==="stretch"?`-moz-available${r};${nT(i)}:${n}-webkit-fill-available`:`-moz-fit-content${r};${nT(i)}:${n}fit-content`)+r):String(e),mP={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},$c=i=>i?i+"-":"",e3=(i,e,t)=>i.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(n,s,r,o,c)=>o=="$"==!!r?n:(s||o=="--"?"calc(":"")+"var(--"+(o==="$"?$c(e)+(c.includes("$")?"":$c(t))+c.replace(/\$/g,"-"):c)+")"+(s||o=="--"?"*"+(s||"")+(r||"1")+")":"")),gP=/\s*,\s*(?![^()]*\))/,yP=Object.prototype.toString,Op=(i,e,t,n,s)=>{let r,o,c;const f=(d,m,g)=>{let v,_;const b=A=>{for(v in A){const C=v.charCodeAt(0)===64,D=C&&Array.isArray(A[v])?A[v]:[A[v]];for(_ of D){const N=/[A-Z]/.test(T=v)?T:T.replace(/-[^]/g,L=>L[1].toUpperCase()),I=typeof _=="object"&&_&&_.toString===yP&&(!n.utils[N]||!m.length);if(N in n.utils&&!I){const L=n.utils[N];if(L!==o){o=L,b(L(_)),o=null;continue}}else if(N in Uw){const L=Uw[N];if(L!==c){c=L,b(L(_)),c=null;continue}}if(C&&(M=v.slice(1)in n.media?"@media "+n.media[v.slice(1)]:v,v=M.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(L,P,G,B,U,j)=>{const ae=oS.test(P),ne=.0625*(ae?-1:1),[de,he]=ae?[B,P]:[P,B];return"("+(G[0]==="="?"":G[0]===">"===ae?"max-":"min-")+de+":"+(G[0]!=="="&&G.length===1?he.replace(oS,(F,W,Z)=>Number(W)+ne*(G===">"?1:-1)+Z):he)+(U?") and ("+(U[0]===">"?"min-":"max-")+de+":"+(U.length===1?j.replace(oS,(F,W,Z)=>Number(W)+ne*(U===">"?-1:1)+Z):j):"")+")"})),I){const L=C?g.concat(v):[...g],P=C?[...m]:dP(m,v.split(gP));r!==void 0&&s(zw(...r)),r=void 0,f(_,P,L)}else r===void 0&&(r=[[],m,g]),v=C||v.charCodeAt(0)!==36?v:`--${$c(n.prefix)}${v.slice(1).replace(/\$/g,"-")}`,_=I?_:typeof _=="number"?_&&N in vP?String(_)+"px":String(_):e3(pP(N,_??""),n.prefix,n.themeMap[N]),r[0].push(`${C?`${v} `:`${nT(v)}:`}${_}`)}}var M,T};b(d),r!==void 0&&s(zw(...r)),r=void 0};f(i,e,t)},zw=(i,e,t)=>`${t.map(n=>`${n}{`).join("")}${e.length?`${e.join(",")}{`:""}${i.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,vP={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},Pw=i=>String.fromCharCode(i+(i>25?39:97)),Bh=i=>(e=>{let t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Pw(t%52)+n;return Pw(t%52)+n})(((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(5381,JSON.stringify(i))>>>0),c0=["themed","global","styled","onevar","resonevar","allvar","inline"],xP=i=>{if(i.href&&!i.href.startsWith(location.origin))return!1;try{return!!i.cssRules}catch{return!1}},_P=i=>{let e;const t=()=>{const{cssRules:s}=e.sheet;return[].map.call(s,(r,o)=>{const{cssText:c}=r;let f="";if(c.startsWith("--sxs"))return"";if(s[o-1]&&(f=s[o-1].cssText).startsWith("--sxs")){if(!r.cssRules.length)return"";for(const d in e.rules)if(e.rules[d].group===r)return`--sxs{--sxs:${[...e.rules[d].cache].join(" ")}}${c}`;return r.cssRules.length?`${f}${c}`:""}return c}).join("")},n=()=>{if(e){const{rules:c,sheet:f}=e;if(!f.deleteRule){for(;Object(Object(f.cssRules)[0]).type===3;)f.cssRules.splice(0,1);f.cssRules=[]}for(const d in c)delete c[d]}const s=Object(i).styleSheets||[];for(const c of s)if(xP(c)){for(let f=0,d=c.cssRules;d[f];++f){const m=Object(d[f]);if(m.type!==1)continue;const g=Object(d[f+1]);if(g.type!==4)continue;++f;const{cssText:v}=m;if(!v.startsWith("--sxs"))continue;const _=v.slice(14,-3).trim().split(/\s+/),b=c0[_[0]];b&&(e||(e={sheet:c,reset:n,rules:{},toString:t}),e.rules[b]={group:g,index:f,cache:new Set(_)})}if(e)break}if(!e){const c=(f,d)=>({type:d,cssRules:[],insertRule(m,g){this.cssRules.splice(g,0,c(m,{import:3,undefined:1}[(m.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return f==="@media{}"?`@media{${[].map.call(this.cssRules,m=>m.cssText).join("")}}`:f}});e={sheet:i?(i.head||i).appendChild(document.createElement("style")).sheet:c("","text/css"),rules:{},reset:n,toString:t}}const{sheet:r,rules:o}=e;for(let c=c0.length-1;c>=0;--c){const f=c0[c];if(!o[f]){const d=c0[c+1],m=o[d]?o[d].index:r.cssRules.length;r.insertRule("@media{}",m),r.insertRule(`--sxs{--sxs:${c}}`,m),o[f]={group:r.cssRules[m+1],index:m,cache:new Set([c])}}bP(o[f])}};return n(),e},bP=i=>{const e=i.group;let t=e.cssRules.length;i.apply=n=>{try{e.insertRule(n,t),++t}catch{}}},Bg=Symbol(),SP=om(),Iw=(i,e)=>SP(i,()=>(...t)=>{let n={type:null,composers:new Set};for(const s of t)if(s!=null)if(s[Ih]){n.type==null&&(n.type=s[Ih].type);for(const r of s[Ih].composers)n.composers.add(r)}else s.constructor!==Object||s.$$typeof?n.type==null&&(n.type=s):n.composers.add(EP(s,i));return n.type==null&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),TP(i,n,e)}),EP=({variants:i,compoundVariants:e,defaultVariants:t,...n},s)=>{const r=`${$c(s.prefix)}c-${Bh(n)}`,o=[],c=[],f=Object.create(null),d=[];for(const v in t)f[v]=String(t[v]);if(typeof i=="object"&&i)for(const v in i){m=f,g=v,fP.call(m,g)||(f[v]="undefined");const _=i[v];for(const b in _){const A={[v]:String(b)};String(b)==="undefined"&&d.push(v);const M=_[b],T=[A,M,!Lw(M)];o.push(T)}}var m,g;if(typeof e=="object"&&e)for(const v of e){let{css:_,...b}=v;_=typeof _=="object"&&_||{};for(const M in b)b[M]=String(b[M]);const A=[b,_,!Lw(_)];c.push(A)}return[r,n,o,c,f,d]},TP=(i,e,t)=>{const[n,s,r,o]=MP(e.composers),c=typeof e.type=="function"||e.type.$$typeof?(g=>{function v(){for(let _=0;_<v[Bg].length;_++){const[b,A]=v[Bg][_];g.rules[b].apply(A)}return v[Bg]=[],null}return v[Bg]=[],v.rules={},c0.forEach(_=>v.rules[_]={apply:b=>v[Bg].push([_,b])}),v})(t):null,f=(c||t).rules,d=`.${n}${s.length>1?`:where(.${s.slice(1).join(".")})`:""}`,m=g=>{g=typeof g=="object"&&g||AP;const{css:v,..._}=g,b={};for(const T in r)if(delete _[T],T in g){let C=g[T];typeof C=="object"&&C?b[T]={"@initial":r[T],...C}:(C=String(C),b[T]=C!=="undefined"||o.has(T)?C:r[T])}else b[T]=r[T];const A=new Set([...s]);for(const[T,C,D,N]of e.composers){t.rules.styled.cache.has(T)||(t.rules.styled.cache.add(T),Op(C,[`.${T}`],[],i,P=>{f.styled.apply(P)}));const I=Bw(D,b,i.media),L=Bw(N,b,i.media,!0);for(const P of I)if(P!==void 0)for(const[G,B,U]of P){const j=`${T}-${Bh(B)}-${G}`;A.add(j);const ae=(U?t.rules.resonevar:t.rules.onevar).cache,ne=U?f.resonevar:f.onevar;ae.has(j)||(ae.add(j),Op(B,[`.${j}`],[],i,de=>{ne.apply(de)}))}for(const P of L)if(P!==void 0)for(const[G,B]of P){const U=`${T}-${Bh(B)}-${G}`;A.add(U),t.rules.allvar.cache.has(U)||(t.rules.allvar.cache.add(U),Op(B,[`.${U}`],[],i,j=>{f.allvar.apply(j)}))}}if(typeof v=="object"&&v){const T=`${n}-i${Bh(v)}-css`;A.add(T),t.rules.inline.cache.has(T)||(t.rules.inline.cache.add(T),Op(v,[`.${T}`],[],i,C=>{f.inline.apply(C)}))}for(const T of String(g.className||"").trim().split(/\s+/))T&&A.add(T);const M=_.className=[...A].join(" ");return{type:e.type,className:M,selector:d,props:_,toString:()=>M,deferredInjector:c}};return tM(m,{className:n,selector:d,[Ih]:e,toString:()=>(t.rules.styled.cache.has(n)||m(),n)})},MP=i=>{let e="";const t=[],n={},s=[];for(const[r,,,,o,c]of i){e===""&&(e=r),t.push(r),s.push(...c);for(const f in o){const d=o[f];(n[f]===void 0||d!=="undefined"||c.includes(d))&&(n[f]=d)}}return[e,t,n,new Set(s)]},Bw=(i,e,t,n)=>{const s=[];e:for(let[r,o,c]of i){if(c)continue;let f,d=0,m=!1;for(f in r){const g=r[f];let v=e[f];if(v!==g){if(typeof v!="object"||!v)continue e;{let _,b,A=0;for(const M in v){if(g===String(v[M])){if(M!=="@initial"){const T=M.slice(1);(b=b||[]).push(T in t?t[T]:M.replace(/^@media ?/,"")),m=!0}d+=A,_=!0}++A}if(b&&b.length&&(o={["@media "+b.join(", ")]:o}),!_)continue e}}}(s[d]=s[d]||[]).push([n?"cv":`${f}-${r[f]}`,o,m])}return s},AP={},wP=om(),RP=(i,e)=>wP(i,()=>(...t)=>{const n=()=>{for(let s of t){s=typeof s=="object"&&s||{};let r=Bh(s);if(!e.rules.global.cache.has(r)){if(e.rules.global.cache.add(r),"@import"in s){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let c of[].concat(s["@import"]))c=c.includes('"')||c.includes("'")?c:`"${c}"`,e.sheet.insertRule(`@import ${c};`,o++);delete s["@import"]}Op(s,[],[],i,o=>{e.rules.global.apply(o)})}}return""};return tM(n,{toString:n})}),CP=om(),NP=(i,e)=>CP(i,()=>t=>{const n=`${$c(i.prefix)}k-${Bh(t)}`,s=()=>{if(!e.rules.global.cache.has(n)){e.rules.global.cache.add(n);const r=[];Op(t,[],[],i,c=>r.push(c));const o=`@keyframes ${n}{${r.join("")}}`;e.rules.global.apply(o)}return n};return tM(s,{get name(){return s()},toString:s})}),DP=class{constructor(i,e,t,n){this.token=i==null?"":String(i),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=n==null?"":String(n)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+$c(this.prefix)+$c(this.scale)+this.token}toString(){return this.computedValue}},OP=om(),LP=(i,e)=>OP(i,()=>(t,n)=>{n=typeof t=="object"&&t||Object(n);const s=`.${t=(t=typeof t=="string"?t:"")||`${$c(i.prefix)}t-${Bh(n)}`}`,r={},o=[];for(const f in n){r[f]={};for(const d in n[f]){const m=`--${$c(i.prefix)}${f}-${d}`,g=e3(String(n[f][d]),i.prefix,f);r[f][d]=new DP(d,g,f,i.prefix),o.push(`${m}:${g}`)}}const c=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const f=`${n===i.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(f)}return t};return{...r,get className(){return c()},selector:s,toString:c}}),UP=om(),zP=om(),PP=i=>{const e=(t=>{let n=!1;const s=UP(t,r=>{n=!0;const o="prefix"in(r=typeof r=="object"&&r||{})?String(r.prefix):"",c=typeof r.media=="object"&&r.media||{},f=typeof r.root=="object"?r.root||null:globalThis.document||null,d=typeof r.theme=="object"&&r.theme||{},m={prefix:o,media:c,theme:d,themeMap:typeof r.themeMap=="object"&&r.themeMap||{...cP},utils:typeof r.utils=="object"&&r.utils||{}},g=_P(f),v={css:Iw(m,g),globalCss:RP(m,g),keyframes:NP(m,g),createTheme:LP(m,g),reset(){g.reset(),v.theme.toString()},theme:{},sheet:g,config:m,prefix:o,getCssText:g.toString,toString:g.toString};return String(v.theme=v.createTheme(d)),v});return n||s.reset(),s})(i);return e.styled=(({config:t,sheet:n})=>zP(t,()=>{const s=Iw(t,n);return(...r)=>{const o=s(...r),c=o[Ih].type,f=se.forwardRef((d,m)=>{const g=d&&d.as||c,{props:v,deferredInjector:_}=o(d);return delete v.as,v.ref=m,_?se.createElement(se.Fragment,null,se.createElement(g,v),se.createElement(_,null)):se.createElement(g,v)});return f.className=o.className,f.displayName=`Styled.${c.displayName||c.name||c}`,f.selector=o.selector,f.toString=()=>o.selector,f[Ih]=o[Ih],f}}))(e),e};function IP(i,e,t){return Math.max(e,Math.min(i,t))}const cr={toVector(i,e){return i===void 0&&(i=e),Array.isArray(i)?i:[i,i]},add(i,e){return[i[0]+e[0],i[1]+e[1]]},sub(i,e){return[i[0]-e[0],i[1]-e[1]]},addTo(i,e){i[0]+=e[0],i[1]+=e[1]},subTo(i,e){i[0]-=e[0],i[1]-=e[1]}};function Fw(i,e,t){return e===0||Math.abs(e)===1/0?Math.pow(i,t*5):i*e*t/(e+t*i)}function Hw(i,e,t,n=.15){return n===0?IP(i,e,t):i<e?-Fw(e-i,t-e,n)+e:i>t?+Fw(i-t,t-e,n)+t:i}function BP(i,[e,t],[n,s]){const[[r,o],[c,f]]=i;return[Hw(e,r,o,n),Hw(t,c,f,s)]}function FP(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function HP(i){var e=FP(i,"string");return typeof e=="symbol"?e:String(e)}function ia(i,e,t){return e=HP(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Vw(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function Ni(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vw(Object(t),!0).forEach(function(n){ia(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Vw(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}const t3={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Gw(i){return i?i[0].toUpperCase()+i.slice(1):""}const VP=["enter","leave"];function GP(i=!1,e){return i&&!VP.includes(e)}function kP(i,e="",t=!1){const n=t3[i],s=n&&n[e]||e;return"on"+Gw(i)+Gw(s)+(GP(t,s)?"Capture":"")}const $P=["gotpointercapture","lostpointercapture"];function XP(i){let e=i.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const n=$P.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(n);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:t}}function qP(i,e=""){const t=t3[i],n=t&&t[e]||e;return i+n}function E1(i){return"touches"in i}function n3(i){return E1(i)?"touch":"pointerType"in i?i.pointerType:"mouse"}function jP(i){return Array.from(i.touches).filter(e=>{var t,n;return e.target===i.currentTarget||((t=i.currentTarget)===null||t===void 0||(n=t.contains)===null||n===void 0?void 0:n.call(t,e.target))})}function YP(i){return i.type==="touchend"||i.type==="touchcancel"?i.changedTouches:i.targetTouches}function i3(i){return E1(i)?YP(i)[0]:i}function WP(i){return jP(i).map(e=>e.identifier)}function lS(i){const e=i3(i);return E1(i)?e.identifier:e.pointerId}function kw(i){const e=i3(i);return[e.clientX,e.clientY]}function ZP(i){const e={};if("buttons"in i&&(e.buttons=i.buttons),"shiftKey"in i){const{shiftKey:t,altKey:n,metaKey:s,ctrlKey:r}=i;Object.assign(e,{shiftKey:t,altKey:n,metaKey:s,ctrlKey:r})}return e}function h_(i,...e){return typeof i=="function"?i(...e):i}function KP(){}function QP(...i){return i.length===0?KP:i.length===1?i[0]:function(){let e;for(const t of i)e=t.apply(this,arguments)||e;return e}}function $w(i,e){return Object.assign({},e,i||{})}const JP=32;class e4{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:s}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=s,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?h_(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:s}=this;t.args=this.args;let r=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,ZP(e)),s.down=s.pressed=s.buttons%2===1||s.touches>0,r=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const L=t._delta.map(Math.abs);cr.addTo(t._distance,L)}this.axisIntent&&this.axisIntent(e);const[o,c]=t._movement,[f,d]=n.threshold,{_step:m,values:g}=t;if(n.hasCustomTransform?(m[0]===!1&&(m[0]=Math.abs(o)>=f&&g[0]),m[1]===!1&&(m[1]=Math.abs(c)>=d&&g[1])):(m[0]===!1&&(m[0]=Math.abs(o)>=f&&Math.sign(o)*f),m[1]===!1&&(m[1]=Math.abs(c)>=d&&Math.sign(c)*d)),t.intentional=m[0]!==!1||m[1]!==!1,!t.intentional)return;const v=[0,0];if(n.hasCustomTransform){const[L,P]=g;v[0]=m[0]!==!1?L-m[0]:0,v[1]=m[1]!==!1?P-m[1]:0}else v[0]=m[0]!==!1?o-m[0]:0,v[1]=m[1]!==!1?c-m[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(v);const _=t.offset,b=t._active&&!t._blocked||t.active;b&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=s[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=h_(n.bounds,t)),this.setup&&this.setup()),t.movement=v,this.computeOffset()));const[A,M]=t.offset,[[T,C],[D,N]]=t._bounds;t.overflow=[A<T?-1:A>C?1:0,M<D?-1:M>N?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const I=t._active?n.rubberband||[0,0]:[0,0];if(t.offset=BP(t._bounds,t.offset,I),t.delta=cr.sub(t.offset,_),this.computeMovement(),b&&(!t.last||r>JP)){t.delta=cr.sub(t.offset,_);const L=t.delta.map(Math.abs);cr.addTo(t.distance,L),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&r>0&&(t.velocity=[L[0]/r,L[1]/r],t.timeDelta=r)}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const s=this.handler(Ni(Ni(Ni({},t),e),{},{[this.aliasKey]:e.values}));s!==void 0&&(e.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function t4([i,e],t){const n=Math.abs(i),s=Math.abs(e);if(n>s&&n>t)return"x";if(s>n&&s>t)return"y"}class n4 extends e4{constructor(...e){super(...e),ia(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=cr.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=cr.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const s=typeof n.axisThreshold=="object"?n.axisThreshold[n3(e)]:n.axisThreshold;t.axis=t4(t._movement,s)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const i4=i=>i,Xw=.15,s3={enabled(i=!0){return i},eventOptions(i,e,t){return Ni(Ni({},t.shared.eventOptions),i)},preventDefault(i=!1){return i},triggerAllEvents(i=!1){return i},rubberband(i=0){switch(i){case!0:return[Xw,Xw];case!1:return[0,0];default:return cr.toVector(i)}},from(i){if(typeof i=="function")return i;if(i!=null)return cr.toVector(i)},transform(i,e,t){const n=i||t.shared.transform;return this.hasCustomTransform=!!n,n||i4},threshold(i){return cr.toVector(i,0)}},s4=0,j0=Ni(Ni({},s3),{},{axis(i,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(i=s4){return i},bounds(i={}){if(typeof i=="function")return r=>j0.bounds(i(r));if("current"in i)return()=>i.current;if(typeof HTMLElement=="function"&&i instanceof HTMLElement)return i;const{left:e=-1/0,right:t=1/0,top:n=-1/0,bottom:s=1/0}=i;return[[e,t],[n,s]]}}),qw={ArrowRight:(i,e=1)=>[i*e,0],ArrowLeft:(i,e=1)=>[-1*i*e,0],ArrowUp:(i,e=1)=>[0,-1*i*e],ArrowDown:(i,e=1)=>[0,i*e]};class r4 extends n4{constructor(...e){super(...e),ia(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),s={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=j0.bounds(s)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const s=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(s&&s.size>1&&n._pointerActive)&&(this.start(e),this.setupPointer(e),n._pointerId=lS(e),n._pointerActive=!0,this.computeValues(kw(e)),this.computeInitial(),t.preventScrollAxis&&n3(e)!=="mouse"?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;const s=lS(e);if(t._pointerId!==void 0&&s!==t._pointerId)return;const r=kw(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=cr.sub(r,t._values),this.computeValues(r)),cr.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(n.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===n.preventScrollAxis||n.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const s=lS(e);if(t._pointerId!==void 0&&s!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[r,o]=t._distance;if(t.tap=r<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[c,f]=t._delta,[d,m]=t._movement,[g,v]=n.swipe.velocity,[_,b]=n.swipe.distance,A=n.swipe.duration;if(t.elapsedTime<A){const M=Math.abs(c/t.timeDelta),T=Math.abs(f/t.timeDelta);M>g&&Math.abs(d)>_&&(t.swipe[0]=Math.sign(c)),T>v&&Math.abs(m)>b&&(t.swipe[1]=Math.sign(f))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,a4(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=qw[e.key];if(t){const n=this.state,s=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,s),n._keyboardActive=!0,cr.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in qw&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function a4(i){"persist"in i&&typeof i.persist=="function"&&i.persist()}const Y0=typeof window<"u"&&window.document&&window.document.createElement;function r3(){return Y0&&"ontouchstart"in window}function o4(){return r3()||Y0&&window.navigator.maxTouchPoints>1}function l4(){return Y0&&"onpointerdown"in window}function c4(){return Y0&&"exitPointerLock"in window.document}function u4(){try{return"constructor"in GestureEvent}catch{return!1}}const io={isBrowser:Y0,gesture:u4(),touch:r3(),touchscreen:o4(),pointer:l4(),pointerLock:c4()},f4=250,h4=180,d4=.5,p4=50,m4=250,g4=10,jw={mouse:0,touch:0,pen:8},y4=Ni(Ni({},j0),{},{device(i,e,{pointer:{touch:t=!1,lock:n=!1,mouse:s=!1}={}}){return this.pointerLock=n&&io.pointerLock,io.touch&&t?"touch":this.pointerLock?"mouse":io.pointer&&!s?"pointer":io.touch?"touch":"mouse"},preventScrollAxis(i,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&i?f4:void 0,!(!io.touchscreen||t===!1))return i||(t!==void 0?"y":void 0)},pointerCapture(i,e,{pointer:{capture:t=!0,buttons:n=1,keys:s=!0}={}}){return this.pointerButtons=n,this.keys=s,!this.pointerLock&&this.device==="pointer"&&t},threshold(i,e,{filterTaps:t=!1,tapsThreshold:n=3,axis:s=void 0}){const r=cr.toVector(i,t?n:s?1:0);return this.filterTaps=t,this.tapsThreshold=n,r},swipe({velocity:i=d4,distance:e=p4,duration:t=m4}={}){return{velocity:this.transform(cr.toVector(i)),distance:this.transform(cr.toVector(e)),duration:t}},delay(i=0){switch(i){case!0:return h4;case!1:return 0;default:return i}},axisThreshold(i){return i?Ni(Ni({},jw),i):jw},keyboardDisplacement(i=g4){return i}});Ni(Ni({},s3),{},{device(i,e,{shared:t,pointer:{touch:n=!1}={}}){if(t.target&&!io.touch&&io.gesture)return"gesture";if(io.touch&&n)return"touch";if(io.touchscreen){if(io.pointer)return"pointer";if(io.touch)return"touch"}},bounds(i,e,{scaleBounds:t={},angleBounds:n={}}){const s=o=>{const c=$w(h_(t,o),{min:-1/0,max:1/0});return[c.min,c.max]},r=o=>{const c=$w(h_(n,o),{min:-1/0,max:1/0});return[c.min,c.max]};return typeof t!="function"&&typeof n!="function"?[s(),r()]:o=>[s(o),r(o)]},threshold(i,e,t){return this.lockDirection=t.axis==="lock",cr.toVector(i,this.lockDirection?[.1,3]:0)},modifierKey(i){return i===void 0?"ctrlKey":i},pinchOnWheel(i=!0){return i}});Ni(Ni({},j0),{},{mouseOnly:(i=!0)=>i});Ni(Ni({},j0),{},{mouseOnly:(i=!0)=>i});const a3=new Map,iT=new Map;function v4(i){a3.set(i.key,i.engine),iT.set(i.key,i.resolver)}const x4={key:"drag",engine:r4,resolver:y4};function _4(i,e){if(i==null)return{};var t={},n=Object.keys(i),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(t[s]=i[s]);return t}function b4(i,e){if(i==null)return{};var t=_4(i,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}const S4={target(i){if(i)return()=>"current"in i?i.current:i},enabled(i=!0){return i},window(i=io.isBrowser?window:void 0){return i},eventOptions({passive:i=!0,capture:e=!1}={}){return{passive:i,capture:e}},transform(i){return i}},E4=["target","eventOptions","window","enabled","transform"];function t_(i={},e){const t={};for(const[n,s]of Object.entries(e))switch(typeof s){case"function":t[n]=s.call(t,i[n],n,i);break;case"object":t[n]=t_(i[n],s);break;case"boolean":s&&(t[n]=i[n]);break}return t}function T4(i,e,t={}){const n=i,{target:s,eventOptions:r,window:o,enabled:c,transform:f}=n,d=b4(n,E4);if(t.shared=t_({target:s,eventOptions:r,window:o,enabled:c,transform:f},S4),e){const m=iT.get(e);t[e]=t_(Ni({shared:t.shared},d),m)}else for(const m in d){const g=iT.get(m);g&&(t[m]=t_(Ni({shared:t.shared},d[m]),g))}return t}class o3{constructor(e,t){ia(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,s,r){const o=this._listeners,c=qP(t,n),f=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},d=Ni(Ni({},f),r);e.addEventListener(c,s,d);const m=()=>{e.removeEventListener(c,s,d),o.delete(m)};return o.add(m),m}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class M4{constructor(){ia(this,"_timeouts",new Map)}add(e,t,n=140,...s){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...s))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class A4{constructor(e){ia(this,"gestures",new Set),ia(this,"_targetEventStore",new o3(this)),ia(this,"gestureEventStores",{}),ia(this,"gestureTimeoutStores",{}),ia(this,"handlers",{}),ia(this,"config",{}),ia(this,"pointerIds",new Set),ia(this,"touchIds",new Set),ia(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),w4(this,e)}setEventIds(e){if(E1(e))return this.touchIds=new Set(WP(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=T4(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let s;if(!(t.target&&(s=t.target(),!s))){if(t.enabled){for(const o of this.gestures){const c=this.config[o],f=Yw(n,c.eventOptions,!!s);if(c.enabled){const d=a3.get(o);new d(this,e,o).bind(f)}}const r=Yw(n,t.eventOptions,!!s);for(const o in this.nativeHandlers)r(o,"",c=>this.nativeHandlers[o](Ni(Ni({},this.state.shared),{},{event:c,args:e})),void 0,!0)}for(const r in n)n[r]=QP(...n[r]);if(!s)return n;for(const r in n){const{device:o,capture:c,passive:f}=XP(r);this._targetEventStore.add(s,o,"",n[r],{capture:c,passive:f})}}}}function rp(i,e){i.gestures.add(e),i.gestureEventStores[e]=new o3(i,e),i.gestureTimeoutStores[e]=new M4}function w4(i,e){e.drag&&rp(i,"drag"),e.wheel&&rp(i,"wheel"),e.scroll&&rp(i,"scroll"),e.move&&rp(i,"move"),e.pinch&&rp(i,"pinch"),e.hover&&rp(i,"hover")}const Yw=(i,e,t)=>(n,s,r,o={},c=!1)=>{var f,d;const m=(f=o.capture)!==null&&f!==void 0?f:e.capture,g=(d=o.passive)!==null&&d!==void 0?d:e.passive;let v=c?n:kP(n,s,m);t&&g&&(v+="Passive"),i[v]=i[v]||[],i[v].push(r)};function R4(i,e={},t,n){const s=se.useMemo(()=>new A4(i),[]);if(s.applyHandlers(i,n),s.applyConfig(e,t),se.useEffect(s.effect.bind(s)),se.useEffect(()=>s.clean.bind(s),[]),e.target===void 0)return s.bind.bind(s)}function C4(i,e){return v4(x4),R4({drag:i},e||{},"drag")}function Nc(i,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(i==null||i(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function N4(i,e){typeof i=="function"?i(e):i!=null&&(i.current=e)}function l3(...i){return e=>i.forEach(t=>N4(t,e))}function lm(...i){return V.useCallback(l3(...i),i)}function c3(i,e=[]){let t=[];function n(r,o){const c=V.createContext(o),f=t.length;t=[...t,o];function d(g){const{scope:v,children:_,...b}=g,A=(v==null?void 0:v[i][f])||c,M=V.useMemo(()=>b,Object.values(b));return V.createElement(A.Provider,{value:M},_)}function m(g,v){const _=(v==null?void 0:v[i][f])||c,b=V.useContext(_);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${g}\` must be used within \`${r}\``)}return d.displayName=r+"Provider",[d,m]}const s=()=>{const r=t.map(o=>V.createContext(o));return function(c){const f=(c==null?void 0:c[i])||r;return V.useMemo(()=>({[`__scope${i}`]:{...c,[i]:f}}),[c,f])}};return s.scopeName=i,[n,D4(s,...e)]}function D4(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const o=n.reduce((c,{useScope:f,scopeName:d})=>{const g=f(r)[`__scope${d}`];return{...c,...g}},{});return V.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}const u3=V.forwardRef((i,e)=>{const{children:t,...n}=i,s=V.Children.toArray(t),r=s.find(O4);if(r){const o=r.props.children,c=s.map(f=>f===r?V.Children.count(o)>1?V.Children.only(null):V.isValidElement(o)?o.props.children:null:f);return V.createElement(sT,Wi({},n,{ref:e}),V.isValidElement(o)?V.cloneElement(o,void 0,c):null)}return V.createElement(sT,Wi({},n,{ref:e}),t)});u3.displayName="Slot";const sT=V.forwardRef((i,e)=>{const{children:t,...n}=i;return V.isValidElement(t)?V.cloneElement(t,{...L4(n,t.props),ref:l3(e,t.ref)}):V.Children.count(t)>1?V.Children.only(null):null});sT.displayName="SlotClone";const f3=({children:i})=>V.createElement(V.Fragment,null,i);function O4(i){return V.isValidElement(i)&&i.type===f3}function L4(i,e){const t={...e};for(const n in e){const s=i[n],r=e[n];/^on[A-Z]/.test(n)?s&&r?t[n]=(...c)=>{r(...c),s(...c)}:s&&(t[n]=s):n==="style"?t[n]={...s,...r}:n==="className"&&(t[n]=[s,r].filter(Boolean).join(" "))}return{...i,...t}}const U4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Gh=U4.reduce((i,e)=>{const t=V.forwardRef((n,s)=>{const{asChild:r,...o}=n,c=r?u3:e;return V.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),V.createElement(c,Wi({},o,{ref:s}))});return t.displayName=`Primitive.${e}`,{...i,[e]:t}},{});function z4(i,e){i&&b1.flushSync(()=>i.dispatchEvent(e))}function nM(i){const e=V.useRef(i);return V.useEffect(()=>{e.current=i}),V.useMemo(()=>(...t)=>{var n;return(n=e.current)===null||n===void 0?void 0:n.call(e,...t)},[])}function P4(i,e=globalThis==null?void 0:globalThis.document){const t=nM(i);V.useEffect(()=>{const n=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",n),()=>e.removeEventListener("keydown",n)},[t,e])}const rT="dismissableLayer.update",I4="dismissableLayer.pointerDownOutside",B4="dismissableLayer.focusOutside";let Ww;const F4=V.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),H4=V.forwardRef((i,e)=>{var t;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:c,onDismiss:f,...d}=i,m=V.useContext(F4),[g,v]=V.useState(null),_=(t=g==null?void 0:g.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,b]=V.useState({}),A=lm(e,G=>v(G)),M=Array.from(m.layers),[T]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),C=M.indexOf(T),D=g?M.indexOf(g):-1,N=m.layersWithOutsidePointerEventsDisabled.size>0,I=D>=C,L=V4(G=>{const B=G.target,U=[...m.branches].some(j=>j.contains(B));!I||U||(r==null||r(G),c==null||c(G),G.defaultPrevented||f==null||f())},_),P=G4(G=>{const B=G.target;[...m.branches].some(j=>j.contains(B))||(o==null||o(G),c==null||c(G),G.defaultPrevented||f==null||f())},_);return P4(G=>{D===m.layers.size-1&&(s==null||s(G),!G.defaultPrevented&&f&&(G.preventDefault(),f()))},_),V.useEffect(()=>{if(g)return n&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Ww=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),Zw(),()=>{n&&m.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=Ww)}},[g,_,n,m]),V.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),Zw())},[g,m]),V.useEffect(()=>{const G=()=>b({});return document.addEventListener(rT,G),()=>document.removeEventListener(rT,G)},[]),V.createElement(Gh.div,Wi({},d,{ref:A,style:{pointerEvents:N?I?"auto":"none":void 0,...i.style},onFocusCapture:Nc(i.onFocusCapture,P.onFocusCapture),onBlurCapture:Nc(i.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Nc(i.onPointerDownCapture,L.onPointerDownCapture)}))});function V4(i,e=globalThis==null?void 0:globalThis.document){const t=nM(i),n=V.useRef(!1),s=V.useRef(()=>{});return V.useEffect(()=>{const r=c=>{if(c.target&&!n.current){let m=function(){h3(I4,t,d,{discrete:!0})};var f=m;const d={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=m,e.addEventListener("click",s.current,{once:!0})):m()}n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",r),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function G4(i,e=globalThis==null?void 0:globalThis.document){const t=nM(i),n=V.useRef(!1);return V.useEffect(()=>{const s=r=>{r.target&&!n.current&&h3(B4,t,{originalEvent:r},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Zw(){const i=new CustomEvent(rT);document.dispatchEvent(i)}function h3(i,e,t,{discrete:n}){const s=t.originalEvent.target,r=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(i,e,{once:!0}),n?z4(s,r):s.dispatchEvent(r)}const k4=globalThis!=null&&globalThis.document?V.useLayoutEffect:()=>{},$4=Gz.useId||(()=>{});let X4=0;function q4(i){const[e,t]=V.useState($4());return k4(()=>{t(n=>n??String(X4++))},[i]),e?`radix-${e}`:""}function Qh(i){return i.split("-")[0]}function W0(i){return i.split("-")[1]}function cm(i){return["top","bottom"].includes(Qh(i))?"x":"y"}function iM(i){return i==="y"?"height":"width"}function Kw(i,e,t){let{reference:n,floating:s}=i;const r=n.x+n.width/2-s.width/2,o=n.y+n.height/2-s.height/2,c=cm(e),f=iM(c),d=n[f]/2-s[f]/2,m=c==="x";let g;switch(Qh(e)){case"top":g={x:r,y:n.y-s.height};break;case"bottom":g={x:r,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:o};break;case"left":g={x:n.x-s.width,y:o};break;default:g={x:n.x,y:n.y}}switch(W0(e)){case"start":g[c]-=d*(t&&m?-1:1);break;case"end":g[c]+=d*(t&&m?-1:1)}return g}const j4=async(i,e,t)=>{const{placement:n="bottom",strategy:s="absolute",middleware:r=[],platform:o}=t,c=await(o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:i,floating:e,strategy:s}),{x:d,y:m}=Kw(f,n,c),g=n,v={},_=0;for(let b=0;b<r.length;b++){const{name:A,fn:M}=r[b],{x:T,y:C,data:D,reset:N}=await M({x:d,y:m,initialPlacement:n,placement:g,strategy:s,middlewareData:v,rects:f,platform:o,elements:{reference:i,floating:e}});d=T??d,m=C??m,v={...v,[A]:{...v[A],...D}},N&&_<=50&&(_++,typeof N=="object"&&(N.placement&&(g=N.placement),N.rects&&(f=N.rects===!0?await o.getElementRects({reference:i,floating:e,strategy:s}):N.rects),{x:d,y:m}=Kw(f,g,c)),b=-1)}return{x:d,y:m,placement:g,strategy:s,middlewareData:v}};function d3(i){return typeof i!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(i):{top:i,right:i,bottom:i,left:i}}function d_(i){return{...i,top:i.y,left:i.x,right:i.x+i.width,bottom:i.y+i.height}}async function O0(i,e){var t;e===void 0&&(e={});const{x:n,y:s,platform:r,rects:o,elements:c,strategy:f}=i,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:v=!1,padding:_=0}=e,b=d3(_),A=c[v?g==="floating"?"reference":"floating":g],M=d_(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(A)))==null||t?A:A.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(c.floating)),boundary:d,rootBoundary:m,strategy:f})),T=d_(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g==="floating"?{...o.floating,x:n,y:s}:o.reference,offsetParent:await(r.getOffsetParent==null?void 0:r.getOffsetParent(c.floating)),strategy:f}):o[g]);return{top:M.top-T.top+b.top,bottom:T.bottom-M.bottom+b.bottom,left:M.left-T.left+b.left,right:T.right-M.right+b.right}}const Y4=Math.min,Rh=Math.max;function aT(i,e,t){return Rh(i,Y4(e,t))}const Qw=i=>({name:"arrow",options:i,async fn(e){const{element:t,padding:n=0}=i??{},{x:s,y:r,placement:o,rects:c,platform:f}=e;if(t==null)return{};const d=d3(n),m={x:s,y:r},g=cm(o),v=W0(o),_=iM(g),b=await f.getDimensions(t),A=g==="y"?"top":"left",M=g==="y"?"bottom":"right",T=c.reference[_]+c.reference[g]-m[g]-c.floating[_],C=m[g]-c.reference[g],D=await(f.getOffsetParent==null?void 0:f.getOffsetParent(t));let N=D?g==="y"?D.clientHeight||0:D.clientWidth||0:0;N===0&&(N=c.floating[_]);const I=T/2-C/2,L=d[A],P=N-b[_]-d[M],G=N/2-b[_]/2+I,B=aT(L,G,P),U=(v==="start"?d[A]:d[M])>0&&G!==B&&c.reference[_]<=c.floating[_];return{[g]:m[g]-(U?G<L?L-G:P-G:0),data:{[g]:B,centerOffset:G-B}}}}),W4={left:"right",right:"left",bottom:"top",top:"bottom"};function p_(i){return i.replace(/left|right|bottom|top/g,e=>W4[e])}function Z4(i,e,t){t===void 0&&(t=!1);const n=W0(i),s=cm(i),r=iM(s);let o=s==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=p_(o)),{main:o,cross:p_(o)}}const K4={start:"end",end:"start"};function Jw(i){return i.replace(/start|end/g,e=>K4[e])}const p3=["top","right","bottom","left"];p3.reduce((i,e)=>i.concat(e,e+"-start",e+"-end"),[]);const Q4=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t;const{placement:n,middlewareData:s,rects:r,initialPlacement:o,platform:c,elements:f}=e,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:v="bestFit",flipAlignment:_=!0,...b}=i,A=Qh(n),M=g||(A===o||!_?[p_(o)]:function(G){const B=p_(G);return[Jw(G),B,Jw(B)]}(o)),T=[o,...M],C=await O0(e,b),D=[];let N=((t=s.flip)==null?void 0:t.overflows)||[];if(d&&D.push(C[A]),m){const{main:G,cross:B}=Z4(n,r,await(c.isRTL==null?void 0:c.isRTL(f.floating)));D.push(C[G],C[B])}if(N=[...N,{placement:n,overflows:D}],!D.every(G=>G<=0)){var I,L;const G=((I=(L=s.flip)==null?void 0:L.index)!=null?I:0)+1,B=T[G];if(B)return{data:{index:G,overflows:N},reset:{placement:B}};let U="bottom";switch(v){case"bestFit":{var P;const j=(P=N.map(ae=>[ae,ae.overflows.filter(ne=>ne>0).reduce((ne,de)=>ne+de,0)]).sort((ae,ne)=>ae[1]-ne[1])[0])==null?void 0:P[0].placement;j&&(U=j);break}case"initialPlacement":U=o}if(n!==U)return{reset:{placement:U}}}return{}}}};function e2(i,e){return{top:i.top-e.height,right:i.right-e.width,bottom:i.bottom-e.height,left:i.left-e.width}}function t2(i){return p3.some(e=>i[e]>=0)}const J4=function(i){let{strategy:e="referenceHidden",...t}=i===void 0?{}:i;return{name:"hide",async fn(n){const{rects:s}=n;switch(e){case"referenceHidden":{const r=e2(await O0(n,{...t,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:t2(r)}}}case"escaped":{const r=e2(await O0(n,{...t,altBoundary:!0}),s.floating);return{data:{escapedOffsets:r,escaped:t2(r)}}}default:return{}}}}},eI=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){const{x:t,y:n}=e,s=await async function(r,o){const{placement:c,platform:f,elements:d}=r,m=await(f.isRTL==null?void 0:f.isRTL(d.floating)),g=Qh(c),v=W0(c),_=cm(c)==="x",b=["left","top"].includes(g)?-1:1,A=m&&_?-1:1,M=typeof o=="function"?o(r):o;let{mainAxis:T,crossAxis:C,alignmentAxis:D}=typeof M=="number"?{mainAxis:M,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...M};return v&&typeof D=="number"&&(C=v==="end"?-1*D:D),_?{x:C*A,y:T*b}:{x:T*b,y:C*A}}(e,i);return{x:t+s.x,y:n+s.y,data:s}}}};function m3(i){return i==="x"?"y":"x"}const tI=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:n,placement:s}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:c={fn:M=>{let{x:T,y:C}=M;return{x:T,y:C}}},...f}=i,d={x:t,y:n},m=await O0(e,f),g=cm(Qh(s)),v=m3(g);let _=d[g],b=d[v];if(r){const M=g==="y"?"bottom":"right";_=aT(_+m[g==="y"?"top":"left"],_,_-m[M])}if(o){const M=v==="y"?"bottom":"right";b=aT(b+m[v==="y"?"top":"left"],b,b-m[M])}const A=c.fn({...e,[g]:_,[v]:b});return{...A,data:{x:A.x-t,y:A.y-n}}}}},nI=function(i){return i===void 0&&(i={}),{options:i,fn(e){const{x:t,y:n,placement:s,rects:r,middlewareData:o}=e,{offset:c=0,mainAxis:f=!0,crossAxis:d=!0}=i,m={x:t,y:n},g=cm(s),v=m3(g);let _=m[g],b=m[v];const A=typeof c=="function"?c({...r,placement:s}):c,M=typeof A=="number"?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(f){const I=g==="y"?"height":"width",L=r.reference[g]-r.floating[I]+M.mainAxis,P=r.reference[g]+r.reference[I]-M.mainAxis;_<L?_=L:_>P&&(_=P)}if(d){var T,C,D,N;const I=g==="y"?"width":"height",L=["top","left"].includes(Qh(s)),P=r.reference[v]-r.floating[I]+(L&&(T=(C=o.offset)==null?void 0:C[v])!=null?T:0)+(L?0:M.crossAxis),G=r.reference[v]+r.reference[I]+(L?0:(D=(N=o.offset)==null?void 0:N[v])!=null?D:0)-(L?M.crossAxis:0);b<P?b=P:b>G&&(b=G)}return{[g]:_,[v]:b}}}},iI=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(e){const{placement:t,rects:n,platform:s,elements:r}=e,{apply:o,...c}=i,f=await O0(e,c),d=Qh(t),m=W0(t);let g,v;d==="top"||d==="bottom"?(g=d,v=m===(await(s.isRTL==null?void 0:s.isRTL(r.floating))?"start":"end")?"left":"right"):(v=d,g=m==="end"?"top":"bottom");const _=Rh(f.left,0),b=Rh(f.right,0),A=Rh(f.top,0),M=Rh(f.bottom,0),T={availableHeight:n.floating.height-(["left","right"].includes(t)?2*(A!==0||M!==0?A+M:Rh(f.top,f.bottom)):f[g]),availableWidth:n.floating.width-(["top","bottom"].includes(t)?2*(_!==0||b!==0?_+b:Rh(f.left,f.right)):f[v])},C=await s.getDimensions(r.floating);o==null||o({...e,...T});const D=await s.getDimensions(r.floating);return C.width!==D.width||C.height!==D.height?{reset:{rects:!0}}:{}}}};function g3(i){return i&&i.document&&i.location&&i.alert&&i.setInterval}function Yc(i){if(i==null)return window;if(!g3(i)){const e=i.ownerDocument;return e&&e.defaultView||window}return i}function Z0(i){return Yc(i).getComputedStyle(i)}function Pc(i){return g3(i)?"":i?(i.nodeName||"").toLowerCase():""}function y3(){const i=navigator.userAgentData;return i!=null&&i.brands?i.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function $l(i){return i instanceof Yc(i).HTMLElement}function hf(i){return i instanceof Yc(i).Element}function sM(i){return typeof ShadowRoot>"u"?!1:i instanceof Yc(i).ShadowRoot||i instanceof ShadowRoot}function T1(i){const{overflow:e,overflowX:t,overflowY:n}=Z0(i);return/auto|scroll|overlay|hidden/.test(e+n+t)}function sI(i){return["table","td","th"].includes(Pc(i))}function n2(i){const e=/firefox/i.test(y3()),t=Z0(i);return t.transform!=="none"||t.perspective!=="none"||t.contain==="paint"||["transform","perspective"].includes(t.willChange)||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"}function v3(){return!/^((?!chrome|android).)*safari/i.test(y3())}const i2=Math.min,p0=Math.max,m_=Math.round;function Ic(i,e,t){var n,s,r,o;e===void 0&&(e=!1),t===void 0&&(t=!1);const c=i.getBoundingClientRect();let f=1,d=1;e&&$l(i)&&(f=i.offsetWidth>0&&m_(c.width)/i.offsetWidth||1,d=i.offsetHeight>0&&m_(c.height)/i.offsetHeight||1);const m=hf(i)?Yc(i):window,g=!v3()&&t,v=(c.left+(g&&(n=(s=m.visualViewport)==null?void 0:s.offsetLeft)!=null?n:0))/f,_=(c.top+(g&&(r=(o=m.visualViewport)==null?void 0:o.offsetTop)!=null?r:0))/d,b=c.width/f,A=c.height/d;return{width:b,height:A,top:_,right:v+b,bottom:_+A,left:v,x:v,y:_}}function uf(i){return(e=i,(e instanceof Yc(e).Node?i.ownerDocument:i.document)||window.document).documentElement;var e}function M1(i){return hf(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function x3(i){return Ic(uf(i)).left+M1(i).scrollLeft}function rI(i,e,t){const n=$l(e),s=uf(e),r=Ic(i,n&&function(f){const d=Ic(f);return m_(d.width)!==f.offsetWidth||m_(d.height)!==f.offsetHeight}(e),t==="fixed");let o={scrollLeft:0,scrollTop:0};const c={x:0,y:0};if(n||!n&&t!=="fixed")if((Pc(e)!=="body"||T1(s))&&(o=M1(e)),$l(e)){const f=Ic(e,!0);c.x=f.x+e.clientLeft,c.y=f.y+e.clientTop}else s&&(c.x=x3(s));return{x:r.left+o.scrollLeft-c.x,y:r.top+o.scrollTop-c.y,width:r.width,height:r.height}}function _3(i){return Pc(i)==="html"?i:i.assignedSlot||i.parentNode||(sM(i)?i.host:null)||uf(i)}function s2(i){return $l(i)&&getComputedStyle(i).position!=="fixed"?i.offsetParent:null}function oT(i){const e=Yc(i);let t=s2(i);for(;t&&sI(t)&&getComputedStyle(t).position==="static";)t=s2(t);return t&&(Pc(t)==="html"||Pc(t)==="body"&&getComputedStyle(t).position==="static"&&!n2(t))?e:t||function(n){let s=_3(n);for(sM(s)&&(s=s.host);$l(s)&&!["html","body"].includes(Pc(s));){if(n2(s))return s;s=s.parentNode}return null}(i)||e}function r2(i){if($l(i))return{width:i.offsetWidth,height:i.offsetHeight};const e=Ic(i);return{width:e.width,height:e.height}}function b3(i){const e=_3(i);return["html","body","#document"].includes(Pc(e))?i.ownerDocument.body:$l(e)&&T1(e)?e:b3(e)}function g_(i,e){var t;e===void 0&&(e=[]);const n=b3(i),s=n===((t=i.ownerDocument)==null?void 0:t.body),r=Yc(n),o=s?[r].concat(r.visualViewport||[],T1(n)?n:[]):n,c=e.concat(o);return s?c:c.concat(g_(o))}function a2(i,e,t){return e==="viewport"?d_(function(n,s){const r=Yc(n),o=uf(n),c=r.visualViewport;let f=o.clientWidth,d=o.clientHeight,m=0,g=0;if(c){f=c.width,d=c.height;const v=v3();(v||!v&&s==="fixed")&&(m=c.offsetLeft,g=c.offsetTop)}return{width:f,height:d,x:m,y:g}}(i,t)):hf(e)?function(n,s){const r=Ic(n,!1,s==="fixed"),o=r.top+n.clientTop,c=r.left+n.clientLeft;return{top:o,left:c,x:c,y:o,right:c+n.clientWidth,bottom:o+n.clientHeight,width:n.clientWidth,height:n.clientHeight}}(e,t):d_(function(n){var s;const r=uf(n),o=M1(n),c=(s=n.ownerDocument)==null?void 0:s.body,f=p0(r.scrollWidth,r.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),d=p0(r.scrollHeight,r.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0);let m=-o.scrollLeft+x3(n);const g=-o.scrollTop;return Z0(c||r).direction==="rtl"&&(m+=p0(r.clientWidth,c?c.clientWidth:0)-f),{width:f,height:d,x:m,y:g}}(uf(i)))}function aI(i){const e=g_(i),t=["absolute","fixed"].includes(Z0(i).position)&&$l(i)?oT(i):i;return hf(t)?e.filter(n=>hf(n)&&function(s,r){const o=r.getRootNode==null?void 0:r.getRootNode();if(s.contains(r))return!0;if(o&&sM(o)){let c=r;do{if(c&&s===c)return!0;c=c.parentNode||c.host}while(c)}return!1}(n,t)&&Pc(n)!=="body"):[]}const oI={getClippingRect:function(i){let{element:e,boundary:t,rootBoundary:n,strategy:s}=i;const r=[...t==="clippingAncestors"?aI(e):[].concat(t),n],o=r[0],c=r.reduce((f,d)=>{const m=a2(e,d,s);return f.top=p0(m.top,f.top),f.right=i2(m.right,f.right),f.bottom=i2(m.bottom,f.bottom),f.left=p0(m.left,f.left),f},a2(e,o,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(i){let{rect:e,offsetParent:t,strategy:n}=i;const s=$l(t),r=uf(t);if(t===r)return e;let o={scrollLeft:0,scrollTop:0};const c={x:0,y:0};if((s||!s&&n!=="fixed")&&((Pc(t)!=="body"||T1(r))&&(o=M1(t)),$l(t))){const f=Ic(t,!0);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}return{...e,x:e.x-o.scrollLeft+c.x,y:e.y-o.scrollTop+c.y}},isElement:hf,getDimensions:r2,getOffsetParent:oT,getDocumentElement:uf,getElementRects:i=>{let{reference:e,floating:t,strategy:n}=i;return{reference:rI(e,oT(t),n),floating:{...r2(t),x:0,y:0}}},getClientRects:i=>Array.from(i.getClientRects()),isRTL:i=>Z0(i).direction==="rtl"};function lI(i,e,t,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o=!0,animationFrame:c=!1}=n,f=s&&!c,d=r&&!c,m=f||d?[...hf(i)?g_(i):[],...g_(e)]:[];m.forEach(b=>{f&&b.addEventListener("scroll",t,{passive:!0}),d&&b.addEventListener("resize",t)});let g,v=null;if(o){let b=!0;v=new ResizeObserver(()=>{b||t(),b=!1}),hf(i)&&!c&&v.observe(i),v.observe(e)}let _=c?Ic(i):null;return c&&function b(){const A=Ic(i);!_||A.x===_.x&&A.y===_.y&&A.width===_.width&&A.height===_.height||t(),_=A,g=requestAnimationFrame(b)}(),t(),()=>{var b;m.forEach(A=>{f&&A.removeEventListener("scroll",t),d&&A.removeEventListener("resize",t)}),(b=v)==null||b.disconnect(),v=null,c&&cancelAnimationFrame(g)}}const cI=(i,e,t)=>j4(i,e,{platform:oI,...t});var lT=typeof document<"u"?V.useLayoutEffect:V.useEffect;function cT(i,e){if(i===e)return!0;if(typeof i!=typeof e)return!1;if(typeof i=="function"&&i.toString()===e.toString())return!0;let t,n,s;if(i&&e&&typeof i=="object"){if(Array.isArray(i)){if(t=i.length,t!=e.length)return!1;for(n=t;n--!==0;)if(!cT(i[n],e[n]))return!1;return!0}if(s=Object.keys(i),t=s.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[n]))return!1;for(n=t;n--!==0;){const r=s[n];if(!(r==="_owner"&&i.$$typeof)&&!cT(i[r],e[r]))return!1}return!0}return i!==i&&e!==e}function uI(i){const e=V.useRef(i);return lT(()=>{e.current=i}),e}function fI(i){let{middleware:e,placement:t="bottom",strategy:n="absolute",whileElementsMounted:s}=i===void 0?{}:i;const r=V.useRef(null),o=V.useRef(null),c=uI(s),f=V.useRef(null),[d,m]=V.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{}}),[g,v]=V.useState(e);cT(g==null?void 0:g.map(D=>{let{options:N}=D;return N}),e==null?void 0:e.map(D=>{let{options:N}=D;return N}))||v(e);const _=V.useCallback(()=>{!r.current||!o.current||cI(r.current,o.current,{middleware:g,placement:t,strategy:n}).then(D=>{b.current&&b1.flushSync(()=>{m(D)})})},[g,t,n]);lT(()=>{b.current&&_()},[_]);const b=V.useRef(!1);lT(()=>(b.current=!0,()=>{b.current=!1}),[]);const A=V.useCallback(()=>{if(typeof f.current=="function"&&(f.current(),f.current=null),r.current&&o.current)if(c.current){const D=c.current(r.current,o.current,_);f.current=D}else _()},[_,c]),M=V.useCallback(D=>{r.current=D,A()},[A]),T=V.useCallback(D=>{o.current=D,A()},[A]),C=V.useMemo(()=>({reference:r,floating:o}),[]);return V.useMemo(()=>({...d,update:_,refs:C,reference:M,floating:T}),[d,_,C,M,T])}const hI=i=>{const{element:e,padding:t}=i;function n(s){return Object.prototype.hasOwnProperty.call(s,"current")}return{name:"arrow",options:i,fn(s){return n(e)?e.current!=null?Qw({element:e.current,padding:t}).fn(s):{}:e?Qw({element:e,padding:t}).fn(s):{}}}},dI=V.forwardRef((i,e)=>{const{children:t,width:n=10,height:s=5,...r}=i;return V.createElement(Gh.svg,Wi({},r,{ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),i.asChild?t:V.createElement("polygon",{points:"0,0 30,0 15,10"}))}),pI=dI;function mI(i){const e=V.useRef(i);return V.useEffect(()=>{e.current=i}),V.useMemo(()=>(...t)=>{var n;return(n=e.current)===null||n===void 0?void 0:n.call(e,...t)},[])}const u0=globalThis!=null&&globalThis.document?V.useLayoutEffect:()=>{};function gI(i){const[e,t]=V.useState(void 0);return u0(()=>{if(i){t({width:i.offsetWidth,height:i.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const r=s[0];let o,c;if("borderBoxSize"in r){const f=r.borderBoxSize,d=Array.isArray(f)?f[0]:f;o=d.inlineSize,c=d.blockSize}else o=i.offsetWidth,c=i.offsetHeight;t({width:o,height:c})});return n.observe(i,{box:"border-box"}),()=>n.unobserve(i)}else t(void 0)},[i]),e}const S3="Popper",[rM,E3]=c3(S3),[yI,T3]=rM(S3),vI=i=>{const{__scopePopper:e,children:t}=i,[n,s]=V.useState(null);return V.createElement(yI,{scope:e,anchor:n,onAnchorChange:s},t)},xI="PopperAnchor",_I=V.forwardRef((i,e)=>{const{__scopePopper:t,virtualRef:n,...s}=i,r=T3(xI,t),o=V.useRef(null),c=lm(e,o);return V.useEffect(()=>{r.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:V.createElement(Gh.div,Wi({},s,{ref:c}))}),y_="PopperContent",[bI,SI]=rM(y_),[EI,TI]=rM(y_,{hasParent:!1,positionUpdateFns:new Set}),MI=V.forwardRef((i,e)=>{var t,n,s,r,o,c,f,d;const{__scopePopper:m,side:g="bottom",sideOffset:v=0,align:_="center",alignOffset:b=0,arrowPadding:A=0,collisionBoundary:M=[],collisionPadding:T=0,sticky:C="partial",hideWhenDetached:D=!1,avoidCollisions:N=!0,onPlaced:I,...L}=i,P=T3(y_,m),[G,B]=V.useState(null),U=lm(e,H=>B(H)),[j,ae]=V.useState(null),ne=gI(j),de=(t=ne==null?void 0:ne.width)!==null&&t!==void 0?t:0,he=(n=ne==null?void 0:ne.height)!==null&&n!==void 0?n:0,F=g+(_!=="center"?"-"+_:""),W=typeof T=="number"?T:{top:0,right:0,bottom:0,left:0,...T},Z=Array.isArray(M)?M:[M],fe=Z.length>0,X={padding:W,boundary:Z.filter(NI),altBoundary:fe},{reference:ie,floating:Ee,strategy:Ue,x:re,y:Ce,placement:Be,middlewareData:qe,update:Ke}=fI({strategy:"fixed",placement:F,whileElementsMounted:lI,middleware:[DI(),eI({mainAxis:v+he,alignmentAxis:b}),N?tI({mainAxis:!0,crossAxis:!1,limiter:C==="partial"?nI():void 0,...X}):void 0,j?hI({element:j,padding:A}):void 0,N?Q4({...X}):void 0,iI({...X,apply:({elements:H,availableWidth:Q,availableHeight:pe})=>{H.floating.style.setProperty("--radix-popper-available-width",`${Q}px`),H.floating.style.setProperty("--radix-popper-available-height",`${pe}px`)}}),OI({arrowWidth:de,arrowHeight:he}),D?J4({strategy:"referenceHidden"}):void 0].filter(CI)});u0(()=>{ie(P.anchor)},[ie,P.anchor]);const Ct=re!==null&&Ce!==null,[bt,$t]=M3(Be),jt=mI(I);u0(()=>{Ct&&(jt==null||jt())},[Ct,jt]);const Nt=(s=qe.arrow)===null||s===void 0?void 0:s.x,te=(r=qe.arrow)===null||r===void 0?void 0:r.y,_n=((o=qe.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Fe,Pe]=V.useState();u0(()=>{G&&Pe(window.getComputedStyle(G).zIndex)},[G]);const{hasParent:Ie,positionUpdateFns:Je}=TI(y_,m),Ne=!Ie;V.useLayoutEffect(()=>{if(!Ne)return Je.add(Ke),()=>{Je.delete(Ke)}},[Ne,Je,Ke]),u0(()=>{Ne&&Ct&&Array.from(Je).reverse().forEach(H=>requestAnimationFrame(H))},[Ne,Ct,Je]);const Y={"data-side":bt,"data-align":$t,...L,ref:U,style:{...L.style,animation:Ct?void 0:"none",opacity:(c=qe.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}};return V.createElement("div",{ref:Ee,"data-radix-popper-content-wrapper":"",style:{position:Ue,left:0,top:0,transform:Ct?`translate3d(${Math.round(re)}px, ${Math.round(Ce)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Fe,"--radix-popper-transform-origin":[(f=qe.transformOrigin)===null||f===void 0?void 0:f.x,(d=qe.transformOrigin)===null||d===void 0?void 0:d.y].join(" ")},dir:i.dir},V.createElement(bI,{scope:m,placedSide:bt,onArrowChange:ae,arrowX:Nt,arrowY:te,shouldHideArrow:_n},Ne?V.createElement(EI,{scope:m,hasParent:!0,positionUpdateFns:Je},V.createElement(Gh.div,Y)):V.createElement(Gh.div,Y)))}),AI="PopperArrow",wI={top:"bottom",right:"left",bottom:"top",left:"right"},RI=V.forwardRef(function(e,t){const{__scopePopper:n,...s}=e,r=SI(AI,n),o=wI[r.placedSide];return V.createElement("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0}},V.createElement(pI,Wi({},s,{ref:t,style:{...s.style,display:"block"}})))});function CI(i){return i!==void 0}function NI(i){return i!==null}const DI=()=>({name:"anchorCssProperties",fn(i){const{rects:e,elements:t}=i,{width:n,height:s}=e.reference;return t.floating.style.setProperty("--radix-popper-anchor-width",`${n}px`),t.floating.style.setProperty("--radix-popper-anchor-height",`${s}px`),{}}}),OI=i=>({name:"transformOrigin",options:i,fn(e){var t,n,s,r,o;const{placement:c,rects:f,middlewareData:d}=e,g=((t=d.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,v=g?0:i.arrowWidth,_=g?0:i.arrowHeight,[b,A]=M3(c),M={start:"0%",center:"50%",end:"100%"}[A],T=((n=(s=d.arrow)===null||s===void 0?void 0:s.x)!==null&&n!==void 0?n:0)+v/2,C=((r=(o=d.arrow)===null||o===void 0?void 0:o.y)!==null&&r!==void 0?r:0)+_/2;let D="",N="";return b==="bottom"?(D=g?M:`${T}px`,N=`${-_}px`):b==="top"?(D=g?M:`${T}px`,N=`${f.floating.height+_}px`):b==="right"?(D=`${-_}px`,N=g?M:`${C}px`):b==="left"&&(D=`${f.floating.width+_}px`,N=g?M:`${C}px`),{data:{x:D,y:N}}}});function M3(i){const[e,t="center"]=i.split("-");return[e,t]}const LI=vI,UI=_I,zI=MI,PI=RI,o2=globalThis!=null&&globalThis.document?V.useLayoutEffect:()=>{};function II(i,e){return V.useReducer((t,n)=>{const s=e[t][n];return s??t},i)}const A3=i=>{const{present:e,children:t}=i,n=BI(e),s=typeof t=="function"?t({present:n.isPresent}):V.Children.only(t),r=lm(n.ref,s.ref);return typeof t=="function"||n.isPresent?V.cloneElement(s,{ref:r}):null};A3.displayName="Presence";function BI(i){const[e,t]=V.useState(),n=V.useRef({}),s=V.useRef(i),r=V.useRef("none"),o=i?"mounted":"unmounted",[c,f]=II(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return V.useEffect(()=>{const d=Wv(n.current);r.current=c==="mounted"?d:"none"},[c]),o2(()=>{const d=n.current,m=s.current;if(m!==i){const v=r.current,_=Wv(d);i?f("MOUNT"):_==="none"||(d==null?void 0:d.display)==="none"?f("UNMOUNT"):f(m&&v!==_?"ANIMATION_OUT":"UNMOUNT"),s.current=i}},[i,f]),o2(()=>{if(e){const d=g=>{const _=Wv(n.current).includes(g.animationName);g.target===e&&_&&b1.flushSync(()=>f("ANIMATION_END"))},m=g=>{g.target===e&&(r.current=Wv(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:V.useCallback(d=>{d&&(n.current=getComputedStyle(d)),t(d)},[])}}function Wv(i){return(i==null?void 0:i.animationName)||"none"}function w3(i){const e=V.useRef(i);return V.useEffect(()=>{e.current=i}),V.useMemo(()=>(...t)=>{var n;return(n=e.current)===null||n===void 0?void 0:n.call(e,...t)},[])}function FI({prop:i,defaultProp:e,onChange:t=()=>{}}){const[n,s]=HI({defaultProp:e,onChange:t}),r=i!==void 0,o=r?i:n,c=w3(t),f=V.useCallback(d=>{if(r){const g=typeof d=="function"?d(i):d;g!==i&&c(g)}else s(d)},[r,i,s,c]);return[o,f]}function HI({defaultProp:i,onChange:e}){const t=V.useState(i),[n]=t,s=V.useRef(n),r=w3(e);return V.useEffect(()=>{s.current!==n&&(r(n),s.current=n)},[n,s,r]),t}const VI=V.forwardRef((i,e)=>V.createElement(Gh.span,Wi({},i,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...i.style}}))),GI=VI,[A1,FQ]=c3("Tooltip",[E3]),w1=E3(),kI="TooltipProvider",uT="tooltip.open",[HQ,aM]=A1(kI),oM="Tooltip",[$I,R1]=A1(oM),XI=i=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:s=!1,onOpenChange:r,disableHoverableContent:o,delayDuration:c}=i,f=aM(oM,i.__scopeTooltip),d=w1(e),[m,g]=V.useState(null),v=q4(),_=V.useRef(0),b=o??f.disableHoverableContent,A=c??f.delayDuration,M=V.useRef(!1),[T=!1,C]=FI({prop:n,defaultProp:s,onChange:P=>{P?(f.onOpen(),document.dispatchEvent(new CustomEvent(uT))):f.onClose(),r==null||r(P)}}),D=V.useMemo(()=>T?M.current?"delayed-open":"instant-open":"closed",[T]),N=V.useCallback(()=>{window.clearTimeout(_.current),M.current=!1,C(!0)},[C]),I=V.useCallback(()=>{window.clearTimeout(_.current),C(!1)},[C]),L=V.useCallback(()=>{window.clearTimeout(_.current),_.current=window.setTimeout(()=>{M.current=!0,C(!0)},A)},[A,C]);return V.useEffect(()=>()=>window.clearTimeout(_.current),[]),V.createElement(LI,d,V.createElement($I,{scope:e,contentId:v,open:T,stateAttribute:D,trigger:m,onTriggerChange:g,onTriggerEnter:V.useCallback(()=>{f.isOpenDelayed?L():N()},[f.isOpenDelayed,L,N]),onTriggerLeave:V.useCallback(()=>{b?I():window.clearTimeout(_.current)},[I,b]),onOpen:N,onClose:I,disableHoverableContent:b},t))},l2="TooltipTrigger",qI=V.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,s=R1(l2,t),r=aM(l2,t),o=w1(t),c=V.useRef(null),f=lm(e,c,s.onTriggerChange),d=V.useRef(!1),m=V.useRef(!1),g=V.useCallback(()=>d.current=!1,[]);return V.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),V.createElement(UI,Wi({asChild:!0},o),V.createElement(Gh.button,Wi({"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute},n,{ref:f,onPointerMove:Nc(i.onPointerMove,v=>{v.pointerType!=="touch"&&!m.current&&!r.isPointerInTransitRef.current&&(s.onTriggerEnter(),m.current=!0)}),onPointerLeave:Nc(i.onPointerLeave,()=>{s.onTriggerLeave(),m.current=!1}),onPointerDown:Nc(i.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:Nc(i.onFocus,()=>{d.current||s.onOpen()}),onBlur:Nc(i.onBlur,s.onClose),onClick:Nc(i.onClick,s.onClose)})))}),jI="TooltipPortal",[VQ,YI]=A1(jI,{forceMount:void 0}),L0="TooltipContent",WI=V.forwardRef((i,e)=>{const t=YI(L0,i.__scopeTooltip),{forceMount:n=t.forceMount,side:s="top",...r}=i,o=R1(L0,i.__scopeTooltip);return V.createElement(A3,{present:n||o.open},o.disableHoverableContent?V.createElement(R3,Wi({side:s},r,{ref:e})):V.createElement(ZI,Wi({side:s},r,{ref:e})))}),ZI=V.forwardRef((i,e)=>{const t=R1(L0,i.__scopeTooltip),n=aM(L0,i.__scopeTooltip),s=V.useRef(null),r=lm(e,s),[o,c]=V.useState(null),{trigger:f,onClose:d}=t,m=s.current,{onPointerInTransitChange:g}=n,v=V.useCallback(()=>{c(null),g(!1)},[g]),_=V.useCallback((b,A)=>{const M=b.currentTarget,T={x:b.clientX,y:b.clientY},C=tB(T,M.getBoundingClientRect()),D=C==="right"||C==="bottom"?-5:5,I=C==="right"||C==="left"?{x:b.clientX+D,y:b.clientY}:{x:b.clientX,y:b.clientY+D},L=nB(A.getBoundingClientRect()),P=sB([I,...L]);c(P),g(!0)},[g]);return V.useEffect(()=>()=>v(),[v]),V.useEffect(()=>{if(f&&m){const b=M=>_(M,m),A=M=>_(M,f);return f.addEventListener("pointerleave",b),m.addEventListener("pointerleave",A),()=>{f.removeEventListener("pointerleave",b),m.removeEventListener("pointerleave",A)}}},[f,m,_,v]),V.useEffect(()=>{if(o){const b=A=>{const M=A.target,T={x:A.clientX,y:A.clientY},C=(f==null?void 0:f.contains(M))||(m==null?void 0:m.contains(M)),D=!iB(T,o);C?v():D&&(v(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[f,m,o,d,v]),V.createElement(R3,Wi({},i,{ref:r}))}),[KI,QI]=A1(oM,{isInside:!1}),R3=V.forwardRef((i,e)=>{const{__scopeTooltip:t,children:n,"aria-label":s,onEscapeKeyDown:r,onPointerDownOutside:o,...c}=i,f=R1(L0,t),d=w1(t),{onClose:m}=f;return V.useEffect(()=>(document.addEventListener(uT,m),()=>document.removeEventListener(uT,m)),[m]),V.useEffect(()=>{if(f.trigger){const g=v=>{const _=v.target;_!=null&&_.contains(f.trigger)&&m()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[f.trigger,m]),V.createElement(H4,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:g=>g.preventDefault(),onDismiss:m},V.createElement(zI,Wi({"data-state":f.stateAttribute},d,c,{ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),V.createElement(f3,null,n),V.createElement(KI,{scope:t,isInside:!0},V.createElement(GI,{id:f.contentId,role:"tooltip"},s||n))))}),JI="TooltipArrow",eB=V.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,s=w1(t);return QI(JI,t).isInside?null:V.createElement(PI,Wi({},s,n,{ref:e}))});function tB(i,e){const t=Math.abs(e.top-i.y),n=Math.abs(e.bottom-i.y),s=Math.abs(e.right-i.x),r=Math.abs(e.left-i.x);switch(Math.min(t,n,s,r)){case r:return"left";case s:return"right";case t:return"top";case n:return"bottom";default:return null}}function nB(i){const{top:e,right:t,bottom:n,left:s}=i;return[{x:s,y:e},{x:t,y:e},{x:t,y:n},{x:s,y:n}]}function iB(i,e){const{x:t,y:n}=i;let s=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){const c=e[r].x,f=e[r].y,d=e[o].x,m=e[o].y;f>n!=m>n&&t<(d-c)*(n-f)/(m-f)+c&&(s=!s)}return s}function sB(i){const e=i.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),rB(e)}function rB(i){if(i.length<=1)return i.slice();const e=[];for(let n=0;n<i.length;n++){const s=i[n];for(;e.length>=2;){const r=e[e.length-1],o=e[e.length-2];if((r.x-o.x)*(s.y-o.y)>=(r.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let n=i.length-1;n>=0;n--){const s=i[n];for(;t.length>=2;){const r=t[t.length-1],o=t[t.length-2];if((r.x-o.x)*(s.y-o.y)>=(r.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const aB=XI,oB=qI,lB=WI,cB=eB;function uB(i,e){if(i==null)return{};var t={},n=Object.keys(i),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(t[s]=i[s]);return t}function fi(i,e){if(i==null)return{};var t=uB(i,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}let Ri;(function(i){i[i.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",i[i.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",i[i.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",i[i.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",i[i.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",i[i.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",i[i.THEME_ERROR=6]="THEME_ERROR",i[i.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",i[i.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",i[i.EMPTY_KEY=9]="EMPTY_KEY"})(Ri||(Ri={}));const fB={[Ri.UNSUPPORTED_INPUT]:(i,e)=>[`An input with type \`${i}\` input was found at path \`${e}\` but it's not supported yet.`],[Ri.NO_COMPONENT_FOR_TYPE]:(i,e)=>[`Type \`${i}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Ri.UNKNOWN_INPUT]:(i,e)=>[`input at path \`${i}\` is not recognized.`,e],[Ri.DUPLICATE_KEYS]:(i,e,t)=>[`Key \`${i}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Ri.ALREADY_REGISTERED_TYPE]:i=>[`Type ${i} has already been registered. You can't register a component with the same type.`],[Ri.CLIPBOARD_ERROR]:i=>["Error copying the value",i],[Ri.THEME_ERROR]:(i,e)=>[`Error accessing the theme \`${i}.${e}\` value.`],[Ri.PATH_DOESNT_EXIST]:i=>[`Error getting the value at path \`${i}\`. There is probably an error in your \`render\` function.`],[Ri.PATH_DOESNT_EXIST]:i=>[`Error accessing the value at path \`${i}\``],[Ri.INPUT_TYPE_OVERRIDE]:(i,e,t)=>[`Input at path \`${i}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Ri.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function C3(i,e,...t){const[n,...s]=fB[e](...t);console[i]("LEVA: "+n,...s)}const Dc=C3.bind(null,"warn"),hB=C3.bind(null,"log"),dB=["value"],pB=["schema"],mB=["value"],N3=[],kh={};function c2(i){let{value:e}=i,t=fi(i,dB);for(let n of N3){const s=n(e,t);if(s)return s}}function Wc(i,e){let{schema:t}=e,n=fi(e,pB);if(i in kh){Dc(Ri.ALREADY_REGISTERED_TYPE,i);return}N3.push((s,r)=>t(s,r)&&i),kh[i]=n}function cS(i,e,t,n){const{normalize:s}=kh[i];if(s)return s(e,t,n);if(typeof e!="object"||!("value"in e))return{value:e};const{value:r}=e,o=fi(e,mB);return{value:r,settings:o}}function gB(i,e,t,n,s,r){const{sanitize:o}=kh[i];return o?o(e,t,n,s,r):e}function u2(i,e,t){const{format:n}=kh[i];return n?n(e,t):e}function yB(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function f2(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function tn(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?f2(Object(t),!0).forEach(function(n){yB(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):f2(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}const df=(i,e,t)=>i>t?t:i<e?e:i,vB=i=>{if(i===""||typeof i=="number")return i;try{const e=sf(i);if(!isNaN(e))return e}catch{}return parseFloat(i)},xB=Math.log(10);function h2(i){let e=Math.abs(+String(i).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/xB)+1,n=Math.floor(Math.log10(Math.abs(i))),s=Math.pow(10,n-t);return Math.max(s,.001)}const v_=(i,e,t)=>t===e?0:(df(i,e,t)-e)/(t-e),x_=(i,e,t)=>i*(t-e)+e,_B=()=>"_"+Math.random().toString(36).substr(2,9),d2=/\(([0-9+\-*/^ .]+)\)/,p2=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,m2=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,g2=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,y2=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,v2=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function sf(i){if(isNaN(Number(i)))if(d2.test(i)){const e=i.replace(d2,(t,n)=>String(sf(n)));return sf(e)}else if(p2.test(i)){const e=i.replace(p2,(t,n,s)=>String(Math.pow(Number(n),Number(s))));return sf(e)}else if(m2.test(i)){const e=i.replace(m2,(t,n,s)=>String(Number(n)*Number(s)));return sf(e)}else if(g2.test(i)){const e=i.replace(g2,(t,n,s)=>{if(s!=0)return String(Number(n)/Number(s));throw new Error("Division by zero")});return sf(e)}else if(y2.test(i)){const e=i.replace(y2,(t,n,s)=>String(Number(n)+Number(s)));return sf(e)}else if(v2.test(i)){const e=i.replace(v2,(t,n,s)=>String(Number(n)-Number(s)));return sf(e)}else return Number(i);return Number(i)}function bB(i,e){const t=tn({},i);return e.forEach(n=>n in i&&delete t[n]),t}function SB(i,e){return i.reduce((t,n,s)=>Object.assign(t,{[e[s]]:n}),{})}function D3(i){return Object.prototype.toString.call(i)==="[object Object]"}const EB=i=>D3(i)&&Object.keys(i).length===0;let Bl;(function(i){i.BUTTON="BUTTON",i.BUTTON_GROUP="BUTTON_GROUP",i.MONITOR="MONITOR",i.FOLDER="FOLDER"})(Bl||(Bl={}));let Yo;(function(i){i.SELECT="SELECT",i.IMAGE="IMAGE",i.NUMBER="NUMBER",i.COLOR="COLOR",i.STRING="STRING",i.BOOLEAN="BOOLEAN",i.INTERVAL="INTERVAL",i.VECTOR3D="VECTOR3D",i.VECTOR2D="VECTOR2D"})(Yo||(Yo={}));const TB=["type","__customInput"],MB=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],AB=["type"];function O3(i,e,t={},n){var s,r;if(typeof i!="object"||Array.isArray(i))return{type:n,input:i,options:tn({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in i){const{type:I,__customInput:L}=i,P=fi(i,TB);return O3(L,e,P,I)}const{render:o,label:c,optional:f,order:d=0,disabled:m,hint:g,onChange:v,onEditStart:_,onEditEnd:b,transient:A}=i,M=fi(i,MB),T=tn({render:o,key:e,label:c??e,hint:g,transient:A??!!v,onEditStart:_,onEditEnd:b,disabled:m,optional:f,order:d},t);let{type:C}=M,D=fi(M,AB);if(C=n??C,C in Bl)return{type:C,input:D,options:T};let N;return n&&D3(D)&&"value"in D?N=D.value:N=EB(D)?void 0:D,{type:C,input:N,options:tn(tn({},T),{},{onChange:v,optional:(s=T.optional)!==null&&s!==void 0?s:!1,disabled:(r=T.disabled)!==null&&r!==void 0?r:!1})}}function wB(i,e,t,n){const s=O3(i,e),{type:r,input:o,options:c}=s;if(r)return r in Bl?s:{type:r,input:cS(r,o,t,n),options:c};let f=c2(o);return f?{type:f,input:cS(f,o,t,n),options:c}:(f=c2({value:o}),f?{type:f,input:cS(f,{value:o},t,n),options:c}:!1)}function x2(i,e,t,n,s){const{value:r,type:o,settings:c}=i;i.value=L3({type:o,value:r,settings:c},e,t,n),i.fromPanel=s}const RB=function(e,t,n){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=n};function L3({type:i,value:e,settings:t},n,s,r){const o=i!=="SELECT"&&typeof n=="function"?n(e):n;let c;try{c=gB(i,o,t,e,s,r)}catch(f){throw new RB(`The value \`${n}\` did not result in a correct value.`,e,f)}return u_(c,e)?e:c}const U3=(i,e,t=!1)=>{let n=0;return function(){const s=arguments,r=t&&!n,o=()=>i.apply(this,s);window.clearTimeout(n),n=window.setTimeout(o,e),r&&o()}},z3=i=>i.shiftKey?5:i.altKey?1/5:1,CB=["value"],NB=["min","max"],DB=i=>{if(typeof i=="number")return!0;if(typeof i=="string"){const e=parseFloat(i);return isNaN(e)?!1:i.substring((""+e).length).trim().length<4}return!1},P3=(i,{min:e=-1/0,max:t=1/0,suffix:n})=>{const s=parseFloat(i);if(i===""||isNaN(s))throw Error("Invalid number");const r=df(s,e,t);return n?r+n:r},OB=(i,{pad:e=0,suffix:t})=>{const n=parseFloat(i).toFixed(e);return t?n+t:n},I3=i=>{let{value:e}=i,t=fi(i,CB);const{min:n=-1/0,max:s=1/0}=t,r=fi(t,NB);let o=parseFloat(e);const c=typeof e=="string"?e.substring((""+o).length):void 0;o=df(o,n,s);let f=t.step;f||(Number.isFinite(n)?Number.isFinite(s)?f=+(Math.abs(s-n)/100).toPrecision(1):f=+(Math.abs(o-n)/100).toPrecision(1):Number.isFinite(s)&&(f=+(Math.abs(s-o)/100).toPrecision(1)));const d=f?h2(f)*10:h2(o);f=f||d/10;const m=Math.round(df(Math.log10(1/d),0,2));return{value:c?o+c:o,settings:tn({initialValue:o,step:f,pad:m,min:n,max:s,suffix:c},r)}},B3=(i,{step:e,initialValue:t})=>{const n=Math.round((i-t)/e);return t+n*e};var F3=Object.freeze({__proto__:null,schema:DB,sanitize:P3,format:OB,normalize:I3,sanitizeStep:B3});function as(){return as=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},as.apply(this,arguments)}const H3=V.createContext({});function pr(){return V.useContext(H3)}const V3=V.createContext(null),G3=V.createContext(null),k3=V.createContext(null);function K0(){return V.useContext(G3)}function LB(){return V.useContext(k3)}const UB=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function Zv(i,e){const[t,n]=i.split(" "),s={};return t!=="none"&&(s.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),n&&(s.backgroundColor=n),s}const Fg={$inputStyle:()=>i=>Zv(i,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>i=>Zv(i,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>i=>Zv(i,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>i=>Zv(i,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:zt,css:GQ,createTheme:kQ,globalCss:zB,keyframes:$Q}=PP({prefix:"leva",theme:UB(),utils:tn(tn({},Fg),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:i=>({"&:focus":Fg.$focusStyle()(i)}),$focusWithin:i=>({"&:focus-within":Fg.$focusStyle()(i)}),$hover:i=>({"&:hover":Fg.$hoverStyle()(i)}),$active:i=>({"&:active":Fg.$activeStyle()(i)})})}),PB=zB({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function Bc(i,e){const{theme:t}=V.useContext(V3);if(!(i in t)||!(e in t[i]))return Dc(Ri.THEME_ERROR,i,e),"";let n=e;for(;;){let s=t[i][n];if(typeof s=="string"&&s.charAt(0)==="$")n=s.substr(1);else return s}}const $3=zt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),X3=zt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${$3}`]:{paddingLeft:0}}),IB=zt(X3,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),BB=zt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),FB=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],HB=["onUpdate"];function lM(i){let{innerLabel:e,value:t,onUpdate:n,onChange:s,onKeyDown:r,type:o,id:c,inputType:f="text",rows:d=0}=i,m=fi(i,FB);const{id:g,emitOnEditStart:v,emitOnEditEnd:_,disabled:b}=pr(),A=c||g,M=V.useRef(null),T=d>0,C=T?"textarea":"input",D=V.useCallback(L=>P=>{const G=P.currentTarget.value;L(G)},[]);se.useEffect(()=>{const L=M.current,P=D(G=>{n(G),_()});return L==null||L.addEventListener("blur",P),()=>L==null?void 0:L.removeEventListener("blur",P)},[D,n,_]);const N=V.useCallback(L=>{L.key==="Enter"&&D(n)(L)},[D,n]),I=Object.assign({as:C},T?{rows:d}:{},m);return se.createElement(BB,{textArea:T},e&&typeof e=="string"?se.createElement(X3,null,e):e,se.createElement($3,as({levaType:o,ref:M,id:A,type:f,autoComplete:"off",spellCheck:"false",value:t,onChange:D(s),onFocus:()=>v(),onKeyPress:N,onKeyDown:r,disabled:b},I)))}function VB(i){let{onUpdate:e}=i,t=fi(i,HB);const n=V.useCallback(r=>e(vB(r)),[e]),s=V.useCallback(r=>{const o=r.key==="ArrowUp"?1:r.key==="ArrowDown"?-1:0;if(o){r.preventDefault();const c=r.altKey?.1:r.shiftKey?10:1;e(f=>parseFloat(f)+o*c)}},[e]);return se.createElement(lM,as({},t,{onUpdate:n,onKeyDown:s,type:"number"}))}const __=zt("div",{}),fT=zt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),GB=zt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${fT}::after`]:{opacity:.6},[`${__}:hover > & + ${fT}::after`]:{opacity:.6},[`${__}:hover > & > svg`]:{opacity:1}}),q3=zt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${__}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),j3=zt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${q3} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),Y3=zt(j3,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),kB=zt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),$B=zt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),hT=zt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),XB=zt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${hT}`]:{pointerEvents:"auto"}}}}}),W3=zt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),qB=zt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),jB=zt(cB,{fill:"$toolTipBackground"});function cM({children:i}){const{className:e}=V.useContext(V3);return se.createElement(sP,{className:e},i)}const YB=["align"];function WB(){const{id:i,disable:e,disabled:t}=pr();return se.createElement(se.Fragment,null,se.createElement($B,{id:i+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),se.createElement("label",{htmlFor:i+"__disable"}))}function ZB(i){const{id:e,optional:t,hint:n}=pr(),s=i.htmlFor||(e?{htmlFor:e}:null),r=!n&&typeof i.children=="string"?{title:i.children}:null;return se.createElement(se.Fragment,null,t&&se.createElement(WB,null),n!==void 0?se.createElement(aB,null,se.createElement(oB,{asChild:!0},se.createElement(hT,as({},s,i))),se.createElement(lB,{side:"top",sideOffset:2},se.createElement(qB,null,n,se.createElement(jB,null)))):se.createElement(hT,as({},s,r,i)))}function Qo(i){let{align:e}=i,t=fi(i,YB);const{value:n,label:s,key:r,disabled:o}=pr(),{hideCopyButton:c}=LB(),f=!c&&r!==void 0,[d,m]=V.useState(!1),g=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[r]:n??""})),m(!0)}catch{Dc(Ri.CLIPBOARD_ERROR,{[r]:n})}};return se.createElement(kB,{align:e,onPointerLeave:()=>m(!1)},se.createElement(ZB,t),f&&!o&&se.createElement("div",{title:`Click to copy ${typeof s=="string"?s:r} value`},d?se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},se.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),se.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):se.createElement("svg",{onClick:g,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},se.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),se.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const KB=["toggled"],QB=zt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function uM(i){let{toggled:e}=i,t=fi(i,KB);return se.createElement(QB,as({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),se.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const JB=["input"];function lo(i){let{input:e}=i,t=fi(i,JB);return e?se.createElement(Y3,t):se.createElement(j3,t)}function Z3({value:i,type:e,settings:t,setValue:n}){const[s,r]=V.useState(u2(e,i,t)),o=V.useRef(i),c=V.useRef(t);c.current=t;const f=V.useCallback(m=>r(u2(e,m,c.current)),[e]),d=V.useCallback(m=>{try{n(m)}catch(g){const{type:v,previousValue:_}=g;if(v!=="LEVA_ERROR")throw g;f(_)}},[f,n]);return V.useEffect(()=>{u_(i,o.current)||f(i),o.current=i},[i,f]),{displayValue:s,onChange:r,onUpdate:d}}function Q0(i,e){const{emitOnEditStart:t,emitOnEditEnd:n}=pr();return C4(s=>{s.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const r=i(s);return s.last&&(document.body.classList.remove("leva__panel__dragged"),n==null||n()),r},e)}function e5(i){const e=V.useRef(null),t=V.useRef(null),n=V.useRef(!1);return V.useEffect(()=>{const s=U3(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,i(e.current,t.current)},250);return window.addEventListener("resize",s),n.current||(s(),n.current=!0),()=>window.removeEventListener("resize",s)},[i]),V.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function K3(){const i=V.useRef(null),e=V.useRef({x:0,y:0}),t=V.useCallback(n=>{Object.assign(e.current,n),i.current&&(i.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[i,t]}const t5=["__refCount"],uS=(i,e)=>{if(!i[e])return null;const t=i[e];return fi(t,t5)};function n5(i){const e=K0(),[t,n]=V.useState(uS(e.getData(),i)),s=V.useCallback(d=>e.setValueAtPath(i,d,!0),[i,e]),r=V.useCallback(d=>e.setSettingsAtPath(i,d),[i,e]),o=V.useCallback(d=>e.disableInputAtPath(i,d),[i,e]),c=V.useCallback(()=>e.emitOnEditStart(i),[i,e]),f=V.useCallback(()=>e.emitOnEditEnd(i),[i,e]);return V.useEffect(()=>{n(uS(e.getData(),i));const d=e.useStore.subscribe(m=>uS(m.data,i),n,{equalityFn:WN});return()=>d()},[e,i]),[t,{set:s,setSettings:r,disable:o,storeId:e.storeId,emitOnEditStart:c,emitOnEditEnd:f}]}const i5=zt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),Q3=zt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),dT=zt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),J3=zt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),eD=zt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function s5({value:i,min:e,max:t,onDrag:n,step:s,initialValue:r}){const o=V.useRef(null),c=V.useRef(null),f=V.useRef(0),d=Bc("sizes","scrubberWidth"),m=Q0(({event:v,first:_,xy:[b],movement:[A],memo:M})=>{if(_){const{width:C,left:D}=o.current.getBoundingClientRect();f.current=C-parseFloat(d),M=(v==null?void 0:v.target)===c.current?i:x_((b-D)/C,e,t)}const T=M+x_(A/f.current,0,t-e);return n(B3(T,{step:s,initialValue:r})),M}),g=v_(i,e,t);return se.createElement(J3,as({ref:o},m()),se.createElement(Q3,null,se.createElement(eD,{style:{left:0,right:`${(1-g)*100}%`}})),se.createElement(dT,{ref:c,style:{left:`calc(${g} * (100% - ${d}))`}}))}const r5=se.memo(({label:i,onUpdate:e,step:t,innerLabelTrim:n})=>{const[s,r]=V.useState(!1),o=Q0(({active:c,delta:[f],event:d,memo:m=0,first:g,last:v,target:_})=>(g&&_.requestPointerLock(),v&&document.exitPointerLock(),r(c),m+=f/2,Math.abs(m)>=1&&(e(b=>parseFloat(b)+Math.floor(m)*t*z3(d)),m=0),m));return se.createElement(IB,as({dragging:s,title:i.length>1?i:""},o()),i.slice(0,n))});function tD({label:i,id:e,displayValue:t,onUpdate:n,onChange:s,settings:r,innerLabelTrim:o=1}){const c=o>0&&se.createElement(r5,{label:i,step:r.step,onUpdate:n,innerLabelTrim:o});return se.createElement(VB,{id:e,value:String(t),onUpdate:n,onChange:s,innerLabel:c})}function a5(){const i=pr(),{label:e,value:t,onUpdate:n,settings:s,id:r}=i,{min:o,max:c}=s,f=c!==1/0&&o!==-1/0;return se.createElement(lo,{input:!0},se.createElement(Qo,null,e),se.createElement(i5,{hasRange:f},f&&se.createElement(s5,as({value:parseFloat(t),onDrag:n},s)),se.createElement(tD,as({},i,{id:r,label:"value",innerLabelTrim:f?0:1}))))}const{sanitizeStep:o5}=F3,l5=fi(F3,["sanitizeStep"]);var c5=tn({component:a5},l5);const u5=(i,e)=>ra().schema({options:ra().passesAnyOf(ra().object(),ra().array())}).test(e),f5=(i,{values:e})=>{if(e.indexOf(i)<0)throw Error("Selected value doesn't match Select options");return i},h5=(i,{values:e})=>e.indexOf(i),d5=i=>{let{value:e,options:t}=i,n,s;return Array.isArray(t)?(s=t,n=t.map(r=>String(r))):(s=Object.values(t),n=Object.keys(t)),"value"in i?s.includes(e)||(n.unshift(String(e)),s.unshift(e)):e=s[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:n,values:s}}};var p5=Object.freeze({__proto__:null,schema:u5,sanitize:f5,format:h5,normalize:d5});const m5=zt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),pT=zt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),g5=zt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${pT}:focus + &`]:{$focusStyle:""},[`${pT}:hover + &`]:{$hoverStyle:""}});function y5({displayValue:i,value:e,onUpdate:t,id:n,settings:s,disabled:r}){const{keys:o,values:c}=s,f=V.useRef();return e===c[i]&&(f.current=o[i]),se.createElement(m5,null,se.createElement(pT,{id:n,value:i,onChange:d=>t(c[Number(d.currentTarget.value)]),disabled:r},o.map((d,m)=>se.createElement("option",{key:d,value:m},d))),se.createElement(g5,null,f.current),se.createElement(uM,{toggled:!0}))}function v5(){const{label:i,value:e,displayValue:t,onUpdate:n,id:s,disabled:r,settings:o}=pr();return se.createElement(lo,{input:!0},se.createElement(Qo,null,i),se.createElement(y5,{id:s,value:e,displayValue:t,onUpdate:n,settings:o,disabled:r}))}var x5=tn({component:v5},p5);const _5=i=>ra().string().test(i),b5=i=>{if(typeof i!="string")throw Error("Invalid string");return i},S5=({value:i,editable:e=!0,rows:t=!1})=>({value:i,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var E5=Object.freeze({__proto__:null,schema:_5,sanitize:b5,normalize:S5});const T5=["displayValue","onUpdate","onChange","editable"],M5=zt("div",{whiteSpace:"pre-wrap"});function A5(i){let{displayValue:e,onUpdate:t,onChange:n,editable:s=!0}=i,r=fi(i,T5);return s?se.createElement(lM,as({value:e,onUpdate:t,onChange:n},r)):se.createElement(M5,null,e)}function w5(){const{label:i,settings:e,displayValue:t,onUpdate:n,onChange:s}=pr();return se.createElement(lo,{input:!0},se.createElement(Qo,null,i),se.createElement(A5,as({displayValue:t,onUpdate:n,onChange:s},e)))}var R5=tn({component:w5},E5);const C5=i=>ra().boolean().test(i),N5=i=>{if(typeof i!="boolean")throw Error("Invalid boolean");return i};var D5=Object.freeze({__proto__:null,schema:C5,sanitize:N5});const O5=zt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function L5({value:i,onUpdate:e,id:t,disabled:n}){return se.createElement(O5,null,se.createElement("input",{id:t,type:"checkbox",checked:i,onChange:s=>e(s.currentTarget.checked),disabled:n}),se.createElement("label",{htmlFor:t},se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},se.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function U5(){const{label:i,value:e,onUpdate:t,disabled:n,id:s}=pr();return se.createElement(lo,{input:!0},se.createElement(Qo,null,i),se.createElement(L5,{value:e,onUpdate:t,id:s,disabled:n}))}var z5=tn({component:U5},D5);const P5=["locked"];function I5({value:i,id:e,valueKey:t,settings:n,onUpdate:s,innerLabelTrim:r}){const o=V.useRef(i[t]);o.current=i[t];const c=V.useCallback(d=>s({[t]:L3({type:"NUMBER",value:o.current,settings:n},d)}),[s,n,t]),f=Z3({type:"NUMBER",value:i[t],settings:n,setValue:c});return se.createElement(tD,{id:e,label:t,value:i[t],displayValue:f.displayValue,onUpdate:f.onUpdate,onChange:f.onChange,settings:n,innerLabelTrim:r})}const B5=zt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function F5(i){let{locked:e}=i,t=fi(i,P5);return se.createElement("svg",as({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?se.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):se.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function fM({value:i,onUpdate:e,settings:t,innerLabelTrim:n}){const{id:s,setSettings:r}=pr(),{lock:o,locked:c}=t;return se.createElement(B5,{withLock:o},o&&se.createElement(F5,{locked:c,onClick:()=>r({locked:!c})}),Object.keys(i).map((f,d)=>se.createElement(I5,{id:d===0?s:`${s}.${f}`,key:f,valueKey:f,value:i,settings:t[f],onUpdate:e,innerLabelTrim:n})))}const nD=(i,e)=>{const t={};let n=0,s=1/0;Object.entries(i).forEach(([r,o])=>{t[r]=I3(tn({value:o},e[r])).settings,n=Math.max(n,t[r].step),s=Math.min(s,t[r].pad)});for(let r in t){const{step:o,min:c,max:f}=e[r]||{};!isFinite(o)&&(!isFinite(c)||!isFinite(f))&&(t[r].step=n,t[r].pad=s)}return t},H5=["lock"],V5=["value"];function G5(i){const e=ra().array().length(i).every.number(),t=n=>{if(!n||typeof n!="object")return!1;const s=Object.values(n);return s.length===i&&s.every(r=>isFinite(r))};return n=>e.test(n)||t(n)}function k5(i){return Array.isArray(i)?"array":"object"}function m0(i,e,t){return k5(i)===e?i:e==="array"?Object.values(i):SB(i,t)}const $5=(i,e,t)=>{const n=m0(i,"object",e.keys);for(let o in n)n[o]=P3(n[o],e[o]);const s=Object.keys(n);let r={};if(s.length===e.keys.length)r=n;else{const o=m0(t,"object",e.keys);if(s.length===1&&e.locked){const c=s[0],f=n[c],d=o[c],m=d!==0?f/d:1;for(let g in o)g===c?r[c]=f:r[g]=o[g]*m}else r=tn(tn({},o),n)}return m0(r,e.format,e.keys)},X5=(i,e)=>m0(i,"object",e.keys),q5=i=>!!i&&("step"in i||"min"in i||"max"in i);function j5(i,e,t=[]){const{lock:n=!1}=e,s=fi(e,H5),r=Array.isArray(i)?"array":"object",o=r==="object"?Object.keys(i):t,c=m0(i,"object",o),f=q5(s)?o.reduce((m,g)=>Object.assign(m,{[g]:s}),{}):s,d=nD(c,f);return{value:r==="array"?i:c,settings:tn(tn({},d),{},{format:r,keys:o,lock:n,locked:!1})}}function iD(i){return{schema:G5(i.length),normalize:e=>{let{value:t}=e,n=fi(e,V5);return j5(t,n,i)},format:(e,t)=>X5(e,t),sanitize:(e,t,n)=>$5(e,t,n)}}var Y5={grad:.9,turn:360,rad:360/(2*Math.PI)},_c=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},Ls=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},so=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},sD=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},_2=function(i){return{r:so(i.r,0,255),g:so(i.g,0,255),b:so(i.b,0,255),a:so(i.a)}},fS=function(i){return{r:Ls(i.r),g:Ls(i.g),b:Ls(i.b),a:Ls(i.a,3)}},W5=/^#([0-9a-f]{3,8})$/i,Kv=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},rD=function(i){var e=i.r,t=i.g,n=i.b,s=i.a,r=Math.max(e,t,n),o=r-Math.min(e,t,n),c=o?r===e?(t-n)/o:r===t?2+(n-e)/o:4+(e-t)/o:0;return{h:60*(c<0?c+6:c),s:r?o/r*100:0,v:r/255*100,a:s}},aD=function(i){var e=i.h,t=i.s,n=i.v,s=i.a;e=e/360*6,t/=100,n/=100;var r=Math.floor(e),o=n*(1-t),c=n*(1-(e-r)*t),f=n*(1-(1-e+r)*t),d=r%6;return{r:255*[n,c,o,o,f,n][d],g:255*[f,n,n,c,o,o][d],b:255*[o,o,f,n,n,c][d],a:s}},b2=function(i){return{h:sD(i.h),s:so(i.s,0,100),l:so(i.l,0,100),a:so(i.a)}},S2=function(i){return{h:Ls(i.h),s:Ls(i.s),l:Ls(i.l),a:Ls(i.a,3)}},E2=function(i){return aD((t=(e=i).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},g0=function(i){return{h:(e=rD(i)).h,s:(s=(200-(t=e.s))*(n=e.v)/100)>0&&s<200?t*n/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,t,n,s},Z5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,K5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Q5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,J5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mT={string:[[function(i){var e=W5.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?Ls(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?Ls(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=Q5.exec(i)||J5.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:_2({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=Z5.exec(i)||K5.exec(i);if(!e)return null;var t,n,s=b2({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(Y5[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return E2(s)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,n=i.b,s=i.a,r=s===void 0?1:s;return _c(e)&&_c(t)&&_c(n)?_2({r:Number(e),g:Number(t),b:Number(n),a:Number(r)}):null},"rgb"],[function(i){var e=i.h,t=i.s,n=i.l,s=i.a,r=s===void 0?1:s;if(!_c(e)||!_c(t)||!_c(n))return null;var o=b2({h:Number(e),s:Number(t),l:Number(n),a:Number(r)});return E2(o)},"hsl"],[function(i){var e=i.h,t=i.s,n=i.v,s=i.a,r=s===void 0?1:s;if(!_c(e)||!_c(t)||!_c(n))return null;var o=function(c){return{h:sD(c.h),s:so(c.s,0,100),v:so(c.v,0,100),a:so(c.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(r)});return aD(o)},"hsv"]]},T2=function(i,e){for(var t=0;t<e.length;t++){var n=e[t][0](i);if(n)return[n,e[t][1]]}return[null,void 0]},oD=function(i){return typeof i=="string"?T2(i.trim(),mT.string):typeof i=="object"&&i!==null?T2(i,mT.object):[null,void 0]},eF=function(i){return oD(i)[1]},hS=function(i,e){var t=g0(i);return{h:t.h,s:so(t.s+100*e,0,100),l:t.l,a:t.a}},dS=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},M2=function(i,e){var t=g0(i);return{h:t.h,s:t.s,l:so(t.l+100*e,0,100),a:t.a}},gT=function(){function i(e){this.parsed=oD(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return Ls(dS(this.rgba),2)},i.prototype.isDark=function(){return dS(this.rgba)<.5},i.prototype.isLight=function(){return dS(this.rgba)>=.5},i.prototype.toHex=function(){return e=fS(this.rgba),t=e.r,n=e.g,s=e.b,o=(r=e.a)<1?Kv(Ls(255*r)):"","#"+Kv(t)+Kv(n)+Kv(s)+o;var e,t,n,s,r,o},i.prototype.toRgb=function(){return fS(this.rgba)},i.prototype.toRgbString=function(){return e=fS(this.rgba),t=e.r,n=e.g,s=e.b,(r=e.a)<1?"rgba("+t+", "+n+", "+s+", "+r+")":"rgb("+t+", "+n+", "+s+")";var e,t,n,s,r},i.prototype.toHsl=function(){return S2(g0(this.rgba))},i.prototype.toHslString=function(){return e=S2(g0(this.rgba)),t=e.h,n=e.s,s=e.l,(r=e.a)<1?"hsla("+t+", "+n+"%, "+s+"%, "+r+")":"hsl("+t+", "+n+"%, "+s+"%)";var e,t,n,s,r},i.prototype.toHsv=function(){return e=rD(this.rgba),{h:Ls(e.h),s:Ls(e.s),v:Ls(e.v),a:Ls(e.a,3)};var e},i.prototype.invert=function(){return Pr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),Pr(hS(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),Pr(hS(this.rgba,-e))},i.prototype.grayscale=function(){return Pr(hS(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),Pr(M2(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),Pr(M2(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?Pr({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Ls(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=g0(this.rgba);return typeof e=="number"?Pr({h:e,s:t.s,l:t.l,a:t.a}):Ls(t.h)},i.prototype.isEqual=function(e){return this.toHex()===Pr(e).toHex()},i}(),Pr=function(i){return i instanceof gT?i:new gT(i)},A2=[],tF=function(i){i.forEach(function(e){A2.indexOf(e)<0&&(e(gT,mT),A2.push(e))})};function nF(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var s in t)n[t[s]]=s;var r={};i.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,f,d=n[this.toHex()];if(d)return d;if(o!=null&&o.closest){var m=this.toRgb(),g=1/0,v="black";if(!r.length)for(var _ in t)r[_]=new i(t[_]).toRgb();for(var b in t){var A=(c=m,f=r[b],Math.pow(c.r-f.r,2)+Math.pow(c.g-f.g,2)+Math.pow(c.b-f.b,2));A<g&&(g=A,v=b)}return v}},e.string.push([function(o){var c=o.toLowerCase(),f=c==="transparent"?"#0000":t[c];return f?new i(f).toRgb():null},"name"])}function um(){return(um=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i}).apply(this,arguments)}function hM(i,e){if(i==null)return{};var t,n,s={},r=Object.keys(i);for(n=0;n<r.length;n++)e.indexOf(t=r[n])>=0||(s[t]=i[t]);return s}function yT(i){var e=V.useRef(i),t=V.useRef(function(n){e.current&&e.current(n)});return e.current=i,t.current}var Gp=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i<e?e:i},y0=function(i){return"touches"in i},vT=function(i){return i&&i.ownerDocument.defaultView||self},w2=function(i,e,t){var n=i.getBoundingClientRect(),s=y0(e)?function(r,o){for(var c=0;c<r.length;c++)if(r[c].identifier===o)return r[c];return r[0]}(e.touches,t):e;return{left:Gp((s.pageX-(n.left+vT(i).pageXOffset))/n.width),top:Gp((s.pageY-(n.top+vT(i).pageYOffset))/n.height)}},R2=function(i){!y0(i)&&i.preventDefault()},dM=se.memo(function(i){var e=i.onMove,t=i.onKey,n=hM(i,["onMove","onKey"]),s=V.useRef(null),r=yT(e),o=yT(t),c=V.useRef(null),f=V.useRef(!1),d=V.useMemo(function(){var _=function(M){R2(M),(y0(M)?M.touches.length>0:M.buttons>0)&&s.current?r(w2(s.current,M,c.current)):A(!1)},b=function(){return A(!1)};function A(M){var T=f.current,C=vT(s.current),D=M?C.addEventListener:C.removeEventListener;D(T?"touchmove":"mousemove",_),D(T?"touchend":"mouseup",b)}return[function(M){var T=M.nativeEvent,C=s.current;if(C&&(R2(T),!function(N,I){return I&&!y0(N)}(T,f.current)&&C)){if(y0(T)){f.current=!0;var D=T.changedTouches||[];D.length&&(c.current=D[0].identifier)}C.focus(),r(w2(C,T,c.current)),A(!0)}},function(M){var T=M.which||M.keyCode;T<37||T>40||(M.preventDefault(),o({left:T===39?.05:T===37?-.05:0,top:T===40?.05:T===38?-.05:0}))},A]},[o,r]),m=d[0],g=d[1],v=d[2];return V.useEffect(function(){return v},[v]),se.createElement("div",um({},n,{onTouchStart:m,onMouseDown:m,className:"react-colorful__interactive",ref:s,onKeyDown:g,tabIndex:0,role:"slider"}))}),J0=function(i){return i.filter(Boolean).join(" ")},pM=function(i){var e=i.color,t=i.left,n=i.top,s=n===void 0?.5:n,r=J0(["react-colorful__pointer",i.className]);return se.createElement("div",{className:r,style:{top:100*s+"%",left:100*t+"%"}},se.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Fr=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t},lD=function(i){var e=i.s,t=i.v,n=i.a,s=(200-e)*t/100;return{h:Fr(i.h),s:Fr(s>0&&s<200?e*t/100/(s<=100?s:200-s)*100:0),l:Fr(s/2),a:Fr(n,2)}},xT=function(i){var e=lD(i);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},pS=function(i){var e=lD(i);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},cD=function(i){var e=i.h,t=i.s,n=i.v,s=i.a;e=e/360*6,t/=100,n/=100;var r=Math.floor(e),o=n*(1-t),c=n*(1-(e-r)*t),f=n*(1-(1-e+r)*t),d=r%6;return{r:Fr(255*[n,c,o,o,f,n][d]),g:Fr(255*[f,n,n,c,o,o][d]),b:Fr(255*[o,o,f,n,n,c][d]),a:Fr(s,2)}},uD=function(i){var e=i.r,t=i.g,n=i.b,s=i.a,r=Math.max(e,t,n),o=r-Math.min(e,t,n),c=o?r===e?(t-n)/o:r===t?2+(n-e)/o:4+(e-t)/o:0;return{h:Fr(60*(c<0?c+6:c)),s:Fr(r?o/r*100:0),v:Fr(r/255*100),a:s}},fD=se.memo(function(i){var e=i.hue,t=i.onChange,n=J0(["react-colorful__hue",i.className]);return se.createElement("div",{className:n},se.createElement(dM,{onMove:function(s){t({h:360*s.left})},onKey:function(s){t({h:Gp(e+360*s.left,0,360)})},"aria-label":"Hue","aria-valuenow":Fr(e),"aria-valuemax":"360","aria-valuemin":"0"},se.createElement(pM,{className:"react-colorful__hue-pointer",left:e/360,color:xT({h:e,s:100,v:100,a:1})})))}),hD=se.memo(function(i){var e=i.hsva,t=i.onChange,n={backgroundColor:xT({h:e.h,s:100,v:100,a:1})};return se.createElement("div",{className:"react-colorful__saturation",style:n},se.createElement(dM,{onMove:function(s){t({s:100*s.left,v:100-100*s.top})},onKey:function(s){t({s:Gp(e.s+100*s.left,0,100),v:Gp(e.v-100*s.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Fr(e.s)+"%, Brightness "+Fr(e.v)+"%"},se.createElement(pM,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:xT(e)})))}),mM=function(i,e){if(i===e)return!0;for(var t in i)if(i[t]!==e[t])return!1;return!0};function dD(i,e,t){var n=yT(t),s=V.useState(function(){return i.toHsva(e)}),r=s[0],o=s[1],c=V.useRef({color:e,hsva:r});V.useEffect(function(){if(!i.equal(e,c.current.color)){var d=i.toHsva(e);c.current={hsva:d,color:e},o(d)}},[e,i]),V.useEffect(function(){var d;mM(r,c.current.hsva)||i.equal(d=i.fromHsva(r),c.current.color)||(c.current={hsva:r,color:d},n(d))},[r,i,n]);var f=V.useCallback(function(d){o(function(m){return Object.assign({},m,d)})},[]);return[r,f]}var iF=typeof window<"u"?V.useLayoutEffect:V.useEffect,sF=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},C2=new Map,pD=function(i){iF(function(){var e=i.current?i.current.ownerDocument:document;if(e!==void 0&&!C2.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,C2.set(e,t);var n=sF();n&&t.setAttribute("nonce",n),e.head.appendChild(t)}},[])},rF=function(i){var e=i.className,t=i.colorModel,n=i.color,s=n===void 0?t.defaultColor:n,r=i.onChange,o=hM(i,["className","colorModel","color","onChange"]),c=V.useRef(null);pD(c);var f=dD(t,s,r),d=f[0],m=f[1],g=J0(["react-colorful",e]);return se.createElement("div",um({},o,{ref:c,className:g}),se.createElement(hD,{hsva:d,onChange:m}),se.createElement(fD,{hue:d.h,onChange:m,className:"react-colorful__last-control"}))},aF=function(i){var e=i.className,t=i.hsva,n=i.onChange,s={backgroundImage:"linear-gradient(90deg, "+pS(Object.assign({},t,{a:0}))+", "+pS(Object.assign({},t,{a:1}))+")"},r=J0(["react-colorful__alpha",e]),o=Fr(100*t.a);return se.createElement("div",{className:r},se.createElement("div",{className:"react-colorful__alpha-gradient",style:s}),se.createElement(dM,{onMove:function(c){n({a:c.left})},onKey:function(c){n({a:Gp(t.a+c.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},se.createElement(pM,{className:"react-colorful__alpha-pointer",left:t.a,color:pS(t)})))},oF=function(i){var e=i.className,t=i.colorModel,n=i.color,s=n===void 0?t.defaultColor:n,r=i.onChange,o=hM(i,["className","colorModel","color","onChange"]),c=V.useRef(null);pD(c);var f=dD(t,s,r),d=f[0],m=f[1],g=J0(["react-colorful",e]);return se.createElement("div",um({},o,{ref:c,className:g}),se.createElement(hD,{hsva:d,onChange:m}),se.createElement(fD,{hue:d.h,onChange:m}),se.createElement(aF,{hsva:d,onChange:m,className:"react-colorful__last-control"}))},lF={defaultColor:{r:0,g:0,b:0,a:1},toHsva:uD,fromHsva:cD,equal:mM},cF=function(i){return se.createElement(oF,um({},i,{colorModel:lF}))},uF={defaultColor:{r:0,g:0,b:0},toHsva:function(i){return uD({r:i.r,g:i.g,b:i.b,a:1})},fromHsva:function(i){return{r:(e=cD(i)).r,g:e.g,b:e.b};var e},equal:mM},fF=function(i){return se.createElement(rF,um({},i,{colorModel:uF}))},mS={exports:{}},gS,N2;function hF(){if(N2)return gS;N2=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return gS=i,gS}var yS,D2;function dF(){if(D2)return yS;D2=1;var i=hF();function e(){}function t(){}return t.resetWarningCache=e,yS=function(){function n(o,c,f,d,m,g){if(g!==i){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}n.isRequired=n;function s(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return r.PropTypes=r,r},yS}var O2;function pF(){return O2||(O2=1,mS.exports=dF()()),mS.exports}var mF=pF();const ci=Kh(mF);function fm(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function c(m){try{d(n.next(m))}catch(g){o(g)}}function f(m){try{d(n.throw(m))}catch(g){o(g)}}function d(m){m.done?r(m.value):s(m.value).then(c,f)}d((n=n.apply(i,e||[])).next())})}function hm(i,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,s,r,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=c(0),o.throw=c(1),o.return=c(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(m){return f([d,m])}}function f(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(t=0)),t;)try{if(n=1,s&&(r=d[0]&2?s.return:d[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,d[1])).done)return r;switch(s=0,r&&(d=[d[0]&2,r.value]),d[0]){case 0:case 1:r=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,s=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!r||d[1]>r[0]&&d[1]<r[3])){t.label=d[1];break}if(d[0]===6&&t.label<r[1]){t.label=r[1],r=d;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(d);break}r[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(i,t)}catch(m){d=[6,m],s=0}finally{n=r=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function gF(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),s,r=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)r.push(s.value)}catch(c){o={error:c}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return r}function yF(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(gF(arguments[e]));return i}var vF=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ey(i,e){var t=xF(i);if(typeof t.path!="string"){var n=i.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof n=="string"&&n.length>0?n:i.name,writable:!1,configurable:!1,enumerable:!0})}return t}function xF(i){var e=i.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!i.type){var n=e.split(".").pop().toLowerCase(),s=vF.get(n);s&&Object.defineProperty(i,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return i}var _F=[".DS_Store","Thumbs.db"];function bF(i){return fm(this,void 0,void 0,function(){return hm(this,function(e){return b_(i)&&SF(i)?[2,AF(i.dataTransfer,i.type)]:EF(i)?[2,TF(i)]:Array.isArray(i)&&i.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,MF(i)]:[2,[]]})})}function SF(i){return b_(i.dataTransfer)}function EF(i){return b_(i)&&b_(i.target)}function b_(i){return typeof i=="object"&&i!==null}function TF(i){return _T(i.target.files).map(function(e){return ey(e)})}function MF(i){return fm(this,void 0,void 0,function(){var e;return hm(this,function(t){switch(t.label){case 0:return[4,Promise.all(i.map(function(n){return n.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(n){return ey(n)})]}})})}function AF(i,e){return fm(this,void 0,void 0,function(){var t,n;return hm(this,function(s){switch(s.label){case 0:return i===null?[2,[]]:i.items?(t=_T(i.items).filter(function(r){return r.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(wF))]):[3,2];case 1:return n=s.sent(),[2,L2(mD(n))];case 2:return[2,L2(_T(i.files).map(function(r){return ey(r)}))]}})})}function L2(i){return i.filter(function(e){return _F.indexOf(e.name)===-1})}function _T(i){if(i===null)return[];for(var e=[],t=0;t<i.length;t++){var n=i[t];e.push(n)}return e}function wF(i){if(typeof i.webkitGetAsEntry!="function")return U2(i);var e=i.webkitGetAsEntry();return e&&e.isDirectory?gD(e):U2(i)}function mD(i){return i.reduce(function(e,t){return yF(e,Array.isArray(t)?mD(t):[t])},[])}function U2(i){var e=i.getAsFile();if(!e)return Promise.reject(i+" is not a File");var t=ey(e);return Promise.resolve(t)}function RF(i){return fm(this,void 0,void 0,function(){return hm(this,function(e){return[2,i.isDirectory?gD(i):CF(i)]})})}function gD(i){var e=i.createReader();return new Promise(function(t,n){var s=[];function r(){var o=this;e.readEntries(function(c){return fm(o,void 0,void 0,function(){var f,d,m;return hm(this,function(g){switch(g.label){case 0:if(c.length)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return f=g.sent(),t(f),[3,4];case 3:return d=g.sent(),n(d),[3,4];case 4:return[3,6];case 5:m=Promise.all(c.map(RF)),s.push(m),r(),g.label=6;case 6:return[2]}})})},function(c){n(c)})}r()})}function CF(i){return fm(this,void 0,void 0,function(){return hm(this,function(e){return[2,new Promise(function(t,n){i.file(function(s){var r=ey(s,i.fullPath);t(r)},function(s){n(s)})})]})})}var Qv={},z2;function NF(){return z2||(z2=1,Qv.__esModule=!0,Qv.default=function(i,e){if(i&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var n=i.name||"",s=(i.type||"").toLowerCase(),r=s.replace(/\/.*$/,"");return t.some(function(o){var c=o.trim().toLowerCase();return c.charAt(0)==="."?n.toLowerCase().endsWith(c):c.endsWith("/*")?r===c.replace(/\/.*$/,""):s===c})}return!0}),Qv}var DF=NF();const OF=Kh(DF);function P2(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function I2(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?P2(Object(t),!0).forEach(function(n){yD(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):P2(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function yD(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function B2(i,e){return PF(i)||zF(i,e)||UF(i,e)||LF()}function LF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UF(i,e){if(i){if(typeof i=="string")return F2(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return F2(i,e)}}function F2(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function zF(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],s=!0,r=!1,o,c;try{for(t=t.call(i);!(s=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));s=!0);}catch(f){r=!0,c=f}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw c}}return n}}function PF(i){if(Array.isArray(i))return i}var IF="file-invalid-type",BF="file-too-large",FF="file-too-small",HF="too-many-files",VF=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:IF,message:"File type must be ".concat(t)}},H2=function(e){return{code:BF,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},V2=function(e){return{code:FF,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},GF={code:HF,message:"Too many files"};function vD(i,e){var t=i.type==="application/x-moz-file"||OF(i,e);return[t,t?null:VF(e)]}function xD(i,e,t){if(Hg(i.size))if(Hg(e)&&Hg(t)){if(i.size>t)return[!1,H2(t)];if(i.size<e)return[!1,V2(e)]}else{if(Hg(e)&&i.size<e)return[!1,V2(e)];if(Hg(t)&&i.size>t)return[!1,H2(t)]}return[!0,null]}function Hg(i){return i!=null}function kF(i){var e=i.files,t=i.accept,n=i.minSize,s=i.maxSize,r=i.multiple,o=i.maxFiles;return!r&&e.length>1||r&&o>=1&&e.length>o?!1:e.every(function(c){var f=vD(c,t),d=B2(f,1),m=d[0],g=xD(c,n,s),v=B2(g,1),_=v[0];return m&&_})}function S_(i){return typeof i.isPropagationStopped=="function"?i.isPropagationStopped():typeof i.cancelBubble<"u"?i.cancelBubble:!1}function Jv(i){return i.dataTransfer?Array.prototype.some.call(i.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!i.target&&!!i.target.files}function G2(i){i.preventDefault()}function $F(i){return i.indexOf("MSIE")!==-1||i.indexOf("Trident/")!==-1}function XF(i){return i.indexOf("Edge/")!==-1}function qF(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return $F(i)||XF(i)}function Pl(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return function(n){for(var s=arguments.length,r=new Array(s>1?s-1:0),o=1;o<s;o++)r[o-1]=arguments[o];return e.some(function(c){return!S_(n)&&c&&c.apply(void 0,[n].concat(r)),S_(n)})}}function jF(){return"showOpenFilePicker"in window}function YF(i){return i=typeof i=="string"?i.split(","):i,[{description:"everything",accept:Array.isArray(i)?i.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return I2(I2({},e),{},yD({},t,[]))},{}):{}}]}function WF(i){return i instanceof DOMException&&(i.name==="AbortError"||i.code===i.ABORT_ERR)}function ZF(i){return i instanceof DOMException&&(i.name==="SecurityError"||i.code===i.SECURITY_ERR)}var KF=["children"],QF=["open"],JF=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],eH=["refKey","onChange","onClick"];function tH(i){return sH(i)||iH(i)||_D(i)||nH()}function nH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iH(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function sH(i){if(Array.isArray(i))return bT(i)}function vS(i,e){return oH(i)||aH(i,e)||_D(i,e)||rH()}function rH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _D(i,e){if(i){if(typeof i=="string")return bT(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return bT(i,e)}}function bT(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function aH(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],s=!0,r=!1,o,c;try{for(t=t.call(i);!(s=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));s=!0);}catch(f){r=!0,c=f}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw c}}return n}}function oH(i){if(Array.isArray(i))return i}function k2(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function wi(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?k2(Object(t),!0).forEach(function(n){ST(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):k2(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function ST(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function E_(i,e){if(i==null)return{};var t=lH(i,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function lH(i,e){if(i==null)return{};var t={},n=Object.keys(i),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(t[s]=i[s]);return t}var gM=V.forwardRef(function(i,e){var t=i.children,n=E_(i,KF),s=SD(n),r=s.open,o=E_(s,QF);return V.useImperativeHandle(e,function(){return{open:r}},[r]),se.createElement(V.Fragment,null,t(wi(wi({},o),{},{open:r})))});gM.displayName="Dropzone";var bD={disabled:!1,getFilesFromEvent:bF,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};gM.defaultProps=bD;gM.propTypes={children:ci.func,accept:ci.oneOfType([ci.string,ci.arrayOf(ci.string)]),multiple:ci.bool,preventDropOnDocument:ci.bool,noClick:ci.bool,noKeyboard:ci.bool,noDrag:ci.bool,noDragEventsBubbling:ci.bool,minSize:ci.number,maxSize:ci.number,maxFiles:ci.number,disabled:ci.bool,getFilesFromEvent:ci.func,onFileDialogCancel:ci.func,onFileDialogOpen:ci.func,useFsAccessApi:ci.bool,onDragEnter:ci.func,onDragLeave:ci.func,onDragOver:ci.func,onDrop:ci.func,onDropAccepted:ci.func,onDropRejected:ci.func,validator:ci.func};var ET={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function SD(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=wi(wi({},bD),i),t=e.accept,n=e.disabled,s=e.getFilesFromEvent,r=e.maxSize,o=e.minSize,c=e.multiple,f=e.maxFiles,d=e.onDragEnter,m=e.onDragLeave,g=e.onDragOver,v=e.onDrop,_=e.onDropAccepted,b=e.onDropRejected,A=e.onFileDialogCancel,M=e.onFileDialogOpen,T=e.useFsAccessApi,C=e.preventDropOnDocument,D=e.noClick,N=e.noKeyboard,I=e.noDrag,L=e.noDragEventsBubbling,P=e.validator,G=V.useMemo(function(){return typeof M=="function"?M:$2},[M]),B=V.useMemo(function(){return typeof A=="function"?A:$2},[A]),U=V.useRef(null),j=V.useRef(null),ae=V.useReducer(cH,ET),ne=vS(ae,2),de=ne[0],he=ne[1],F=de.isFocused,W=de.isFileDialogActive,Z=de.draggedFiles,fe=V.useRef(typeof window<"u"&&window.isSecureContext&&T&&jF()),X=function(){!fe.current&&W&&setTimeout(function(){if(j.current){var pe=j.current.files;pe.length||(he({type:"closeDialog"}),B())}},300)};V.useEffect(function(){return window.addEventListener("focus",X,!1),function(){window.removeEventListener("focus",X,!1)}},[j,W,B,fe]);var ie=V.useRef([]),Ee=function(pe){U.current&&U.current.contains(pe.target)||(pe.preventDefault(),ie.current=[])};V.useEffect(function(){return C&&(document.addEventListener("dragover",G2,!1),document.addEventListener("drop",Ee,!1)),function(){C&&(document.removeEventListener("dragover",G2),document.removeEventListener("drop",Ee))}},[U,C]);var Ue=V.useCallback(function(Q){Q.preventDefault(),Q.persist(),Fe(Q),ie.current=[].concat(tH(ie.current),[Q.target]),Jv(Q)&&Promise.resolve(s(Q)).then(function(pe){S_(Q)&&!L||(he({draggedFiles:pe,isDragActive:!0,type:"setDraggedFiles"}),d&&d(Q))})},[s,d,L]),re=V.useCallback(function(Q){Q.preventDefault(),Q.persist(),Fe(Q);var pe=Jv(Q);if(pe&&Q.dataTransfer)try{Q.dataTransfer.dropEffect="copy"}catch{}return pe&&g&&g(Q),!1},[g,L]),Ce=V.useCallback(function(Q){Q.preventDefault(),Q.persist(),Fe(Q);var pe=ie.current.filter(function(Me){return U.current&&U.current.contains(Me)}),De=pe.indexOf(Q.target);De!==-1&&pe.splice(De,1),ie.current=pe,!(pe.length>0)&&(he({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Jv(Q)&&m&&m(Q))},[U,m,L]),Be=V.useCallback(function(Q,pe){var De=[],Me=[];Q.forEach(function(et){var We=vD(et,t),tt=vS(We,2),Zt=tt[0],Ye=tt[1],pt=xD(et,o,r),yt=vS(pt,2),vt=yt[0],st=yt[1],Xt=P?P(et):null;if(Zt&&vt&&!Xt)De.push(et);else{var wt=[Ye,st];Xt&&(wt=wt.concat(Xt)),Me.push({file:et,errors:wt.filter(function(bn){return bn})})}}),(!c&&De.length>1||c&&f>=1&&De.length>f)&&(De.forEach(function(et){Me.push({file:et,errors:[GF]})}),De.splice(0)),he({acceptedFiles:De,fileRejections:Me,type:"setFiles"}),v&&v(De,Me,pe),Me.length>0&&b&&b(Me,pe),De.length>0&&_&&_(De,pe)},[he,c,t,o,r,f,v,_,b,P]),qe=V.useCallback(function(Q){Q.preventDefault(),Q.persist(),Fe(Q),ie.current=[],Jv(Q)&&Promise.resolve(s(Q)).then(function(pe){S_(Q)&&!L||Be(pe,Q)}),he({type:"reset"})},[s,Be,L]),Ke=V.useCallback(function(){if(fe.current){he({type:"openDialog"}),G();var Q={multiple:c,types:YF(t)};window.showOpenFilePicker(Q).then(function(pe){return s(pe)}).then(function(pe){Be(pe,null),he({type:"closeDialog"})}).catch(function(pe){WF(pe)?(B(pe),he({type:"closeDialog"})):ZF(pe)&&(fe.current=!1,j.current&&(j.current.value=null,j.current.click()))});return}j.current&&(he({type:"openDialog"}),G(),j.current.value=null,j.current.click())},[he,G,B,T,Be,t,c]),Ct=V.useCallback(function(Q){!U.current||!U.current.isEqualNode(Q.target)||(Q.key===" "||Q.key==="Enter"||Q.keyCode===32||Q.keyCode===13)&&(Q.preventDefault(),Ke())},[U,Ke]),bt=V.useCallback(function(){he({type:"focus"})},[]),$t=V.useCallback(function(){he({type:"blur"})},[]),jt=V.useCallback(function(){D||(qF()?setTimeout(Ke,0):Ke())},[D,Ke]),Nt=function(pe){return n?null:pe},te=function(pe){return N?null:Nt(pe)},_n=function(pe){return I?null:Nt(pe)},Fe=function(pe){L&&pe.stopPropagation()},Pe=V.useMemo(function(){return function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=Q.refKey,De=pe===void 0?"ref":pe,Me=Q.role,et=Q.onKeyDown,We=Q.onFocus,tt=Q.onBlur,Zt=Q.onClick,Ye=Q.onDragEnter,pt=Q.onDragOver,yt=Q.onDragLeave,vt=Q.onDrop,st=E_(Q,JF);return wi(wi(ST({onKeyDown:te(Pl(et,Ct)),onFocus:te(Pl(We,bt)),onBlur:te(Pl(tt,$t)),onClick:Nt(Pl(Zt,jt)),onDragEnter:_n(Pl(Ye,Ue)),onDragOver:_n(Pl(pt,re)),onDragLeave:_n(Pl(yt,Ce)),onDrop:_n(Pl(vt,qe)),role:typeof Me=="string"&&Me!==""?Me:"button"},De,U),!n&&!N?{tabIndex:0}:{}),st)}},[U,Ct,bt,$t,jt,Ue,re,Ce,qe,N,I,n]),Ie=V.useCallback(function(Q){Q.stopPropagation()},[]),Je=V.useMemo(function(){return function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=Q.refKey,De=pe===void 0?"ref":pe,Me=Q.onChange,et=Q.onClick,We=E_(Q,eH),tt=ST({accept:t,multiple:c,type:"file",style:{display:"none"},onChange:Nt(Pl(Me,qe)),onClick:Nt(Pl(et,Ie)),tabIndex:-1},De,j);return wi(wi({},tt),We)}},[j,t,c,qe,n]),Ne=Z.length,Y=Ne>0&&kF({files:Z,accept:t,minSize:o,maxSize:r,multiple:c,maxFiles:f}),H=Ne>0&&!Y;return wi(wi({},de),{},{isDragAccept:Y,isDragReject:H,isFocused:F&&!n,getRootProps:Pe,getInputProps:Je,rootRef:U,inputRef:j,open:Nt(Ke)})}function cH(i,e){switch(e.type){case"focus":return wi(wi({},i),{},{isFocused:!0});case"blur":return wi(wi({},i),{},{isFocused:!1});case"openDialog":return wi(wi({},ET),{},{isFileDialogActive:!0});case"closeDialog":return wi(wi({},i),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,n=e.draggedFiles;return wi(wi({},i),{},{draggedFiles:n,isDragActive:t});case"setFiles":return wi(wi({},i),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return wi({},ET);default:return i}}function $2(){}function uH(i){let e;const t=new Set,n=(d,m)=>{const g=typeof d=="function"?d(e):d;if(g!==e){const v=e;e=m?g:Object.assign({},e,g),t.forEach(_=>_(e,v))}},s=()=>e,r=(d,m=s,g=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let v=m(e);function _(){const b=m(e);if(!g(v,b)){const A=v;d(v=b,A)}}return t.add(_),()=>t.delete(_)},f={setState:n,getState:s,subscribe:(d,m,g)=>m||g?r(d,m,g):(t.add(d),()=>t.delete(d)),destroy:()=>t.clear()};return e=i(n,s,f),f}const fH=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),X2=fH?V.useEffect:V.useLayoutEffect;function hH(i){const e=typeof i=="function"?uH(i):i,t=(n=e.getState,s=Object.is)=>{const[,r]=V.useReducer(M=>M+1,0),o=e.getState(),c=V.useRef(o),f=V.useRef(n),d=V.useRef(s),m=V.useRef(!1),g=V.useRef();g.current===void 0&&(g.current=n(o));let v,_=!1;(c.current!==o||f.current!==n||d.current!==s||m.current)&&(v=n(o),_=!s(g.current,v)),X2(()=>{_&&(g.current=v),c.current=o,f.current=n,d.current=s,m.current=!1});const b=V.useRef(o);X2(()=>{const M=()=>{try{const C=e.getState(),D=f.current(C);d.current(g.current,D)||(c.current=C,g.current=D,r())}catch{m.current=!0,r()}},T=e.subscribe(M);return e.getState()!==b.current&&M(),T},[]);const A=_?v:g.current;return V.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const s=n.length<=0;return{value:n.shift(),done:s}}}},t}const dH=i=>(e,t,n)=>{const s=n.subscribe;return n.subscribe=(o,c,f)=>{let d=o;if(c){const m=(f==null?void 0:f.equalityFn)||Object.is;let g=o(n.getState());d=v=>{const _=o(v);if(!m(g,_)){const b=g;c(g=_,b)}},f!=null&&f.fireImmediately&&c(g,g)}return s(d)},i(e,t,n)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var xS,q2;function pH(){return q2||(q2=1,xS=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),xS}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var _S,j2;function ED(){if(j2)return _S;j2=1;var i=pH();function e(t){return i(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return _S=function(n){var s,r;return!(e(n)===!1||(s=n.constructor,typeof s!="function")||(r=s.prototype,e(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)},_S}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var bS,Y2;function yM(){if(Y2)return bS;Y2=1;var i=ED();return bS=function(t){return i(t)||typeof t=="function"||Array.isArray(t)},bS}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var SS,W2;function mH(){return W2||(W2=1,SS=function(e,t,n){for(var s in e)if(t.call(n,e[s],s,e)===!1)break}),SS}var ES,Z2;function gH(){if(Z2)return ES;Z2=1;var i=yM(),e=mH();function t(o,c){for(var f=arguments.length,d=0;++d<f;){var m=arguments[d];s(m)&&e(m,n,o)}return o}function n(o,c){if(r(c)){var f=this[c];s(o)&&s(f)?t(f,o):this[c]=o}}function s(o){return i(o)&&!Array.isArray(o)}function r(o){return o!=="__proto__"&&o!=="constructor"&&o!=="prototype"}return ES=t,ES}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var TS,K2;function yH(){if(K2)return TS;K2=1,TS=function(t,n,s,r,o){if(!i(t)||!n)return t;if(n=e(n),s&&(n+="."+e(s)),r&&(n+="."+e(r)),o&&(n+="."+e(o)),n in t)return t[n];for(var c=n.split("."),f=c.length,d=-1;t&&++d<f;){for(var m=c[d];m[m.length-1]==="\\";)m=m.slice(0,-1)+"."+c[++d];t=t[m]}return t};function i(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return TS}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var MS,Q2;function vH(){return Q2||(Q2=1,MS=function(i,e){if(i===null||typeof i>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return i;for(var t=Object.prototype.propertyIsEnumerable,n=Object(i),s=arguments.length,r=0;++r<s;)for(var o=Object(arguments[r]),c=Object.getOwnPropertySymbols(o),f=0;f<c.length;f++){var d=c[f];t.call(o,d)&&(n[d]=o[d])}return n}),MS}var AS,J2;function xH(){if(J2)return AS;J2=1;var i=yM(),e=vH();AS=Object.assign||function(c){if(c===null||typeof c>"u")throw new TypeError("Cannot convert undefined or null to object");r(c)||(c={});for(var f=1;f<arguments.length;f++){var d=arguments[f];n(d)&&(d=s(d)),r(d)&&(t(c,d),e(c,d))}return c};function t(c,f){for(var d in f)o(f,d)&&(c[d]=f[d])}function n(c){return c&&typeof c=="string"}function s(c){var f={};for(var d in c)f[d]=c[d];return f}function r(c){return c&&typeof c=="object"||i(c)}function o(c,f){return Object.prototype.hasOwnProperty.call(c,f)}return AS}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var wS,eR;function _H(){if(eR)return wS;eR=1;var i=xH();wS=function(s,r,o){if(typeof s!="string")throw new TypeError("expected a string");typeof r=="function"&&(o=r,r=null),typeof r=="string"&&(r={sep:r});var c=i({sep:"."},r),f=c.quotes||['"',"'","`"],d;c.brackets===!0?d={"<":">","(":")","[":"]","{":"}"}:c.brackets&&(d=c.brackets);var m=[],g=[],v=[""],_=c.sep,b=s.length,A=-1,M;function T(){if(d&&g.length)return d[g[g.length-1]]}for(;++A<b;){var C=s[A],D=s[A+1],N={val:C,idx:A,arr:v,str:s};if(m.push(N),C==="\\"){N.val=n(c,s,A)===!0?C+D:D,N.escaped=!0,typeof o=="function"&&o(N),v[v.length-1]+=N.val,A++;continue}if(d&&d[C]){g.push(C);var I=T(),L=A+1;if(s.indexOf(I,L+1)!==-1)for(;g.length&&L<b;){var P=s[++L];if(P==="\\"){P++;continue}if(f.indexOf(P)!==-1){L=e(s,P,L+1);continue}if(I=T(),g.length&&s.indexOf(I,L+1)===-1)break;if(d[P]){g.push(P);continue}I===P&&g.pop()}if(M=L,M===-1){v[v.length-1]+=C;continue}C=s.slice(A,M+1),N.val=C,N.idx=A=M}if(f.indexOf(C)!==-1){if(M=e(s,C,A+1),M===-1){v[v.length-1]+=C;continue}t(C,c)===!0?C=s.slice(A,M+1):C=s.slice(A+1,M),N.val=C,N.idx=A=M}if(typeof o=="function"&&(o(N,m),C=N.val,A=N.idx),N.val===_&&N.split!==!1){v.push("");continue}v[v.length-1]+=N.val}return v};function e(s,r,o,c){var f=s.indexOf(r,o);return s.charAt(f-1)==="\\"?e(s,r,f+1):f}function t(s,r){return r.keepDoubleQuotes===!0&&s==='"'||r.keepSingleQuotes===!0&&s==="'"?!0:r.keepQuotes}function n(s,r,o){return typeof s.keepEscaping=="function"?s.keepEscaping(r,o):s.keepEscaping===!0||r[o+1]==="\\"}return wS}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var RS,tR;function bH(){return tR||(tR=1,RS=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),RS}var CS,nR;function SH(){if(nR)return CS;nR=1;var i=bH();CS=function(s){i(s)||(s={});for(var r=arguments.length,o=1;o<r;o++){var c=arguments[o];i(c)&&e(s,c)}return s};function e(n,s){for(var r in s)t(s,r)&&(n[r]=s[r])}function t(n,s){return Object.prototype.hasOwnProperty.call(n,s)}return CS}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var NS,iR;function EH(){return iR||(iR=1,NS=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),NS}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var DS,sR;function TH(){if(sR)return DS;sR=1;var i=_H(),e=SH(),t=ED(),n=EH();DS=function(r,o,c){if(!n(r)||(Array.isArray(o)&&(o=[].concat.apply([],o).join(".")),typeof o!="string"))return r;for(var f=i(o,{sep:".",brackets:!0}).filter(s),d=f.length,m=-1,g=r;++m<d;){var v=f[m];if(m!==d-1){n(g[v])||(g[v]={}),g=g[v];continue}t(g[v])&&t(c)?g[v]=e({},g[v],c):g[v]=c}return r};function s(r){return r!=="__proto__"&&r!=="constructor"&&r!=="prototype"}return DS}var OS,rR;function MH(){if(rR)return OS;rR=1;var i=yM(),e=gH(),t=yH(),n=TH();return OS=function(r,o,c){if(!i(r))throw new TypeError("expected an object");if(typeof o!="string"||c==null)return e.apply(null,arguments);if(typeof c=="string")return n(r,o,c),r;var f=t(r,o);return i(c)&&i(f)&&(c=e({},f,c)),n(r,o,c),r},OS}var AH=MH();const wH=Kh(AH),vM=(...i)=>i.filter(Boolean).join(".");function RH(i){const e=i.split(".");return[e.pop(),e.join(".")||void 0]}function CH(i){const e=V.useRef(null),t=V.useRef(null),n=V.useRef(!0);return V.useLayoutEffect(()=>{i||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),V.useEffect(()=>{if(n.current){n.current=!1;return}let s;const r=e.current,o=()=>{i&&(r.style.removeProperty("height"),r.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};r.addEventListener("transitionend",o,{once:!0});const{height:c}=t.current.getBoundingClientRect();return r.style.height=c+"px",i||(r.style.overflow="hidden",s=window.setTimeout(()=>r.style.height="0px",50)),()=>{r.removeEventListener("transitionend",o),clearTimeout(s)}},[i]),{wrapperRef:e,contentRef:t}}const NH=i=>{const[e,t]=V.useState(i.getVisiblePaths());return V.useEffect(()=>{t(i.getVisiblePaths());const n=i.useStore.subscribe(i.getVisiblePaths,t,{equalityFn:WN});return()=>n()},[i]),e};function TD(i=3){const e=V.useRef(null),t=V.useRef(null),[n,s]=V.useState(!1),r=V.useCallback(()=>s(!0),[]),o=V.useCallback(()=>s(!1),[]);return V.useLayoutEffect(()=>{if(n){const{bottom:c,top:f,left:d}=e.current.getBoundingClientRect(),{height:m}=t.current.getBoundingClientRect(),g=c+m>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=d+"px",g==="down"?t.current.style.top=c+i+"px":t.current.style.bottom=window.innerHeight-f+i+"px"}},[i,n]),{popinRef:e,wrapperRef:t,shown:n,show:r,hide:o}}tF([nF]);const DH={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};ra.extend({color:()=>i=>Pr(i).isValid()});const OH=i=>ra().color().test(i);function MD(i,{format:e,hasAlpha:t,isString:n}){const s=DH[e]+(n&&e!=="hex"?"String":""),r=i[s]();return typeof r=="object"&&!t?bB(r,["a"]):r}const AD=(i,e)=>{const t=Pr(i);if(!t.isValid())throw Error("Invalid color");return MD(t,e)},LH=(i,e)=>MD(Pr(i),tn(tn({},e),{},{isString:!0,format:"hex"})),UH=({value:i})=>{const e=eF(i),t=e==="name"?"hex":e,n=typeof i=="object"?"a"in i:e==="hex"&&i.length===8||/^(rgba)|(hsla)|(hsva)/.test(i),s={format:t,hasAlpha:n,isString:typeof i=="string"};return{value:AD(i,s),settings:s}};var zH=Object.freeze({__proto__:null,schema:OH,sanitize:AD,format:LH,normalize:UH});const PH=zt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),IH=zt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),BH=zt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function aR(i,e){return e!=="rgb"?Pr(i).toRgb():i}function FH({value:i,displayValue:e,settings:t,onUpdate:n}){const{emitOnEditStart:s,emitOnEditEnd:r}=pr(),{format:o,hasAlpha:c}=t,{popinRef:f,wrapperRef:d,shown:m,show:g,hide:v}=TD(),_=V.useRef(0),[b,A]=V.useState(()=>aR(i,o)),M=c?cF:fF,T=()=>{A(aR(i,o)),g(),s()},C=()=>{v(),r(),window.clearTimeout(_.current)},D=()=>{_.current=window.setTimeout(C,500)};return V.useEffect(()=>()=>window.clearTimeout(_.current),[]),se.createElement(se.Fragment,null,se.createElement(PH,{ref:f,active:m,onClick:()=>T(),style:{color:e}}),m&&se.createElement(cM,null,se.createElement(W3,{onPointerUp:C}),se.createElement(BH,{ref:d,onMouseEnter:()=>window.clearTimeout(_.current),onMouseLeave:N=>N.buttons===0&&D()},se.createElement(M,{color:b,onChange:n}))))}function HH(){const{value:i,displayValue:e,label:t,onChange:n,onUpdate:s,settings:r}=pr();return se.createElement(lo,{input:!0},se.createElement(Qo,null,t),se.createElement(IH,null,se.createElement(FH,{value:i,displayValue:e,onChange:n,onUpdate:s,settings:r}),se.createElement(lM,{value:e,onChange:n,onUpdate:s})))}var VH=tn({component:HH},zH);function GH(){const{label:i,displayValue:e,onUpdate:t,settings:n}=pr();return se.createElement(lo,{input:!0},se.createElement(Qo,null,i),se.createElement(fM,{value:e,settings:n,onUpdate:t}))}var kH=tn({component:GH},iD(["x","y","z"]));const $H=zt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),XH=zt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function qH({value:i,settings:e,onUpdate:t}){const n=V.useRef(),s=V.useRef(0),r=V.useRef(0),o=V.useRef(1),[c,f]=V.useState(!1),[d,m]=V.useState(!1),[g,v]=K3(),_=V.useRef(null),b=V.useRef(null);V.useLayoutEffect(()=>{if(c){const{top:ae,left:ne,width:de,height:he}=_.current.getBoundingClientRect();b.current.style.left=ne+de/2+"px",b.current.style.top=ae+he/2+"px"}},[c]);const{keys:[A,M],joystick:T}=e,C=T==="invertY"?1:-1,{[A]:{step:D},[M]:{step:N}}=e,I=Bc("sizes","joystickWidth"),L=Bc("sizes","joystickHeight"),P=parseFloat(I)*.8/2,G=parseFloat(L)*.8/2,B=V.useCallback(()=>{n.current||(m(!0),s.current&&v({x:s.current*P}),r.current&&v({y:r.current*-G}),n.current=window.setInterval(()=>{t(ae=>{const ne=D*s.current*o.current,de=C*N*r.current*o.current;return Array.isArray(ae)?{[A]:ae[0]+ne,[M]:ae[1]+de}:{[A]:ae[A]+ne,[M]:ae[M]+de}})},16))},[P,G,t,v,D,N,A,M,C]),U=V.useCallback(()=>{window.clearTimeout(n.current),n.current=void 0,m(!1)},[]);V.useEffect(()=>{function ae(ne){o.current=z3(ne)}return window.addEventListener("keydown",ae),window.addEventListener("keyup",ae),()=>{window.clearTimeout(n.current),window.removeEventListener("keydown",ae),window.removeEventListener("keyup",ae)}},[]);const j=Q0(({first:ae,active:ne,delta:[de,he],movement:[F,W]})=>{ae&&f(!0);const Z=df(F,-P,P),fe=df(W,-G,G);s.current=Math.abs(F)>Math.abs(Z)?Math.sign(F-Z):0,r.current=Math.abs(W)>Math.abs(fe)?Math.sign(fe-W):0;let X=i[A],ie=i[M];ne?(s.current||(X+=de*D*o.current,v({x:Z})),r.current||(ie-=C*he*N*o.current,v({y:fe})),s.current||r.current?B():U(),t({[A]:X,[M]:ie})):(f(!1),s.current=0,r.current=0,v({x:0,y:0}),U())});return se.createElement($H,as({ref:_},j()),c&&se.createElement(cM,null,se.createElement(XH,{ref:b,isOutOfBounds:d},se.createElement("div",null),se.createElement("span",{ref:g}))))}const jH=zt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function YH(){const{label:i,displayValue:e,onUpdate:t,settings:n}=pr();return se.createElement(lo,{input:!0},se.createElement(Qo,null,i),se.createElement(jH,{withJoystick:!!n.joystick},n.joystick&&se.createElement(qH,{value:e,settings:n,onUpdate:t}),se.createElement(fM,{value:e,settings:n,onUpdate:t})))}const WH=["joystick"],wD=iD(["x","y"]),ZH=i=>{let{joystick:e=!0}=i,t=fi(i,WH);const{value:n,settings:s}=wD.normalize(t);return{value:n,settings:tn(tn({},s),{},{joystick:e})}};var KH=tn(tn({component:YH},wD),{},{normalize:ZH});const QH=i=>{if(i!==void 0){if(i instanceof File)try{return URL.createObjectURL(i)}catch{return}if(typeof i=="string"&&i.indexOf("blob:")===0)return i;throw Error("Invalid image format [undefined | blob |File].")}},JH=(i,e)=>typeof e=="object"&&"image"in e,e6=({image:i})=>({value:i});var t6=Object.freeze({__proto__:null,sanitize:QH,schema:JH,normalize:e6});const n6=zt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),i6=zt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),s6=zt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),r6=zt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),a6=zt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),o6=zt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function l6(){const{label:i,value:e,onUpdate:t,disabled:n}=pr(),{popinRef:s,wrapperRef:r,shown:o,show:c,hide:f}=TD(),d=V.useCallback(b=>{b.length&&t(b[0])},[t]),m=V.useCallback(b=>{b.stopPropagation(),t(void 0)},[t]),{getRootProps:g,getInputProps:v,isDragAccept:_}=SD({maxFiles:1,accept:"image/*",onDrop:d,disabled:n});return se.createElement(lo,{input:!0},se.createElement(Qo,null,i),se.createElement(n6,null,se.createElement(s6,{ref:s,hasImage:!!e,onPointerDown:()=>!!e&&c(),onPointerUp:f,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&se.createElement(cM,null,se.createElement(W3,{onPointerUp:f,style:{cursor:"pointer"}}),se.createElement(r6,{ref:r,style:{backgroundImage:`url(${e})`}})),se.createElement(i6,g({isDragAccept:_}),se.createElement("input",v()),se.createElement(a6,null,_?"drop image":"click or drop")),se.createElement(o6,{onClick:m,disabled:!e})))}var c6=tn({component:l6},t6);const oR=ra().number(),u6=(i,e)=>ra().array().length(2).every.number().test(i)&&ra().schema({min:oR,max:oR}).test(e),T_=i=>({min:i[0],max:i[1]}),RD=(i,{bounds:[e,t]},n)=>{const s=Array.isArray(i)?T_(i):i,r={min:n[0],max:n[1]},{min:o,max:c}=tn(tn({},r),s);return[df(Number(o),e,Math.max(e,c)),df(Number(c),Math.min(t,o),t)]},f6=({value:i,min:e,max:t})=>{const n={min:e,max:t},s=nD(T_(i),{min:n,max:n}),r=[e,t],o=tn(tn({},s),{},{bounds:r});return{value:RD(T_(i),o,i),settings:o}};var h6=Object.freeze({__proto__:null,schema:u6,format:T_,sanitize:RD,normalize:f6});const d6=["value","bounds","onDrag"],p6=["bounds"],m6=zt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function g6(i){let{value:e,bounds:[t,n],onDrag:s}=i,r=fi(i,d6);const o=V.useRef(null),c=V.useRef(null),f=V.useRef(null),d=V.useRef(0),m=Bc("sizes","scrubberWidth"),g=Q0(({event:b,first:A,xy:[M],movement:[T],memo:C={}})=>{if(A){const{width:N,left:I}=o.current.getBoundingClientRect();d.current=N-parseFloat(m);const L=(b==null?void 0:b.target)===c.current||(b==null?void 0:b.target)===f.current;C.pos=x_((M-I)/N,t,n);const P=Math.abs(C.pos-e.min)-Math.abs(C.pos-e.max);C.key=P<0||P===0&&C.pos<=e.min?"min":"max",L&&(C.pos=e[C.key])}const D=C.pos+x_(T/d.current,0,n-t);return s({[C.key]:o5(D,r[C.key])}),C}),v=`calc(${v_(e.min,t,n)} * (100% - ${m} - 8px) + 4px)`,_=`calc(${1-v_(e.max,t,n)} * (100% - ${m} - 8px) + 4px)`;return se.createElement(J3,as({ref:o},g()),se.createElement(Q3,null,se.createElement(eD,{style:{left:v,right:_}})),se.createElement(dT,{position:"left",ref:c,style:{left:v}}),se.createElement(dT,{position:"right",ref:f,style:{right:_}}))}function y6(){const{label:i,displayValue:e,onUpdate:t,settings:n}=pr(),s=fi(n,p6);return se.createElement(se.Fragment,null,se.createElement(lo,{input:!0},se.createElement(Qo,null,i),se.createElement(m6,null,se.createElement(g6,as({value:e},n,{onDrag:t})),se.createElement(fM,{value:e,settings:s,onUpdate:t,innerLabelTrim:0}))))}var v6=tn({component:y6},h6);const x6=()=>{const i=new Map;return{on:(e,t)=>{let n=i.get(e);n===void 0&&(n=new Set,i.set(e,n)),n.add(t)},off:(e,t)=>{const n=i.get(e);n!==void 0&&(n.delete(t),n.size===0&&i.delete(e))},emit:(e,...t)=>{const n=i.get(e);if(n!==void 0)for(const s of n)s(...t)}}},_6=["type","value"],b6=["onChange","transient","onEditStart","onEditEnd"],S6=function(){const e=hH(dH(()=>({data:{}}))),t=x6();this.storeId=_B(),this.useStore=e;const n={},s=new Set;this.getVisiblePaths=()=>{const o=this.getData(),c=Object.keys(o),f=[];Object.entries(n).forEach(([m,g])=>{g.render&&c.some(v=>v.indexOf(m)===0)&&!g.render(this.get)&&f.push(m+".")});const d=[];return s.forEach(m=>{m in o&&o[m].__refCount>0&&f.every(g=>m.indexOf(g)===-1)&&(!o[m].render||o[m].render(this.get))&&d.push(m)}),d},this.setOrderedPaths=o=>{o.forEach(c=>s.add(c))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(c=>{const f=c.data;return o.forEach(d=>{if(d in f){const m=f[d];m.__refCount--,m.__refCount===0&&m.type in Bl&&delete f[d]}}),{data:f}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>n[o]||{},this.getData=()=>e.getState().data,this.addData=(o,c)=>{e.setState(f=>{const d=f.data;return Object.entries(o).forEach(([m,g])=>{let v=d[m];if(v){const{type:_,value:b}=g,A=fi(g,_6);_!==v.type?Dc(Ri.INPUT_TYPE_OVERRIDE,_):((v.__refCount===0||c)&&Object.assign(v,A),v.__refCount++)}else d[m]=tn(tn({},g),{},{__refCount:1})}),{data:d}})},this.setValueAtPath=(o,c,f)=>{e.setState(d=>{const m=d.data;return x2(m[o],c,o,this,f),{data:m}})},this.setSettingsAtPath=(o,c)=>{e.setState(f=>{const d=f.data;return d[o].settings=tn(tn({},d[o].settings),c),{data:d}})},this.disableInputAtPath=(o,c)=>{e.setState(f=>{const d=f.data;return d[o].disabled=c,{data:d}})},this.set=(o,c)=>{e.setState(f=>{const d=f.data;return Object.entries(o).forEach(([m,g])=>{try{x2(d[m],g,void 0,void 0,c)}catch{}}),{data:d}})},this.getInput=o=>{try{return this.getData()[o]}catch{Dc(Ri.PATH_DOESNT_EXIST,o)}},this.get=o=>{var c;return(c=this.getInput(o))===null||c===void 0?void 0:c.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,tn(tn({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,tn(tn({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,c)=>{const f=`onEditStart:${o}`;return t.on(f,c),()=>t.off(f,c)},this.subscribeToEditEnd=(o,c)=>{const f=`onEditEnd:${o}`;return t.on(f,c),()=>t.off(f,c)};const r=(o,c,f)=>{const d={};return Object.entries(o).forEach(([m,g])=>{if(m==="")return Dc(Ri.EMPTY_KEY);let v=vM(c,m);if(g.type===Bl.FOLDER){const _=r(g.schema,v,f);Object.assign(d,_),v in n||(n[v]=g.settings)}else if(m in f)Dc(Ri.DUPLICATE_KEYS,m,v,f[m].path);else{const _=wB(g,m,v,d);if(_){const{type:b,options:A,input:M}=_,{onChange:T,transient:C,onEditStart:D,onEditEnd:N}=A,I=fi(A,b6);d[v]=tn(tn(tn({type:b},I),M),{},{fromPanel:!0}),f[m]={path:v,onChange:T,transient:C,onEditStart:D,onEditEnd:N}}else Dc(Ri.UNKNOWN_INPUT,v,g)}}),d};this.getDataFromSchema=o=>{const c={};return[r(o,"",c),c]}};new S6;const lR=i=>"__levaInput"in i,E6=(i,e)=>{const t={},n=e?e.toLowerCase():null;return i.forEach(s=>{const[r,o]=RH(s);(!n||r.toLowerCase().indexOf(n)>-1)&&wH(t,o,{[r]:{__levaInput:!0,path:s}})}),t},T6=["type","label","path","valueKey","value","settings","setValue","disabled"];function M6(i){let{type:e,label:t,path:n,valueKey:s,value:r,settings:o,setValue:c,disabled:f}=i,d=fi(i,T6);const{displayValue:m,onChange:g,onUpdate:v}=Z3({type:e,value:r,settings:o,setValue:c}),_=kh[e].component;return _?se.createElement(H3.Provider,{value:tn({key:s,path:n,id:""+n,label:t,displayValue:m,value:r,onChange:g,onUpdate:v,settings:o,setValue:c,disabled:f},d)},se.createElement(XB,{disabled:f},se.createElement(_,null))):(Dc(Ri.NO_COMPONENT_FOR_TYPE,e,n),null)}const A6=zt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function w6({onClick:i,settings:e,label:t}){const n=K0();return se.createElement(lo,null,se.createElement(A6,{disabled:e.disabled,onClick:()=>i(n.get)},t))}const R6=zt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),C6=zt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),N6=({label:i,opts:e})=>{let t=typeof i=="string"&&i.trim()===""?null:i,n=e;return typeof e.opts=="object"&&(n.label!==void 0&&(t=e.label),n=e.opts),{label:t,opts:n}};function D6(i){const{label:e,opts:t}=N6(i),n=K0();return se.createElement(lo,{input:!!e},e&&se.createElement(Qo,null,e),se.createElement(R6,null,Object.entries(t).map(([s,r])=>se.createElement(C6,{key:s,onClick:()=>r(n.get)},s))))}const O6=zt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),CD=100;function L6(i,e){i.push(e),i.length>CD&&i.shift()}const U6=V.forwardRef(function({initialValue:i},e){const t=Bc("colors","highlight3"),n=Bc("colors","elevation2"),s=Bc("colors","highlight1"),[r,o]=V.useMemo(()=>[Pr(s).alpha(.4).toRgbString(),Pr(s).alpha(.1).toRgbString()],[s]),c=V.useRef([i]),f=V.useRef(i),d=V.useRef(i),m=V.useRef(),g=V.useCallback((b,A)=>{if(!b)return;const{width:M,height:T}=b,C=new Path2D,D=M/CD,N=T*.05;for(let P=0;P<c.current.length;P++){const G=v_(c.current[P],f.current,d.current),B=D*P,U=T-G*(T-N*2)-N;C.lineTo(B,U)}A.clearRect(0,0,M,T);const I=new Path2D(C);I.lineTo(D*(c.current.length+1),T),I.lineTo(0,T),I.lineTo(0,0);const L=A.createLinearGradient(0,0,0,T);L.addColorStop(0,r),L.addColorStop(1,o),A.fillStyle=L,A.fill(I),A.strokeStyle=n,A.lineJoin="round",A.lineWidth=14,A.stroke(C),A.strokeStyle=t,A.lineWidth=2,A.stroke(C)},[t,n,r,o]),[v,_]=e5(g);return V.useImperativeHandle(e,()=>({frame:b=>{(f.current===void 0||b<f.current)&&(f.current=b),(d.current===void 0||b>d.current)&&(d.current=b),L6(c.current,b),m.current=requestAnimationFrame(()=>g(v.current,_.current))}}),[v,_,g]),V.useEffect(()=>()=>cancelAnimationFrame(m.current),[]),se.createElement(O6,{ref:v})}),cR=i=>Number.isFinite(i)?i.toPrecision(2):i.toString(),z6=V.forwardRef(function({initialValue:i},e){const[t,n]=V.useState(cR(i));return V.useImperativeHandle(e,()=>({frame:s=>n(cR(s))}),[]),se.createElement("div",null,t)});function uR(i){return typeof i=="function"?i():i.current}function P6({label:i,objectOrFn:e,settings:t}){const n=V.useRef(),s=V.useRef(uR(e));return V.useEffect(()=>{const r=window.setInterval(()=>{var o;document.hidden||(o=n.current)===null||o===void 0||o.frame(uR(e))},t.interval);return()=>window.clearInterval(r)},[e,t.interval]),se.createElement(lo,{input:!0},se.createElement(Qo,{align:"top"},i),t.graph?se.createElement(U6,{ref:n,initialValue:s.current}):se.createElement(z6,{ref:n,initialValue:s.current}))}const I6=["type","label","key"],B6={[Bl.BUTTON]:w6,[Bl.BUTTON_GROUP]:D6,[Bl.MONITOR]:P6},F6=se.memo(({path:i})=>{const[e,{set:t,setSettings:n,disable:s,storeId:r,emitOnEditStart:o,emitOnEditEnd:c}]=n5(i);if(!e)return null;const{type:f,label:d,key:m}=e,g=fi(e,I6);if(f in Bl){const v=B6[f];return se.createElement(v,as({label:d,path:i},g))}return f in kh?se.createElement(M6,as({key:r+i,type:f,label:d,storeId:r,path:i,valueKey:m,setValue:t,setSettings:n,disable:s,emitOnEditStart:o,emitOnEditEnd:c},g)):(hB(Ri.UNSUPPORTED_INPUT,f,i),null)});function H6({toggle:i,toggled:e,name:t}){return se.createElement(GB,{onClick:()=>i()},se.createElement(uM,{toggled:e}),se.createElement("div",null,t))}const V6=({name:i,path:e,tree:t})=>{const n=K0(),s=vM(e,i),{collapsed:r,color:o}=n.getFolderSettings(s),[c,f]=V.useState(!r),d=V.useRef(null),m=Bc("colors","folderWidgetColor"),g=Bc("colors","folderTextColor");return V.useLayoutEffect(()=>{d.current.style.setProperty("--leva-colors-folderWidgetColor",o||m),d.current.style.setProperty("--leva-colors-folderTextColor",o||g)},[o,m,g]),se.createElement(__,{ref:d},se.createElement(H6,{name:i,toggled:c,toggle:()=>f(v=>!v)}),se.createElement(ND,{parent:s,tree:t,toggled:c}))},ND=se.memo(({isRoot:i=!1,fill:e=!1,flat:t=!1,parent:n,tree:s,toggled:r})=>{const{wrapperRef:o,contentRef:c}=CH(r),f=K0(),d=([g,v])=>{var _;return(lR(v)?(_=f.getInput(v.path))===null||_===void 0?void 0:_.order:f.getFolderSettings(vM(n,g)).order)||0},m=Object.entries(s).sort((g,v)=>d(g)-d(v));return se.createElement(fT,{ref:o,isRoot:i,fill:e,flat:t},se.createElement(q3,{ref:c,isRoot:i,toggled:r},m.map(([g,v])=>lR(v)?se.createElement(F6,{key:v.path,valueKey:v.valueKey,path:v.path}):se.createElement(V6,{key:g,name:g,path:n,tree:v}))))}),G6=zt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${Y3}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),DD=40,M_=zt("i",{$flexCenter:"",width:DD,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),k6=zt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),$6=zt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${M_}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),X6=zt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),q6=zt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:DD}}}}),j6=se.forwardRef(({setFilter:i,toggle:e},t)=>{const[n,s]=V.useState(""),r=V.useMemo(()=>U3(i,250),[i]),o=()=>{i(""),s("")},c=f=>{const d=f.currentTarget.value;e(!0),s(d)};return V.useEffect(()=>{r(n)},[n,r]),se.createElement(se.Fragment,null,se.createElement(X6,{ref:t,value:n,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:f=>f.stopPropagation(),onChange:c}),se.createElement(M_,{onClick:()=>o(),style:{visibility:n?"visible":"hidden"}},se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function Y6({setFilter:i,onDrag:e,onDragStart:t,onDragEnd:n,toggle:s,toggled:r,title:o,drag:c,filterEnabled:f,from:d}){const[m,g]=V.useState(!1),v=V.useRef(null);V.useEffect(()=>{var b,A;m?(b=v.current)===null||b===void 0||b.focus():(A=v.current)===null||A===void 0||A.blur()},[m]);const _=Q0(({offset:[b,A],first:M,last:T})=>{e({x:b,y:A}),M&&t({x:b,y:A}),T&&n({x:b,y:A})},{filterTaps:!0,from:({offset:[b,A]})=>[(d==null?void 0:d.x)||b,(d==null?void 0:d.y)||A]});return V.useEffect(()=>{const b=A=>{A.key==="L"&&A.shiftKey&&A.metaKey&&g(M=>!M)};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[]),se.createElement(se.Fragment,null,se.createElement(k6,{mode:c?"drag":void 0},se.createElement(M_,{active:!r,onClick:()=>s()},se.createElement(uM,{toggled:r,width:12,height:8})),se.createElement(q6,as({},c?_():{},{drag:c,filterEnabled:f}),o===void 0&&c?se.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},se.createElement("circle",{cx:"2",cy:"2",r:"2"}),se.createElement("circle",{cx:"14",cy:"2",r:"2"}),se.createElement("circle",{cx:"26",cy:"2",r:"2"}),se.createElement("circle",{cx:"2",cy:"12",r:"2"}),se.createElement("circle",{cx:"14",cy:"12",r:"2"}),se.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),f&&se.createElement(M_,{active:m,onClick:()=>g(b=>!b)},se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},se.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),se.createElement($6,{toggled:m},se.createElement(j6,{ref:v,setFilter:i,toggle:s})))}se.memo(({store:i,rootClass:e,fill:t=!1,flat:n=!1,neverHide:s=!1,oneLineLabels:r=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:c=!1,toggled:f,setToggle:d})=>{var m,g;const v=NH(i),[_,b]=V.useState(""),A=V.useMemo(()=>E6(v,_),[v,_]),[M,T]=K3(),C=s||v.length>0,D=typeof o=="object"&&o.title||void 0,N=typeof o=="object"&&(m=o.drag)!==null&&m!==void 0?m:!0,I=typeof o=="object"&&(g=o.filter)!==null&&g!==void 0?g:!0,L=typeof o=="object"&&o.position||void 0,P=typeof o=="object"&&o.onDrag||void 0,G=typeof o=="object"&&o.onDragStart||void 0,B=typeof o=="object"&&o.onDragEnd||void 0;return se.useEffect(()=>{T({x:L==null?void 0:L.x,y:L==null?void 0:L.y})},[L,T]),PB(),se.createElement(k3.Provider,{value:{hideCopyButton:c}},se.createElement(G6,{ref:M,className:e,fill:t,flat:n,oneLineLabels:r,hideTitleBar:!o,style:{display:C?"block":"none"}},o&&se.createElement(Y6,{onDrag:U=>{T(U),P==null||P(U)},onDragStart:U=>G==null?void 0:G(U),onDragEnd:U=>B==null?void 0:B(U),setFilter:b,toggle:U=>d(j=>U??!j),toggled:f,title:D,drag:N,filterEnabled:I,from:L}),C&&se.createElement(G3.Provider,{value:i},se.createElement(ND,{isRoot:!0,fill:t,flat:n,tree:A,toggled:f}))))});Wc(Yo.SELECT,x5);Wc(Yo.IMAGE,c6);Wc(Yo.NUMBER,c5);Wc(Yo.COLOR,VH);Wc(Yo.STRING,R5);Wc(Yo.BOOLEAN,z5);Wc(Yo.INTERVAL,v6);Wc(Yo.VECTOR3D,kH);Wc(Yo.VECTOR2D,KH);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const C1="175",W6={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Z6={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},OD=0,TT=1,LD=2,K6=3,UD=0,N1=1,v0=2,Go=3,Xl=0,Hr=1,Xo=2,Fc=0,Fh=1,MT=2,AT=3,wT=4,zD=5,af=100,PD=101,ID=102,BD=103,FD=104,HD=200,VD=201,GD=202,kD=203,A_=204,w_=205,$D=206,XD=207,qD=208,jD=209,YD=210,WD=211,ZD=212,KD=213,QD=214,R_=0,C_=1,N_=2,$h=3,D_=4,O_=5,L_=6,U_=7,ty=0,JD=1,eO=2,Fl=0,tO=1,nO=2,iO=3,xM=4,sO=5,rO=6,aO=7,RT="attached",oO="detached",D1=300,Xc=301,pf=302,U0=303,z0=304,dm=306,mf=1e3,Ca=1001,kp=1002,Ss=1003,O1=1004,Q6=1004,Oh=1005,J6=1005,Bi=1006,Ip=1007,e8=1007,ro=1008,t8=1008,Wo=1009,_M=1010,bM=1011,$p=1012,L1=1013,qc=1014,aa=1015,pm=1016,U1=1017,z1=1018,Xp=1020,SM=35902,EM=1021,TM=1022,ur=1023,MM=1024,AM=1025,qp=1026,jp=1027,P1=1028,ny=1029,wM=1030,I1=1031,n8=1032,B1=1033,x0=33776,_0=33777,b0=33778,S0=33779,z_=35840,P_=35841,I_=35842,B_=35843,F_=36196,H_=37492,V_=37496,G_=37808,k_=37809,$_=37810,X_=37811,q_=37812,j_=37813,Y_=37814,W_=37815,Z_=37816,K_=37817,Q_=37818,J_=37819,e1=37820,t1=37821,E0=36492,n1=36494,i1=36495,RM=36283,s1=36284,r1=36285,a1=36286,lO=2200,cO=2201,uO=2202,Yp=2300,Wp=2301,n_=2302,Lh=2400,Uh=2401,P0=2402,F1=2500,CM=2501,fO=0,NM=1,o1=2,hO=3200,dO=3201,i8=3202,s8=3203,yf=0,pO=1,Oc="",ji="srgb",qs="srgb-linear",I0="linear",Wn="srgb",r8=0,Ch=7680,a8=7681,o8=7682,l8=7683,c8=34055,u8=34056,f8=5386,h8=512,d8=513,p8=514,m8=515,g8=516,y8=517,v8=518,CT=519,mO=512,gO=513,yO=514,DM=515,vO=516,xO=517,_O=518,bO=519,B0=35044,x8=35048,_8=35040,b8=35045,S8=35049,E8=35041,T8=35046,M8=35050,A8=35042,w8="100",NT="300 es",jo=2e3,F0=2001,R8={COMPUTE:"compute",RENDER:"render"};let Yl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const s=n[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}};const sr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let fR=1234567;const Hh=Math.PI/180,Zp=180/Math.PI;function Da(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(sr[i&255]+sr[i>>8&255]+sr[i>>16&255]+sr[i>>24&255]+"-"+sr[e&255]+sr[e>>8&255]+"-"+sr[e>>16&15|64]+sr[e>>24&255]+"-"+sr[t&63|128]+sr[t>>8&255]+"-"+sr[t>>16&255]+sr[t>>24&255]+sr[n&255]+sr[n>>8&255]+sr[n>>16&255]+sr[n>>24&255]).toLowerCase()}function Jt(i,e,t){return Math.max(e,Math.min(t,i))}function OM(i,e){return(i%e+e)%e}function C8(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function N8(i,e,t){return i!==e?(t-i)/(e-i):0}function T0(i,e,t){return(1-t)*i+t*e}function D8(i,e,t,n){return T0(i,e,1-Math.exp(-t*n))}function O8(i,e=1){return e-Math.abs(OM(i,e*2)-e)}function L8(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function U8(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function z8(i,e){return i+Math.floor(Math.random()*(e-i+1))}function P8(i,e){return i+Math.random()*(e-i)}function I8(i){return i*(.5-Math.random())}function B8(i){i!==void 0&&(fR=i);let e=fR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function F8(i){return i*Hh}function H8(i){return i*Zp}function V8(i){return(i&i-1)===0&&i!==0}function G8(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function k8(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function $8(i,e,t,n,s){const r=Math.cos,o=Math.sin,c=r(t/2),f=o(t/2),d=r((e+n)/2),m=o((e+n)/2),g=r((e-n)/2),v=o((e-n)/2),_=r((n-e)/2),b=o((n-e)/2);switch(s){case"XYX":i.set(c*m,f*g,f*v,c*d);break;case"YZY":i.set(f*v,c*m,f*g,c*d);break;case"ZXZ":i.set(f*g,f*v,c*m,c*d);break;case"XZX":i.set(c*m,f*b,f*_,c*d);break;case"YXY":i.set(f*_,c*m,f*b,c*d);break;case"ZYZ":i.set(f*b,f*_,c*m,c*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Br(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function sn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const SO={DEG2RAD:Hh,RAD2DEG:Zp,generateUUID:Da,clamp:Jt,euclideanModulo:OM,mapLinear:C8,inverseLerp:N8,lerp:T0,damp:D8,pingpong:O8,smoothstep:L8,smootherstep:U8,randInt:z8,randFloat:P8,randFloatSpread:I8,seededRandom:B8,degToRad:F8,radToDeg:H8,isPowerOfTwo:V8,ceilPowerOfTwo:G8,floorPowerOfTwo:k8,setQuaternionFromProperEuler:$8,normalize:sn,denormalize:Br};let Xe=class EO{constructor(e=0,t=0){EO.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Jt(this.x,e.x,t.x),this.y=Jt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Jt(this.x,e,t),this.y=Jt(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Jt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Jt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*s+e.x,this.y=r*s+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},ln=class TO{constructor(e,t,n,s,r,o,c,f,d){TO.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,o,c,f,d)}set(e,t,n,s,r,o,c,f,d){const m=this.elements;return m[0]=e,m[1]=s,m[2]=c,m[3]=t,m[4]=r,m[5]=f,m[6]=n,m[7]=o,m[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,o=n[0],c=n[3],f=n[6],d=n[1],m=n[4],g=n[7],v=n[2],_=n[5],b=n[8],A=s[0],M=s[3],T=s[6],C=s[1],D=s[4],N=s[7],I=s[2],L=s[5],P=s[8];return r[0]=o*A+c*C+f*I,r[3]=o*M+c*D+f*L,r[6]=o*T+c*N+f*P,r[1]=d*A+m*C+g*I,r[4]=d*M+m*D+g*L,r[7]=d*T+m*N+g*P,r[2]=v*A+_*C+b*I,r[5]=v*M+_*D+b*L,r[8]=v*T+_*N+b*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],c=e[5],f=e[6],d=e[7],m=e[8];return t*o*m-t*c*d-n*r*m+n*c*f+s*r*d-s*o*f}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],c=e[5],f=e[6],d=e[7],m=e[8],g=m*o-c*d,v=c*f-m*r,_=d*r-o*f,b=t*g+n*v+s*_;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/b;return e[0]=g*A,e[1]=(s*d-m*n)*A,e[2]=(c*n-s*o)*A,e[3]=v*A,e[4]=(m*t-s*f)*A,e[5]=(s*r-c*t)*A,e[6]=_*A,e[7]=(n*f-d*t)*A,e[8]=(o*t-n*r)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,r,o,c){const f=Math.cos(r),d=Math.sin(r);return this.set(n*f,n*d,-n*(f*o+d*c)+o+e,-s*d,s*f,-s*(-d*o+f*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(LS.makeScale(e,t)),this}rotate(e){return this.premultiply(LS.makeRotation(-e)),this}translate(e,t){return this.premultiply(LS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const LS=new ln;function MO(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const X8={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Lp(i,e){return new X8[i](e)}function H0(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function AO(){const i=H0("canvas");return i.style.display="block",i}const hR={};function i_(i){i in hR||(hR[i]=!0,console.warn(i))}function q8(i,e,t){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:n()}}setTimeout(r,t)})}function j8(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Y8(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const dR=new ln().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),pR=new ln().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function W8(){const i={enabled:!0,workingColorSpace:qs,spaces:{},convert:function(s,r,o){return this.enabled===!1||r===o||!r||!o||(this.spaces[r].transfer===Wn&&(s.r=Hc(s.r),s.g=Hc(s.g),s.b=Hc(s.b)),this.spaces[r].primaries!==this.spaces[o].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Wn&&(s.r=Bp(s.r),s.g=Bp(s.g),s.b=Bp(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Oc?I0:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,o){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[qs]:{primaries:e,whitePoint:n,transfer:I0,toXYZ:dR,fromXYZ:pR,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:ji},outputColorSpaceConfig:{drawingBufferColorSpace:ji}},[ji]:{primaries:e,whitePoint:n,transfer:Wn,toXYZ:dR,fromXYZ:pR,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:ji}}}),i}const vn=W8();function Hc(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Bp(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let ap,wO=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{ap===void 0&&(ap=H0("canvas")),ap.width=e.width,ap.height=e.height;const s=ap.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),n=ap}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=H0("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=Hc(r[o]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Hc(t[n]/255)*255):t[n]=Hc(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Z8=0,lf=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Z8++}),this.uuid=Da(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,c=s.length;o<c;o++)s[o].isDataTexture?r.push(US(s[o].image)):r.push(US(s[o]))}else r=US(s);n.url=r}return t||(e.images[this.uuid]=n),n}};function US(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?wO.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let K8=0,Fi=class s_ extends Yl{constructor(e=s_.DEFAULT_IMAGE,t=s_.DEFAULT_MAPPING,n=Ca,s=Ca,r=Bi,o=ro,c=ur,f=Wo,d=s_.DEFAULT_ANISOTROPY,m=Oc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:K8++}),this.uuid=Da(),this.name="",this.source=new lf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=f,this.offset=new Xe(0,0),this.repeat=new Xe(1,1),this.center=new Xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ln,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==D1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case mf:e.x=e.x-Math.floor(e.x);break;case Ca:e.x=e.x<0?0:1;break;case kp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case mf:e.y=e.y-Math.floor(e.y);break;case Ca:e.y=e.y<0?0:1;break;case kp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};Fi.DEFAULT_IMAGE=null;Fi.DEFAULT_MAPPING=D1;Fi.DEFAULT_ANISOTROPY=1;let Bn=class RO{constructor(e=0,t=0,n=0,s=1){RO.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*s+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*s+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*s+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*s+o[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,r;const f=e.elements,d=f[0],m=f[4],g=f[8],v=f[1],_=f[5],b=f[9],A=f[2],M=f[6],T=f[10];if(Math.abs(m-v)<.01&&Math.abs(g-A)<.01&&Math.abs(b-M)<.01){if(Math.abs(m+v)<.1&&Math.abs(g+A)<.1&&Math.abs(b+M)<.1&&Math.abs(d+_+T-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(d+1)/2,N=(_+1)/2,I=(T+1)/2,L=(m+v)/4,P=(g+A)/4,G=(b+M)/4;return D>N&&D>I?D<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(D),s=L/n,r=P/n):N>I?N<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(N),n=L/s,r=G/s):I<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(I),n=P/r,s=G/r),this.set(n,s,r,t),this}let C=Math.sqrt((M-b)*(M-b)+(g-A)*(g-A)+(v-m)*(v-m));return Math.abs(C)<.001&&(C=1),this.x=(M-b)/C,this.y=(g-A)/C,this.z=(v-m)/C,this.w=Math.acos((d+_+T-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Jt(this.x,e.x,t.x),this.y=Jt(this.y,e.y,t.y),this.z=Jt(this.z,e.z,t.z),this.w=Jt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Jt(this.x,e,t),this.y=Jt(this.y,e,t),this.z=Jt(this.z,e,t),this.w=Jt(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Jt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},H1=class extends Yl{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Bn(0,0,e,t),this.scissorTest=!1,this.viewport=new Bn(0,0,e,t);const s={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Bi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const r=new Fi(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let c=0;c<o;c++)this.textures[c]=r.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const s=Object.assign({},e.textures[t].image);this.textures[t].source=new lf(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}};class ql extends H1{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class iy extends Fi{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=Ss,this.minFilter=Ss,this.wrapR=Ca,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Q8 extends ql{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new iy(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class V1 extends Fi{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=Ss,this.minFilter=Ss,this.wrapR=Ca,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class J8 extends ql{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new V1(null,e,t,n),this.texture.isRenderTargetTexture=!0}}let fr=class{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,r,o,c){let f=n[s+0],d=n[s+1],m=n[s+2],g=n[s+3];const v=r[o+0],_=r[o+1],b=r[o+2],A=r[o+3];if(c===0){e[t+0]=f,e[t+1]=d,e[t+2]=m,e[t+3]=g;return}if(c===1){e[t+0]=v,e[t+1]=_,e[t+2]=b,e[t+3]=A;return}if(g!==A||f!==v||d!==_||m!==b){let M=1-c;const T=f*v+d*_+m*b+g*A,C=T>=0?1:-1,D=1-T*T;if(D>Number.EPSILON){const I=Math.sqrt(D),L=Math.atan2(I,T*C);M=Math.sin(M*L)/I,c=Math.sin(c*L)/I}const N=c*C;if(f=f*M+v*N,d=d*M+_*N,m=m*M+b*N,g=g*M+A*N,M===1-c){const I=1/Math.sqrt(f*f+d*d+m*m+g*g);f*=I,d*=I,m*=I,g*=I}}e[t]=f,e[t+1]=d,e[t+2]=m,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,s,r,o){const c=n[s],f=n[s+1],d=n[s+2],m=n[s+3],g=r[o],v=r[o+1],_=r[o+2],b=r[o+3];return e[t]=c*b+m*g+f*_-d*v,e[t+1]=f*b+m*v+d*g-c*_,e[t+2]=d*b+m*_+c*v-f*g,e[t+3]=m*b-c*g-f*v-d*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,r=e._z,o=e._order,c=Math.cos,f=Math.sin,d=c(n/2),m=c(s/2),g=c(r/2),v=f(n/2),_=f(s/2),b=f(r/2);switch(o){case"XYZ":this._x=v*m*g+d*_*b,this._y=d*_*g-v*m*b,this._z=d*m*b+v*_*g,this._w=d*m*g-v*_*b;break;case"YXZ":this._x=v*m*g+d*_*b,this._y=d*_*g-v*m*b,this._z=d*m*b-v*_*g,this._w=d*m*g+v*_*b;break;case"ZXY":this._x=v*m*g-d*_*b,this._y=d*_*g+v*m*b,this._z=d*m*b+v*_*g,this._w=d*m*g-v*_*b;break;case"ZYX":this._x=v*m*g-d*_*b,this._y=d*_*g+v*m*b,this._z=d*m*b-v*_*g,this._w=d*m*g+v*_*b;break;case"YZX":this._x=v*m*g+d*_*b,this._y=d*_*g+v*m*b,this._z=d*m*b-v*_*g,this._w=d*m*g-v*_*b;break;case"XZY":this._x=v*m*g-d*_*b,this._y=d*_*g-v*m*b,this._z=d*m*b+v*_*g,this._w=d*m*g+v*_*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],r=t[8],o=t[1],c=t[5],f=t[9],d=t[2],m=t[6],g=t[10],v=n+c+g;if(v>0){const _=.5/Math.sqrt(v+1);this._w=.25/_,this._x=(m-f)*_,this._y=(r-d)*_,this._z=(o-s)*_}else if(n>c&&n>g){const _=2*Math.sqrt(1+n-c-g);this._w=(m-f)/_,this._x=.25*_,this._y=(s+o)/_,this._z=(r+d)/_}else if(c>g){const _=2*Math.sqrt(1+c-n-g);this._w=(r-d)/_,this._x=(s+o)/_,this._y=.25*_,this._z=(f+m)/_}else{const _=2*Math.sqrt(1+g-n-c);this._w=(o-s)/_,this._x=(r+d)/_,this._y=(f+m)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Jt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,r=e._z,o=e._w,c=t._x,f=t._y,d=t._z,m=t._w;return this._x=n*m+o*c+s*d-r*f,this._y=s*m+o*f+r*c-n*d,this._z=r*m+o*d+n*f-s*c,this._w=o*m-n*c-s*f-r*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,r=this._z,o=this._w;let c=o*e._w+n*e._x+s*e._y+r*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=o,this._x=n,this._y=s,this._z=r,this;const f=1-c*c;if(f<=Number.EPSILON){const _=1-t;return this._w=_*o+t*this._w,this._x=_*n+t*this._x,this._y=_*s+t*this._y,this._z=_*r+t*this._z,this.normalize(),this}const d=Math.sqrt(f),m=Math.atan2(d,c),g=Math.sin((1-t)*m)/d,v=Math.sin(t*m)/d;return this._w=o*g+this._w*v,this._x=n*g+this._x*v,this._y=s*g+this._y*v,this._z=r*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},K=class CO{constructor(e=0,t=0,n=0){CO.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(mR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*s,this.y=r[1]*t+r[4]*n+r[7]*s,this.z=r[2]*t+r[5]*n+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*s+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*s+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*s+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,r=e.x,o=e.y,c=e.z,f=e.w,d=2*(o*s-c*n),m=2*(c*t-r*s),g=2*(r*n-o*t);return this.x=t+f*d+o*g-c*m,this.y=n+f*m+c*d-r*g,this.z=s+f*g+r*m-o*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*s,this.y=r[1]*t+r[5]*n+r[9]*s,this.z=r[2]*t+r[6]*n+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Jt(this.x,e.x,t.x),this.y=Jt(this.y,e.y,t.y),this.z=Jt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Jt(this.x,e,t),this.y=Jt(this.y,e,t),this.z=Jt(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Jt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,r=e.z,o=t.x,c=t.y,f=t.z;return this.x=s*f-r*c,this.y=r*o-n*f,this.z=n*c-s*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return zS.copy(this).projectOnVector(e),this.sub(zS)}reflect(e){return this.sub(zS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Jt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const zS=new K,mR=new fr;let hr=class{constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Io.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Io.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Io.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const r=n.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let o=0,c=r.count;o<c;o++)e.isMesh===!0?e.getVertexPosition(o,Io):Io.fromBufferAttribute(r,o),Io.applyMatrix4(e.matrixWorld),this.expandByPoint(Io);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ex.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),ex.copy(n.boundingBox)),ex.applyMatrix4(e.matrixWorld),this.union(ex)}const s=e.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Io),Io.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Vg),tx.subVectors(this.max,Vg),op.subVectors(e.a,Vg),lp.subVectors(e.b,Vg),cp.subVectors(e.c,Vg),Xu.subVectors(lp,op),qu.subVectors(cp,lp),hh.subVectors(op,cp);let t=[0,-Xu.z,Xu.y,0,-qu.z,qu.y,0,-hh.z,hh.y,Xu.z,0,-Xu.x,qu.z,0,-qu.x,hh.z,0,-hh.x,-Xu.y,Xu.x,0,-qu.y,qu.x,0,-hh.y,hh.x,0];return!PS(t,op,lp,cp,tx)||(t=[1,0,0,0,1,0,0,0,1],!PS(t,op,lp,cp,tx))?!1:(nx.crossVectors(Xu,qu),t=[nx.x,nx.y,nx.z],PS(t,op,lp,cp,tx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Io).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Io).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(bc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),bc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),bc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),bc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),bc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),bc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),bc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),bc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(bc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const bc=[new K,new K,new K,new K,new K,new K,new K,new K],Io=new K,ex=new hr,op=new K,lp=new K,cp=new K,Xu=new K,qu=new K,hh=new K,Vg=new K,tx=new K,nx=new K,dh=new K;function PS(i,e,t,n,s){for(let r=0,o=i.length-3;r<=o;r+=3){dh.fromArray(i,r);const c=s.x*Math.abs(dh.x)+s.y*Math.abs(dh.y)+s.z*Math.abs(dh.z),f=e.dot(dh),d=t.dot(dh),m=n.dot(dh);if(Math.max(-Math.max(f,d,m),Math.min(f,d,m))>c)return!1}return!0}const eV=new hr,Gg=new K,IS=new K;let Xs=class{constructor(e=new K,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):eV.setFromPoints(e).getCenter(n);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Gg.subVectors(e,this.center);const t=Gg.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(Gg,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(IS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Gg.copy(e.center).add(IS)),this.expandByPoint(Gg.copy(e.center).sub(IS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Sc=new K,BS=new K,ix=new K,ju=new K,FS=new K,sx=new K,HS=new K;class mm{constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Sc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Sc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Sc.copy(this.origin).addScaledVector(this.direction,t),Sc.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){BS.copy(e).add(t).multiplyScalar(.5),ix.copy(t).sub(e).normalize(),ju.copy(this.origin).sub(BS);const r=e.distanceTo(t)*.5,o=-this.direction.dot(ix),c=ju.dot(this.direction),f=-ju.dot(ix),d=ju.lengthSq(),m=Math.abs(1-o*o);let g,v,_,b;if(m>0)if(g=o*f-c,v=o*c-f,b=r*m,g>=0)if(v>=-b)if(v<=b){const A=1/m;g*=A,v*=A,_=g*(g+o*v+2*c)+v*(o*g+v+2*f)+d}else v=r,g=Math.max(0,-(o*v+c)),_=-g*g+v*(v+2*f)+d;else v=-r,g=Math.max(0,-(o*v+c)),_=-g*g+v*(v+2*f)+d;else v<=-b?(g=Math.max(0,-(-o*r+c)),v=g>0?-r:Math.min(Math.max(-r,-f),r),_=-g*g+v*(v+2*f)+d):v<=b?(g=0,v=Math.min(Math.max(-r,-f),r),_=v*(v+2*f)+d):(g=Math.max(0,-(o*r+c)),v=g>0?r:Math.min(Math.max(-r,-f),r),_=-g*g+v*(v+2*f)+d);else v=o>0?-r:r,g=Math.max(0,-(o*v+c)),_=-g*g+v*(v+2*f)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,g),s&&s.copy(BS).addScaledVector(ix,v),_}intersectSphere(e,t){Sc.subVectors(e.center,this.origin);const n=Sc.dot(this.direction),s=Sc.dot(Sc)-n*n,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),c=n-o,f=n+o;return f<0?null:c<0?this.at(f,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,r,o,c,f;const d=1/this.direction.x,m=1/this.direction.y,g=1/this.direction.z,v=this.origin;return d>=0?(n=(e.min.x-v.x)*d,s=(e.max.x-v.x)*d):(n=(e.max.x-v.x)*d,s=(e.min.x-v.x)*d),m>=0?(r=(e.min.y-v.y)*m,o=(e.max.y-v.y)*m):(r=(e.max.y-v.y)*m,o=(e.min.y-v.y)*m),n>o||r>s||((r>n||isNaN(n))&&(n=r),(o<s||isNaN(s))&&(s=o),g>=0?(c=(e.min.z-v.z)*g,f=(e.max.z-v.z)*g):(c=(e.max.z-v.z)*g,f=(e.min.z-v.z)*g),n>f||c>s)||((c>n||n!==n)&&(n=c),(f<s||s!==s)&&(s=f),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return this.intersectBox(e,Sc)!==null}intersectTriangle(e,t,n,s,r){FS.subVectors(t,e),sx.subVectors(n,e),HS.crossVectors(FS,sx);let o=this.direction.dot(HS),c;if(o>0){if(s)return null;c=1}else if(o<0)c=-1,o=-o;else return null;ju.subVectors(this.origin,e);const f=c*this.direction.dot(sx.crossVectors(ju,sx));if(f<0)return null;const d=c*this.direction.dot(FS.cross(ju));if(d<0||f+d>o)return null;const m=-c*ju.dot(HS);return m<0?null:this.at(m/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}let Gt=class DT{constructor(e,t,n,s,r,o,c,f,d,m,g,v,_,b,A,M){DT.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,o,c,f,d,m,g,v,_,b,A,M)}set(e,t,n,s,r,o,c,f,d,m,g,v,_,b,A,M){const T=this.elements;return T[0]=e,T[4]=t,T[8]=n,T[12]=s,T[1]=r,T[5]=o,T[9]=c,T[13]=f,T[2]=d,T[6]=m,T[10]=g,T[14]=v,T[3]=_,T[7]=b,T[11]=A,T[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new DT().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/up.setFromMatrixColumn(e,0).length(),r=1/up.setFromMatrixColumn(e,1).length(),o=1/up.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,r=e.z,o=Math.cos(n),c=Math.sin(n),f=Math.cos(s),d=Math.sin(s),m=Math.cos(r),g=Math.sin(r);if(e.order==="XYZ"){const v=o*m,_=o*g,b=c*m,A=c*g;t[0]=f*m,t[4]=-f*g,t[8]=d,t[1]=_+b*d,t[5]=v-A*d,t[9]=-c*f,t[2]=A-v*d,t[6]=b+_*d,t[10]=o*f}else if(e.order==="YXZ"){const v=f*m,_=f*g,b=d*m,A=d*g;t[0]=v+A*c,t[4]=b*c-_,t[8]=o*d,t[1]=o*g,t[5]=o*m,t[9]=-c,t[2]=_*c-b,t[6]=A+v*c,t[10]=o*f}else if(e.order==="ZXY"){const v=f*m,_=f*g,b=d*m,A=d*g;t[0]=v-A*c,t[4]=-o*g,t[8]=b+_*c,t[1]=_+b*c,t[5]=o*m,t[9]=A-v*c,t[2]=-o*d,t[6]=c,t[10]=o*f}else if(e.order==="ZYX"){const v=o*m,_=o*g,b=c*m,A=c*g;t[0]=f*m,t[4]=b*d-_,t[8]=v*d+A,t[1]=f*g,t[5]=A*d+v,t[9]=_*d-b,t[2]=-d,t[6]=c*f,t[10]=o*f}else if(e.order==="YZX"){const v=o*f,_=o*d,b=c*f,A=c*d;t[0]=f*m,t[4]=A-v*g,t[8]=b*g+_,t[1]=g,t[5]=o*m,t[9]=-c*m,t[2]=-d*m,t[6]=_*g+b,t[10]=v-A*g}else if(e.order==="XZY"){const v=o*f,_=o*d,b=c*f,A=c*d;t[0]=f*m,t[4]=-g,t[8]=d*m,t[1]=v*g+A,t[5]=o*m,t[9]=_*g-b,t[2]=b*g-_,t[6]=c*m,t[10]=A*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(tV,e,nV)}lookAt(e,t,n){const s=this.elements;return Aa.subVectors(e,t),Aa.lengthSq()===0&&(Aa.z=1),Aa.normalize(),Yu.crossVectors(n,Aa),Yu.lengthSq()===0&&(Math.abs(n.z)===1?Aa.x+=1e-4:Aa.z+=1e-4,Aa.normalize(),Yu.crossVectors(n,Aa)),Yu.normalize(),rx.crossVectors(Aa,Yu),s[0]=Yu.x,s[4]=rx.x,s[8]=Aa.x,s[1]=Yu.y,s[5]=rx.y,s[9]=Aa.y,s[2]=Yu.z,s[6]=rx.z,s[10]=Aa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,o=n[0],c=n[4],f=n[8],d=n[12],m=n[1],g=n[5],v=n[9],_=n[13],b=n[2],A=n[6],M=n[10],T=n[14],C=n[3],D=n[7],N=n[11],I=n[15],L=s[0],P=s[4],G=s[8],B=s[12],U=s[1],j=s[5],ae=s[9],ne=s[13],de=s[2],he=s[6],F=s[10],W=s[14],Z=s[3],fe=s[7],X=s[11],ie=s[15];return r[0]=o*L+c*U+f*de+d*Z,r[4]=o*P+c*j+f*he+d*fe,r[8]=o*G+c*ae+f*F+d*X,r[12]=o*B+c*ne+f*W+d*ie,r[1]=m*L+g*U+v*de+_*Z,r[5]=m*P+g*j+v*he+_*fe,r[9]=m*G+g*ae+v*F+_*X,r[13]=m*B+g*ne+v*W+_*ie,r[2]=b*L+A*U+M*de+T*Z,r[6]=b*P+A*j+M*he+T*fe,r[10]=b*G+A*ae+M*F+T*X,r[14]=b*B+A*ne+M*W+T*ie,r[3]=C*L+D*U+N*de+I*Z,r[7]=C*P+D*j+N*he+I*fe,r[11]=C*G+D*ae+N*F+I*X,r[15]=C*B+D*ne+N*W+I*ie,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],r=e[12],o=e[1],c=e[5],f=e[9],d=e[13],m=e[2],g=e[6],v=e[10],_=e[14],b=e[3],A=e[7],M=e[11],T=e[15];return b*(+r*f*g-s*d*g-r*c*v+n*d*v+s*c*_-n*f*_)+A*(+t*f*_-t*d*v+r*o*v-s*o*_+s*d*m-r*f*m)+M*(+t*d*g-t*c*_-r*o*g+n*o*_+r*c*m-n*d*m)+T*(-s*c*m-t*f*g+t*c*v+s*o*g-n*o*v+n*f*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],c=e[5],f=e[6],d=e[7],m=e[8],g=e[9],v=e[10],_=e[11],b=e[12],A=e[13],M=e[14],T=e[15],C=g*M*d-A*v*d+A*f*_-c*M*_-g*f*T+c*v*T,D=b*v*d-m*M*d-b*f*_+o*M*_+m*f*T-o*v*T,N=m*A*d-b*g*d+b*c*_-o*A*_-m*c*T+o*g*T,I=b*g*f-m*A*f-b*c*v+o*A*v+m*c*M-o*g*M,L=t*C+n*D+s*N+r*I;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/L;return e[0]=C*P,e[1]=(A*v*r-g*M*r-A*s*_+n*M*_+g*s*T-n*v*T)*P,e[2]=(c*M*r-A*f*r+A*s*d-n*M*d-c*s*T+n*f*T)*P,e[3]=(g*f*r-c*v*r-g*s*d+n*v*d+c*s*_-n*f*_)*P,e[4]=D*P,e[5]=(m*M*r-b*v*r+b*s*_-t*M*_-m*s*T+t*v*T)*P,e[6]=(b*f*r-o*M*r-b*s*d+t*M*d+o*s*T-t*f*T)*P,e[7]=(o*v*r-m*f*r+m*s*d-t*v*d-o*s*_+t*f*_)*P,e[8]=N*P,e[9]=(b*g*r-m*A*r-b*n*_+t*A*_+m*n*T-t*g*T)*P,e[10]=(o*A*r-b*c*r+b*n*d-t*A*d-o*n*T+t*c*T)*P,e[11]=(m*c*r-o*g*r-m*n*d+t*g*d+o*n*_-t*c*_)*P,e[12]=I*P,e[13]=(m*A*s-b*g*s+b*n*v-t*A*v-m*n*M+t*g*M)*P,e[14]=(b*c*s-o*A*s-b*n*f+t*A*f+o*n*M-t*c*M)*P,e[15]=(o*g*s-m*c*s+m*n*f-t*g*f-o*n*v+t*c*v)*P,this}scale(e){const t=this.elements,n=e.x,s=e.y,r=e.z;return t[0]*=n,t[4]*=s,t[8]*=r,t[1]*=n,t[5]*=s,t[9]*=r,t[2]*=n,t[6]*=s,t[10]*=r,t[3]*=n,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),r=1-n,o=e.x,c=e.y,f=e.z,d=r*o,m=r*c;return this.set(d*o+n,d*c-s*f,d*f+s*c,0,d*c+s*f,m*c+n,m*f-s*o,0,d*f-s*c,m*f+s*o,r*f*f+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,r,o){return this.set(1,n,r,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,r=t._x,o=t._y,c=t._z,f=t._w,d=r+r,m=o+o,g=c+c,v=r*d,_=r*m,b=r*g,A=o*m,M=o*g,T=c*g,C=f*d,D=f*m,N=f*g,I=n.x,L=n.y,P=n.z;return s[0]=(1-(A+T))*I,s[1]=(_+N)*I,s[2]=(b-D)*I,s[3]=0,s[4]=(_-N)*L,s[5]=(1-(v+T))*L,s[6]=(M+C)*L,s[7]=0,s[8]=(b+D)*P,s[9]=(M-C)*P,s[10]=(1-(v+A))*P,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let r=up.set(s[0],s[1],s[2]).length();const o=up.set(s[4],s[5],s[6]).length(),c=up.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],Bo.copy(this);const d=1/r,m=1/o,g=1/c;return Bo.elements[0]*=d,Bo.elements[1]*=d,Bo.elements[2]*=d,Bo.elements[4]*=m,Bo.elements[5]*=m,Bo.elements[6]*=m,Bo.elements[8]*=g,Bo.elements[9]*=g,Bo.elements[10]*=g,t.setFromRotationMatrix(Bo),n.x=r,n.y=o,n.z=c,this}makePerspective(e,t,n,s,r,o,c=jo){const f=this.elements,d=2*r/(t-e),m=2*r/(n-s),g=(t+e)/(t-e),v=(n+s)/(n-s);let _,b;if(c===jo)_=-(o+r)/(o-r),b=-2*o*r/(o-r);else if(c===F0)_=-o/(o-r),b=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return f[0]=d,f[4]=0,f[8]=g,f[12]=0,f[1]=0,f[5]=m,f[9]=v,f[13]=0,f[2]=0,f[6]=0,f[10]=_,f[14]=b,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,n,s,r,o,c=jo){const f=this.elements,d=1/(t-e),m=1/(n-s),g=1/(o-r),v=(t+e)*d,_=(n+s)*m;let b,A;if(c===jo)b=(o+r)*g,A=-2*g;else if(c===F0)b=r*g,A=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return f[0]=2*d,f[4]=0,f[8]=0,f[12]=-v,f[1]=0,f[5]=2*m,f[9]=0,f[13]=-_,f[2]=0,f[6]=0,f[10]=A,f[14]=-b,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}};const up=new K,Bo=new Gt,tV=new K(0,0,0),nV=new K(1,1,1),Yu=new K,rx=new K,Aa=new K,gR=new Gt,yR=new fr;let Zo=class NO{constructor(e=0,t=0,n=0,s=NO.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,r=s[0],o=s[4],c=s[8],f=s[1],d=s[5],m=s[9],g=s[2],v=s[6],_=s[10];switch(t){case"XYZ":this._y=Math.asin(Jt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,_),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(v,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Jt(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(c,_),this._z=Math.atan2(f,d)):(this._y=Math.atan2(-g,r),this._z=0);break;case"ZXY":this._x=Math.asin(Jt(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(f,r));break;case"ZYX":this._y=Math.asin(-Jt(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,_),this._z=Math.atan2(f,r)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(Jt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-m,d),this._y=Math.atan2(-g,r)):(this._x=0,this._y=Math.atan2(c,_));break;case"XZY":this._z=Math.asin(-Jt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(v,d),this._y=Math.atan2(c,r)):(this._x=Math.atan2(-m,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return gR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gR,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return yR.setFromEuler(this),this.setFromQuaternion(yR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Zo.DEFAULT_ORDER="XYZ";class Kp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let iV=0;const vR=new K,fp=new fr,Ec=new Gt,ax=new K,kg=new K,sV=new K,rV=new fr,xR=new K(1,0,0),_R=new K(0,1,0),bR=new K(0,0,1),SR={type:"added"},aV={type:"removed"},hp={type:"childadded",child:null},VS={type:"childremoved",child:null};class Rn extends Yl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:iV++}),this.uuid=Da(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Rn.DEFAULT_UP.clone();const e=new K,t=new Zo,n=new fr,s=new K(1,1,1);function r(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Gt},normalMatrix:{value:new ln}}),this.matrix=new Gt,this.matrixWorld=new Gt,this.matrixAutoUpdate=Rn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Kp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return fp.setFromAxisAngle(e,t),this.quaternion.multiply(fp),this}rotateOnWorldAxis(e,t){return fp.setFromAxisAngle(e,t),this.quaternion.premultiply(fp),this}rotateX(e){return this.rotateOnAxis(xR,e)}rotateY(e){return this.rotateOnAxis(_R,e)}rotateZ(e){return this.rotateOnAxis(bR,e)}translateOnAxis(e,t){return vR.copy(e).applyQuaternion(this.quaternion),this.position.add(vR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(xR,e)}translateY(e){return this.translateOnAxis(_R,e)}translateZ(e){return this.translateOnAxis(bR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ec.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ax.copy(e):ax.set(e,t,n);const s=this.parent;this.updateWorldMatrix(!0,!1),kg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ec.lookAt(kg,ax,this.up):Ec.lookAt(ax,kg,this.up),this.quaternion.setFromRotationMatrix(Ec),s&&(Ec.extractRotation(s.matrixWorld),fp.setFromRotationMatrix(Ec),this.quaternion.premultiply(fp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(SR),hp.child=e,this.dispatchEvent(hp),hp.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(aV),VS.child=e,this.dispatchEvent(VS),VS.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ec.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ec.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ec),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(SR),hp.child=e,this.dispatchEvent(hp),hp.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,s=this.children.length;n<s;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kg,e,sV),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kg,rV,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(c,f){return c[f.uuid]===void 0&&(c[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const f=c.shapes;if(Array.isArray(f))for(let d=0,m=f.length;d<m;d++){const g=f[d];r(e.shapes,g)}else r(e.shapes,f)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let f=0,d=this.material.length;f<d;f++)c.push(r(e.materials,this.material[f]));s.material=c}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++){const f=this.animations[c];s.animations.push(r(e.animations,f))}}if(t){const c=o(e.geometries),f=o(e.materials),d=o(e.textures),m=o(e.images),g=o(e.shapes),v=o(e.skeletons),_=o(e.animations),b=o(e.nodes);c.length>0&&(n.geometries=c),f.length>0&&(n.materials=f),d.length>0&&(n.textures=d),m.length>0&&(n.images=m),g.length>0&&(n.shapes=g),v.length>0&&(n.skeletons=v),_.length>0&&(n.animations=_),b.length>0&&(n.nodes=b)}return n.object=s,n;function o(c){const f=[];for(const d in c){const m=c[d];delete m.metadata,f.push(m)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}Rn.DEFAULT_UP=new K(0,1,0);Rn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Fo=new K,Tc=new K,GS=new K,Mc=new K,dp=new K,pp=new K,ER=new K,kS=new K,$S=new K,XS=new K,qS=new Bn,jS=new Bn,YS=new Bn;class sa{constructor(e=new K,t=new K,n=new K){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),Fo.subVectors(e,t),s.cross(Fo);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,n,s,r){Fo.subVectors(s,t),Tc.subVectors(n,t),GS.subVectors(e,t);const o=Fo.dot(Fo),c=Fo.dot(Tc),f=Fo.dot(GS),d=Tc.dot(Tc),m=Tc.dot(GS),g=o*d-c*c;if(g===0)return r.set(0,0,0),null;const v=1/g,_=(d*f-c*m)*v,b=(o*m-c*f)*v;return r.set(1-_-b,b,_)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,Mc)===null?!1:Mc.x>=0&&Mc.y>=0&&Mc.x+Mc.y<=1}static getInterpolation(e,t,n,s,r,o,c,f){return this.getBarycoord(e,t,n,s,Mc)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(r,Mc.x),f.addScaledVector(o,Mc.y),f.addScaledVector(c,Mc.z),f)}static getInterpolatedAttribute(e,t,n,s,r,o){return qS.setScalar(0),jS.setScalar(0),YS.setScalar(0),qS.fromBufferAttribute(e,t),jS.fromBufferAttribute(e,n),YS.fromBufferAttribute(e,s),o.setScalar(0),o.addScaledVector(qS,r.x),o.addScaledVector(jS,r.y),o.addScaledVector(YS,r.z),o}static isFrontFacing(e,t,n,s){return Fo.subVectors(n,t),Tc.subVectors(e,t),Fo.cross(Tc).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Fo.subVectors(this.c,this.b),Tc.subVectors(this.a,this.b),Fo.cross(Tc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return sa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return sa.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,s,r){return sa.getInterpolation(e,this.a,this.b,this.c,t,n,s,r)}containsPoint(e){return sa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return sa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,r=this.c;let o,c;dp.subVectors(s,n),pp.subVectors(r,n),kS.subVectors(e,n);const f=dp.dot(kS),d=pp.dot(kS);if(f<=0&&d<=0)return t.copy(n);$S.subVectors(e,s);const m=dp.dot($S),g=pp.dot($S);if(m>=0&&g<=m)return t.copy(s);const v=f*g-m*d;if(v<=0&&f>=0&&m<=0)return o=f/(f-m),t.copy(n).addScaledVector(dp,o);XS.subVectors(e,r);const _=dp.dot(XS),b=pp.dot(XS);if(b>=0&&_<=b)return t.copy(r);const A=_*d-f*b;if(A<=0&&d>=0&&b<=0)return c=d/(d-b),t.copy(n).addScaledVector(pp,c);const M=m*b-_*g;if(M<=0&&g-m>=0&&_-b>=0)return ER.subVectors(r,s),c=(g-m)/(g-m+(_-b)),t.copy(s).addScaledVector(ER,c);const T=1/(M+A+v);return o=A*T,c=v*T,t.copy(n).addScaledVector(dp,o).addScaledVector(pp,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const DO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wu={h:0,s:0,l:0},ox={h:0,s:0,l:0};function WS(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let lt=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ji){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,vn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,s=vn.workingColorSpace){return this.r=e,this.g=t,this.b=n,vn.toWorkingColorSpace(this,s),this}setHSL(e,t,n,s=vn.workingColorSpace){if(e=OM(e,1),t=Jt(t,0,1),n=Jt(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,o=2*n-r;this.r=WS(o,r,e+1/3),this.g=WS(o,r,e),this.b=WS(o,r,e-1/3)}return vn.toWorkingColorSpace(this,s),this}setStyle(e,t=ji){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=s[1],c=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ji){const n=DO[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Hc(e.r),this.g=Hc(e.g),this.b=Hc(e.b),this}copyLinearToSRGB(e){return this.r=Bp(e.r),this.g=Bp(e.g),this.b=Bp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ji){return vn.fromWorkingColorSpace(rr.copy(this),e),Math.round(Jt(rr.r*255,0,255))*65536+Math.round(Jt(rr.g*255,0,255))*256+Math.round(Jt(rr.b*255,0,255))}getHexString(e=ji){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=vn.workingColorSpace){vn.fromWorkingColorSpace(rr.copy(this),t);const n=rr.r,s=rr.g,r=rr.b,o=Math.max(n,s,r),c=Math.min(n,s,r);let f,d;const m=(c+o)/2;if(c===o)f=0,d=0;else{const g=o-c;switch(d=m<=.5?g/(o+c):g/(2-o-c),o){case n:f=(s-r)/g+(s<r?6:0);break;case s:f=(r-n)/g+2;break;case r:f=(n-s)/g+4;break}f/=6}return e.h=f,e.s=d,e.l=m,e}getRGB(e,t=vn.workingColorSpace){return vn.fromWorkingColorSpace(rr.copy(this),t),e.r=rr.r,e.g=rr.g,e.b=rr.b,e}getStyle(e=ji){vn.fromWorkingColorSpace(rr.copy(this),e);const t=rr.r,n=rr.g,s=rr.b;return e!==ji?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(Wu),this.setHSL(Wu.h+e,Wu.s+t,Wu.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Wu),e.getHSL(ox);const n=T0(Wu.h,ox.h,t),s=T0(Wu.s,ox.s,t),r=T0(Wu.l,ox.l,t);return this.setHSL(n,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*s,this.g=r[1]*t+r[4]*n+r[7]*s,this.b=r[2]*t+r[5]*n+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const rr=new lt;lt.NAMES=DO;let oV=0;class Es extends Yl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:oV++}),this.uuid=Da(),this.name="",this.type="Material",this.blending=Fh,this.side=Xl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=A_,this.blendDst=w_,this.blendEquation=af,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new lt(0,0,0),this.blendAlpha=0,this.depthFunc=$h,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=CT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ch,this.stencilZFail=Ch,this.stencilZPass=Ch,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Fh&&(n.blending=this.blending),this.side!==Xl&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==A_&&(n.blendSrc=this.blendSrc),this.blendDst!==w_&&(n.blendDst=this.blendDst),this.blendEquation!==af&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==$h&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==CT&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ch&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Ch&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Ch&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const o=[];for(const c in r){const f=r[c];delete f.metadata,o.push(f)}return o}if(t){const r=s(e.textures),o=s(e.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const s=t.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Na extends Es{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Zo,this.combine=ty,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Lc=lV();function lV(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let f=0;f<256;++f){const d=f-127;d<-27?(n[f]=0,n[f|256]=32768,s[f]=24,s[f|256]=24):d<-14?(n[f]=1024>>-d-14,n[f|256]=1024>>-d-14|32768,s[f]=-d-1,s[f|256]=-d-1):d<=15?(n[f]=d+15<<10,n[f|256]=d+15<<10|32768,s[f]=13,s[f|256]=13):d<128?(n[f]=31744,n[f|256]=64512,s[f]=24,s[f|256]=24):(n[f]=31744,n[f|256]=64512,s[f]=13,s[f|256]=13)}const r=new Uint32Array(2048),o=new Uint32Array(64),c=new Uint32Array(64);for(let f=1;f<1024;++f){let d=f<<13,m=0;for(;(d&8388608)===0;)d<<=1,m-=8388608;d&=-8388609,m+=947912704,r[f]=d|m}for(let f=1024;f<2048;++f)r[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)o[f]=f<<23;o[31]=1199570944,o[32]=2147483648;for(let f=33;f<63;++f)o[f]=2147483648+(f-32<<23);o[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(c[f]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:o,offsetTable:c}}function na(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Jt(i,-65504,65504),Lc.floatView[0]=i;const e=Lc.uint32View[0],t=e>>23&511;return Lc.baseTable[t]+((e&8388607)>>Lc.shiftTable[t])}function f0(i){const e=i>>10;return Lc.uint32View[0]=Lc.mantissaTable[Lc.offsetTable[e]+(i&1023)]+Lc.exponentTable[e],Lc.floatView[0]}class cV{static toHalfFloat(e){return na(e)}static fromHalfFloat(e){return f0(e)}}const is=new K,lx=new Xe;let uV=0,Fn=class{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:uV++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=B0,this.updateRanges=[],this.gpuType=aa,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)lx.fromBufferAttribute(this,t),lx.applyMatrix3(e),this.setXY(t,lx.x,lx.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)is.fromBufferAttribute(this,t),is.applyMatrix3(e),this.setXYZ(t,is.x,is.y,is.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)is.fromBufferAttribute(this,t),is.applyMatrix4(e),this.setXYZ(t,is.x,is.y,is.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)is.fromBufferAttribute(this,t),is.applyNormalMatrix(e),this.setXYZ(t,is.x,is.y,is.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)is.fromBufferAttribute(this,t),is.transformDirection(e),this.setXYZ(t,is.x,is.y,is.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Br(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=sn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Br(t,this.array)),t}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Br(t,this.array)),t}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Br(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Br(t,this.array)),t}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),n=sn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),n=sn(n,this.array),s=sn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),n=sn(n,this.array),s=sn(s,this.array),r=sn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==B0&&(e.usage=this.usage),e}};class fV extends Fn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class hV extends Fn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class dV extends Fn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class pV extends Fn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class LM extends Fn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class mV extends Fn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class UM extends Fn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class gV extends Fn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=f0(this.array[e*this.itemSize]);return this.normalized&&(t=Br(t,this.array)),t}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize]=na(t),this}getY(e){let t=f0(this.array[e*this.itemSize+1]);return this.normalized&&(t=Br(t,this.array)),t}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+1]=na(t),this}getZ(e){let t=f0(this.array[e*this.itemSize+2]);return this.normalized&&(t=Br(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+2]=na(t),this}getW(e){let t=f0(this.array[e*this.itemSize+3]);return this.normalized&&(t=Br(t,this.array)),t}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+3]=na(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),n=sn(n,this.array)),this.array[e+0]=na(t),this.array[e+1]=na(n),this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),n=sn(n,this.array),s=sn(s,this.array)),this.array[e+0]=na(t),this.array[e+1]=na(n),this.array[e+2]=na(s),this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),n=sn(n,this.array),s=sn(s,this.array),r=sn(r,this.array)),this.array[e+0]=na(t),this.array[e+1]=na(n),this.array[e+2]=na(s),this.array[e+3]=na(r),this}}class St extends Fn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let yV=0;const to=new Gt,ZS=new Rn,mp=new K,wa=new hr,$g=new hr,Os=new K;class rn extends Yl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:yV++}),this.uuid=Da(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(MO(e)?UM:LM)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new ln().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return to.makeRotationFromQuaternion(e),this.applyMatrix4(to),this}rotateX(e){return to.makeRotationX(e),this.applyMatrix4(to),this}rotateY(e){return to.makeRotationY(e),this.applyMatrix4(to),this}rotateZ(e){return to.makeRotationZ(e),this.applyMatrix4(to),this}translate(e,t,n){return to.makeTranslation(e,t,n),this.applyMatrix4(to),this}scale(e,t,n){return to.makeScale(e,t,n),this.applyMatrix4(to),this}lookAt(e){return ZS.lookAt(e),ZS.updateMatrix(),this.applyMatrix4(ZS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(mp).negate(),this.translate(mp.x,mp.y,mp.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new St(n,3))}else{const n=Math.min(e.length,t.count);for(let s=0;s<n;s++){const r=e[s];t.setXYZ(s,r.x,r.y,r.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new hr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const r=t[n];wa.setFromBufferAttribute(r),this.morphTargetsRelative?(Os.addVectors(this.boundingBox.min,wa.min),this.boundingBox.expandByPoint(Os),Os.addVectors(this.boundingBox.max,wa.max),this.boundingBox.expandByPoint(Os)):(this.boundingBox.expandByPoint(wa.min),this.boundingBox.expandByPoint(wa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Xs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(e){const n=this.boundingSphere.center;if(wa.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const c=t[r];$g.setFromBufferAttribute(c),this.morphTargetsRelative?(Os.addVectors(wa.min,$g.min),wa.expandByPoint(Os),Os.addVectors(wa.max,$g.max),wa.expandByPoint(Os)):(wa.expandByPoint($g.min),wa.expandByPoint($g.max))}wa.getCenter(n);let s=0;for(let r=0,o=e.count;r<o;r++)Os.fromBufferAttribute(e,r),s=Math.max(s,n.distanceToSquared(Os));if(t)for(let r=0,o=t.length;r<o;r++){const c=t[r],f=this.morphTargetsRelative;for(let d=0,m=c.count;d<m;d++)Os.fromBufferAttribute(c,d),f&&(mp.fromBufferAttribute(e,d),Os.add(mp)),s=Math.max(s,n.distanceToSquared(Os))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Fn(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),c=[],f=[];for(let G=0;G<n.count;G++)c[G]=new K,f[G]=new K;const d=new K,m=new K,g=new K,v=new Xe,_=new Xe,b=new Xe,A=new K,M=new K;function T(G,B,U){d.fromBufferAttribute(n,G),m.fromBufferAttribute(n,B),g.fromBufferAttribute(n,U),v.fromBufferAttribute(r,G),_.fromBufferAttribute(r,B),b.fromBufferAttribute(r,U),m.sub(d),g.sub(d),_.sub(v),b.sub(v);const j=1/(_.x*b.y-b.x*_.y);isFinite(j)&&(A.copy(m).multiplyScalar(b.y).addScaledVector(g,-_.y).multiplyScalar(j),M.copy(g).multiplyScalar(_.x).addScaledVector(m,-b.x).multiplyScalar(j),c[G].add(A),c[B].add(A),c[U].add(A),f[G].add(M),f[B].add(M),f[U].add(M))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let G=0,B=C.length;G<B;++G){const U=C[G],j=U.start,ae=U.count;for(let ne=j,de=j+ae;ne<de;ne+=3)T(e.getX(ne+0),e.getX(ne+1),e.getX(ne+2))}const D=new K,N=new K,I=new K,L=new K;function P(G){I.fromBufferAttribute(s,G),L.copy(I);const B=c[G];D.copy(B),D.sub(I.multiplyScalar(I.dot(B))).normalize(),N.crossVectors(L,B);const j=N.dot(f[G])<0?-1:1;o.setXYZW(G,D.x,D.y,D.z,j)}for(let G=0,B=C.length;G<B;++G){const U=C[G],j=U.start,ae=U.count;for(let ne=j,de=j+ae;ne<de;ne+=3)P(e.getX(ne+0)),P(e.getX(ne+1)),P(e.getX(ne+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Fn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let v=0,_=n.count;v<_;v++)n.setXYZ(v,0,0,0);const s=new K,r=new K,o=new K,c=new K,f=new K,d=new K,m=new K,g=new K;if(e)for(let v=0,_=e.count;v<_;v+=3){const b=e.getX(v+0),A=e.getX(v+1),M=e.getX(v+2);s.fromBufferAttribute(t,b),r.fromBufferAttribute(t,A),o.fromBufferAttribute(t,M),m.subVectors(o,r),g.subVectors(s,r),m.cross(g),c.fromBufferAttribute(n,b),f.fromBufferAttribute(n,A),d.fromBufferAttribute(n,M),c.add(m),f.add(m),d.add(m),n.setXYZ(b,c.x,c.y,c.z),n.setXYZ(A,f.x,f.y,f.z),n.setXYZ(M,d.x,d.y,d.z)}else for(let v=0,_=t.count;v<_;v+=3)s.fromBufferAttribute(t,v+0),r.fromBufferAttribute(t,v+1),o.fromBufferAttribute(t,v+2),m.subVectors(o,r),g.subVectors(s,r),m.cross(g),n.setXYZ(v+0,m.x,m.y,m.z),n.setXYZ(v+1,m.x,m.y,m.z),n.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Os.fromBufferAttribute(e,t),Os.normalize(),e.setXYZ(t,Os.x,Os.y,Os.z)}toNonIndexed(){function e(c,f){const d=c.array,m=c.itemSize,g=c.normalized,v=new d.constructor(f.length*m);let _=0,b=0;for(let A=0,M=f.length;A<M;A++){c.isInterleavedBufferAttribute?_=f[A]*c.data.stride+c.offset:_=f[A]*m;for(let T=0;T<m;T++)v[b++]=d[_++]}return new Fn(v,m,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new rn,n=this.index.array,s=this.attributes;for(const c in s){const f=s[c],d=e(f,n);t.setAttribute(c,d)}const r=this.morphAttributes;for(const c in r){const f=[],d=r[c];for(let m=0,g=d.length;m<g;m++){const v=d[m],_=e(v,n);f.push(_)}t.morphAttributes[c]=f}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let c=0,f=o.length;c<f;c++){const d=o[c];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const d in f)f[d]!==void 0&&(e[d]=f[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const f in n){const d=n[f];e.data.attributes[f]=d.toJSON(e.data)}const s={};let r=!1;for(const f in this.morphAttributes){const d=this.morphAttributes[f],m=[];for(let g=0,v=d.length;g<v;g++){const _=d[g];m.push(_.toJSON(e.data))}m.length>0&&(s[f]=m,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const s=e.attributes;for(const d in s){const m=s[d];this.setAttribute(d,m.clone(t))}const r=e.morphAttributes;for(const d in r){const m=[],g=r[d];for(let v=0,_=g.length;v<_;v++)m.push(g[v].clone(t));this.morphAttributes[d]=m}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,m=o.length;d<m;d++){const g=o[d];this.addGroup(g.start,g.count,g.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const TR=new Gt,ph=new mm,cx=new Xs,MR=new K,ux=new K,fx=new K,hx=new K,KS=new K,dx=new K,AR=new K,px=new K;class Yi extends Rn{constructor(e=new rn,t=new Na){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const c=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}getVertexPosition(e,t){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(s,e);const c=this.morphTargetInfluences;if(r&&c){dx.set(0,0,0);for(let f=0,d=r.length;f<d;f++){const m=c[f],g=r[f];m!==0&&(KS.fromBufferAttribute(g,e),o?dx.addScaledVector(KS,m):dx.addScaledVector(KS.sub(t),m))}t.add(dx)}return t}raycast(e,t){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),cx.copy(n.boundingSphere),cx.applyMatrix4(r),ph.copy(e.ray).recast(e.near),!(cx.containsPoint(ph.origin)===!1&&(ph.intersectSphere(cx,MR)===null||ph.origin.distanceToSquared(MR)>(e.far-e.near)**2))&&(TR.copy(r).invert(),ph.copy(e.ray).applyMatrix4(TR),!(n.boundingBox!==null&&ph.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,ph)))}_computeIntersections(e,t,n){let s;const r=this.geometry,o=this.material,c=r.index,f=r.attributes.position,d=r.attributes.uv,m=r.attributes.uv1,g=r.attributes.normal,v=r.groups,_=r.drawRange;if(c!==null)if(Array.isArray(o))for(let b=0,A=v.length;b<A;b++){const M=v[b],T=o[M.materialIndex],C=Math.max(M.start,_.start),D=Math.min(c.count,Math.min(M.start+M.count,_.start+_.count));for(let N=C,I=D;N<I;N+=3){const L=c.getX(N),P=c.getX(N+1),G=c.getX(N+2);s=mx(this,T,e,n,d,m,g,L,P,G),s&&(s.faceIndex=Math.floor(N/3),s.face.materialIndex=M.materialIndex,t.push(s))}}else{const b=Math.max(0,_.start),A=Math.min(c.count,_.start+_.count);for(let M=b,T=A;M<T;M+=3){const C=c.getX(M),D=c.getX(M+1),N=c.getX(M+2);s=mx(this,o,e,n,d,m,g,C,D,N),s&&(s.faceIndex=Math.floor(M/3),t.push(s))}}else if(f!==void 0)if(Array.isArray(o))for(let b=0,A=v.length;b<A;b++){const M=v[b],T=o[M.materialIndex],C=Math.max(M.start,_.start),D=Math.min(f.count,Math.min(M.start+M.count,_.start+_.count));for(let N=C,I=D;N<I;N+=3){const L=N,P=N+1,G=N+2;s=mx(this,T,e,n,d,m,g,L,P,G),s&&(s.faceIndex=Math.floor(N/3),s.face.materialIndex=M.materialIndex,t.push(s))}}else{const b=Math.max(0,_.start),A=Math.min(f.count,_.start+_.count);for(let M=b,T=A;M<T;M+=3){const C=M,D=M+1,N=M+2;s=mx(this,o,e,n,d,m,g,C,D,N),s&&(s.faceIndex=Math.floor(M/3),t.push(s))}}}}function vV(i,e,t,n,s,r,o,c){let f;if(e.side===Hr?f=n.intersectTriangle(o,r,s,!0,c):f=n.intersectTriangle(s,r,o,e.side===Xl,c),f===null)return null;px.copy(c),px.applyMatrix4(i.matrixWorld);const d=t.ray.origin.distanceTo(px);return d<t.near||d>t.far?null:{distance:d,point:px.clone(),object:i}}function mx(i,e,t,n,s,r,o,c,f,d){i.getVertexPosition(c,ux),i.getVertexPosition(f,fx),i.getVertexPosition(d,hx);const m=vV(i,e,t,n,ux,fx,hx,AR);if(m){const g=new K;sa.getBarycoord(AR,ux,fx,hx,g),s&&(m.uv=sa.getInterpolatedAttribute(s,c,f,d,g,new Xe)),r&&(m.uv1=sa.getInterpolatedAttribute(r,c,f,d,g,new Xe)),o&&(m.normal=sa.getInterpolatedAttribute(o,c,f,d,g,new K),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const v={a:c,b:f,c:d,normal:new K,materialIndex:0};sa.getNormal(ux,fx,hx,v.normal),m.face=v,m.barycoord=g}return m}class Jh extends rn{constructor(e=1,t=1,n=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:r,depthSegments:o};const c=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const f=[],d=[],m=[],g=[];let v=0,_=0;b("z","y","x",-1,-1,n,t,e,o,r,0),b("z","y","x",1,-1,n,t,-e,o,r,1),b("x","z","y",1,1,e,n,t,s,o,2),b("x","z","y",1,-1,e,n,-t,s,o,3),b("x","y","z",1,-1,e,t,n,s,r,4),b("x","y","z",-1,-1,e,t,-n,s,r,5),this.setIndex(f),this.setAttribute("position",new St(d,3)),this.setAttribute("normal",new St(m,3)),this.setAttribute("uv",new St(g,2));function b(A,M,T,C,D,N,I,L,P,G,B){const U=N/P,j=I/G,ae=N/2,ne=I/2,de=L/2,he=P+1,F=G+1;let W=0,Z=0;const fe=new K;for(let X=0;X<F;X++){const ie=X*j-ne;for(let Ee=0;Ee<he;Ee++){const Ue=Ee*U-ae;fe[A]=Ue*C,fe[M]=ie*D,fe[T]=de,d.push(fe.x,fe.y,fe.z),fe[A]=0,fe[M]=0,fe[T]=L>0?1:-1,m.push(fe.x,fe.y,fe.z),g.push(Ee/P),g.push(1-X/G),W+=1}}for(let X=0;X<G;X++)for(let ie=0;ie<P;ie++){const Ee=v+ie+he*X,Ue=v+ie+he*(X+1),re=v+(ie+1)+he*(X+1),Ce=v+(ie+1)+he*X;f.push(Ee,Ue,Ce),f.push(Ue,re,Ce),Z+=6}c.addGroup(_,Z,B),_+=Z,v+=W}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Qp(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const s=i[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function zr(i){const e={};for(let t=0;t<i.length;t++){const n=Qp(i[t]);for(const s in n)e[s]=n[s]}return e}function xV(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function OO(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:vn.workingColorSpace}const LO={clone:Qp,merge:zr};var _V=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,bV=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class La extends Es{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=_V,this.fragmentShader=bV,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Qp(e.uniforms),this.uniformsGroups=xV(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class G1 extends Rn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Gt,this.projectionMatrix=new Gt,this.projectionMatrixInverse=new Gt,this.coordinateSystem=jo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Zu=new K,wR=new Xe,RR=new Xe;class _s extends G1{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Zp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Hh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Zp*2*Math.atan(Math.tan(Hh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Zu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Zu.x,Zu.y).multiplyScalar(-e/Zu.z),Zu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Zu.x,Zu.y).multiplyScalar(-e/Zu.z)}getViewSize(e,t){return this.getViewBounds(e,wR,RR),t.subVectors(RR,wR)}setViewOffset(e,t,n,s,r,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Hh*.5*this.fov)/this.zoom,n=2*t,s=this.aspect*n,r=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const f=o.fullWidth,d=o.fullHeight;r+=o.offsetX*s/f,t-=o.offsetY*n/d,s*=o.width/f,n*=o.height/d}const c=this.filmOffset;c!==0&&(r+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const gp=-90,yp=1;class UO extends Rn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new _s(gp,yp,e,t);s.layers=this.layers,this.add(s);const r=new _s(gp,yp,e,t);r.layers=this.layers,this.add(r);const o=new _s(gp,yp,e,t);o.layers=this.layers,this.add(o);const c=new _s(gp,yp,e,t);c.layers=this.layers,this.add(c);const f=new _s(gp,yp,e,t);f.layers=this.layers,this.add(f);const d=new _s(gp,yp,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,s,r,o,c,f]=t;for(const d of t)this.remove(d);if(e===jo)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===F0)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,c,f,d,m]=this.children,g=e.getRenderTarget(),v=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const A=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,s),e.render(t,r),e.setRenderTarget(n,1,s),e.render(t,o),e.setRenderTarget(n,2,s),e.render(t,c),e.setRenderTarget(n,3,s),e.render(t,f),e.setRenderTarget(n,4,s),e.render(t,d),n.texture.generateMipmaps=A,e.setRenderTarget(n,5,s),e.render(t,m),e.setRenderTarget(g,v,_),e.xr.enabled=b,n.texture.needsPMREMUpdate=!0}}class sy extends Fi{constructor(e=[],t=Xc,n,s,r,o,c,f,d,m){super(e,t,n,s,r,o,c,f,d,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class zO extends ql{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];this.texture=new sy(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Bi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Jh(5,5,5),r=new La({name:"CubemapFromEquirect",uniforms:Qp(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Hr,blending:Fc});r.uniforms.tEquirect.value=t;const o=new Yi(s,r),c=t.minFilter;return t.minFilter===ro&&(t.minFilter=Bi),new UO(1,10,this).update(e,o),t.minFilter=c,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,n=!0,s=!0){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,s);e.setRenderTarget(r)}}class Uc extends Rn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const SV={type:"move"};class r_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Uc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Uc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Uc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let s=null,r=null,o=null;const c=this._targetRay,f=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){o=!0;for(const A of e.hand.values()){const M=t.getJointPose(A,n),T=this._getHandJoint(d,A);M!==null&&(T.matrix.fromArray(M.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,T.jointRadius=M.radius),T.visible=M!==null}const m=d.joints["index-finger-tip"],g=d.joints["thumb-tip"],v=m.position.distanceTo(g.position),_=.02,b=.005;d.inputState.pinching&&v>_+b?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&v<=_-b&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(f.matrix.fromArray(r.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,r.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(r.linearVelocity)):f.hasLinearVelocity=!1,r.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(r.angularVelocity)):f.hasAngularVelocity=!1));c!==null&&(s=t.getPose(e.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(SV)))}return c!==null&&(c.visible=s!==null),f!==null&&(f.visible=r!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Uc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class k1{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new lt(e),this.density=t}clone(){return new k1(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class $1{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new lt(e),this.near=t,this.far=n}clone(){return new $1(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let zM=class extends Rn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Zo,this.environmentIntensity=1,this.environmentRotation=new Zo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},ry=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=B0,this.updateRanges=[],this.version=0,this.uuid=Da()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[n+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Da()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Da()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}};const Lr=new K;let Jp=class PO{constructor(e,t,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Lr.fromBufferAttribute(this,t),Lr.applyMatrix4(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Lr.fromBufferAttribute(this,t),Lr.applyNormalMatrix(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Lr.fromBufferAttribute(this,t),Lr.transformDirection(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Br(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=sn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Br(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Br(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Br(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Br(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),n=sn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),n=sn(n,this.array),s=sn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),n=sn(n,this.array),s=sn(s,this.array),r=sn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new Fn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new PO(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};class PM extends Es{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new lt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let vp;const Xg=new K,xp=new K,_p=new K,bp=new Xe,qg=new Xe,IO=new Gt,gx=new K,jg=new K,yx=new K,CR=new Xe,QS=new Xe,NR=new Xe;class BO extends Rn{constructor(e=new PM){if(super(),this.isSprite=!0,this.type="Sprite",vp===void 0){vp=new rn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new ry(t,5);vp.setIndex([0,1,2,0,2,3]),vp.setAttribute("position",new Jp(n,3,0,!1)),vp.setAttribute("uv",new Jp(n,2,3,!1))}this.geometry=vp,this.material=e,this.center=new Xe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xp.setFromMatrixScale(this.matrixWorld),IO.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_p.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&xp.multiplyScalar(-_p.z);const n=this.material.rotation;let s,r;n!==0&&(r=Math.cos(n),s=Math.sin(n));const o=this.center;vx(gx.set(-.5,-.5,0),_p,o,xp,s,r),vx(jg.set(.5,-.5,0),_p,o,xp,s,r),vx(yx.set(.5,.5,0),_p,o,xp,s,r),CR.set(0,0),QS.set(1,0),NR.set(1,1);let c=e.ray.intersectTriangle(gx,jg,yx,!1,Xg);if(c===null&&(vx(jg.set(-.5,.5,0),_p,o,xp,s,r),QS.set(0,1),c=e.ray.intersectTriangle(gx,yx,jg,!1,Xg),c===null))return;const f=e.ray.origin.distanceTo(Xg);f<e.near||f>e.far||t.push({distance:f,point:Xg.clone(),uv:sa.getInterpolation(Xg,gx,jg,yx,CR,QS,NR,new Xe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function vx(i,e,t,n,s,r){bp.subVectors(i,t).addScalar(.5).multiply(n),s!==void 0?(qg.x=r*bp.x-s*bp.y,qg.y=s*bp.x+r*bp.y):qg.copy(bp),i.copy(e),i.x+=qg.x,i.y+=qg.y,i.applyMatrix4(IO)}const xx=new K,DR=new K;class FO extends Rn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,s=t.length;n<s;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const s=this.levels;let r;for(r=0;r<s.length&&!(t<s[r].distance);r++);return s.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const s=t.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,s;for(n=1,s=t.length;n<s;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){xx.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(xx);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){xx.setFromMatrixPosition(e.matrixWorld),DR.setFromMatrixPosition(this.matrixWorld);const n=xx.distanceTo(DR)/e.zoom;t[0].object.visible=!0;let s,r;for(s=1,r=t.length;s<r;s++){let o=t[s].distance;if(t[s].object.visible&&(o-=o*t[s].hysteresis),n>=o)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let s=0,r=n.length;s<r;s++){const o=n[s];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const OR=new K,LR=new Bn,UR=new Bn,EV=new K,zR=new Gt,_x=new K,JS=new Xs,PR=new Gt,eE=new mm;class IM extends Yi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=RT,this.bindMatrix=new Gt,this.bindMatrixInverse=new Gt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new hr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,_x),this.boundingBox.expandByPoint(_x)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Xs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,_x),this.boundingSphere.expandByPoint(_x)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),JS.copy(this.boundingSphere),JS.applyMatrix4(s),e.ray.intersectsSphere(JS)!==!1&&(PR.copy(s).invert(),eE.copy(e.ray).applyMatrix4(PR),!(this.boundingBox!==null&&eE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,eE)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Bn,t=this.geometry.attributes.skinWeight;for(let n=0,s=t.count;n<s;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===RT?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===oO?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,s=this.geometry;LR.fromBufferAttribute(s.attributes.skinIndex,e),UR.fromBufferAttribute(s.attributes.skinWeight,e),OR.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const o=UR.getComponent(r);if(o!==0){const c=LR.getComponent(r);zR.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(EV.copy(OR).applyMatrix4(zR),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class X1 extends Rn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Hl extends Fi{constructor(e=null,t=1,n=1,s,r,o,c,f,d=Ss,m=Ss,g,v){super(null,o,c,f,d,m,s,r,g,v),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const IR=new Gt,TV=new Gt;class ay{constructor(e=[],t=[]){this.uuid=Da(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new Gt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Gt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const c=e[r]?e[r].matrixWorld:TV;IR.multiplyMatrices(c,t[r]),IR.toArray(n,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new ay(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Hl(t,e,e,ur,aa);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,s=e.bones.length;n<s;n++){const r=e.bones[n];let o=t[r];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new X1),this.bones.push(o),this.boneInverses.push(new Gt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const o=t[s];e.bones.push(o.uuid);const c=n[s];e.boneInverses.push(c.toArray())}return e}}class Xh extends Fn{constructor(e,t,n,s=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Sp=new Gt,BR=new Gt,bx=[],FR=new hr,MV=new Gt,Yg=new Yi,Wg=new Xs;class BM extends Yi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Xh(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,MV)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new hr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Sp),FR.copy(e.boundingBox).applyMatrix4(Sp),this.boundingBox.union(FR)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Xs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Sp),Wg.copy(e.boundingSphere).applyMatrix4(Sp),this.boundingSphere.union(Wg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,s=this.morphTexture.source.data.data,r=n.length+1,o=e*r+1;for(let c=0;c<n.length;c++)n[c]=s[o+c]}raycast(e,t){const n=this.matrixWorld,s=this.count;if(Yg.geometry=this.geometry,Yg.material=this.material,Yg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Wg.copy(this.boundingSphere),Wg.applyMatrix4(n),e.ray.intersectsSphere(Wg)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Sp),BR.multiplyMatrices(n,Sp),Yg.matrixWorld=BR,Yg.raycast(e,bx);for(let o=0,c=bx.length;o<c;o++){const f=bx[o];f.instanceId=r,f.object=this,t.push(f)}bx.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Xh(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new Hl(new Float32Array(s*this.count),s,this.count,P1,aa));const r=this.morphTexture.source.data.data;let o=0;for(let d=0;d<n.length;d++)o+=n[d];const c=this.geometry.morphTargetsRelative?1:1-o,f=s*e;r[f]=c,r.set(n,f+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const tE=new K,AV=new K,wV=new ln;let rf=class{constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=tE.subVectors(n,t).cross(AV.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(tE),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||wV.getNormalMatrix(e),s=this.coplanarPoint(tE).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const mh=new Xs,Sx=new K;class oy{constructor(e=new rf,t=new rf,n=new rf,s=new rf,r=new rf,o=new rf){this.planes=[e,t,n,s,r,o]}set(e,t,n,s,r,o){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(s),c[4].copy(r),c[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=jo){const n=this.planes,s=e.elements,r=s[0],o=s[1],c=s[2],f=s[3],d=s[4],m=s[5],g=s[6],v=s[7],_=s[8],b=s[9],A=s[10],M=s[11],T=s[12],C=s[13],D=s[14],N=s[15];if(n[0].setComponents(f-r,v-d,M-_,N-T).normalize(),n[1].setComponents(f+r,v+d,M+_,N+T).normalize(),n[2].setComponents(f+o,v+m,M+b,N+C).normalize(),n[3].setComponents(f-o,v-m,M-b,N-C).normalize(),n[4].setComponents(f-c,v-g,M-A,N-D).normalize(),t===jo)n[5].setComponents(f+c,v+g,M+A,N+D).normalize();else if(t===F0)n[5].setComponents(c,g,A,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),mh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),mh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(mh)}intersectsSprite(e){return mh.center.set(0,0,0),mh.radius=.7071067811865476,mh.applyMatrix4(e.matrixWorld),this.intersectsSphere(mh)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(Sx.x=s.normal.x>0?e.max.x:e.min.x,Sx.y=s.normal.y>0?e.max.y:e.min.y,Sx.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Sx)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function nE(i,e){return i-e}function RV(i,e){return i.z-e.z}function CV(i,e){return e.z-i.z}class NV{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,s){const r=this.pool,o=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const c=r[this.index];o.push(c),this.index++,c.start=e,c.count=t,c.z=n,c.index=s}reset(){this.list.length=0,this.index=0}}const ta=new Gt,DV=new lt(1,1,1),iE=new oy,Ex=new hr,gh=new Xs,Zg=new K,HR=new K,OV=new K,sE=new NV,ar=new Yi,Tx=[];function LV(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const s=i.count;for(let r=0;r<s;r++)for(let o=0;o<n;o++)e.setComponent(r+t,o,i.getComponent(r,o))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function yh(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class HO extends Yi{constructor(e,t,n=t*2,s){super(new rn,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Hl(t,e,e,ur,aa);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Hl(t,e,e,ny,qc);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Hl(t,e,e,ur,aa);n.colorSpace=vn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const o=e.getAttribute(r),{array:c,itemSize:f,normalized:d}=o,m=new c.constructor(n*f),g=new Fn(m,f,d);t.setAttribute(r,g)}if(e.getIndex()!==null){const r=n>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Fn(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=e.getAttribute(n),r=t.getAttribute(n);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new hr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,ta),this.getBoundingBoxAt(r,Ex).applyMatrix4(ta),e.union(Ex)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Xs);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,ta),this.getBoundingSphereAt(r,gh).applyMatrix4(ta),e.union(gh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(nE),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;ta.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const o=this._colorsTexture;return o&&(DV.toArray(o.image.data,s*4),o.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?o.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let f;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(nE),f=this._availableGeometryIds.shift(),r[f]=s):(f=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(f,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,f}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,s=n.getIndex()!==null,r=n.getIndex(),o=t.getIndex(),c=this._geometryInfo[e];if(s&&o.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const f=c.vertexStart,d=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const m in n.attributes){const g=t.getAttribute(m),v=n.getAttribute(m);LV(g,v,f);const _=g.itemSize;for(let b=g.count,A=d;b<A;b++){const M=f+b;for(let T=0;T<_;T++)v.setComponent(M,T,0)}v.needsUpdate=!0,v.addUpdateRange(f*_,d*_)}if(s){const m=c.indexStart,g=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let v=0;v<o.count;v++)r.setX(m+v,f+o.getX(v));for(let v=o.count,_=g;v<_;v++)r.setX(m+v,f);r.needsUpdate=!0,r.addUpdateRange(m,c.reservedIndexCount)}return c.start=s?c.indexStart:c.vertexStart,c.count=s?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let s=0,r=n.length;s<r;s++)n[s].active&&n[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,s=n.map((o,c)=>c).sort((o,c)=>n[o].vertexStart-n[c].vertexStart),r=this.geometry;for(let o=0,c=n.length;o<c;o++){const f=s[o],d=n[f];if(d.active!==!1){if(r.index!==null){if(d.indexStart!==t){const{indexStart:m,vertexStart:g,reservedIndexCount:v}=d,_=r.index,b=_.array,A=e-g;for(let M=m;M<m+v;M++)b[M]=b[M]+A;_.array.copyWithin(t,m,m+v),_.addUpdateRange(t,v),d.indexStart=t}t+=d.reservedIndexCount}if(d.vertexStart!==e){const{vertexStart:m,reservedVertexCount:g}=d,v=r.attributes;for(const _ in v){const b=v[_],{array:A,itemSize:M}=b;A.copyWithin(e*M,m*M,(m+g)*M),b.addUpdateRange(e*M,g*M)}d.vertexStart=e}e+=d.reservedVertexCount,d.start=r.index?d.indexStart:d.vertexStart,this._nextIndexStart=r.index?d.indexStart+d.reservedIndexCount:0,this._nextVertexStart=d.vertexStart+d.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const r=new hr,o=n.index,c=n.attributes.position;for(let f=s.start,d=s.start+s.count;f<d;f++){let m=f;o&&(m=o.getX(m)),r.expandByPoint(Zg.fromBufferAttribute(c,m))}s.boundingBox=r}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const r=new Xs;this.getBoundingBoxAt(e,Ex),Ex.getCenter(r.center);const o=n.index,c=n.attributes.position;let f=0;for(let d=s.start,m=s.start+s.count;d<m;d++){let g=d;o&&(g=o.getX(g)),Zg.fromBufferAttribute(c,g),f=Math.max(f,r.center.distanceToSquared(Zg))}r.radius=Math.sqrt(f),s.boundingSphere=r}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(nE);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),r=new Int32Array(e);yh(this._multiDrawCounts,s),yh(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=e;const o=this._indirectTexture,c=this._matricesTexture,f=this._colorsTexture;o.dispose(),this._initIndirectTexture(),yh(o.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),yh(c.image.data,this._matricesTexture.image.data),f&&(f.dispose(),this._initColorsTexture(),yh(f.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...n.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(f=>f.indexStart+f.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new rn,this._initializeGeometry(r));const o=this.geometry;r.index&&yh(r.index.array,o.index.array);for(const c in r.attributes)yh(r.attributes[c].array,o.attributes[c].array)}raycast(e,t){const n=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,o=this.geometry;ar.material=this.material,ar.geometry.index=o.index,ar.geometry.attributes=o.attributes,ar.geometry.boundingBox===null&&(ar.geometry.boundingBox=new hr),ar.geometry.boundingSphere===null&&(ar.geometry.boundingSphere=new Xs);for(let c=0,f=n.length;c<f;c++){if(!n[c].visible||!n[c].active)continue;const d=n[c].geometryIndex,m=s[d];ar.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(c,ar.matrixWorld).premultiply(r),this.getBoundingBoxAt(d,ar.geometry.boundingBox),this.getBoundingSphereAt(d,ar.geometry.boundingSphere),ar.raycast(e,Tx);for(let g=0,v=Tx.length;g<v;g++){const _=Tx[g];_.object=this,_.batchId=c,t.push(_)}Tx.length=0}ar.material=null,ar.geometry.index=null,ar.geometry.attributes={},ar.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=s.getIndex(),c=o===null?1:o.array.BYTES_PER_ELEMENT,f=this._instanceInfo,d=this._multiDrawStarts,m=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,_=this._indirectTexture,b=_.image.data;v&&(ta.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),iE.setFromProjectionMatrix(ta,e.coordinateSystem));let A=0;if(this.sortObjects){ta.copy(this.matrixWorld).invert(),Zg.setFromMatrixPosition(n.matrixWorld).applyMatrix4(ta),HR.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(ta);for(let C=0,D=f.length;C<D;C++)if(f[C].visible&&f[C].active){const N=f[C].geometryIndex;this.getMatrixAt(C,ta),this.getBoundingSphereAt(N,gh).applyMatrix4(ta);let I=!1;if(v&&(I=!iE.intersectsSphere(gh)),!I){const L=g[N],P=OV.subVectors(gh.center,Zg).dot(HR);sE.push(L.start,L.count,P,C)}}const M=sE.list,T=this.customSort;T===null?M.sort(r.transparent?CV:RV):T.call(this,M,n);for(let C=0,D=M.length;C<D;C++){const N=M[C];d[A]=N.start*c,m[A]=N.count,b[A]=N.index,A++}sE.reset()}else for(let M=0,T=f.length;M<T;M++)if(f[M].visible&&f[M].active){const C=f[M].geometryIndex;let D=!1;if(v&&(this.getMatrixAt(M,ta),this.getBoundingSphereAt(C,gh).applyMatrix4(ta),D=!iE.intersectsSphere(gh)),!D){const N=g[C];d[A]=N.start*c,m[A]=N.count,b[A]=M,A++}}_.needsUpdate=!0,this._multiDrawCount=A,this._visibilityChanged=!1}onBeforeShadow(e,t,n,s,r,o){this.onBeforeRender(e,null,s,r,o)}}class mr extends Es{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new lt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const l1=new K,c1=new K,VR=new Gt,Kg=new mm,Mx=new Xs,rE=new K,GR=new K;class jc extends Rn{constructor(e=new rn,t=new mr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let s=1,r=t.count;s<r;s++)l1.fromBufferAttribute(t,s-1),c1.fromBufferAttribute(t,s),n[s]=n[s-1],n[s]+=l1.distanceTo(c1);e.setAttribute("lineDistance",new St(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Mx.copy(n.boundingSphere),Mx.applyMatrix4(s),Mx.radius+=r,e.ray.intersectsSphere(Mx)===!1)return;VR.copy(s).invert(),Kg.copy(e.ray).applyMatrix4(VR);const c=r/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,d=this.isLineSegments?2:1,m=n.index,v=n.attributes.position;if(m!==null){const _=Math.max(0,o.start),b=Math.min(m.count,o.start+o.count);for(let A=_,M=b-1;A<M;A+=d){const T=m.getX(A),C=m.getX(A+1),D=Ax(this,e,Kg,f,T,C,A);D&&t.push(D)}if(this.isLineLoop){const A=m.getX(b-1),M=m.getX(_),T=Ax(this,e,Kg,f,A,M,b-1);T&&t.push(T)}}else{const _=Math.max(0,o.start),b=Math.min(v.count,o.start+o.count);for(let A=_,M=b-1;A<M;A+=d){const T=Ax(this,e,Kg,f,A,A+1,A);T&&t.push(T)}if(this.isLineLoop){const A=Ax(this,e,Kg,f,b-1,_,b-1);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const c=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}}function Ax(i,e,t,n,s,r,o){const c=i.geometry.attributes.position;if(l1.fromBufferAttribute(c,s),c1.fromBufferAttribute(c,r),t.distanceSqToSegment(l1,c1,rE,GR)>n)return;rE.applyMatrix4(i.matrixWorld);const d=e.ray.origin.distanceTo(rE);if(!(d<e.near||d>e.far))return{distance:d,point:GR.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const kR=new K,$R=new K;class Jo extends jc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let s=0,r=t.count;s<r;s+=2)kR.fromBufferAttribute(t,s),$R.fromBufferAttribute(t,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+kR.distanceTo($R);e.setAttribute("lineDistance",new St(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class FM extends jc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class q1 extends Es{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new lt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const XR=new Gt,OT=new mm,wx=new Xs,Rx=new K;class HM extends Rn{constructor(e=new rn,t=new q1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),wx.copy(n.boundingSphere),wx.applyMatrix4(s),wx.radius+=r,e.ray.intersectsSphere(wx)===!1)return;XR.copy(s).invert(),OT.copy(e.ray).applyMatrix4(XR);const c=r/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,d=n.index,g=n.attributes.position;if(d!==null){const v=Math.max(0,o.start),_=Math.min(d.count,o.start+o.count);for(let b=v,A=_;b<A;b++){const M=d.getX(b);Rx.fromBufferAttribute(g,M),qR(Rx,M,f,s,e,t,this)}}else{const v=Math.max(0,o.start),_=Math.min(g.count,o.start+o.count);for(let b=v,A=_;b<A;b++)Rx.fromBufferAttribute(g,b),qR(Rx,b,f,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const c=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}}function qR(i,e,t,n,s,r,o){const c=OT.distanceSqToPoint(i);if(c<t){const f=new K;OT.closestPointToPoint(i,f),f.applyMatrix4(n);const d=s.ray.origin.distanceTo(f);if(d<s.near||d>s.far)return;r.push({distance:d,distanceToRay:Math.sqrt(c),point:f,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class VO extends Fi{constructor(e,t,n,s,r=Bi,o=Bi,c,f,d){super(e,t,n,s,r,o,c,f,d),this.isVideoTexture=!0,this.generateMipmaps=!1;const m=this;function g(){m.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class UV extends VO{constructor(e,t,n,s,r,o,c,f){super({},e,t,n,s,r,o,c,f),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}let zV=class extends Fi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ss,this.minFilter=Ss,this.generateMipmaps=!1,this.needsUpdate=!0}};class j1 extends Fi{constructor(e,t,n,s,r,o,c,f,d,m,g,v){super(null,o,c,f,d,m,s,r,g,v),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class PV extends j1{constructor(e,t,n,s,r,o){super(e,t,n,r,o),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Ca,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class IV extends j1{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Xc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class BV extends Fi{constructor(e,t,n,s,r,o,c,f,d){super(e,t,n,s,r,o,c,f,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}let VM=class extends Fi{constructor(e,t,n=qc,s,r,o,c=Ss,f=Ss,d,m=qp){if(m!==qp&&m!==jp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,s,r,o,c,f,m,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new lf(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};class el{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,s=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(s),t.push(r),s=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let s=0;const r=n.length;let o;t?o=t:o=e*n[r-1];let c=0,f=r-1,d;for(;c<=f;)if(s=Math.floor(c+(f-c)/2),d=n[s]-o,d<0)c=s+1;else if(d>0)f=s-1;else{f=s;break}if(s=f,n[s]===o)return s/(r-1);const m=n[s],v=n[s+1]-m,_=(o-m)/v;return(s+_)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const o=this.getPoint(s),c=this.getPoint(r),f=t||(o.isVector2?new Xe:new K);return f.copy(c).sub(o).normalize(),f}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new K,s=[],r=[],o=[],c=new K,f=new Gt;for(let _=0;_<=e;_++){const b=_/e;s[_]=this.getTangentAt(b,new K)}r[0]=new K,o[0]=new K;let d=Number.MAX_VALUE;const m=Math.abs(s[0].x),g=Math.abs(s[0].y),v=Math.abs(s[0].z);m<=d&&(d=m,n.set(1,0,0)),g<=d&&(d=g,n.set(0,1,0)),v<=d&&n.set(0,0,1),c.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],c),o[0].crossVectors(s[0],r[0]);for(let _=1;_<=e;_++){if(r[_]=r[_-1].clone(),o[_]=o[_-1].clone(),c.crossVectors(s[_-1],s[_]),c.length()>Number.EPSILON){c.normalize();const b=Math.acos(Jt(s[_-1].dot(s[_]),-1,1));r[_].applyMatrix4(f.makeRotationAxis(c,b))}o[_].crossVectors(s[_],r[_])}if(t===!0){let _=Math.acos(Jt(r[0].dot(r[e]),-1,1));_/=e,s[0].dot(c.crossVectors(r[0],r[e]))>0&&(_=-_);for(let b=1;b<=e;b++)r[b].applyMatrix4(f.makeRotationAxis(s[b],_*b)),o[b].crossVectors(s[b],r[b])}return{tangents:s,normals:r,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Y1 extends el{constructor(e=0,t=0,n=1,s=1,r=0,o=Math.PI*2,c=!1,f=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=c,this.aRotation=f}getPoint(e,t=new Xe){const n=t,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(o?r=0:r=s),this.aClockwise===!0&&!o&&(r===s?r=-s:r=r-s);const c=this.aStartAngle+e*r;let f=this.aX+this.xRadius*Math.cos(c),d=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const m=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=f-this.aX,_=d-this.aY;f=v*m-_*g+this.aX,d=v*g+_*m+this.aY}return n.set(f,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class GO extends Y1{constructor(e,t,n,s,r,o){super(e,t,n,n,s,r,o),this.isArcCurve=!0,this.type="ArcCurve"}}function GM(){let i=0,e=0,t=0,n=0;function s(r,o,c,f){i=r,e=c,t=-3*r+3*o-2*c-f,n=2*r-2*o+c+f}return{initCatmullRom:function(r,o,c,f,d){s(o,c,d*(c-r),d*(f-o))},initNonuniformCatmullRom:function(r,o,c,f,d,m,g){let v=(o-r)/d-(c-r)/(d+m)+(c-o)/m,_=(c-o)/m-(f-o)/(m+g)+(f-c)/g;v*=m,_*=m,s(o,c,v,_)},calc:function(r){const o=r*r,c=o*r;return i+e*r+t*o+n*c}}}const Cx=new K,aE=new GM,oE=new GM,lE=new GM;class kO extends el{constructor(e=[],t=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=s}getPoint(e,t=new K){const n=t,s=this.points,r=s.length,o=(r-(this.closed?0:1))*e;let c=Math.floor(o),f=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/r)+1)*r:f===0&&c===r-1&&(c=r-2,f=1);let d,m;this.closed||c>0?d=s[(c-1)%r]:(Cx.subVectors(s[0],s[1]).add(s[0]),d=Cx);const g=s[c%r],v=s[(c+1)%r];if(this.closed||c+2<r?m=s[(c+2)%r]:(Cx.subVectors(s[r-1],s[r-2]).add(s[r-1]),m=Cx),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let b=Math.pow(d.distanceToSquared(g),_),A=Math.pow(g.distanceToSquared(v),_),M=Math.pow(v.distanceToSquared(m),_);A<1e-4&&(A=1),b<1e-4&&(b=A),M<1e-4&&(M=A),aE.initNonuniformCatmullRom(d.x,g.x,v.x,m.x,b,A,M),oE.initNonuniformCatmullRom(d.y,g.y,v.y,m.y,b,A,M),lE.initNonuniformCatmullRom(d.z,g.z,v.z,m.z,b,A,M)}else this.curveType==="catmullrom"&&(aE.initCatmullRom(d.x,g.x,v.x,m.x,this.tension),oE.initCatmullRom(d.y,g.y,v.y,m.y,this.tension),lE.initCatmullRom(d.z,g.z,v.z,m.z,this.tension));return n.set(aE.calc(f),oE.calc(f),lE.calc(f)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new K().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function jR(i,e,t,n,s){const r=(n-e)*.5,o=(s-t)*.5,c=i*i,f=i*c;return(2*t-2*n+r+o)*f+(-3*t+3*n-2*r-o)*c+r*i+t}function FV(i,e){const t=1-i;return t*t*e}function HV(i,e){return 2*(1-i)*i*e}function VV(i,e){return i*i*e}function M0(i,e,t,n){return FV(i,e)+HV(i,t)+VV(i,n)}function GV(i,e){const t=1-i;return t*t*t*e}function kV(i,e){const t=1-i;return 3*t*t*i*e}function $V(i,e){return 3*(1-i)*i*i*e}function XV(i,e){return i*i*i*e}function A0(i,e,t,n,s){return GV(i,e)+kV(i,t)+$V(i,n)+XV(i,s)}class kM extends el{constructor(e=new Xe,t=new Xe,n=new Xe,s=new Xe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new Xe){const n=t,s=this.v0,r=this.v1,o=this.v2,c=this.v3;return n.set(A0(e,s.x,r.x,o.x,c.x),A0(e,s.y,r.y,o.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class $O extends el{constructor(e=new K,t=new K,n=new K,s=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new K){const n=t,s=this.v0,r=this.v1,o=this.v2,c=this.v3;return n.set(A0(e,s.x,r.x,o.x,c.x),A0(e,s.y,r.y,o.y,c.y),A0(e,s.z,r.z,o.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class $M extends el{constructor(e=new Xe,t=new Xe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Xe){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Xe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XO extends el{constructor(e=new K,t=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new K){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new K){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XM extends el{constructor(e=new Xe,t=new Xe,n=new Xe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Xe){const n=t,s=this.v0,r=this.v1,o=this.v2;return n.set(M0(e,s.x,r.x,o.x),M0(e,s.y,r.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qM extends el{constructor(e=new K,t=new K,n=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new K){const n=t,s=this.v0,r=this.v1,o=this.v2;return n.set(M0(e,s.x,r.x,o.x),M0(e,s.y,r.y,o.y),M0(e,s.z,r.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jM extends el{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Xe){const n=t,s=this.points,r=(s.length-1)*e,o=Math.floor(r),c=r-o,f=s[o===0?o:o-1],d=s[o],m=s[o>s.length-2?s.length-1:o+1],g=s[o>s.length-3?s.length-1:o+2];return n.set(jR(c,f.x,d.x,m.x,g.x),jR(c,f.y,d.y,m.y,g.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new Xe().fromArray(s))}return this}}var u1=Object.freeze({__proto__:null,ArcCurve:GO,CatmullRomCurve3:kO,CubicBezierCurve:kM,CubicBezierCurve3:$O,EllipseCurve:Y1,LineCurve:$M,LineCurve3:XO,QuadraticBezierCurve:XM,QuadraticBezierCurve3:qM,SplineCurve:jM});class qO extends el{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new u1[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=n){const o=s[r]-n,c=this.curves[r],f=c.getLength(),d=f===0?0:1-o/f;return c.getPointAt(d,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,s=this.curves.length;n<s;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let s=0,r=this.curves;s<r.length;s++){const o=r[s],c=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,f=o.getPoints(c);for(let d=0;d<f.length;d++){const m=f[d];n&&n.equals(m)||(t.push(m),n=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(new u1[s.type]().fromJSON(s))}return this}}class V0 extends qO{constructor(e){super(),this.type="Path",this.currentPoint=new Xe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new $M(this.currentPoint.clone(),new Xe(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,s){const r=new XM(this.currentPoint.clone(),new Xe(e,t),new Xe(n,s));return this.curves.push(r),this.currentPoint.set(n,s),this}bezierCurveTo(e,t,n,s,r,o){const c=new kM(this.currentPoint.clone(),new Xe(e,t),new Xe(n,s),new Xe(r,o));return this.curves.push(c),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new jM(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,s,r,o){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(e+c,t+f,n,s,r,o),this}absarc(e,t,n,s,r,o){return this.absellipse(e,t,n,n,s,r,o),this}ellipse(e,t,n,s,r,o,c,f){const d=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+d,t+m,n,s,r,o,c,f),this}absellipse(e,t,n,s,r,o,c,f){const d=new Y1(e,t,n,s,r,o,c,f);if(this.curves.length>0){const g=d.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(d);const m=d.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ly extends rn{constructor(e=[new Xe(0,-.5),new Xe(.5,0),new Xe(0,.5)],t=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:s},t=Math.floor(t),s=Jt(s,0,Math.PI*2);const r=[],o=[],c=[],f=[],d=[],m=1/t,g=new K,v=new Xe,_=new K,b=new K,A=new K;let M=0,T=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:M=e[C+1].x-e[C].x,T=e[C+1].y-e[C].y,_.x=T*1,_.y=-M,_.z=T*0,A.copy(_),_.normalize(),f.push(_.x,_.y,_.z);break;case e.length-1:f.push(A.x,A.y,A.z);break;default:M=e[C+1].x-e[C].x,T=e[C+1].y-e[C].y,_.x=T*1,_.y=-M,_.z=T*0,b.copy(_),_.x+=A.x,_.y+=A.y,_.z+=A.z,_.normalize(),f.push(_.x,_.y,_.z),A.copy(b)}for(let C=0;C<=t;C++){const D=n+C*m*s,N=Math.sin(D),I=Math.cos(D);for(let L=0;L<=e.length-1;L++){g.x=e[L].x*N,g.y=e[L].y,g.z=e[L].x*I,o.push(g.x,g.y,g.z),v.x=C/t,v.y=L/(e.length-1),c.push(v.x,v.y);const P=f[3*L+0]*N,G=f[3*L+1],B=f[3*L+0]*I;d.push(P,G,B)}}for(let C=0;C<t;C++)for(let D=0;D<e.length-1;D++){const N=D+C*e.length,I=N,L=N+e.length,P=N+e.length+1,G=N+1;r.push(I,L,G),r.push(P,G,L)}this.setIndex(r),this.setAttribute("position",new St(o,3)),this.setAttribute("uv",new St(c,2)),this.setAttribute("normal",new St(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ly(e.points,e.segments,e.phiStart,e.phiLength)}}class W1 extends ly{constructor(e=1,t=1,n=4,s=8){const r=new V0;r.absarc(0,-t/2,e,Math.PI*1.5,0),r.absarc(0,t/2,e,0,Math.PI*.5),super(r.getPoints(n),s),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:s}}static fromJSON(e){return new W1(e.radius,e.length,e.capSegments,e.radialSegments)}}class Z1 extends rn{constructor(e=1,t=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:s},t=Math.max(3,t);const r=[],o=[],c=[],f=[],d=new K,m=new Xe;o.push(0,0,0),c.push(0,0,1),f.push(.5,.5);for(let g=0,v=3;g<=t;g++,v+=3){const _=n+g/t*s;d.x=e*Math.cos(_),d.y=e*Math.sin(_),o.push(d.x,d.y,d.z),c.push(0,0,1),m.x=(o[v]/e+1)/2,m.y=(o[v+1]/e+1)/2,f.push(m.x,m.y)}for(let g=1;g<=t;g++)r.push(g,g+1,0);this.setIndex(r),this.setAttribute("position",new St(o,3)),this.setAttribute("normal",new St(c,3)),this.setAttribute("uv",new St(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Z1(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class gm extends rn{constructor(e=1,t=1,n=1,s=32,r=1,o=!1,c=0,f=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:s,heightSegments:r,openEnded:o,thetaStart:c,thetaLength:f};const d=this;s=Math.floor(s),r=Math.floor(r);const m=[],g=[],v=[],_=[];let b=0;const A=[],M=n/2;let T=0;C(),o===!1&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(m),this.setAttribute("position",new St(g,3)),this.setAttribute("normal",new St(v,3)),this.setAttribute("uv",new St(_,2));function C(){const N=new K,I=new K;let L=0;const P=(t-e)/n;for(let G=0;G<=r;G++){const B=[],U=G/r,j=U*(t-e)+e;for(let ae=0;ae<=s;ae++){const ne=ae/s,de=ne*f+c,he=Math.sin(de),F=Math.cos(de);I.x=j*he,I.y=-U*n+M,I.z=j*F,g.push(I.x,I.y,I.z),N.set(he,P,F).normalize(),v.push(N.x,N.y,N.z),_.push(ne,1-U),B.push(b++)}A.push(B)}for(let G=0;G<s;G++)for(let B=0;B<r;B++){const U=A[B][G],j=A[B+1][G],ae=A[B+1][G+1],ne=A[B][G+1];(e>0||B!==0)&&(m.push(U,j,ne),L+=3),(t>0||B!==r-1)&&(m.push(j,ae,ne),L+=3)}d.addGroup(T,L,0),T+=L}function D(N){const I=b,L=new Xe,P=new K;let G=0;const B=N===!0?e:t,U=N===!0?1:-1;for(let ae=1;ae<=s;ae++)g.push(0,M*U,0),v.push(0,U,0),_.push(.5,.5),b++;const j=b;for(let ae=0;ae<=s;ae++){const de=ae/s*f+c,he=Math.cos(de),F=Math.sin(de);P.x=B*F,P.y=M*U,P.z=B*he,g.push(P.x,P.y,P.z),v.push(0,U,0),L.x=he*.5+.5,L.y=F*.5*U+.5,_.push(L.x,L.y),b++}for(let ae=0;ae<s;ae++){const ne=I+ae,de=j+ae;N===!0?m.push(de,de+1,ne):m.push(de+1,de,ne),G+=3}d.addGroup(T,G,N===!0?1:2),T+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class K1 extends gm{constructor(e=1,t=1,n=32,s=1,r=!1,o=0,c=Math.PI*2){super(0,e,t,n,s,r,o,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:o,thetaLength:c}}static fromJSON(e){return new K1(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class vf extends rn{constructor(e=[],t=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:s};const r=[],o=[];c(s),d(n),m(),this.setAttribute("position",new St(r,3)),this.setAttribute("normal",new St(r.slice(),3)),this.setAttribute("uv",new St(o,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function c(C){const D=new K,N=new K,I=new K;for(let L=0;L<t.length;L+=3)_(t[L+0],D),_(t[L+1],N),_(t[L+2],I),f(D,N,I,C)}function f(C,D,N,I){const L=I+1,P=[];for(let G=0;G<=L;G++){P[G]=[];const B=C.clone().lerp(N,G/L),U=D.clone().lerp(N,G/L),j=L-G;for(let ae=0;ae<=j;ae++)ae===0&&G===L?P[G][ae]=B:P[G][ae]=B.clone().lerp(U,ae/j)}for(let G=0;G<L;G++)for(let B=0;B<2*(L-G)-1;B++){const U=Math.floor(B/2);B%2===0?(v(P[G][U+1]),v(P[G+1][U]),v(P[G][U])):(v(P[G][U+1]),v(P[G+1][U+1]),v(P[G+1][U]))}}function d(C){const D=new K;for(let N=0;N<r.length;N+=3)D.x=r[N+0],D.y=r[N+1],D.z=r[N+2],D.normalize().multiplyScalar(C),r[N+0]=D.x,r[N+1]=D.y,r[N+2]=D.z}function m(){const C=new K;for(let D=0;D<r.length;D+=3){C.x=r[D+0],C.y=r[D+1],C.z=r[D+2];const N=M(C)/2/Math.PI+.5,I=T(C)/Math.PI+.5;o.push(N,1-I)}b(),g()}function g(){for(let C=0;C<o.length;C+=6){const D=o[C+0],N=o[C+2],I=o[C+4],L=Math.max(D,N,I),P=Math.min(D,N,I);L>.9&&P<.1&&(D<.2&&(o[C+0]+=1),N<.2&&(o[C+2]+=1),I<.2&&(o[C+4]+=1))}}function v(C){r.push(C.x,C.y,C.z)}function _(C,D){const N=C*3;D.x=e[N+0],D.y=e[N+1],D.z=e[N+2]}function b(){const C=new K,D=new K,N=new K,I=new K,L=new Xe,P=new Xe,G=new Xe;for(let B=0,U=0;B<r.length;B+=9,U+=6){C.set(r[B+0],r[B+1],r[B+2]),D.set(r[B+3],r[B+4],r[B+5]),N.set(r[B+6],r[B+7],r[B+8]),L.set(o[U+0],o[U+1]),P.set(o[U+2],o[U+3]),G.set(o[U+4],o[U+5]),I.copy(C).add(D).add(N).divideScalar(3);const j=M(I);A(L,U+0,C,j),A(P,U+2,D,j),A(G,U+4,N,j)}}function A(C,D,N,I){I<0&&C.x===1&&(o[D]=C.x-1),N.x===0&&N.z===0&&(o[D]=I/2/Math.PI+.5)}function M(C){return Math.atan2(C.z,-C.x)}function T(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vf(e.vertices,e.indices,e.radius,e.details)}}class Q1 extends vf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Q1(e.radius,e.detail)}}const Nx=new K,Dx=new K,cE=new K,Ox=new sa;class jO extends rn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),r=Math.cos(Hh*t),o=e.getIndex(),c=e.getAttribute("position"),f=o?o.count:c.count,d=[0,0,0],m=["a","b","c"],g=new Array(3),v={},_=[];for(let b=0;b<f;b+=3){o?(d[0]=o.getX(b),d[1]=o.getX(b+1),d[2]=o.getX(b+2)):(d[0]=b,d[1]=b+1,d[2]=b+2);const{a:A,b:M,c:T}=Ox;if(A.fromBufferAttribute(c,d[0]),M.fromBufferAttribute(c,d[1]),T.fromBufferAttribute(c,d[2]),Ox.getNormal(cE),g[0]=`${Math.round(A.x*s)},${Math.round(A.y*s)},${Math.round(A.z*s)}`,g[1]=`${Math.round(M.x*s)},${Math.round(M.y*s)},${Math.round(M.z*s)}`,g[2]=`${Math.round(T.x*s)},${Math.round(T.y*s)},${Math.round(T.z*s)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let C=0;C<3;C++){const D=(C+1)%3,N=g[C],I=g[D],L=Ox[m[C]],P=Ox[m[D]],G=`${N}_${I}`,B=`${I}_${N}`;B in v&&v[B]?(cE.dot(v[B].normal)<=r&&(_.push(L.x,L.y,L.z),_.push(P.x,P.y,P.z)),v[B]=null):G in v||(v[G]={index0:d[C],index1:d[D],normal:cE.clone()})}}for(const b in v)if(v[b]){const{index0:A,index1:M}=v[b];Nx.fromBufferAttribute(c,A),Dx.fromBufferAttribute(c,M),_.push(Nx.x,Nx.y,Nx.z),_.push(Dx.x,Dx.y,Dx.z)}this.setAttribute("position",new St(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Vh extends V0{constructor(e){super(e),this.uuid=Da(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,s=this.holes.length;n<s;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(new V0().fromJSON(s))}return this}}function qV(i,e,t=2){const n=e&&e.length,s=n?e[0]*t:i.length;let r=YO(i,0,s,t,!0);const o=[];if(!r||r.next===r.prev)return o;let c,f,d;if(n&&(r=KV(i,e,r,t)),i.length>80*t){c=1/0,f=1/0;let m=-1/0,g=-1/0;for(let v=t;v<s;v+=t){const _=i[v],b=i[v+1];_<c&&(c=_),b<f&&(f=b),_>m&&(m=_),b>g&&(g=b)}d=Math.max(m-c,g-f),d=d!==0?32767/d:0}return G0(r,o,t,c,f,d,0),o}function YO(i,e,t,n,s){let r;if(s===lG(i,e,t,n)>0)for(let o=e;o<t;o+=n)r=YR(o/n|0,i[o],i[o+1],r);else for(let o=t-n;o>=e;o-=n)r=YR(o/n|0,i[o],i[o+1],r);return r&&em(r,r.next)&&($0(r),r=r.next),r}function qh(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(em(t,t.next)||Ci(t.prev,t,t.next)===0)){if($0(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function G0(i,e,t,n,s,r,o){if(!i)return;!o&&r&&nG(i,n,s,r);let c=i;for(;i.prev!==i.next;){const f=i.prev,d=i.next;if(r?YV(i,n,s,r):jV(i)){e.push(f.i,i.i,d.i),$0(i),i=d.next,c=d.next;continue}if(i=d,i===c){o?o===1?(i=WV(qh(i),e),G0(i,e,t,n,s,r,2)):o===2&&ZV(i,e,t,n,s,r):G0(qh(i),e,t,n,s,r,1);break}}}function jV(i){const e=i.prev,t=i,n=i.next;if(Ci(e,t,n)>=0)return!1;const s=e.x,r=t.x,o=n.x,c=e.y,f=t.y,d=n.y,m=Math.min(s,r,o),g=Math.min(c,f,d),v=Math.max(s,r,o),_=Math.max(c,f,d);let b=n.next;for(;b!==e;){if(b.x>=m&&b.x<=v&&b.y>=g&&b.y<=_&&h0(s,c,r,f,o,d,b.x,b.y)&&Ci(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function YV(i,e,t,n){const s=i.prev,r=i,o=i.next;if(Ci(s,r,o)>=0)return!1;const c=s.x,f=r.x,d=o.x,m=s.y,g=r.y,v=o.y,_=Math.min(c,f,d),b=Math.min(m,g,v),A=Math.max(c,f,d),M=Math.max(m,g,v),T=LT(_,b,e,t,n),C=LT(A,M,e,t,n);let D=i.prevZ,N=i.nextZ;for(;D&&D.z>=T&&N&&N.z<=C;){if(D.x>=_&&D.x<=A&&D.y>=b&&D.y<=M&&D!==s&&D!==o&&h0(c,m,f,g,d,v,D.x,D.y)&&Ci(D.prev,D,D.next)>=0||(D=D.prevZ,N.x>=_&&N.x<=A&&N.y>=b&&N.y<=M&&N!==s&&N!==o&&h0(c,m,f,g,d,v,N.x,N.y)&&Ci(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;D&&D.z>=T;){if(D.x>=_&&D.x<=A&&D.y>=b&&D.y<=M&&D!==s&&D!==o&&h0(c,m,f,g,d,v,D.x,D.y)&&Ci(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;N&&N.z<=C;){if(N.x>=_&&N.x<=A&&N.y>=b&&N.y<=M&&N!==s&&N!==o&&h0(c,m,f,g,d,v,N.x,N.y)&&Ci(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function WV(i,e){let t=i;do{const n=t.prev,s=t.next.next;!em(n,s)&&ZO(n,t,t.next,s)&&k0(n,s)&&k0(s,n)&&(e.push(n.i,t.i,s.i),$0(t),$0(t.next),t=i=s),t=t.next}while(t!==i);return qh(t)}function ZV(i,e,t,n,s,r){let o=i;do{let c=o.next.next;for(;c!==o.prev;){if(o.i!==c.i&&rG(o,c)){let f=KO(o,c);o=qh(o,o.next),f=qh(f,f.next),G0(o,e,t,n,s,r,0),G0(f,e,t,n,s,r,0);return}c=c.next}o=o.next}while(o!==i)}function KV(i,e,t,n){const s=[];for(let r=0,o=e.length;r<o;r++){const c=e[r]*n,f=r<o-1?e[r+1]*n:i.length,d=YO(i,c,f,n,!1);d===d.next&&(d.steiner=!0),s.push(sG(d))}s.sort(QV);for(let r=0;r<s.length;r++)t=JV(s[r],t);return t}function QV(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(e.next.y-e.y)/(e.next.x-e.x);t=n-s}return t}function JV(i,e){const t=eG(i,e);if(!t)return e;const n=KO(t,i);return qh(n,n.next),qh(t,t.next)}function eG(i,e){let t=e;const n=i.x,s=i.y;let r=-1/0,o;if(em(i,t))return t;do{if(em(i,t.next))return t.next;if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const g=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=n&&g>r&&(r=g,o=t.x<t.next.x?t:t.next,g===n))return o}t=t.next}while(t!==e);if(!o)return null;const c=o,f=o.x,d=o.y;let m=1/0;t=o;do{if(n>=t.x&&t.x>=f&&n!==t.x&&WO(s<d?n:r,s,f,d,s<d?r:n,s,t.x,t.y)){const g=Math.abs(s-t.y)/(n-t.x);k0(t,i)&&(g<m||g===m&&(t.x>o.x||t.x===o.x&&tG(o,t)))&&(o=t,m=g)}t=t.next}while(t!==c);return o}function tG(i,e){return Ci(i.prev,i,e.prev)<0&&Ci(e.next,i,i.next)<0}function nG(i,e,t,n){let s=i;do s.z===0&&(s.z=LT(s.x,s.y,e,t,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,iG(s)}function iG(i){let e,t=1;do{let n=i,s;i=null;let r=null;for(e=0;n;){e++;let o=n,c=0;for(let d=0;d<t&&(c++,o=o.nextZ,!!o);d++);let f=t;for(;c>0||f>0&&o;)c!==0&&(f===0||!o||n.z<=o.z)?(s=n,n=n.nextZ,c--):(s=o,o=o.nextZ,f--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;n=o}r.nextZ=null,t*=2}while(e>1);return i}function LT(i,e,t,n,s){return i=(i-t)*s|0,e=(e-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function sG(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function WO(i,e,t,n,s,r,o,c){return(s-o)*(e-c)>=(i-o)*(r-c)&&(i-o)*(n-c)>=(t-o)*(e-c)&&(t-o)*(r-c)>=(s-o)*(n-c)}function h0(i,e,t,n,s,r,o,c){return!(i===o&&e===c)&&WO(i,e,t,n,s,r,o,c)}function rG(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!aG(i,e)&&(k0(i,e)&&k0(e,i)&&oG(i,e)&&(Ci(i.prev,i,e.prev)||Ci(i,e.prev,e))||em(i,e)&&Ci(i.prev,i,i.next)>0&&Ci(e.prev,e,e.next)>0)}function Ci(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function em(i,e){return i.x===e.x&&i.y===e.y}function ZO(i,e,t,n){const s=Ux(Ci(i,e,t)),r=Ux(Ci(i,e,n)),o=Ux(Ci(t,n,i)),c=Ux(Ci(t,n,e));return!!(s!==r&&o!==c||s===0&&Lx(i,t,e)||r===0&&Lx(i,n,e)||o===0&&Lx(t,i,n)||c===0&&Lx(t,e,n))}function Lx(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Ux(i){return i>0?1:i<0?-1:0}function aG(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&ZO(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function k0(i,e){return Ci(i.prev,i,i.next)<0?Ci(i,e,i.next)>=0&&Ci(i,i.prev,e)>=0:Ci(i,e,i.prev)<0||Ci(i,i.next,e)<0}function oG(i,e){let t=i,n=!1;const s=(i.x+e.x)/2,r=(i.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function KO(i,e){const t=UT(i.i,i.x,i.y),n=UT(e.i,e.x,e.y),s=i.next,r=e.prev;return i.next=e,e.prev=i,t.next=s,s.prev=t,n.next=t,t.prev=n,r.next=n,n.prev=r,n}function YR(i,e,t,n){const s=UT(i,e,t);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function $0(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function UT(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function lG(i,e,t,n){let s=0;for(let r=e,o=t-n;r<t;r+=n)s+=(i[o]-i[r])*(i[r+1]+i[o+1]),o=r;return s}class cG{static triangulate(e,t,n=2){return qV(e,t,n)}}class Vl{static area(e){const t=e.length;let n=0;for(let s=t-1,r=0;r<t;s=r++)n+=e[s].x*e[r].y-e[r].x*e[s].y;return n*.5}static isClockWise(e){return Vl.area(e)<0}static triangulateShape(e,t){const n=[],s=[],r=[];WR(e),ZR(n,e);let o=e.length;t.forEach(WR);for(let f=0;f<t.length;f++)s.push(o),o+=t[f].length,ZR(n,t[f]);const c=cG.triangulate(n,s);for(let f=0;f<c.length;f+=3)r.push(c.slice(f,f+3));return r}}function WR(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function ZR(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class J1 extends rn{constructor(e=new Vh([new Xe(.5,.5),new Xe(-.5,.5),new Xe(-.5,-.5),new Xe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,s=[],r=[];for(let c=0,f=e.length;c<f;c++){const d=e[c];o(d)}this.setAttribute("position",new St(s,3)),this.setAttribute("uv",new St(r,2)),this.computeVertexNormals();function o(c){const f=[],d=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,b=t.bevelSize!==void 0?t.bevelSize:_-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const T=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:uG;let D,N=!1,I,L,P,G;T&&(D=T.getSpacedPoints(m),N=!0,v=!1,I=T.computeFrenetFrames(m,!1),L=new K,P=new K,G=new K),v||(M=0,_=0,b=0,A=0);const B=c.extractPoints(d);let U=B.shape;const j=B.holes;if(!Vl.isClockWise(U)){U=U.reverse();for(let Fe=0,Pe=j.length;Fe<Pe;Fe++){const Ie=j[Fe];Vl.isClockWise(Ie)&&(j[Fe]=Ie.reverse())}}function ne(Fe){const Ie=10000000000000001e-36;let Je=Fe[0];for(let Ne=1;Ne<=Fe.length;Ne++){const Y=Ne%Fe.length,H=Fe[Y],Q=H.x-Je.x,pe=H.y-Je.y,De=Q*Q+pe*pe,Me=Math.max(Math.abs(H.x),Math.abs(H.y),Math.abs(Je.x),Math.abs(Je.y)),et=Ie*Me*Me;if(De<=et){Fe.splice(Y,1),Ne--;continue}Je=H}}ne(U),j.forEach(ne);const de=j.length,he=U;for(let Fe=0;Fe<de;Fe++){const Pe=j[Fe];U=U.concat(Pe)}function F(Fe,Pe,Ie){return Pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Fe.clone().addScaledVector(Pe,Ie)}const W=U.length;function Z(Fe,Pe,Ie){let Je,Ne,Y;const H=Fe.x-Pe.x,Q=Fe.y-Pe.y,pe=Ie.x-Fe.x,De=Ie.y-Fe.y,Me=H*H+Q*Q,et=H*De-Q*pe;if(Math.abs(et)>Number.EPSILON){const We=Math.sqrt(Me),tt=Math.sqrt(pe*pe+De*De),Zt=Pe.x-Q/We,Ye=Pe.y+H/We,pt=Ie.x-De/tt,yt=Ie.y+pe/tt,vt=((pt-Zt)*De-(yt-Ye)*pe)/(H*De-Q*pe);Je=Zt+H*vt-Fe.x,Ne=Ye+Q*vt-Fe.y;const st=Je*Je+Ne*Ne;if(st<=2)return new Xe(Je,Ne);Y=Math.sqrt(st/2)}else{let We=!1;H>Number.EPSILON?pe>Number.EPSILON&&(We=!0):H<-Number.EPSILON?pe<-Number.EPSILON&&(We=!0):Math.sign(Q)===Math.sign(De)&&(We=!0),We?(Je=-Q,Ne=H,Y=Math.sqrt(Me)):(Je=H,Ne=Q,Y=Math.sqrt(Me/2))}return new Xe(Je/Y,Ne/Y)}const fe=[];for(let Fe=0,Pe=he.length,Ie=Pe-1,Je=Fe+1;Fe<Pe;Fe++,Ie++,Je++)Ie===Pe&&(Ie=0),Je===Pe&&(Je=0),fe[Fe]=Z(he[Fe],he[Ie],he[Je]);const X=[];let ie,Ee=fe.concat();for(let Fe=0,Pe=de;Fe<Pe;Fe++){const Ie=j[Fe];ie=[];for(let Je=0,Ne=Ie.length,Y=Ne-1,H=Je+1;Je<Ne;Je++,Y++,H++)Y===Ne&&(Y=0),H===Ne&&(H=0),ie[Je]=Z(Ie[Je],Ie[Y],Ie[H]);X.push(ie),Ee=Ee.concat(ie)}const Ue=[],re=[];for(let Fe=0;Fe<M;Fe++){const Pe=Fe/M,Ie=_*Math.cos(Pe*Math.PI/2),Je=b*Math.sin(Pe*Math.PI/2)+A;for(let Ne=0,Y=he.length;Ne<Y;Ne++){const H=F(he[Ne],fe[Ne],Je);$t(H.x,H.y,-Ie),Pe==0&&Ue.push(H)}for(let Ne=0,Y=de;Ne<Y;Ne++){const H=j[Ne];ie=X[Ne];const Q=[];for(let pe=0,De=H.length;pe<De;pe++){const Me=F(H[pe],ie[pe],Je);$t(Me.x,Me.y,-Ie),Pe==0&&Q.push(Me)}Pe==0&&re.push(Q)}}const Ce=Vl.triangulateShape(Ue,re),Be=Ce.length,qe=b+A;for(let Fe=0;Fe<W;Fe++){const Pe=v?F(U[Fe],Ee[Fe],qe):U[Fe];N?(P.copy(I.normals[0]).multiplyScalar(Pe.x),L.copy(I.binormals[0]).multiplyScalar(Pe.y),G.copy(D[0]).add(P).add(L),$t(G.x,G.y,G.z)):$t(Pe.x,Pe.y,0)}for(let Fe=1;Fe<=m;Fe++)for(let Pe=0;Pe<W;Pe++){const Ie=v?F(U[Pe],Ee[Pe],qe):U[Pe];N?(P.copy(I.normals[Fe]).multiplyScalar(Ie.x),L.copy(I.binormals[Fe]).multiplyScalar(Ie.y),G.copy(D[Fe]).add(P).add(L),$t(G.x,G.y,G.z)):$t(Ie.x,Ie.y,g/m*Fe)}for(let Fe=M-1;Fe>=0;Fe--){const Pe=Fe/M,Ie=_*Math.cos(Pe*Math.PI/2),Je=b*Math.sin(Pe*Math.PI/2)+A;for(let Ne=0,Y=he.length;Ne<Y;Ne++){const H=F(he[Ne],fe[Ne],Je);$t(H.x,H.y,g+Ie)}for(let Ne=0,Y=j.length;Ne<Y;Ne++){const H=j[Ne];ie=X[Ne];for(let Q=0,pe=H.length;Q<pe;Q++){const De=F(H[Q],ie[Q],Je);N?$t(De.x,De.y+D[m-1].y,D[m-1].x+Ie):$t(De.x,De.y,g+Ie)}}}Ke(),Ct();function Ke(){const Fe=s.length/3;if(v){let Pe=0,Ie=W*Pe;for(let Je=0;Je<Be;Je++){const Ne=Ce[Je];jt(Ne[2]+Ie,Ne[1]+Ie,Ne[0]+Ie)}Pe=m+M*2,Ie=W*Pe;for(let Je=0;Je<Be;Je++){const Ne=Ce[Je];jt(Ne[0]+Ie,Ne[1]+Ie,Ne[2]+Ie)}}else{for(let Pe=0;Pe<Be;Pe++){const Ie=Ce[Pe];jt(Ie[2],Ie[1],Ie[0])}for(let Pe=0;Pe<Be;Pe++){const Ie=Ce[Pe];jt(Ie[0]+W*m,Ie[1]+W*m,Ie[2]+W*m)}}n.addGroup(Fe,s.length/3-Fe,0)}function Ct(){const Fe=s.length/3;let Pe=0;bt(he,Pe),Pe+=he.length;for(let Ie=0,Je=j.length;Ie<Je;Ie++){const Ne=j[Ie];bt(Ne,Pe),Pe+=Ne.length}n.addGroup(Fe,s.length/3-Fe,1)}function bt(Fe,Pe){let Ie=Fe.length;for(;--Ie>=0;){const Je=Ie;let Ne=Ie-1;Ne<0&&(Ne=Fe.length-1);for(let Y=0,H=m+M*2;Y<H;Y++){const Q=W*Y,pe=W*(Y+1),De=Pe+Je+Q,Me=Pe+Ne+Q,et=Pe+Ne+pe,We=Pe+Je+pe;Nt(De,Me,et,We)}}}function $t(Fe,Pe,Ie){f.push(Fe),f.push(Pe),f.push(Ie)}function jt(Fe,Pe,Ie){te(Fe),te(Pe),te(Ie);const Je=s.length/3,Ne=C.generateTopUV(n,s,Je-3,Je-2,Je-1);_n(Ne[0]),_n(Ne[1]),_n(Ne[2])}function Nt(Fe,Pe,Ie,Je){te(Fe),te(Pe),te(Je),te(Pe),te(Ie),te(Je);const Ne=s.length/3,Y=C.generateSideWallUV(n,s,Ne-6,Ne-3,Ne-2,Ne-1);_n(Y[0]),_n(Y[1]),_n(Y[3]),_n(Y[1]),_n(Y[2]),_n(Y[3])}function te(Fe){s.push(f[Fe*3+0]),s.push(f[Fe*3+1]),s.push(f[Fe*3+2])}function _n(Fe){r.push(Fe.x),r.push(Fe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return fG(t,n,e)}static fromJSON(e,t){const n=[];for(let r=0,o=e.shapes.length;r<o;r++){const c=t[e.shapes[r]];n.push(c)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new u1[s.type]().fromJSON(s)),new J1(n,e.options)}}const uG={generateTopUV:function(i,e,t,n,s){const r=e[t*3],o=e[t*3+1],c=e[n*3],f=e[n*3+1],d=e[s*3],m=e[s*3+1];return[new Xe(r,o),new Xe(c,f),new Xe(d,m)]},generateSideWallUV:function(i,e,t,n,s,r){const o=e[t*3],c=e[t*3+1],f=e[t*3+2],d=e[n*3],m=e[n*3+1],g=e[n*3+2],v=e[s*3],_=e[s*3+1],b=e[s*3+2],A=e[r*3],M=e[r*3+1],T=e[r*3+2];return Math.abs(c-m)<Math.abs(o-d)?[new Xe(o,1-f),new Xe(d,1-g),new Xe(v,1-b),new Xe(A,1-T)]:[new Xe(c,1-f),new Xe(m,1-g),new Xe(_,1-b),new Xe(M,1-T)]}};function fG(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];t.shapes.push(r.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class eb extends vf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new eb(e.radius,e.detail)}}class cy extends vf{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cy(e.radius,e.detail)}}class ym extends rn{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const r=e/2,o=t/2,c=Math.floor(n),f=Math.floor(s),d=c+1,m=f+1,g=e/c,v=t/f,_=[],b=[],A=[],M=[];for(let T=0;T<m;T++){const C=T*v-o;for(let D=0;D<d;D++){const N=D*g-r;b.push(N,-C,0),A.push(0,0,1),M.push(D/c),M.push(1-T/f)}}for(let T=0;T<f;T++)for(let C=0;C<c;C++){const D=C+d*T,N=C+d*(T+1),I=C+1+d*(T+1),L=C+1+d*T;_.push(D,N,L),_.push(N,I,L)}this.setIndex(_),this.setAttribute("position",new St(b,3)),this.setAttribute("normal",new St(A,3)),this.setAttribute("uv",new St(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ym(e.width,e.height,e.widthSegments,e.heightSegments)}}class tb extends rn{constructor(e=.5,t=1,n=32,s=1,r=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:s,thetaStart:r,thetaLength:o},n=Math.max(3,n),s=Math.max(1,s);const c=[],f=[],d=[],m=[];let g=e;const v=(t-e)/s,_=new K,b=new Xe;for(let A=0;A<=s;A++){for(let M=0;M<=n;M++){const T=r+M/n*o;_.x=g*Math.cos(T),_.y=g*Math.sin(T),f.push(_.x,_.y,_.z),d.push(0,0,1),b.x=(_.x/t+1)/2,b.y=(_.y/t+1)/2,m.push(b.x,b.y)}g+=v}for(let A=0;A<s;A++){const M=A*(n+1);for(let T=0;T<n;T++){const C=T+M,D=C,N=C+n+1,I=C+n+2,L=C+1;c.push(D,N,L),c.push(N,I,L)}}this.setIndex(c),this.setAttribute("position",new St(f,3)),this.setAttribute("normal",new St(d,3)),this.setAttribute("uv",new St(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class nb extends rn{constructor(e=new Vh([new Xe(0,.5),new Xe(-.5,-.5),new Xe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],s=[],r=[],o=[];let c=0,f=0;if(Array.isArray(e)===!1)d(e);else for(let m=0;m<e.length;m++)d(e[m]),this.addGroup(c,f,m),c+=f,f=0;this.setIndex(n),this.setAttribute("position",new St(s,3)),this.setAttribute("normal",new St(r,3)),this.setAttribute("uv",new St(o,2));function d(m){const g=s.length/3,v=m.extractPoints(t);let _=v.shape;const b=v.holes;Vl.isClockWise(_)===!1&&(_=_.reverse());for(let M=0,T=b.length;M<T;M++){const C=b[M];Vl.isClockWise(C)===!0&&(b[M]=C.reverse())}const A=Vl.triangulateShape(_,b);for(let M=0,T=b.length;M<T;M++){const C=b[M];_=_.concat(C)}for(let M=0,T=_.length;M<T;M++){const C=_[M];s.push(C.x,C.y,0),r.push(0,0,1),o.push(C.x,C.y)}for(let M=0,T=A.length;M<T;M++){const C=A[M],D=C[0]+g,N=C[1]+g,I=C[2]+g;n.push(D,N,I),f+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return hG(t,e)}static fromJSON(e,t){const n=[];for(let s=0,r=e.shapes.length;s<r;s++){const o=t[e.shapes[s]];n.push(o)}return new nb(n,e.curveSegments)}}function hG(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const s=i[t];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e}class uy extends rn{constructor(e=1,t=32,n=16,s=0,r=Math.PI*2,o=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:s,phiLength:r,thetaStart:o,thetaLength:c},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const f=Math.min(o+c,Math.PI);let d=0;const m=[],g=new K,v=new K,_=[],b=[],A=[],M=[];for(let T=0;T<=n;T++){const C=[],D=T/n;let N=0;T===0&&o===0?N=.5/t:T===n&&f===Math.PI&&(N=-.5/t);for(let I=0;I<=t;I++){const L=I/t;g.x=-e*Math.cos(s+L*r)*Math.sin(o+D*c),g.y=e*Math.cos(o+D*c),g.z=e*Math.sin(s+L*r)*Math.sin(o+D*c),b.push(g.x,g.y,g.z),v.copy(g).normalize(),A.push(v.x,v.y,v.z),M.push(L+N,1-D),C.push(d++)}m.push(C)}for(let T=0;T<n;T++)for(let C=0;C<t;C++){const D=m[T][C+1],N=m[T][C],I=m[T+1][C],L=m[T+1][C+1];(T!==0||o>0)&&_.push(D,N,L),(T!==n-1||f<Math.PI)&&_.push(N,I,L)}this.setIndex(_),this.setAttribute("position",new St(b,3)),this.setAttribute("normal",new St(A,3)),this.setAttribute("uv",new St(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class ib extends vf{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ib(e.radius,e.detail)}}class sb extends rn{constructor(e=1,t=.4,n=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:s,arc:r},n=Math.floor(n),s=Math.floor(s);const o=[],c=[],f=[],d=[],m=new K,g=new K,v=new K;for(let _=0;_<=n;_++)for(let b=0;b<=s;b++){const A=b/s*r,M=_/n*Math.PI*2;g.x=(e+t*Math.cos(M))*Math.cos(A),g.y=(e+t*Math.cos(M))*Math.sin(A),g.z=t*Math.sin(M),c.push(g.x,g.y,g.z),m.x=e*Math.cos(A),m.y=e*Math.sin(A),v.subVectors(g,m).normalize(),f.push(v.x,v.y,v.z),d.push(b/s),d.push(_/n)}for(let _=1;_<=n;_++)for(let b=1;b<=s;b++){const A=(s+1)*_+b-1,M=(s+1)*(_-1)+b-1,T=(s+1)*(_-1)+b,C=(s+1)*_+b;o.push(A,M,C),o.push(M,T,C)}this.setIndex(o),this.setAttribute("position",new St(c,3)),this.setAttribute("normal",new St(f,3)),this.setAttribute("uv",new St(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sb(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class rb extends rn{constructor(e=1,t=.4,n=64,s=8,r=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:s,p:r,q:o},n=Math.floor(n),s=Math.floor(s);const c=[],f=[],d=[],m=[],g=new K,v=new K,_=new K,b=new K,A=new K,M=new K,T=new K;for(let D=0;D<=n;++D){const N=D/n*r*Math.PI*2;C(N,r,o,e,_),C(N+.01,r,o,e,b),M.subVectors(b,_),T.addVectors(b,_),A.crossVectors(M,T),T.crossVectors(A,M),A.normalize(),T.normalize();for(let I=0;I<=s;++I){const L=I/s*Math.PI*2,P=-t*Math.cos(L),G=t*Math.sin(L);g.x=_.x+(P*T.x+G*A.x),g.y=_.y+(P*T.y+G*A.y),g.z=_.z+(P*T.z+G*A.z),f.push(g.x,g.y,g.z),v.subVectors(g,_).normalize(),d.push(v.x,v.y,v.z),m.push(D/n),m.push(I/s)}}for(let D=1;D<=n;D++)for(let N=1;N<=s;N++){const I=(s+1)*(D-1)+(N-1),L=(s+1)*D+(N-1),P=(s+1)*D+N,G=(s+1)*(D-1)+N;c.push(I,L,G),c.push(L,P,G)}this.setIndex(c),this.setAttribute("position",new St(f,3)),this.setAttribute("normal",new St(d,3)),this.setAttribute("uv",new St(m,2));function C(D,N,I,L,P){const G=Math.cos(D),B=Math.sin(D),U=I/N*D,j=Math.cos(U);P.x=L*(2+j)*.5*G,P.y=L*(2+j)*B*.5,P.z=L*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class ab extends rn{constructor(e=new qM(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),t=64,n=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:s,closed:r};const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const c=new K,f=new K,d=new Xe;let m=new K;const g=[],v=[],_=[],b=[];A(),this.setIndex(b),this.setAttribute("position",new St(g,3)),this.setAttribute("normal",new St(v,3)),this.setAttribute("uv",new St(_,2));function A(){for(let D=0;D<t;D++)M(D);M(r===!1?t:0),C(),T()}function M(D){m=e.getPointAt(D/t,m);const N=o.normals[D],I=o.binormals[D];for(let L=0;L<=s;L++){const P=L/s*Math.PI*2,G=Math.sin(P),B=-Math.cos(P);f.x=B*N.x+G*I.x,f.y=B*N.y+G*I.y,f.z=B*N.z+G*I.z,f.normalize(),v.push(f.x,f.y,f.z),c.x=m.x+n*f.x,c.y=m.y+n*f.y,c.z=m.z+n*f.z,g.push(c.x,c.y,c.z)}}function T(){for(let D=1;D<=t;D++)for(let N=1;N<=s;N++){const I=(s+1)*(D-1)+(N-1),L=(s+1)*D+(N-1),P=(s+1)*D+N,G=(s+1)*(D-1)+N;b.push(I,L,G),b.push(L,P,G)}}function C(){for(let D=0;D<=t;D++)for(let N=0;N<=s;N++)d.x=D/t,d.y=N/s,_.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new ab(new u1[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class QO extends rn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,s=new K,r=new K;if(e.index!==null){const o=e.attributes.position,c=e.index;let f=e.groups;f.length===0&&(f=[{start:0,count:c.count,materialIndex:0}]);for(let d=0,m=f.length;d<m;++d){const g=f[d],v=g.start,_=g.count;for(let b=v,A=v+_;b<A;b+=3)for(let M=0;M<3;M++){const T=c.getX(b+M),C=c.getX(b+(M+1)%3);s.fromBufferAttribute(o,T),r.fromBufferAttribute(o,C),KR(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}}else{const o=e.attributes.position;for(let c=0,f=o.count/3;c<f;c++)for(let d=0;d<3;d++){const m=3*c+d,g=3*c+(d+1)%3;s.fromBufferAttribute(o,m),r.fromBufferAttribute(o,g),KR(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new St(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function KR(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(s)===!0?!1:(t.add(n),t.add(s),!0)}var QR=Object.freeze({__proto__:null,BoxGeometry:Jh,CapsuleGeometry:W1,CircleGeometry:Z1,ConeGeometry:K1,CylinderGeometry:gm,DodecahedronGeometry:Q1,EdgesGeometry:jO,ExtrudeGeometry:J1,IcosahedronGeometry:eb,LatheGeometry:ly,OctahedronGeometry:cy,PlaneGeometry:ym,PolyhedronGeometry:vf,RingGeometry:tb,ShapeGeometry:nb,SphereGeometry:uy,TetrahedronGeometry:ib,TorusGeometry:sb,TorusKnotGeometry:rb,TubeGeometry:ab,WireframeGeometry:QO});class JO extends Es{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new lt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class eL extends La{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class fy extends Es{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new lt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yf,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Zo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class co extends fy{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Xe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Jt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new lt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new lt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new lt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class tL extends Es{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new lt(16777215),this.specular=new lt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yf,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Zo,this.combine=ty,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nL extends Es{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new lt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yf,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class iL extends Es{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yf,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class sL extends Es{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yf,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Zo,this.combine=ty,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class YM extends Es{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=hO,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class WM extends Es{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class rL extends Es{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new lt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yf,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class aL extends mr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function zh(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function oL(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function lL(i){function e(s,r){return i[s]-i[r]}const t=i.length,n=new Array(t);for(let s=0;s!==t;++s)n[s]=s;return n.sort(e),n}function zT(i,e,t){const n=i.length,s=new i.constructor(n);for(let r=0,o=0;o!==n;++r){const c=t[r]*e;for(let f=0;f!==e;++f)s[o++]=i[c+f]}return s}function ZM(i,e,t,n){let s=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[s++];if(r===void 0)return;let o=r[n];if(o!==void 0)if(Array.isArray(o))do o=r[n],o!==void 0&&(e.push(r.time),t.push(...o)),r=i[s++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[n],o!==void 0&&(e.push(r.time),o.toArray(t,t.length)),r=i[s++];while(r!==void 0);else do o=r[n],o!==void 0&&(e.push(r.time),t.push(o)),r=i[s++];while(r!==void 0)}function dG(i,e,t,n,s=30){const r=i.clone();r.name=e;const o=[];for(let f=0;f<r.tracks.length;++f){const d=r.tracks[f],m=d.getValueSize(),g=[],v=[];for(let _=0;_<d.times.length;++_){const b=d.times[_]*s;if(!(b<t||b>=n)){g.push(d.times[_]);for(let A=0;A<m;++A)v.push(d.values[_*m+A])}}g.length!==0&&(d.times=zh(g,d.times.constructor),d.values=zh(v,d.values.constructor),o.push(d))}r.tracks=o;let c=1/0;for(let f=0;f<r.tracks.length;++f)c>r.tracks[f].times[0]&&(c=r.tracks[f].times[0]);for(let f=0;f<r.tracks.length;++f)r.tracks[f].shift(-1*c);return r.resetDuration(),r}function pG(i,e=0,t=i,n=30){n<=0&&(n=30);const s=t.tracks.length,r=e/n;for(let o=0;o<s;++o){const c=t.tracks[o],f=c.ValueTypeName;if(f==="bool"||f==="string")continue;const d=i.tracks.find(function(T){return T.name===c.name&&T.ValueTypeName===f});if(d===void 0)continue;let m=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);let v=0;const _=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=_/3);const b=c.times.length-1;let A;if(r<=c.times[0]){const T=m,C=g-m;A=c.values.slice(T,C)}else if(r>=c.times[b]){const T=b*g+m,C=T+g-m;A=c.values.slice(T,C)}else{const T=c.createInterpolant(),C=m,D=g-m;T.evaluate(r),A=T.resultBuffer.slice(C,D)}f==="quaternion"&&new fr().fromArray(A).normalize().conjugate().toArray(A);const M=d.times.length;for(let T=0;T<M;++T){const C=T*_+v;if(f==="quaternion")fr.multiplyQuaternionsFlat(d.values,C,A,0,d.values,C);else{const D=_-v*2;for(let N=0;N<D;++N)d.values[C+N]-=A[N]}}}return i.blendMode=CM,i}class mG{static convertArray(e,t){return zh(e,t)}static isTypedArray(e){return oL(e)}static getKeyframeOrder(e){return lL(e)}static sortedArray(e,t,n){return zT(e,t,n)}static flattenJSON(e,t,n,s){ZM(e,t,n,s)}static subclip(e,t,n,s,r=30){return dG(e,t,n,s,r)}static makeClipAdditive(e,t=0,n=e,s=30){return pG(e,t,n,s)}}class vm{constructor(e,t,n,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,s=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<s)){for(let c=n+2;;){if(s===void 0){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(r=s,s=t[++n],e<s)break t}o=t.length;break n}if(!(e>=r)){const c=t[1];e<c&&(n=2,r=c);for(let f=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===f)break;if(s=r,r=t[--n-1],e>=r)break t}o=n,n=0;break n}break e}for(;n<o;){const c=n+o>>>1;e<t[c]?o=c:n=c+1}if(s=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,s)}return this.interpolate_(n,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s;for(let o=0;o!==s;++o)t[o]=n[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class cL extends vm{constructor(e,t,n,s){super(e,t,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Lh,endingEnd:Lh}}intervalChanged_(e,t,n){const s=this.parameterPositions;let r=e-2,o=e+1,c=s[r],f=s[o];if(c===void 0)switch(this.getSettings_().endingStart){case Uh:r=e,c=2*t-n;break;case P0:r=s.length-2,c=t+s[r]-s[r+1];break;default:r=e,c=n}if(f===void 0)switch(this.getSettings_().endingEnd){case Uh:o=e,f=2*n-t;break;case P0:o=1,f=n+s[1]-s[0];break;default:o=e-1,f=t}const d=(n-t)*.5,m=this.valueSize;this._weightPrev=d/(t-c),this._weightNext=d/(f-n),this._offsetPrev=r*m,this._offsetNext=o*m}interpolate_(e,t,n,s){const r=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=e*c,d=f-c,m=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,_=this._weightNext,b=(n-t)/(s-t),A=b*b,M=A*b,T=-v*M+2*v*A-v*b,C=(1+v)*M+(-1.5-2*v)*A+(-.5+v)*b+1,D=(-1-_)*M+(1.5+_)*A+.5*b,N=_*M-_*A;for(let I=0;I!==c;++I)r[I]=T*o[m+I]+C*o[d+I]+D*o[f+I]+N*o[g+I];return r}}class KM extends vm{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=e*c,d=f-c,m=(n-t)/(s-t),g=1-m;for(let v=0;v!==c;++v)r[v]=o[d+v]*g+o[f+v]*m;return r}}class uL extends vm{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class uo{constructor(e,t,n,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=zh(t,this.TimeBufferType),this.values=zh(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:zh(e.times,Array),values:zh(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(n.interpolation=s)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new uL(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new KM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new cL(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Yp:t=this.InterpolantFactoryMethodDiscrete;break;case Wp:t=this.InterpolantFactoryMethodLinear;break;case n_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Yp;case this.InterpolantFactoryMethodLinear:return Wp;case this.InterpolantFactoryMethodSmooth:return n_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]*=e}return this}trim(e,t){const n=this.times,s=n.length;let r=0,o=s-1;for(;r!==s&&n[r]<e;)++r;for(;o!==-1&&n[o]>t;)--o;if(++o,r!==0||o!==s){r>=o&&(o=Math.max(o,1),r=o-1);const c=this.getValueSize();this.times=n.slice(r,o),this.values=this.values.slice(r*c,o*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,s=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let c=0;c!==r;c++){const f=n[c];if(typeof f=="number"&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,f),e=!1;break}if(o!==null&&o>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,f,o),e=!1;break}o=f}if(s!==void 0&&oL(s))for(let c=0,f=s.length;c!==f;++c){const d=s[c];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===n_,r=e.length-1;let o=1;for(let c=1;c<r;++c){let f=!1;const d=e[c],m=e[c+1];if(d!==m&&(c!==1||d!==e[0]))if(s)f=!0;else{const g=c*n,v=g-n,_=g+n;for(let b=0;b!==n;++b){const A=t[g+b];if(A!==t[v+b]||A!==t[_+b]){f=!0;break}}}if(f){if(c!==o){e[o]=e[c];const g=c*n,v=o*n;for(let _=0;_!==n;++_)t[v+_]=t[g+_]}++o}}if(r>0){e[o]=e[r];for(let c=r*n,f=o*n,d=0;d!==n;++d)t[f+d]=t[c+d];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,s=new n(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}uo.prototype.ValueTypeName="";uo.prototype.TimeBufferType=Float32Array;uo.prototype.ValueBufferType=Float32Array;uo.prototype.DefaultInterpolation=Wp;class ed extends uo{constructor(e,t,n){super(e,t,n)}}ed.prototype.ValueTypeName="bool";ed.prototype.ValueBufferType=Array;ed.prototype.DefaultInterpolation=Yp;ed.prototype.InterpolantFactoryMethodLinear=void 0;ed.prototype.InterpolantFactoryMethodSmooth=void 0;class QM extends uo{constructor(e,t,n,s){super(e,t,n,s)}}QM.prototype.ValueTypeName="color";class jh extends uo{constructor(e,t,n,s){super(e,t,n,s)}}jh.prototype.ValueTypeName="number";class fL extends vm{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=(n-t)/(s-t);let d=e*c;for(let m=d+c;d!==m;d+=4)fr.slerpFlat(r,0,o,d-c,o,d,f);return r}}class Yh extends uo{constructor(e,t,n,s){super(e,t,n,s)}InterpolantFactoryMethodLinear(e){return new fL(this.times,this.values,this.getValueSize(),e)}}Yh.prototype.ValueTypeName="quaternion";Yh.prototype.InterpolantFactoryMethodSmooth=void 0;class td extends uo{constructor(e,t,n){super(e,t,n)}}td.prototype.ValueTypeName="string";td.prototype.ValueBufferType=Array;td.prototype.DefaultInterpolation=Yp;td.prototype.InterpolantFactoryMethodLinear=void 0;td.prototype.InterpolantFactoryMethodSmooth=void 0;class Wh extends uo{constructor(e,t,n,s){super(e,t,n,s)}}Wh.prototype.ValueTypeName="vector";class tm{constructor(e="",t=-1,n=[],s=F1){this.name=e,this.tracks=n,this.duration=t,this.blendMode=s,this.uuid=Da(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,s=1/(e.fps||1);for(let o=0,c=n.length;o!==c;++o)t.push(yG(n[o]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=n.length;r!==o;++r)t.push(uo.toJSON(n[r]));return s}static CreateFromMorphTargetSequence(e,t,n,s){const r=t.length,o=[];for(let c=0;c<r;c++){let f=[],d=[];f.push((c+r-1)%r,c,(c+1)%r),d.push(0,1,0);const m=lL(f);f=zT(f,1,m),d=zT(d,1,m),!s&&f[0]===0&&(f.push(r),d.push(d[0])),o.push(new jh(".morphTargetInfluences["+t[c].name+"]",f,d).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const s=e;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===t)return n[s];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const s={},r=/^([\w-]*?)([\d]+)$/;for(let c=0,f=e.length;c<f;c++){const d=e[c],m=d.name.match(r);if(m&&m.length>1){const g=m[1];let v=s[g];v||(s[g]=v=[]),v.push(d)}}const o=[];for(const c in s)o.push(this.CreateFromMorphTargetSequence(c,s[c],t,n));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(g,v,_,b,A){if(_.length!==0){const M=[],T=[];ZM(_,M,T,b),M.length!==0&&A.push(new g(v,M,T))}},s=[],r=e.name||"default",o=e.fps||30,c=e.blendMode;let f=e.length||-1;const d=e.hierarchy||[];for(let g=0;g<d.length;g++){const v=d[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const _={};let b;for(b=0;b<v.length;b++)if(v[b].morphTargets)for(let A=0;A<v[b].morphTargets.length;A++)_[v[b].morphTargets[A]]=-1;for(const A in _){const M=[],T=[];for(let C=0;C!==v[b].morphTargets.length;++C){const D=v[b];M.push(D.time),T.push(D.morphTarget===A?1:0)}s.push(new jh(".morphTargetInfluence["+A+"]",M,T))}f=_.length*o}else{const _=".bones["+t[g].name+"]";n(Wh,_+".position",v,"pos",s),n(Yh,_+".quaternion",v,"rot",s),n(Wh,_+".scale",v,"scl",s)}}return s.length===0?null:new this(r,f,s,c)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,s=e.length;n!==s;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function gG(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return jh;case"vector":case"vector2":case"vector3":case"vector4":return Wh;case"color":return QM;case"quaternion":return Yh;case"bool":case"boolean":return ed;case"string":return td}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function yG(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=gG(i.type);if(i.times===void 0){const t=[],n=[];ZM(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const zc={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class JM{constructor(e,t,n){const s=this;let r=!1,o=0,c=0,f;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(m){c++,r===!1&&s.onStart!==void 0&&s.onStart(m,o,c),r=!0},this.itemEnd=function(m){o++,s.onProgress!==void 0&&s.onProgress(m,o,c),o===c&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(m){s.onError!==void 0&&s.onError(m)},this.resolveURL=function(m){return f?f(m):m},this.setURLModifier=function(m){return f=m,this},this.addHandler=function(m,g){return d.push(m,g),this},this.removeHandler=function(m){const g=d.indexOf(m);return g!==-1&&d.splice(g,2),this},this.getHandler=function(m){for(let g=0,v=d.length;g<v;g+=2){const _=d[g],b=d[g+1];if(_.global&&(_.lastIndex=0),_.test(m))return b}return null}}}const hL=new JM;class Vr{constructor(e){this.manager=e!==void 0?e:hL,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,r){n.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Vr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ac={};class vG extends Error{constructor(e,t){super(e),this.response=t}}class Ko extends Vr{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=zc.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Ac[e]!==void 0){Ac[e].push({onLoad:t,onProgress:n,onError:s});return}Ac[e]=[],Ac[e].push({onLoad:t,onProgress:n,onError:s});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,f=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const m=Ac[e],g=d.body.getReader(),v=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),_=v?parseInt(v):0,b=_!==0;let A=0;const M=new ReadableStream({start(T){C();function C(){g.read().then(({done:D,value:N})=>{if(D)T.close();else{A+=N.byteLength;const I=new ProgressEvent("progress",{lengthComputable:b,loaded:A,total:_});for(let L=0,P=m.length;L<P;L++){const G=m[L];G.onProgress&&G.onProgress(I)}T.enqueue(N),C()}},D=>{T.error(D)})}}});return new Response(M)}else throw new vG(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(f){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(m=>new DOMParser().parseFromString(m,c));case"json":return d.json();default:if(c==="")return d.text();{const g=/charset="?([^;"\s]*)"?/i.exec(c),v=g&&g[1]?g[1].toLowerCase():void 0,_=new TextDecoder(v);return d.arrayBuffer().then(b=>_.decode(b))}}}).then(d=>{zc.add(e,d);const m=Ac[e];delete Ac[e];for(let g=0,v=m.length;g<v;g++){const _=m[g];_.onLoad&&_.onLoad(d)}}).catch(d=>{const m=Ac[e];if(m===void 0)throw this.manager.itemError(e),d;delete Ac[e];for(let g=0,v=m.length;g<v;g++){const _=m[g];_.onError&&_.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class xG extends Vr{constructor(e){super(e)}load(e,t,n,s){const r=this,o=new Ko(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(f){s?s(f):console.error(f),r.manager.itemError(e)}},n,s)}parse(e){const t=[];for(let n=0;n<e.length;n++){const s=tm.parse(e[n]);t.push(s)}return t}}class _G extends Vr{constructor(e){super(e)}load(e,t,n,s){const r=this,o=[],c=new j1,f=new Ko(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(r.withCredentials);let d=0;function m(g){f.load(e[g],function(v){const _=r.parse(v,!0);o[g]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},d+=1,d===6&&(_.mipmapCount===1&&(c.minFilter=Bi),c.image=o,c.format=_.format,c.needsUpdate=!0,t&&t(c))},n,s)}if(Array.isArray(e))for(let g=0,v=e.length;g<v;++g)m(g);else f.load(e,function(g){const v=r.parse(g,!0);if(v.isCubemap){const _=v.mipmaps.length/v.mipmapCount;for(let b=0;b<_;b++){o[b]={mipmaps:[]};for(let A=0;A<v.mipmapCount;A++)o[b].mipmaps.push(v.mipmaps[b*v.mipmapCount+A]),o[b].format=v.format,o[b].width=v.width,o[b].height=v.height}c.image=o}else c.image.width=v.width,c.image.height=v.height,c.mipmaps=v.mipmaps;v.mipmapCount===1&&(c.minFilter=Bi),c.format=v.format,c.needsUpdate=!0,t&&t(c)},n,s);return c}}class X0 extends Vr{constructor(e){super(e)}load(e,t,n,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=zc.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const c=H0("img");function f(){m(),zc.add(e,this),t&&t(this),r.manager.itemEnd(e)}function d(g){m(),s&&s(g),r.manager.itemError(e),r.manager.itemEnd(e)}function m(){c.removeEventListener("load",f,!1),c.removeEventListener("error",d,!1)}return c.addEventListener("load",f,!1),c.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),r.manager.itemStart(e),c.src=e,c}}class bG extends Vr{constructor(e){super(e)}load(e,t,n,s){const r=new sy;r.colorSpace=ji;const o=new X0(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let c=0;function f(d){o.load(e[d],function(m){r.images[d]=m,c++,c===6&&(r.needsUpdate=!0,t&&t(r))},void 0,s)}for(let d=0;d<e.length;++d)f(d);return r}}class SG extends Vr{constructor(e){super(e)}load(e,t,n,s){const r=this,o=new Hl,c=new Ko(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(r.withCredentials),c.load(e,function(f){let d;try{d=r.parse(f)}catch(m){if(s!==void 0)s(m);else{console.error(m);return}}d.image!==void 0?o.image=d.image:d.data!==void 0&&(o.image.width=d.width,o.image.height=d.height,o.image.data=d.data),o.wrapS=d.wrapS!==void 0?d.wrapS:Ca,o.wrapT=d.wrapT!==void 0?d.wrapT:Ca,o.magFilter=d.magFilter!==void 0?d.magFilter:Bi,o.minFilter=d.minFilter!==void 0?d.minFilter:Bi,o.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(o.colorSpace=d.colorSpace),d.flipY!==void 0&&(o.flipY=d.flipY),d.format!==void 0&&(o.format=d.format),d.type!==void 0&&(o.type=d.type),d.mipmaps!==void 0&&(o.mipmaps=d.mipmaps,o.minFilter=ro),d.mipmapCount===1&&(o.minFilter=Bi),d.generateMipmaps!==void 0&&(o.generateMipmaps=d.generateMipmaps),o.needsUpdate=!0,t&&t(o,d)},n,s),o}}class hy extends Vr{constructor(e){super(e)}load(e,t,n,s){const r=new Fi,o=new X0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(c){r.image=c,r.needsUpdate=!0,t!==void 0&&t(r)},n,s),r}}class xf extends Rn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new lt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class dL extends xf{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Rn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new lt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const uE=new Gt,JR=new K,eC=new K;class eA{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Xe(512,512),this.map=null,this.mapPass=null,this.matrix=new Gt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new oy,this._frameExtents=new Xe(1,1),this._viewportCount=1,this._viewports=[new Bn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;JR.setFromMatrixPosition(e.matrixWorld),t.position.copy(JR),eC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(eC),t.updateMatrixWorld(),uE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uE),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(uE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class EG extends eA{constructor(){super(new _s(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Zp*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class tA extends xf{constructor(e,t,n=0,s=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Rn.DEFAULT_UP),this.updateMatrix(),this.target=new Rn,this.distance=n,this.angle=s,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new EG}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const tC=new Gt,Qg=new K,fE=new K;class TG extends eA{constructor(){super(new _s(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Xe(4,2),this._viewportCount=6,this._viewports=[new Bn(2,1,1,1),new Bn(0,1,1,1),new Bn(3,1,1,1),new Bn(1,1,1,1),new Bn(3,0,1,1),new Bn(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,s=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Qg.setFromMatrixPosition(e.matrixWorld),n.position.copy(Qg),fE.copy(n.position),fE.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(fE),n.updateMatrixWorld(),s.makeTranslation(-Qg.x,-Qg.y,-Qg.z),tC.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tC)}}class nA extends xf{constructor(e,t,n=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new TG}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class xm extends G1{constructor(e=-1,t=1,n=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-e,o=n+e,c=s+t,f=s-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=d*this.view.offsetX,o=r+d*this.view.width,c-=m*this.view.offsetY,f=c-m*this.view.height}this.projectionMatrix.makeOrthographic(r,o,c,f,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class MG extends eA{constructor(){super(new xm(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class iA extends xf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Rn.DEFAULT_UP),this.updateMatrix(),this.target=new Rn,this.shadow=new MG}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class pL extends xf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class mL extends xf{constructor(e,t,n=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class gL{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new K)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*s),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*s)),t.addScaledVector(o[5],1.092548*(s*r)),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],1.092548*(n*r)),t.addScaledVector(o[8],.546274*(n*n-s*s)),t}getIrradianceAt(e,t){const n=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*s),t.addScaledVector(o[2],2*.511664*r),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*s),t.addScaledVector(o[5],2*.429043*s*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],2*.429043*n*r),t.addScaledVector(o[8],.429043*(n*n-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const n=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-s*s)}}class yL extends xf{constructor(e=new gL,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class ob extends Vr{constructor(e){super(e),this.textures={}}load(e,t,n,s){const r=this,o=new Ko(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(f){s?s(f):console.error(f),r.manager.itemError(e)}},n,s)}parse(e){const t=this.textures;function n(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new lt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const o=e.uniforms[r];switch(s.uniforms[r]={},o.type){case"t":s.uniforms[r].value=n(o.value);break;case"c":s.uniforms[r].value=new lt().setHex(o.value);break;case"v2":s.uniforms[r].value=new Xe().fromArray(o.value);break;case"v3":s.uniforms[r].value=new K().fromArray(o.value);break;case"v4":s.uniforms[r].value=new Bn().fromArray(o.value);break;case"m3":s.uniforms[r].value=new ln().fromArray(o.value);break;case"m4":s.uniforms[r].value=new Gt().fromArray(o.value);break;default:s.uniforms[r].value=o.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)s.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=n(e.map)),e.matcap!==void 0&&(s.matcap=n(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new Xe().fromArray(r)}return e.displacementMap!==void 0&&(s.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=n(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Xe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return ob.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:JO,SpriteMaterial:PM,RawShaderMaterial:eL,ShaderMaterial:La,PointsMaterial:q1,MeshPhysicalMaterial:co,MeshStandardMaterial:fy,MeshPhongMaterial:tL,MeshToonMaterial:nL,MeshNormalMaterial:iL,MeshLambertMaterial:sL,MeshDepthMaterial:YM,MeshDistanceMaterial:WM,MeshBasicMaterial:Na,MeshMatcapMaterial:rL,LineDashedMaterial:aL,LineBasicMaterial:mr,Material:Es};return new t[e]}}class ff{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class vL extends rn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class xL extends Vr{constructor(e){super(e)}load(e,t,n,s){const r=this,o=new Ko(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(f){s?s(f):console.error(f),r.manager.itemError(e)}},n,s)}parse(e){const t={},n={};function s(_,b){if(t[b]!==void 0)return t[b];const M=_.interleavedBuffers[b],T=r(_,M.buffer),C=Lp(M.type,T),D=new ry(C,M.stride);return D.uuid=M.uuid,t[b]=D,D}function r(_,b){if(n[b]!==void 0)return n[b];const M=_.arrayBuffers[b],T=new Uint32Array(M).buffer;return n[b]=T,T}const o=e.isInstancedBufferGeometry?new vL:new rn,c=e.data.index;if(c!==void 0){const _=Lp(c.type,c.array);o.setIndex(new Fn(_,1))}const f=e.data.attributes;for(const _ in f){const b=f[_];let A;if(b.isInterleavedBufferAttribute){const M=s(e.data,b.data);A=new Jp(M,b.itemSize,b.offset,b.normalized)}else{const M=Lp(b.type,b.array),T=b.isInstancedBufferAttribute?Xh:Fn;A=new T(M,b.itemSize,b.normalized)}b.name!==void 0&&(A.name=b.name),b.usage!==void 0&&A.setUsage(b.usage),o.setAttribute(_,A)}const d=e.data.morphAttributes;if(d)for(const _ in d){const b=d[_],A=[];for(let M=0,T=b.length;M<T;M++){const C=b[M];let D;if(C.isInterleavedBufferAttribute){const N=s(e.data,C.data);D=new Jp(N,C.itemSize,C.offset,C.normalized)}else{const N=Lp(C.type,C.array);D=new Fn(N,C.itemSize,C.normalized)}C.name!==void 0&&(D.name=C.name),A.push(D)}o.morphAttributes[_]=A}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let _=0,b=g.length;_!==b;++_){const A=g[_];o.addGroup(A.start,A.count,A.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const _=new K;v.center!==void 0&&_.fromArray(v.center),o.boundingSphere=new Xs(_,v.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class AG extends Vr{constructor(e){super(e)}load(e,t,n,s){const r=this,o=this.path===""?ff.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const c=new Ko(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){let d=null;try{d=JSON.parse(f)}catch(g){s!==void 0&&s(g),console.error("THREE:ObjectLoader: Can't parse "+e+".",g.message);return}const m=d.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}r.parse(d,t)},n,s)}async loadAsync(e,t){const n=this,s=this.path===""?ff.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const r=new Ko(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const o=await r.loadAsync(e,t),c=JSON.parse(o),f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(c)}parse(e,t){const n=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,s),o=this.parseImages(e.images,function(){t!==void 0&&t(d)}),c=this.parseTextures(e.textures,o),f=this.parseMaterials(e.materials,c),d=this.parseObject(e.object,r,f,c,n),m=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,m),this.bindLightTargets(d),t!==void 0){let g=!1;for(const v in o)if(o[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,r),c=this.parseMaterials(e.materials,o),f=this.parseObject(e.object,s,c,o,t),d=this.parseSkeletons(e.skeletons,f);return this.bindSkeletons(f,d),this.bindLightTargets(f),f}parseShapes(e){const t={};if(e!==void 0)for(let n=0,s=e.length;n<s;n++){const r=new Vh().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},s={};if(t.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),e!==void 0)for(let r=0,o=e.length;r<o;r++){const c=new ay().fromJSON(e[r],s);n[c.uuid]=c}return n}parseGeometries(e,t){const n={};if(e!==void 0){const s=new xL;for(let r=0,o=e.length;r<o;r++){let c;const f=e[r];switch(f.type){case"BufferGeometry":case"InstancedBufferGeometry":c=s.parse(f);break;default:f.type in QR?c=QR[f.type].fromJSON(f,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${f.type}"`)}c.uuid=f.uuid,f.name!==void 0&&(c.name=f.name),f.userData!==void 0&&(c.userData=f.userData),n[f.uuid]=c}}return n}parseMaterials(e,t){const n={},s={};if(e!==void 0){const r=new ob;r.setTextures(t);for(let o=0,c=e.length;o<c;o++){const f=e[o];n[f.uuid]===void 0&&(n[f.uuid]=r.parse(f)),s[f.uuid]=n[f.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const s=e[n],r=tm.parse(s);t[r.uuid]=r}return t}parseImages(e,t){const n=this,s={};let r;function o(f){return n.manager.itemStart(f),r.load(f,function(){n.manager.itemEnd(f)},void 0,function(){n.manager.itemError(f),n.manager.itemEnd(f)})}function c(f){if(typeof f=="string"){const d=f,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return o(m)}else return f.data?{data:Lp(f.type,f.data),width:f.width,height:f.height}:null}if(e!==void 0&&e.length>0){const f=new JM(t);r=new X0(f),r.setCrossOrigin(this.crossOrigin);for(let d=0,m=e.length;d<m;d++){const g=e[d],v=g.url;if(Array.isArray(v)){const _=[];for(let b=0,A=v.length;b<A;b++){const M=v[b],T=c(M);T!==null&&(T instanceof HTMLImageElement?_.push(T):_.push(new Hl(T.data,T.width,T.height)))}s[g.uuid]=new lf(_)}else{const _=c(g.url);s[g.uuid]=new lf(_)}}}return s}async parseImagesAsync(e){const t=this,n={};let s;async function r(o){if(typeof o=="string"){const c=o,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await s.loadAsync(f)}else return o.data?{data:Lp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){s=new X0(this.manager),s.setCrossOrigin(this.crossOrigin);for(let o=0,c=e.length;o<c;o++){const f=e[o],d=f.url;if(Array.isArray(d)){const m=[];for(let g=0,v=d.length;g<v;g++){const _=d[g],b=await r(_);b!==null&&(b instanceof HTMLImageElement?m.push(b):m.push(new Hl(b.data,b.width,b.height)))}n[f.uuid]=new lf(m)}else{const m=await r(f.url);n[f.uuid]=new lf(m)}}}return n}parseTextures(e,t){function n(r,o){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),o[r])}const s={};if(e!==void 0)for(let r=0,o=e.length;r<o;r++){const c=e[r];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const f=t[c.image],d=f.data;let m;Array.isArray(d)?(m=new sy,d.length===6&&(m.needsUpdate=!0)):(d&&d.data?m=new Hl:m=new Fi,d&&(m.needsUpdate=!0)),m.source=f,m.uuid=c.uuid,c.name!==void 0&&(m.name=c.name),c.mapping!==void 0&&(m.mapping=n(c.mapping,wG)),c.channel!==void 0&&(m.channel=c.channel),c.offset!==void 0&&m.offset.fromArray(c.offset),c.repeat!==void 0&&m.repeat.fromArray(c.repeat),c.center!==void 0&&m.center.fromArray(c.center),c.rotation!==void 0&&(m.rotation=c.rotation),c.wrap!==void 0&&(m.wrapS=n(c.wrap[0],nC),m.wrapT=n(c.wrap[1],nC)),c.format!==void 0&&(m.format=c.format),c.internalFormat!==void 0&&(m.internalFormat=c.internalFormat),c.type!==void 0&&(m.type=c.type),c.colorSpace!==void 0&&(m.colorSpace=c.colorSpace),c.minFilter!==void 0&&(m.minFilter=n(c.minFilter,iC)),c.magFilter!==void 0&&(m.magFilter=n(c.magFilter,iC)),c.anisotropy!==void 0&&(m.anisotropy=c.anisotropy),c.flipY!==void 0&&(m.flipY=c.flipY),c.generateMipmaps!==void 0&&(m.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(m.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(m.compareFunction=c.compareFunction),c.userData!==void 0&&(m.userData=c.userData),s[c.uuid]=m}return s}parseObject(e,t,n,s,r){let o;function c(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function f(v){if(v!==void 0){if(Array.isArray(v)){const _=[];for(let b=0,A=v.length;b<A;b++){const M=v[b];n[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),_.push(n[M])}return _}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function d(v){return s[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),s[v]}let m,g;switch(e.type){case"Scene":o=new zM,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new lt(e.background):o.background=d(e.background)),e.environment!==void 0&&(o.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new $1(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new k1(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new _s(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new xm(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new pL(e.color,e.intensity);break;case"DirectionalLight":o=new iA(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new nA(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new mL(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new tA(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new dL(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new yL().fromJSON(e);break;case"SkinnedMesh":m=c(e.geometry),g=f(e.material),o=new IM(m,g),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":m=c(e.geometry),g=f(e.material),o=new Yi(m,g);break;case"InstancedMesh":m=c(e.geometry),g=f(e.material);const v=e.count,_=e.instanceMatrix,b=e.instanceColor;o=new BM(m,g,v),o.instanceMatrix=new Xh(new Float32Array(_.array),16),b!==void 0&&(o.instanceColor=new Xh(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":m=c(e.geometry),g=f(e.material),o=new HO(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),o.geometry=m,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(A=>{const M=new hr;M.min.fromArray(A.boxMin),M.max.fromArray(A.boxMax);const T=new Xs;return T.radius=A.sphereRadius,T.center.fromArray(A.sphereCenter),{boxInitialized:A.boxInitialized,box:M,sphereInitialized:A.sphereInitialized,sphere:T}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=d(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=d(e.colorsTexture.uuid));break;case"LOD":o=new FO;break;case"Line":o=new jc(c(e.geometry),f(e.material));break;case"LineLoop":o=new FM(c(e.geometry),f(e.material));break;case"LineSegments":o=new Jo(c(e.geometry),f(e.material));break;case"PointCloud":case"Points":o=new HM(c(e.geometry),f(e.material));break;case"Sprite":o=new BO(f(e.material));break;case"Group":o=new Uc;break;case"Bone":o=new X1;break;default:o=new Rn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let _=0;_<v.length;_++)o.add(this.parseObject(v[_],t,n,s,r))}if(e.animations!==void 0){const v=e.animations;for(let _=0;_<v.length;_++){const b=v[_];o.animations.push(r[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const v=e.levels;for(let _=0;_<v.length;_++){const b=v[_],A=o.getObjectByProperty("uuid",b.object);A!==void 0&&o.addLevel(A,b.distance,b.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=t[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,s=e.getObjectByProperty("uuid",n);s!==void 0?t.target=s:t.target=new Rn}})}}const wG={UVMapping:D1,CubeReflectionMapping:Xc,CubeRefractionMapping:pf,EquirectangularReflectionMapping:U0,EquirectangularRefractionMapping:z0,CubeUVReflectionMapping:dm},nC={RepeatWrapping:mf,ClampToEdgeWrapping:Ca,MirroredRepeatWrapping:kp},iC={NearestFilter:Ss,NearestMipmapNearestFilter:O1,NearestMipmapLinearFilter:Oh,LinearFilter:Bi,LinearMipmapNearestFilter:Ip,LinearMipmapLinearFilter:ro};class _L extends Vr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=zc.get(e);if(o!==void 0){if(r.manager.itemStart(e),o.then){o.then(d=>{t&&t(d),r.manager.itemEnd(e)}).catch(d=>{s&&s(d)});return}return setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader;const f=fetch(e,c).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(d){return zc.add(e,d),t&&t(d),r.manager.itemEnd(e),d}).catch(function(d){s&&s(d),zc.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});zc.add(e,f),r.manager.itemStart(e)}}let zx;class sA{static getContext(){return zx===void 0&&(zx=new(window.AudioContext||window.webkitAudioContext)),zx}static setContext(e){zx=e}}class RG extends Vr{constructor(e){super(e)}load(e,t,n,s){const r=this,o=new Ko(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(f){try{const d=f.slice(0);sA.getContext().decodeAudioData(d,function(g){t(g)}).catch(c)}catch(d){c(d)}},n,s);function c(f){s?s(f):console.error(f),r.manager.itemError(e)}}}const sC=new Gt,rC=new Gt,vh=new Gt;class CG{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _s,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _s,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,vh.copy(e.projectionMatrix);const s=t.eyeSep/2,r=s*t.near/t.focus,o=t.near*Math.tan(Hh*t.fov*.5)/t.zoom;let c,f;rC.elements[12]=-s,sC.elements[12]=s,c=-o*t.aspect+r,f=o*t.aspect+r,vh.elements[0]=2*t.near/(f-c),vh.elements[8]=(f+c)/(f-c),this.cameraL.projectionMatrix.copy(vh),c=-o*t.aspect-r,f=o*t.aspect-r,vh.elements[0]=2*t.near/(f-c),vh.elements[8]=(f+c)/(f-c),this.cameraR.projectionMatrix.copy(vh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(rC),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(sC)}}class bL extends _s{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class rA{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=aC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=aC();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function aC(){return performance.now()}const xh=new K,oC=new fr,NG=new K,_h=new K;class DG extends Rn{constructor(){super(),this.type="AudioListener",this.context=sA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new rA}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(xh,oC,NG),_h.set(0,0,-1).applyQuaternion(oC),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(xh.x,s),t.positionY.linearRampToValueAtTime(xh.y,s),t.positionZ.linearRampToValueAtTime(xh.z,s),t.forwardX.linearRampToValueAtTime(_h.x,s),t.forwardY.linearRampToValueAtTime(_h.y,s),t.forwardZ.linearRampToValueAtTime(_h.z,s),t.upX.linearRampToValueAtTime(n.x,s),t.upY.linearRampToValueAtTime(n.y,s),t.upZ.linearRampToValueAtTime(n.z,s)}else t.setPosition(xh.x,xh.y,xh.z),t.setOrientation(_h.x,_h.y,_h.z,n.x,n.y,n.z)}}class SL extends Rn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const bh=new K,lC=new fr,OG=new K,Sh=new K;class LG extends SL{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(bh,lC,OG),Sh.set(0,0,1).applyQuaternion(lC);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(bh.x,n),t.positionY.linearRampToValueAtTime(bh.y,n),t.positionZ.linearRampToValueAtTime(bh.z,n),t.orientationX.linearRampToValueAtTime(Sh.x,n),t.orientationY.linearRampToValueAtTime(Sh.y,n),t.orientationZ.linearRampToValueAtTime(Sh.z,n)}else t.setPosition(bh.x,bh.y,bh.z),t.setOrientation(Sh.x,Sh.y,Sh.z)}}class UG{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class EL{constructor(e,t,n){this.binding=e,this.valueSize=n;let s,r,o;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,s=this.valueSize,r=e*s+s;let o=this.cumulativeWeight;if(o===0){for(let c=0;c!==s;++c)n[r+c]=n[c];o=t}else{o+=t;const c=t/o;this._mixBufferRegion(n,r,0,c,s)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,s=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const f=t*this._origIndex;this._mixBufferRegion(n,s,f,1-r,t)}o>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*t,1,t);for(let f=t,d=t+t;f!==d;++f)if(n[f]!==n[f+t]){c.setValue(n,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,s=n*this._origIndex;e.getValue(t,s);for(let r=n,o=s;r!==o;++r)t[r]=t[s+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,s,r){if(s>=.5)for(let o=0;o!==r;++o)e[t+o]=e[n+o]}_slerp(e,t,n,s){fr.slerpFlat(e,t,e,t,e,n,s)}_slerpAdditive(e,t,n,s,r){const o=this._workIndex*r;fr.multiplyQuaternionsFlat(e,o,e,t,e,n),fr.slerpFlat(e,t,e,t,e,o,s)}_lerp(e,t,n,s,r){const o=1-s;for(let c=0;c!==r;++c){const f=t+c;e[f]=e[f]*o+e[n+c]*s}}_lerpAdditive(e,t,n,s,r){for(let o=0;o!==r;++o){const c=t+o;e[c]=e[c]+e[n+o]*s}}}const aA="\\[\\]\\.:\\/",zG=new RegExp("["+aA+"]","g"),oA="[^"+aA+"]",PG="[^"+aA.replace("\\.","")+"]",IG=/((?:WC+[\/:])*)/.source.replace("WC",oA),BG=/(WCOD+)?/.source.replace("WCOD",PG),FG=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",oA),HG=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",oA),VG=new RegExp("^"+IG+BG+FG+HG+"$"),GG=["material","materials","bones","map"];class kG{constructor(e,t,n){const s=n||Dn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=n.length;s!==r;++s)n[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Dn{constructor(e,t,n){this.path=t,this.parsedPath=n||Dn.parseTrackName(t),this.node=Dn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Dn.Composite(e,t,n):new Dn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(zG,"")}static parseTrackName(e){const t=VG.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=n.nodeName.substring(s+1);GG.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let o=0;o<r.length;o++){const c=r[o];if(c.name===t||c.uuid===t)return c;const f=n(c.children);if(f)return f}return null},s=n(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)e[t++]=n[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=Dn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===d){d=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const o=e[s];if(o===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+s+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}f=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(f=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=s;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Dn.Composite=kG;Dn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Dn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Dn.prototype.GetterByBindingType=[Dn.prototype._getValue_direct,Dn.prototype._getValue_array,Dn.prototype._getValue_arrayElement,Dn.prototype._getValue_toArray];Dn.prototype.SetterByBindingTypeAndVersioning=[[Dn.prototype._setValue_direct,Dn.prototype._setValue_direct_setNeedsUpdate,Dn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_array,Dn.prototype._setValue_array_setNeedsUpdate,Dn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_arrayElement,Dn.prototype._setValue_arrayElement_setNeedsUpdate,Dn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Dn.prototype._setValue_fromArray,Dn.prototype._setValue_fromArray_setNeedsUpdate,Dn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class $G{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Da(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,s=arguments.length;n!==s;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,s=this._parsedPaths,r=this._bindings,o=r.length;let c,f=e.length,d=this.nCachedObjects_;for(let m=0,g=arguments.length;m!==g;++m){const v=arguments[m],_=v.uuid;let b=t[_];if(b===void 0){b=f++,t[_]=b,e.push(v);for(let A=0,M=o;A!==M;++A)r[A].push(new Dn(v,n[A],s[A]))}else if(b<d){c=e[b];const A=--d,M=e[A];t[M.uuid]=b,e[b]=M,t[_]=A,e[A]=v;for(let T=0,C=o;T!==C;++T){const D=r[T],N=D[A];let I=D[b];D[b]=N,I===void 0&&(I=new Dn(v,n[T],s[T])),D[A]=I}}else e[b]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_;for(let o=0,c=arguments.length;o!==c;++o){const f=arguments[o],d=f.uuid,m=t[d];if(m!==void 0&&m>=r){const g=r++,v=e[g];t[v.uuid]=m,e[m]=v,t[d]=g,e[g]=f;for(let _=0,b=s;_!==b;++_){const A=n[_],M=A[g],T=A[m];A[m]=M,A[g]=T}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_,o=e.length;for(let c=0,f=arguments.length;c!==f;++c){const d=arguments[c],m=d.uuid,g=t[m];if(g!==void 0)if(delete t[m],g<r){const v=--r,_=e[v],b=--o,A=e[b];t[_.uuid]=g,e[g]=_,t[A.uuid]=v,e[v]=A,e.pop();for(let M=0,T=s;M!==T;++M){const C=n[M],D=C[v],N=C[b];C[g]=D,C[v]=N,C.pop()}}else{const v=--o,_=e[v];v>0&&(t[_.uuid]=g),e[g]=_,e.pop();for(let b=0,A=s;b!==A;++b){const M=n[b];M[g]=M[v],M.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let s=n[e];const r=this._bindings;if(s!==void 0)return r[s];const o=this._paths,c=this._parsedPaths,f=this._objects,d=f.length,m=this.nCachedObjects_,g=new Array(d);s=r.length,n[e]=s,o.push(e),c.push(t),r.push(g);for(let v=m,_=f.length;v!==_;++v){const b=f[v];g[v]=new Dn(b,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const s=this._paths,r=this._parsedPaths,o=this._bindings,c=o.length-1,f=o[c],d=e[c];t[d]=n,o[n]=f,o.pop(),r[n]=r[c],r.pop(),s[n]=s[c],s.pop()}}}class TL{constructor(e,t,n=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=s;const r=t.tracks,o=r.length,c=new Array(o),f={endingStart:Lh,endingEnd:Lh};for(let d=0;d!==o;++d){const m=r[d].createInterpolant(null);c[d]=m,m.settings=f}this._interpolantSettings=f,this._interpolants=c,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=cO,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const s=this._clip.duration,r=e._clip.duration,o=r/s,c=s/r;e.warp(1,o,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const s=this._mixer,r=s.time,o=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=s._lendControlInterpolant(),this._timeScaleInterpolant=c);const f=c.parameterPositions,d=c.sampleValues;return f[0]=r,f[1]=r+n,d[0]=e/o,d[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const f=(e-r)*n;f<0||n===0?t=0:(this._startTime=null,t=n*f)}t*=this._updateTimeScale(e);const o=this._updateTime(t),c=this._updateWeight(e);if(c>0){const f=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case CM:for(let m=0,g=f.length;m!==g;++m)f[m].evaluate(o),d[m].accumulateAdditive(c);break;case F1:default:for(let m=0,g=f.length;m!==g;++m)f[m].evaluate(o),d[m].accumulate(s,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let s=this.time+e,r=this._loopCount;const o=n===uO;if(e===0)return r===-1?s:o&&(r&1)===1?t-s:s;if(n===lO){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),s>=t||s<0){const c=Math.floor(s/t);s-=t*c,r+=Math.abs(c);const f=this.repetitions-r;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const d=e<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=s;if(o&&(r&1)===1)return t-s}return s}_setEndings(e,t,n){const s=this._interpolantSettings;n?(s.endingStart=Uh,s.endingEnd=Uh):(e?s.endingStart=this.zeroSlopeAtStart?Uh:Lh:s.endingStart=P0,t?s.endingEnd=this.zeroSlopeAtEnd?Uh:Lh:s.endingEnd=P0)}_scheduleFading(e,t,n){const s=this._mixer,r=s.time;let o=this._weightInterpolant;o===null&&(o=s._lendControlInterpolant(),this._weightInterpolant=o);const c=o.parameterPositions,f=o.sampleValues;return c[0]=r,f[0]=t,c[1]=r+e,f[1]=n,this}}const XG=new Float32Array(1);class qG extends Yl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,s=e._clip.tracks,r=s.length,o=e._propertyBindings,c=e._interpolants,f=n.uuid,d=this._bindingsByRootAndName;let m=d[f];m===void 0&&(m={},d[f]=m);for(let g=0;g!==r;++g){const v=s[g],_=v.name;let b=m[_];if(b!==void 0)++b.referenceCount,o[g]=b;else{if(b=o[g],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,f,_));continue}const A=t&&t._propertyBindings[g].binding.parsedPath;b=new EL(Dn.create(n,_,A),v.ValueTypeName,v.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,f,_),o[g]=b}c[g].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,n)}const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const s=this._actions,r=this._actionsByClip;let o=r[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const c=o.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=s.length,s.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],s=e._cacheIndex;n._cacheIndex=s,t[s]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,c=o[r],f=c.knownActions,d=f[f.length-1],m=e._byClipCacheIndex;d._byClipCacheIndex=m,f[m]=d,f.pop(),e._byClipCacheIndex=null;const g=c.actionByRoot,v=(e._localRoot||this._root).uuid;delete g[v],f.length===0&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const s=this._bindingsByRootAndName,r=this._bindings;let o=s[t];o===void 0&&(o={},s[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,s=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,c=o[s],f=t[t.length-1],d=e._cacheIndex;f._cacheIndex=d,t[d]=f,t.pop(),delete c[r],Object.keys(c).length===0&&delete o[s]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new KM(new Float32Array(2),new Float32Array(2),1,XG),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const s=t||this._root,r=s.uuid;let o=typeof e=="string"?tm.findByName(s,e):e;const c=o!==null?o.uuid:e,f=this._actionsByClip[c];let d=null;if(n===void 0&&(o!==null?n=o.blendMode:n=F1),f!==void 0){const g=f.actionByRoot[r];if(g!==void 0&&g.blendMode===n)return g;d=f.knownActions[0],o===null&&(o=d._clip)}if(o===null)return null;const m=new TL(this,o,t,n);return this._bindAction(m,d),this._addInactiveAction(m,c,r),m}existingAction(e,t){const n=t||this._root,s=n.uuid,r=typeof e=="string"?tm.findByName(n,e):e,o=r?r.uuid:e,c=this._actionsByClip[o];return c!==void 0&&c.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,s=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let d=0;d!==n;++d)t[d]._update(s,e,r,o);const c=this._bindings,f=this._nActiveBindings;for(let d=0;d!==f;++d)c[d].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,s=this._actionsByClip,r=s[n];if(r!==void 0){const o=r.knownActions;for(let c=0,f=o.length;c!==f;++c){const d=o[c];this._deactivateAction(d);const m=d._cacheIndex,g=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,g._cacheIndex=m,t[m]=g,t.pop(),this._removeInactiveBindingsForAction(d)}delete s[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const c=n[o].actionByRoot,f=c[t];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const o in r){const c=r[o];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class jG extends H1{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new V1(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class YG extends H1{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isRenderTargetArray=!0,this.depth=n,this.texture=new iy(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class lA{constructor(e){this.value=e}clone(){return new lA(this.value.clone===void 0?this.value:this.value.clone())}}let WG=0;class ZG extends Yl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:WG++}),this.name="",this.usage=B0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,s=t.length;n<s;n++){const r=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<r.length;o++)this.uniforms.push(r[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class KG extends ry{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class QG{constructor(e,t,n,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const cC=new Gt;class ML{constructor(e,t,n=0,s=1/0){this.ray=new mm(e,t),this.near=n,this.far=s,this.camera=null,this.layers=new Kp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return cC.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(cC),this}intersectObject(e,t=!0,n=[]){return PT(e,this,n,t),n.sort(uC),n}intersectObjects(e,t=!0,n=[]){for(let s=0,r=e.length;s<r;s++)PT(e[s],this,n,t);return n.sort(uC),n}}function uC(i,e){return i.distance-e.distance}function PT(i,e,t,n){let s=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let o=0,c=r.length;o<c;o++)PT(r[o],e,t,!0)}}class JG{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Jt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Jt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class e9{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}let t9=class AL{constructor(e,t,n,s){AL.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,s){const r=this.elements;return r[0]=e,r[2]=t,r[1]=n,r[3]=s,this}};const fC=new Xe;class n9{constructor(e=new Xe(1/0,1/0),t=new Xe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=fC.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fC).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const hC=new K,Px=new K;class i9{constructor(e=new K,t=new K){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){hC.subVectors(e,this.start),Px.subVectors(this.end,this.start);const n=Px.dot(Px);let r=Px.dot(hC)/n;return t&&(r=Jt(r,0,1)),r}closestPointToPoint(e,t,n){const s=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const dC=new K;class s9 extends Rn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new rn,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,c=1,f=32;o<f;o++,c++){const d=o/f*Math.PI*2,m=c/f*Math.PI*2;s.push(Math.cos(d),Math.sin(d),1,Math.cos(m),Math.sin(m),1)}n.setAttribute("position",new St(s,3));const r=new mr({fog:!1,toneMapped:!1});this.cone=new Jo(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),dC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(dC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ku=new K,Ix=new Gt,hE=new Gt;class r9 extends Jo{constructor(e){const t=wL(e),n=new rn,s=[],r=[],o=new lt(0,0,1),c=new lt(0,1,0);for(let d=0;d<t.length;d++){const m=t[d];m.parent&&m.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(o.r,o.g,o.b),r.push(c.r,c.g,c.b))}n.setAttribute("position",new St(s,3)),n.setAttribute("color",new St(r,3));const f=new mr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,f),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,s=n.getAttribute("position");hE.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<t.length;r++){const c=t[r];c.parent&&c.parent.isBone&&(Ix.multiplyMatrices(hE,c.matrixWorld),Ku.setFromMatrixPosition(Ix),s.setXYZ(o,Ku.x,Ku.y,Ku.z),Ix.multiplyMatrices(hE,c.parent.matrixWorld),Ku.setFromMatrixPosition(Ix),s.setXYZ(o+1,Ku.x,Ku.y,Ku.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function wL(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...wL(i.children[t]));return e}class a9 extends Yi{constructor(e,t,n){const s=new uy(t,4,2),r=new Na({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const o9=new K,pC=new lt,mC=new lt;class l9 extends Rn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new cy(t);s.rotateY(Math.PI*.5),this.material=new Na({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),o=new Float32Array(r.count*3);s.setAttribute("color",new Fn(o,3)),this.add(new Yi(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");pC.copy(this.light.color),mC.copy(this.light.groundColor);for(let n=0,s=t.count;n<s;n++){const r=n<s/2?pC:mC;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(o9.setFromMatrixPosition(this.light.matrixWorld).negate())}}class c9 extends Jo{constructor(e=10,t=10,n=4473924,s=8947848){n=new lt(n),s=new lt(s);const r=t/2,o=e/t,c=e/2,f=[],d=[];for(let v=0,_=0,b=-c;v<=t;v++,b+=o){f.push(-c,0,b,c,0,b),f.push(b,0,-c,b,0,c);const A=v===r?n:s;A.toArray(d,_),_+=3,A.toArray(d,_),_+=3,A.toArray(d,_),_+=3,A.toArray(d,_),_+=3}const m=new rn;m.setAttribute("position",new St(f,3)),m.setAttribute("color",new St(d,3));const g=new mr({vertexColors:!0,toneMapped:!1});super(m,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class u9 extends Jo{constructor(e=10,t=16,n=8,s=64,r=4473924,o=8947848){r=new lt(r),o=new lt(o);const c=[],f=[];if(t>1)for(let g=0;g<t;g++){const v=g/t*(Math.PI*2),_=Math.sin(v)*e,b=Math.cos(v)*e;c.push(0,0,0),c.push(_,0,b);const A=g&1?r:o;f.push(A.r,A.g,A.b),f.push(A.r,A.g,A.b)}for(let g=0;g<n;g++){const v=g&1?r:o,_=e-e/n*g;for(let b=0;b<s;b++){let A=b/s*(Math.PI*2),M=Math.sin(A)*_,T=Math.cos(A)*_;c.push(M,0,T),f.push(v.r,v.g,v.b),A=(b+1)/s*(Math.PI*2),M=Math.sin(A)*_,T=Math.cos(A)*_,c.push(M,0,T),f.push(v.r,v.g,v.b)}}const d=new rn;d.setAttribute("position",new St(c,3)),d.setAttribute("color",new St(f,3));const m=new mr({vertexColors:!0,toneMapped:!1});super(d,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const gC=new K,Bx=new K,yC=new K;class f9 extends Rn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new rn;s.setAttribute("position",new St([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new mr({fog:!1,toneMapped:!1});this.lightPlane=new jc(s,r),this.add(this.lightPlane),s=new rn,s.setAttribute("position",new St([0,0,0,0,0,1],3)),this.targetLine=new jc(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),gC.setFromMatrixPosition(this.light.matrixWorld),Bx.setFromMatrixPosition(this.light.target.matrixWorld),yC.subVectors(Bx,gC),this.lightPlane.lookAt(Bx),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Bx),this.targetLine.scale.z=yC.length()}}const Fx=new K,Ii=new G1;class h9 extends Jo{constructor(e){const t=new rn,n=new mr({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],o={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(b,A){f(b),f(A)}function f(b){s.push(0,0,0),r.push(0,0,0),o[b]===void 0&&(o[b]=[]),o[b].push(s.length/3-1)}t.setAttribute("position",new St(s,3)),t.setAttribute("color",new St(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const d=new lt(16755200),m=new lt(16711680),g=new lt(43775),v=new lt(16777215),_=new lt(3355443);this.setColors(d,m,g,v,_)}setColors(e,t,n,s,r){const c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,s.r,s.g,s.b),c.setXYZ(39,s.r,s.g,s.b),c.setXYZ(40,r.r,r.g,r.b),c.setXYZ(41,r.r,r.g,r.b),c.setXYZ(42,r.r,r.g,r.b),c.setXYZ(43,r.r,r.g,r.b),c.setXYZ(44,r.r,r.g,r.b),c.setXYZ(45,r.r,r.g,r.b),c.setXYZ(46,r.r,r.g,r.b),c.setXYZ(47,r.r,r.g,r.b),c.setXYZ(48,r.r,r.g,r.b),c.setXYZ(49,r.r,r.g,r.b),c.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,s=1;Ii.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===jo?-1:0;qi("c",t,e,Ii,0,0,r),qi("t",t,e,Ii,0,0,1),qi("n1",t,e,Ii,-1,-1,r),qi("n2",t,e,Ii,n,-1,r),qi("n3",t,e,Ii,-1,s,r),qi("n4",t,e,Ii,n,s,r),qi("f1",t,e,Ii,-1,-1,1),qi("f2",t,e,Ii,n,-1,1),qi("f3",t,e,Ii,-1,s,1),qi("f4",t,e,Ii,n,s,1),qi("u1",t,e,Ii,n*.7,s*1.1,r),qi("u2",t,e,Ii,-1*.7,s*1.1,r),qi("u3",t,e,Ii,0,s*2,r),qi("cf1",t,e,Ii,-1,0,1),qi("cf2",t,e,Ii,n,0,1),qi("cf3",t,e,Ii,0,-1,1),qi("cf4",t,e,Ii,0,s,1),qi("cn1",t,e,Ii,-1,0,r),qi("cn2",t,e,Ii,n,0,r),qi("cn3",t,e,Ii,0,-1,r),qi("cn4",t,e,Ii,0,s,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function qi(i,e,t,n,s,r,o){Fx.set(s,r,o).unproject(n);const c=e[i];if(c!==void 0){const f=t.getAttribute("position");for(let d=0,m=c.length;d<m;d++)f.setXYZ(c[d],Fx.x,Fx.y,Fx.z)}}const Hx=new hr;class d9 extends Jo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),r=new rn;r.setIndex(new Fn(n,1)),r.setAttribute("position",new Fn(s,3)),super(r,new mr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Hx.setFromObject(this.object),Hx.isEmpty())return;const e=Hx.min,t=Hx.max,n=this.geometry.attributes.position,s=n.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=e.x,s[4]=t.y,s[5]=t.z,s[6]=e.x,s[7]=e.y,s[8]=t.z,s[9]=t.x,s[10]=e.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=e.z,s[15]=e.x,s[16]=t.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=t.x,s[22]=e.y,s[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class p9 extends Jo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new rn;r.setIndex(new Fn(n,1)),r.setAttribute("position",new St(s,3)),super(r,new mr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class m9 extends jc{constructor(e,t=1,n=16776960){const s=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new rn;o.setAttribute("position",new St(r,3)),o.computeBoundingSphere(),super(o,new mr({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],f=new rn;f.setAttribute("position",new St(c,3)),f.computeBoundingSphere(),this.add(new Yi(f,new Na({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const vC=new K;let Vx,dE;class g9 extends Rn{constructor(e=new K(0,0,1),t=new K(0,0,0),n=1,s=16776960,r=n*.2,o=r*.2){super(),this.type="ArrowHelper",Vx===void 0&&(Vx=new rn,Vx.setAttribute("position",new St([0,0,0,0,1,0],3)),dE=new gm(0,.5,1,5,1),dE.translate(0,-.5,0)),this.position.copy(t),this.line=new jc(Vx,new mr({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Yi(dE,new Na({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{vC.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(vC,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class y9 extends Jo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new rn;s.setAttribute("position",new St(t,3)),s.setAttribute("color",new St(n,3));const r=new mr({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(e,t,n){const s=new lt,r=this.geometry.attributes.color.array;return s.set(e),s.toArray(r,0),s.toArray(r,3),s.set(t),s.toArray(r,6),s.toArray(r,9),s.set(n),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class v9{constructor(){this.type="ShapePath",this.color=new lt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new V0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,s){return this.currentPath.quadraticCurveTo(e,t,n,s),this}bezierCurveTo(e,t,n,s,r,o){return this.currentPath.bezierCurveTo(e,t,n,s,r,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(T){const C=[];for(let D=0,N=T.length;D<N;D++){const I=T[D],L=new Vh;L.curves=I.curves,C.push(L)}return C}function n(T,C){const D=C.length;let N=!1;for(let I=D-1,L=0;L<D;I=L++){let P=C[I],G=C[L],B=G.x-P.x,U=G.y-P.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(P=C[L],B=-B,G=C[I],U=-U),T.y<P.y||T.y>G.y)continue;if(T.y===P.y){if(T.x===P.x)return!0}else{const j=U*(T.x-P.x)-B*(T.y-P.y);if(j===0)return!0;if(j<0)continue;N=!N}}else{if(T.y!==P.y)continue;if(G.x<=T.x&&T.x<=P.x||P.x<=T.x&&T.x<=G.x)return!0}}return N}const s=Vl.isClockWise,r=this.subPaths;if(r.length===0)return[];let o,c,f;const d=[];if(r.length===1)return c=r[0],f=new Vh,f.curves=c.curves,d.push(f),d;let m=!s(r[0].getPoints());m=e?!m:m;const g=[],v=[];let _=[],b=0,A;v[b]=void 0,_[b]=[];for(let T=0,C=r.length;T<C;T++)c=r[T],A=c.getPoints(),o=s(A),o=e?!o:o,o?(!m&&v[b]&&b++,v[b]={s:new Vh,p:A},v[b].s.curves=c.curves,m&&b++,_[b]=[]):_[b].push({h:c,p:A[0]});if(!v[0])return t(r);if(v.length>1){let T=!1,C=0;for(let D=0,N=v.length;D<N;D++)g[D]=[];for(let D=0,N=v.length;D<N;D++){const I=_[D];for(let L=0;L<I.length;L++){const P=I[L];let G=!0;for(let B=0;B<v.length;B++)n(P.p,v[B].p)&&(D!==B&&C++,G?(G=!1,g[B].push(P)):T=!0);G&&g[D].push(P)}}C>0&&T===!1&&(_=g)}let M;for(let T=0,C=v.length;T<C;T++){f=v[T].s,d.push(f),M=_[T];for(let D=0,N=M.length;D<N;D++)f.holes.push(M[D].h)}return d}}class x9 extends Yl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function _9(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function b9(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function S9(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function IT(i,e,t,n){const s=E9(n);switch(t){case EM:return i*e;case MM:return i*e;case AM:return i*e*2;case P1:return i*e/s.components*s.byteLength;case ny:return i*e/s.components*s.byteLength;case wM:return i*e*2/s.components*s.byteLength;case I1:return i*e*2/s.components*s.byteLength;case TM:return i*e*3/s.components*s.byteLength;case ur:return i*e*4/s.components*s.byteLength;case B1:return i*e*4/s.components*s.byteLength;case x0:case _0:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case b0:case S0:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case P_:case B_:return Math.max(i,16)*Math.max(e,8)/4;case z_:case I_:return Math.max(i,8)*Math.max(e,8)/2;case F_:case H_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case V_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case G_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case k_:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case $_:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case X_:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case q_:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case j_:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case Y_:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case W_:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case Z_:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case K_:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case Q_:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case J_:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case e1:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case t1:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case E0:case n1:case i1:return Math.ceil(i/4)*Math.ceil(e/4)*16;case RM:case s1:return Math.ceil(i/4)*Math.ceil(e/4)*8;case r1:case a1:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function E9(i){switch(i){case Wo:case _M:return{byteLength:1,components:1};case $p:case bM:case pm:return{byteLength:2,components:1};case U1:case z1:return{byteLength:2,components:4};case qc:case L1:case aa:return{byteLength:4,components:1};case SM:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class T9{static contain(e,t){return _9(e,t)}static cover(e,t){return b9(e,t)}static fill(e){return S9(e)}static getByteLength(e,t,n,s){return IT(e,t,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:C1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=C1);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function RL(){let i=null,e=!1,t=null,n=null;function s(r,o){t(r,o),n=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){i=r}}}function M9(i){const e=new WeakMap;function t(c,f){const d=c.array,m=c.usage,g=d.byteLength,v=i.createBuffer();i.bindBuffer(f,v),i.bufferData(f,d,m),c.onUploadCallback();let _;if(d instanceof Float32Array)_=i.FLOAT;else if(d instanceof Uint16Array)c.isFloat16BufferAttribute?_=i.HALF_FLOAT:_=i.UNSIGNED_SHORT;else if(d instanceof Int16Array)_=i.SHORT;else if(d instanceof Uint32Array)_=i.UNSIGNED_INT;else if(d instanceof Int32Array)_=i.INT;else if(d instanceof Int8Array)_=i.BYTE;else if(d instanceof Uint8Array)_=i.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)_=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:v,type:_,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:g}}function n(c,f,d){const m=f.array,g=f.updateRanges;if(i.bindBuffer(d,c),g.length===0)i.bufferSubData(d,0,m);else{g.sort((_,b)=>_.start-b.start);let v=0;for(let _=1;_<g.length;_++){const b=g[v],A=g[_];A.start<=b.start+b.count+1?b.count=Math.max(b.count,A.start+A.count-b.start):(++v,g[v]=A)}g.length=v+1;for(let _=0,b=g.length;_<b;_++){const A=g[_];i.bufferSubData(d,A.start*m.BYTES_PER_ELEMENT,m,A.start,A.count)}f.clearUpdateRanges()}f.onUploadCallback()}function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function r(c){c.isInterleavedBufferAttribute&&(c=c.data);const f=e.get(c);f&&(i.deleteBuffer(f.buffer),e.delete(c))}function o(c,f){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const m=e.get(c);(!m||m.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const d=e.get(c);if(d===void 0)e.set(c,t(c,f));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(d.buffer,c,f),d.version=c.version}}return{get:s,remove:r,update:o}}var A9=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,w9=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,R9=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,C9=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,N9=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,D9=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,O9=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,L9=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,U9=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,z9=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,P9=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,I9=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,B9=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,F9=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,H9=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,V9=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,G9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,k9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,$9=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,X9=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,q9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,j9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Y9=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,W9=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Z9=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,K9=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Q9=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,J9=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,e7=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,t7=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,n7="gl_FragColor = linearToOutputTexel( gl_FragColor );",i7=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,s7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,r7=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,a7=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,o7=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,l7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,c7=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,u7=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,f7=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,h7=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,d7=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,p7=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,m7=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,g7=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,y7=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,v7=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,x7=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,_7=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,b7=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,S7=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,E7=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,T7=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,M7=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,A7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,w7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,R7=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,C7=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,N7=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,D7=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,O7=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,L7=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,U7=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,z7=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,P7=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,I7=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,B7=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,F7=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,H7=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,V7=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,G7=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,k7=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,$7=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,X7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,q7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,j7=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Y7=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,W7=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Z7=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,K7=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Q7=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,J7=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,ek=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,tk=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,nk=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ik=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,sk=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,rk=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ak=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,ok=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,lk=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,ck=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,uk=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,fk=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,hk=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,dk=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,pk=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,mk=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,gk=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,yk=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,vk=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,xk=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,_k=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,bk=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Sk=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ek=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Tk=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Mk=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Ak=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Rk=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ck=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Nk=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Dk=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Ok=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Lk=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Uk=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,zk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Pk=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ik=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Bk=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Fk=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Hk=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vk=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gk=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kk=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,$k=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xk=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,qk=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,jk=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Yk=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wk=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Zk=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kk=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qk=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jk=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,e$=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,t$=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,n$=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,i$=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,s$=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,on={alphahash_fragment:A9,alphahash_pars_fragment:w9,alphamap_fragment:R9,alphamap_pars_fragment:C9,alphatest_fragment:N9,alphatest_pars_fragment:D9,aomap_fragment:O9,aomap_pars_fragment:L9,batching_pars_vertex:U9,batching_vertex:z9,begin_vertex:P9,beginnormal_vertex:I9,bsdfs:B9,iridescence_fragment:F9,bumpmap_pars_fragment:H9,clipping_planes_fragment:V9,clipping_planes_pars_fragment:G9,clipping_planes_pars_vertex:k9,clipping_planes_vertex:$9,color_fragment:X9,color_pars_fragment:q9,color_pars_vertex:j9,color_vertex:Y9,common:W9,cube_uv_reflection_fragment:Z9,defaultnormal_vertex:K9,displacementmap_pars_vertex:Q9,displacementmap_vertex:J9,emissivemap_fragment:e7,emissivemap_pars_fragment:t7,colorspace_fragment:n7,colorspace_pars_fragment:i7,envmap_fragment:s7,envmap_common_pars_fragment:r7,envmap_pars_fragment:a7,envmap_pars_vertex:o7,envmap_physical_pars_fragment:v7,envmap_vertex:l7,fog_vertex:c7,fog_pars_vertex:u7,fog_fragment:f7,fog_pars_fragment:h7,gradientmap_pars_fragment:d7,lightmap_pars_fragment:p7,lights_lambert_fragment:m7,lights_lambert_pars_fragment:g7,lights_pars_begin:y7,lights_toon_fragment:x7,lights_toon_pars_fragment:_7,lights_phong_fragment:b7,lights_phong_pars_fragment:S7,lights_physical_fragment:E7,lights_physical_pars_fragment:T7,lights_fragment_begin:M7,lights_fragment_maps:A7,lights_fragment_end:w7,logdepthbuf_fragment:R7,logdepthbuf_pars_fragment:C7,logdepthbuf_pars_vertex:N7,logdepthbuf_vertex:D7,map_fragment:O7,map_pars_fragment:L7,map_particle_fragment:U7,map_particle_pars_fragment:z7,metalnessmap_fragment:P7,metalnessmap_pars_fragment:I7,morphinstance_vertex:B7,morphcolor_vertex:F7,morphnormal_vertex:H7,morphtarget_pars_vertex:V7,morphtarget_vertex:G7,normal_fragment_begin:k7,normal_fragment_maps:$7,normal_pars_fragment:X7,normal_pars_vertex:q7,normal_vertex:j7,normalmap_pars_fragment:Y7,clearcoat_normal_fragment_begin:W7,clearcoat_normal_fragment_maps:Z7,clearcoat_pars_fragment:K7,iridescence_pars_fragment:Q7,opaque_fragment:J7,packing:ek,premultiplied_alpha_fragment:tk,project_vertex:nk,dithering_fragment:ik,dithering_pars_fragment:sk,roughnessmap_fragment:rk,roughnessmap_pars_fragment:ak,shadowmap_pars_fragment:ok,shadowmap_pars_vertex:lk,shadowmap_vertex:ck,shadowmask_pars_fragment:uk,skinbase_vertex:fk,skinning_pars_vertex:hk,skinning_vertex:dk,skinnormal_vertex:pk,specularmap_fragment:mk,specularmap_pars_fragment:gk,tonemapping_fragment:yk,tonemapping_pars_fragment:vk,transmission_fragment:xk,transmission_pars_fragment:_k,uv_pars_fragment:bk,uv_pars_vertex:Sk,uv_vertex:Ek,worldpos_vertex:Tk,background_vert:Mk,background_frag:Ak,backgroundCube_vert:wk,backgroundCube_frag:Rk,cube_vert:Ck,cube_frag:Nk,depth_vert:Dk,depth_frag:Ok,distanceRGBA_vert:Lk,distanceRGBA_frag:Uk,equirect_vert:zk,equirect_frag:Pk,linedashed_vert:Ik,linedashed_frag:Bk,meshbasic_vert:Fk,meshbasic_frag:Hk,meshlambert_vert:Vk,meshlambert_frag:Gk,meshmatcap_vert:kk,meshmatcap_frag:$k,meshnormal_vert:Xk,meshnormal_frag:qk,meshphong_vert:jk,meshphong_frag:Yk,meshphysical_vert:Wk,meshphysical_frag:Zk,meshtoon_vert:Kk,meshtoon_frag:Qk,points_vert:Jk,points_frag:e$,shadow_vert:t$,shadow_frag:n$,sprite_vert:i$,sprite_frag:s$},dt={common:{diffuse:{value:new lt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ln},alphaMap:{value:null},alphaMapTransform:{value:new ln},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ln}},envmap:{envMap:{value:null},envMapRotation:{value:new ln},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ln}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ln}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ln},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ln},normalScale:{value:new Xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ln},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ln}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ln}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ln}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new lt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new lt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ln},alphaTest:{value:0},uvTransform:{value:new ln}},sprite:{diffuse:{value:new lt(16777215)},opacity:{value:1},center:{value:new Xe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ln},alphaMap:{value:null},alphaMapTransform:{value:new ln},alphaTest:{value:0}}},$o={basic:{uniforms:zr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.fog]),vertexShader:on.meshbasic_vert,fragmentShader:on.meshbasic_frag},lambert:{uniforms:zr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new lt(0)}}]),vertexShader:on.meshlambert_vert,fragmentShader:on.meshlambert_frag},phong:{uniforms:zr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new lt(0)},specular:{value:new lt(1118481)},shininess:{value:30}}]),vertexShader:on.meshphong_vert,fragmentShader:on.meshphong_frag},standard:{uniforms:zr([dt.common,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.roughnessmap,dt.metalnessmap,dt.fog,dt.lights,{emissive:{value:new lt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag},toon:{uniforms:zr([dt.common,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.gradientmap,dt.fog,dt.lights,{emissive:{value:new lt(0)}}]),vertexShader:on.meshtoon_vert,fragmentShader:on.meshtoon_frag},matcap:{uniforms:zr([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,{matcap:{value:null}}]),vertexShader:on.meshmatcap_vert,fragmentShader:on.meshmatcap_frag},points:{uniforms:zr([dt.points,dt.fog]),vertexShader:on.points_vert,fragmentShader:on.points_frag},dashed:{uniforms:zr([dt.common,dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:on.linedashed_vert,fragmentShader:on.linedashed_frag},depth:{uniforms:zr([dt.common,dt.displacementmap]),vertexShader:on.depth_vert,fragmentShader:on.depth_frag},normal:{uniforms:zr([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,{opacity:{value:1}}]),vertexShader:on.meshnormal_vert,fragmentShader:on.meshnormal_frag},sprite:{uniforms:zr([dt.sprite,dt.fog]),vertexShader:on.sprite_vert,fragmentShader:on.sprite_frag},background:{uniforms:{uvTransform:{value:new ln},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:on.background_vert,fragmentShader:on.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ln}},vertexShader:on.backgroundCube_vert,fragmentShader:on.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:on.cube_vert,fragmentShader:on.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:on.equirect_vert,fragmentShader:on.equirect_frag},distanceRGBA:{uniforms:zr([dt.common,dt.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:on.distanceRGBA_vert,fragmentShader:on.distanceRGBA_frag},shadow:{uniforms:zr([dt.lights,dt.fog,{color:{value:new lt(0)},opacity:{value:1}}]),vertexShader:on.shadow_vert,fragmentShader:on.shadow_frag}};$o.physical={uniforms:zr([$o.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ln},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ln},clearcoatNormalScale:{value:new Xe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ln},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ln},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ln},sheen:{value:0},sheenColor:{value:new lt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ln},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ln},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ln},transmissionSamplerSize:{value:new Xe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ln},attenuationDistance:{value:0},attenuationColor:{value:new lt(0)},specularColor:{value:new lt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ln},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ln},anisotropyVector:{value:new Xe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ln}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag};const Gx={r:0,b:0,g:0},Eh=new Zo,r$=new Gt;function a$(i,e,t,n,s,r,o){const c=new lt(0);let f=r===!0?0:1,d,m,g=null,v=0,_=null;function b(D){let N=D.isScene===!0?D.background:null;return N&&N.isTexture&&(N=(D.backgroundBlurriness>0?t:e).get(N)),N}function A(D){let N=!1;const I=b(D);I===null?T(c,f):I&&I.isColor&&(T(I,1),N=!0);const L=i.xr.getEnvironmentBlendMode();L==="additive"?n.buffers.color.setClear(0,0,0,1,o):L==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||N)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function M(D,N){const I=b(N);I&&(I.isCubeTexture||I.mapping===dm)?(m===void 0&&(m=new Yi(new Jh(1,1,1),new La({name:"BackgroundCubeMaterial",uniforms:Qp($o.backgroundCube.uniforms),vertexShader:$o.backgroundCube.vertexShader,fragmentShader:$o.backgroundCube.fragmentShader,side:Hr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(L,P,G){this.matrixWorld.copyPosition(G.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(m)),Eh.copy(N.backgroundRotation),Eh.x*=-1,Eh.y*=-1,Eh.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(Eh.y*=-1,Eh.z*=-1),m.material.uniforms.envMap.value=I,m.material.uniforms.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=N.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(r$.makeRotationFromEuler(Eh)),m.material.toneMapped=vn.getTransfer(I.colorSpace)!==Wn,(g!==I||v!==I.version||_!==i.toneMapping)&&(m.material.needsUpdate=!0,g=I,v=I.version,_=i.toneMapping),m.layers.enableAll(),D.unshift(m,m.geometry,m.material,0,0,null)):I&&I.isTexture&&(d===void 0&&(d=new Yi(new ym(2,2),new La({name:"BackgroundMaterial",uniforms:Qp($o.background.uniforms),vertexShader:$o.background.vertexShader,fragmentShader:$o.background.fragmentShader,side:Xl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(d)),d.material.uniforms.t2D.value=I,d.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,d.material.toneMapped=vn.getTransfer(I.colorSpace)!==Wn,I.matrixAutoUpdate===!0&&I.updateMatrix(),d.material.uniforms.uvTransform.value.copy(I.matrix),(g!==I||v!==I.version||_!==i.toneMapping)&&(d.material.needsUpdate=!0,g=I,v=I.version,_=i.toneMapping),d.layers.enableAll(),D.unshift(d,d.geometry,d.material,0,0,null))}function T(D,N){D.getRGB(Gx,OO(i)),n.buffers.color.setClear(Gx.r,Gx.g,Gx.b,N,o)}function C(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return c},setClearColor:function(D,N=1){c.set(D),f=N,T(c,f)},getClearAlpha:function(){return f},setClearAlpha:function(D){f=D,T(c,f)},render:A,addToRenderList:M,dispose:C}}function o$(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=v(null);let r=s,o=!1;function c(U,j,ae,ne,de){let he=!1;const F=g(ne,ae,j);r!==F&&(r=F,d(r.object)),he=_(U,ne,ae,de),he&&b(U,ne,ae,de),de!==null&&e.update(de,i.ELEMENT_ARRAY_BUFFER),(he||o)&&(o=!1,N(U,j,ae,ne),de!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(de).buffer))}function f(){return i.createVertexArray()}function d(U){return i.bindVertexArray(U)}function m(U){return i.deleteVertexArray(U)}function g(U,j,ae){const ne=ae.wireframe===!0;let de=n[U.id];de===void 0&&(de={},n[U.id]=de);let he=de[j.id];he===void 0&&(he={},de[j.id]=he);let F=he[ne];return F===void 0&&(F=v(f()),he[ne]=F),F}function v(U){const j=[],ae=[],ne=[];for(let de=0;de<t;de++)j[de]=0,ae[de]=0,ne[de]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:ae,attributeDivisors:ne,object:U,attributes:{},index:null}}function _(U,j,ae,ne){const de=r.attributes,he=j.attributes;let F=0;const W=ae.getAttributes();for(const Z in W)if(W[Z].location>=0){const X=de[Z];let ie=he[Z];if(ie===void 0&&(Z==="instanceMatrix"&&U.instanceMatrix&&(ie=U.instanceMatrix),Z==="instanceColor"&&U.instanceColor&&(ie=U.instanceColor)),X===void 0||X.attribute!==ie||ie&&X.data!==ie.data)return!0;F++}return r.attributesNum!==F||r.index!==ne}function b(U,j,ae,ne){const de={},he=j.attributes;let F=0;const W=ae.getAttributes();for(const Z in W)if(W[Z].location>=0){let X=he[Z];X===void 0&&(Z==="instanceMatrix"&&U.instanceMatrix&&(X=U.instanceMatrix),Z==="instanceColor"&&U.instanceColor&&(X=U.instanceColor));const ie={};ie.attribute=X,X&&X.data&&(ie.data=X.data),de[Z]=ie,F++}r.attributes=de,r.attributesNum=F,r.index=ne}function A(){const U=r.newAttributes;for(let j=0,ae=U.length;j<ae;j++)U[j]=0}function M(U){T(U,0)}function T(U,j){const ae=r.newAttributes,ne=r.enabledAttributes,de=r.attributeDivisors;ae[U]=1,ne[U]===0&&(i.enableVertexAttribArray(U),ne[U]=1),de[U]!==j&&(i.vertexAttribDivisor(U,j),de[U]=j)}function C(){const U=r.newAttributes,j=r.enabledAttributes;for(let ae=0,ne=j.length;ae<ne;ae++)j[ae]!==U[ae]&&(i.disableVertexAttribArray(ae),j[ae]=0)}function D(U,j,ae,ne,de,he,F){F===!0?i.vertexAttribIPointer(U,j,ae,de,he):i.vertexAttribPointer(U,j,ae,ne,de,he)}function N(U,j,ae,ne){A();const de=ne.attributes,he=ae.getAttributes(),F=j.defaultAttributeValues;for(const W in he){const Z=he[W];if(Z.location>=0){let fe=de[W];if(fe===void 0&&(W==="instanceMatrix"&&U.instanceMatrix&&(fe=U.instanceMatrix),W==="instanceColor"&&U.instanceColor&&(fe=U.instanceColor)),fe!==void 0){const X=fe.normalized,ie=fe.itemSize,Ee=e.get(fe);if(Ee===void 0)continue;const Ue=Ee.buffer,re=Ee.type,Ce=Ee.bytesPerElement,Be=re===i.INT||re===i.UNSIGNED_INT||fe.gpuType===L1;if(fe.isInterleavedBufferAttribute){const qe=fe.data,Ke=qe.stride,Ct=fe.offset;if(qe.isInstancedInterleavedBuffer){for(let bt=0;bt<Z.locationSize;bt++)T(Z.location+bt,qe.meshPerAttribute);U.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=qe.meshPerAttribute*qe.count)}else for(let bt=0;bt<Z.locationSize;bt++)M(Z.location+bt);i.bindBuffer(i.ARRAY_BUFFER,Ue);for(let bt=0;bt<Z.locationSize;bt++)D(Z.location+bt,ie/Z.locationSize,re,X,Ke*Ce,(Ct+ie/Z.locationSize*bt)*Ce,Be)}else{if(fe.isInstancedBufferAttribute){for(let qe=0;qe<Z.locationSize;qe++)T(Z.location+qe,fe.meshPerAttribute);U.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=fe.meshPerAttribute*fe.count)}else for(let qe=0;qe<Z.locationSize;qe++)M(Z.location+qe);i.bindBuffer(i.ARRAY_BUFFER,Ue);for(let qe=0;qe<Z.locationSize;qe++)D(Z.location+qe,ie/Z.locationSize,re,X,ie*Ce,ie/Z.locationSize*qe*Ce,Be)}}else if(F!==void 0){const X=F[W];if(X!==void 0)switch(X.length){case 2:i.vertexAttrib2fv(Z.location,X);break;case 3:i.vertexAttrib3fv(Z.location,X);break;case 4:i.vertexAttrib4fv(Z.location,X);break;default:i.vertexAttrib1fv(Z.location,X)}}}}C()}function I(){G();for(const U in n){const j=n[U];for(const ae in j){const ne=j[ae];for(const de in ne)m(ne[de].object),delete ne[de];delete j[ae]}delete n[U]}}function L(U){if(n[U.id]===void 0)return;const j=n[U.id];for(const ae in j){const ne=j[ae];for(const de in ne)m(ne[de].object),delete ne[de];delete j[ae]}delete n[U.id]}function P(U){for(const j in n){const ae=n[j];if(ae[U.id]===void 0)continue;const ne=ae[U.id];for(const de in ne)m(ne[de].object),delete ne[de];delete ae[U.id]}}function G(){B(),o=!0,r!==s&&(r=s,d(r.object))}function B(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:c,reset:G,resetDefaultState:B,dispose:I,releaseStatesOfGeometry:L,releaseStatesOfProgram:P,initAttributes:A,enableAttribute:M,disableUnusedAttributes:C}}function l$(i,e,t){let n;function s(d){n=d}function r(d,m){i.drawArrays(n,d,m),t.update(m,n,1)}function o(d,m,g){g!==0&&(i.drawArraysInstanced(n,d,m,g),t.update(m,n,g))}function c(d,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,d,0,m,0,g);let _=0;for(let b=0;b<g;b++)_+=m[b];t.update(_,n,1)}function f(d,m,g,v){if(g===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let b=0;b<d.length;b++)o(d[b],m[b],v[b]);else{_.multiDrawArraysInstancedWEBGL(n,d,0,m,0,v,0,g);let b=0;for(let A=0;A<g;A++)b+=m[A]*v[A];t.update(b,n,1)}}this.setMode=s,this.render=r,this.renderInstances=o,this.renderMultiDraw=c,this.renderMultiDrawInstances=f}function c$(i,e,t,n){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function o(P){return!(P!==ur&&n.convert(P)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(P){const G=P===pm&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Wo&&n.convert(P)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==aa&&!G)}function f(P){if(P==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp";const m=f(d);m!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",m,"instead."),d=m);const g=t.logarithmicDepthBuffer===!0,v=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),_=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),b=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=i.getParameter(i.MAX_TEXTURE_SIZE),M=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),T=i.getParameter(i.MAX_VERTEX_ATTRIBS),C=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),D=i.getParameter(i.MAX_VARYING_VECTORS),N=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),I=b>0,L=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:f,textureFormatReadable:o,textureTypeReadable:c,precision:d,logarithmicDepthBuffer:g,reverseDepthBuffer:v,maxTextures:_,maxVertexTextures:b,maxTextureSize:A,maxCubemapSize:M,maxAttributes:T,maxVertexUniforms:C,maxVaryings:D,maxFragmentUniforms:N,vertexTextures:I,maxSamples:L}}function u$(i){const e=this;let t=null,n=0,s=!1,r=!1;const o=new rf,c=new ln,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const _=g.length!==0||v||n!==0||s;return s=v,n=g.length,_},this.beginShadows=function(){r=!0,m(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(g,v){t=m(g,v,0)},this.setState=function(g,v,_){const b=g.clippingPlanes,A=g.clipIntersection,M=g.clipShadows,T=i.get(g);if(!s||b===null||b.length===0||r&&!M)r?m(null):d();else{const C=r?0:n,D=C*4;let N=T.clippingState||null;f.value=N,N=m(b,v,D,_);for(let I=0;I!==D;++I)N[I]=t[I];T.clippingState=N,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=C}};function d(){f.value!==t&&(f.value=t,f.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function m(g,v,_,b){const A=g!==null?g.length:0;let M=null;if(A!==0){if(M=f.value,b!==!0||M===null){const T=_+A*4,C=v.matrixWorldInverse;c.getNormalMatrix(C),(M===null||M.length<T)&&(M=new Float32Array(T));for(let D=0,N=_;D!==A;++D,N+=4)o.copy(g[D]).applyMatrix4(C,c),o.normal.toArray(M,N),M[N+3]=o.constant}f.value=M,f.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,M}}function f$(i){let e=new WeakMap;function t(o,c){return c===U0?o.mapping=Xc:c===z0&&(o.mapping=pf),o}function n(o){if(o&&o.isTexture){const c=o.mapping;if(c===U0||c===z0)if(e.has(o)){const f=e.get(o).texture;return t(f,o.mapping)}else{const f=o.image;if(f&&f.height>0){const d=new zO(f.height);return d.fromEquirectangularTexture(i,o),e.set(o,d),o.addEventListener("dispose",s),t(d.texture,o.mapping)}else return null}}return o}function s(o){const c=o.target;c.removeEventListener("dispose",s);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}const Up=4,xC=[.125,.215,.35,.446,.526,.582],Dh=20,pE=new xm,_C=new lt;let mE=null,gE=0,yE=0,vE=!1;const Nh=(1+Math.sqrt(5))/2,Ep=1/Nh,bC=[new K(-Nh,Ep,0),new K(Nh,Ep,0),new K(-Ep,0,Nh),new K(Ep,0,Nh),new K(0,Nh,-Ep),new K(0,Nh,Ep),new K(-1,1,-1),new K(1,1,-1),new K(-1,1,1),new K(1,1,1)],h$=new K;class BT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,s=100,r={}){const{size:o=256,position:c=h$}=r;mE=this._renderer.getRenderTarget(),gE=this._renderer.getActiveCubeFace(),yE=this._renderer.getActiveMipmapLevel(),vE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(e,n,s,f,c),t>0&&this._blur(f,0,0,t),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=TC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=EC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(mE,gE,yE),this._renderer.xr.enabled=vE,e.scissorTest=!1,kx(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Xc||e.mapping===pf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),mE=this._renderer.getRenderTarget(),gE=this._renderer.getActiveCubeFace(),yE=this._renderer.getActiveMipmapLevel(),vE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Bi,minFilter:Bi,generateMipmaps:!1,type:pm,format:ur,colorSpace:qs,depthBuffer:!1},s=SC(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=SC(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=d$(r)),this._blurMaterial=p$(r,e,t)}return s}_compileMaterial(e){const t=new Yi(this._lodPlanes[0],e);this._renderer.compile(t,pE)}_sceneToCubeUV(e,t,n,s,r){const f=new _s(90,1,t,n),d=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],g=this._renderer,v=g.autoClear,_=g.toneMapping;g.getClearColor(_C),g.toneMapping=Fl,g.autoClear=!1;const b=new Na({name:"PMREM.Background",side:Hr,depthWrite:!1,depthTest:!1}),A=new Yi(new Jh,b);let M=!1;const T=e.background;T?T.isColor&&(b.color.copy(T),e.background=null,M=!0):(b.color.copy(_C),M=!0);for(let C=0;C<6;C++){const D=C%3;D===0?(f.up.set(0,d[C],0),f.position.set(r.x,r.y,r.z),f.lookAt(r.x+m[C],r.y,r.z)):D===1?(f.up.set(0,0,d[C]),f.position.set(r.x,r.y,r.z),f.lookAt(r.x,r.y+m[C],r.z)):(f.up.set(0,d[C],0),f.position.set(r.x,r.y,r.z),f.lookAt(r.x,r.y,r.z+m[C]));const N=this._cubeSize;kx(s,D*N,C>2?N:0,N,N),g.setRenderTarget(s),M&&g.render(A,f),g.render(e,f)}A.geometry.dispose(),A.material.dispose(),g.toneMapping=_,g.autoClear=v,e.background=T}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===Xc||e.mapping===pf;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=TC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=EC());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new Yi(this._lodPlanes[0],r),c=r.uniforms;c.envMap.value=e;const f=this._cubeSize;kx(t,0,0,3*f,2*f),n.setRenderTarget(t),n.render(o,pE)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),c=bC[(s-r-1)%bC.length];this._blur(e,r-1,r,o,c)}t.autoClear=n}_blur(e,t,n,s,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,s,"latitudinal",r),this._halfBlur(o,e,n,n,s,"longitudinal",r)}_halfBlur(e,t,n,s,r,o,c){const f=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,g=new Yi(this._lodPlanes[s],d),v=d.uniforms,_=this._sizeLods[n]-1,b=isFinite(r)?Math.PI/(2*_):2*Math.PI/(2*Dh-1),A=r/b,M=isFinite(r)?1+Math.floor(m*A):Dh;M>Dh&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${Dh}`);const T=[];let C=0;for(let P=0;P<Dh;++P){const G=P/A,B=Math.exp(-G*G/2);T.push(B),P===0?C+=B:P<M&&(C+=2*B)}for(let P=0;P<T.length;P++)T[P]=T[P]/C;v.envMap.value=e.texture,v.samples.value=M,v.weights.value=T,v.latitudinal.value=o==="latitudinal",c&&(v.poleAxis.value=c);const{_lodMax:D}=this;v.dTheta.value=b,v.mipInt.value=D-n;const N=this._sizeLods[s],I=3*N*(s>D-Up?s-D+Up:0),L=4*(this._cubeSize-N);kx(t,I,L,3*N,2*N),f.setRenderTarget(t),f.render(g,pE)}}function d$(i){const e=[],t=[],n=[];let s=i;const r=i-Up+1+xC.length;for(let o=0;o<r;o++){const c=Math.pow(2,s);t.push(c);let f=1/c;o>i-Up?f=xC[o-i+Up-1]:o===0&&(f=0),n.push(f);const d=1/(c-2),m=-d,g=1+d,v=[m,m,g,m,g,g,m,m,g,g,m,g],_=6,b=6,A=3,M=2,T=1,C=new Float32Array(A*b*_),D=new Float32Array(M*b*_),N=new Float32Array(T*b*_);for(let L=0;L<_;L++){const P=L%3*2/3-1,G=L>2?0:-1,B=[P,G,0,P+2/3,G,0,P+2/3,G+1,0,P,G,0,P+2/3,G+1,0,P,G+1,0];C.set(B,A*b*L),D.set(v,M*b*L);const U=[L,L,L,L,L,L];N.set(U,T*b*L)}const I=new rn;I.setAttribute("position",new Fn(C,A)),I.setAttribute("uv",new Fn(D,M)),I.setAttribute("faceIndex",new Fn(N,T)),e.push(I),s>Up&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function SC(i,e,t){const n=new ql(i,e,t);return n.texture.mapping=dm,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function kx(i,e,t,n,s){i.viewport.set(e,t,n,s),i.scissor.set(e,t,n,s)}function p$(i,e,t){const n=new Float32Array(Dh),s=new K(0,1,0);return new La({name:"SphericalGaussianBlur",defines:{n:Dh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:cA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Fc,depthTest:!1,depthWrite:!1})}function EC(){return new La({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:cA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Fc,depthTest:!1,depthWrite:!1})}function TC(){return new La({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:cA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Fc,depthTest:!1,depthWrite:!1})}function cA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function m$(i){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){const f=c.mapping,d=f===U0||f===z0,m=f===Xc||f===pf;if(d||m){let g=e.get(c);const v=g!==void 0?g.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==v)return t===null&&(t=new BT(i)),g=d?t.fromEquirectangular(c,g):t.fromCubemap(c,g),g.texture.pmremVersion=c.pmremVersion,e.set(c,g),g.texture;if(g!==void 0)return g.texture;{const _=c.image;return d&&_&&_.height>0||m&&_&&s(_)?(t===null&&(t=new BT(i)),g=d?t.fromEquirectangular(c):t.fromCubemap(c),g.texture.pmremVersion=c.pmremVersion,e.set(c,g),c.addEventListener("dispose",r),g.texture):null}}}return c}function s(c){let f=0;const d=6;for(let m=0;m<d;m++)c[m]!==void 0&&f++;return f===d}function r(c){const f=c.target;f.removeEventListener("dispose",r);const d=e.get(f);d!==void 0&&(e.delete(f),d.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function g$(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return e[n]=s,s}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const s=t(n);return s===null&&i_("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function y$(i,e,t,n){const s={},r=new WeakMap;function o(g){const v=g.target;v.index!==null&&e.remove(v.index);for(const b in v.attributes)e.remove(v.attributes[b]);v.removeEventListener("dispose",o),delete s[v.id];const _=r.get(v);_&&(e.remove(_),r.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function c(g,v){return s[v.id]===!0||(v.addEventListener("dispose",o),s[v.id]=!0,t.memory.geometries++),v}function f(g){const v=g.attributes;for(const _ in v)e.update(v[_],i.ARRAY_BUFFER)}function d(g){const v=[],_=g.index,b=g.attributes.position;let A=0;if(_!==null){const C=_.array;A=_.version;for(let D=0,N=C.length;D<N;D+=3){const I=C[D+0],L=C[D+1],P=C[D+2];v.push(I,L,L,P,P,I)}}else if(b!==void 0){const C=b.array;A=b.version;for(let D=0,N=C.length/3-1;D<N;D+=3){const I=D+0,L=D+1,P=D+2;v.push(I,L,L,P,P,I)}}else return;const M=new(MO(v)?UM:LM)(v,1);M.version=A;const T=r.get(g);T&&e.remove(T),r.set(g,M)}function m(g){const v=r.get(g);if(v){const _=g.index;_!==null&&v.version<_.version&&d(g)}else d(g);return r.get(g)}return{get:c,update:f,getWireframeAttribute:m}}function v$(i,e,t){let n;function s(v){n=v}let r,o;function c(v){r=v.type,o=v.bytesPerElement}function f(v,_){i.drawElements(n,_,r,v*o),t.update(_,n,1)}function d(v,_,b){b!==0&&(i.drawElementsInstanced(n,_,r,v*o,b),t.update(_,n,b))}function m(v,_,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,_,0,r,v,0,b);let M=0;for(let T=0;T<b;T++)M+=_[T];t.update(M,n,1)}function g(v,_,b,A){if(b===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let T=0;T<v.length;T++)d(v[T]/o,_[T],A[T]);else{M.multiDrawElementsInstancedWEBGL(n,_,0,r,v,0,A,0,b);let T=0;for(let C=0;C<b;C++)T+=_[C]*A[C];t.update(T,n,1)}}this.setMode=s,this.setIndex=c,this.render=f,this.renderInstances=d,this.renderMultiDraw=m,this.renderMultiDrawInstances=g}function x$(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,o,c){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=c*(r/3);break;case i.LINES:t.lines+=c*(r/2);break;case i.LINE_STRIP:t.lines+=c*(r-1);break;case i.LINE_LOOP:t.lines+=c*r;break;case i.POINTS:t.points+=c*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function _$(i,e,t){const n=new WeakMap,s=new Bn;function r(o,c,f){const d=o.morphTargetInfluences,m=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,g=m!==void 0?m.length:0;let v=n.get(c);if(v===void 0||v.count!==g){let U=function(){G.dispose(),n.delete(c),c.removeEventListener("dispose",U)};var _=U;v!==void 0&&v.texture.dispose();const b=c.morphAttributes.position!==void 0,A=c.morphAttributes.normal!==void 0,M=c.morphAttributes.color!==void 0,T=c.morphAttributes.position||[],C=c.morphAttributes.normal||[],D=c.morphAttributes.color||[];let N=0;b===!0&&(N=1),A===!0&&(N=2),M===!0&&(N=3);let I=c.attributes.position.count*N,L=1;I>e.maxTextureSize&&(L=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const P=new Float32Array(I*L*4*g),G=new iy(P,I,L,g);G.type=aa,G.needsUpdate=!0;const B=N*4;for(let j=0;j<g;j++){const ae=T[j],ne=C[j],de=D[j],he=I*L*4*j;for(let F=0;F<ae.count;F++){const W=F*B;b===!0&&(s.fromBufferAttribute(ae,F),P[he+W+0]=s.x,P[he+W+1]=s.y,P[he+W+2]=s.z,P[he+W+3]=0),A===!0&&(s.fromBufferAttribute(ne,F),P[he+W+4]=s.x,P[he+W+5]=s.y,P[he+W+6]=s.z,P[he+W+7]=0),M===!0&&(s.fromBufferAttribute(de,F),P[he+W+8]=s.x,P[he+W+9]=s.y,P[he+W+10]=s.z,P[he+W+11]=de.itemSize===4?s.w:1)}}v={count:g,texture:G,size:new Xe(I,L)},n.set(c,v),c.addEventListener("dispose",U)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)f.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let b=0;for(let M=0;M<d.length;M++)b+=d[M];const A=c.morphTargetsRelative?1:1-b;f.getUniforms().setValue(i,"morphTargetBaseInfluence",A),f.getUniforms().setValue(i,"morphTargetInfluences",d)}f.getUniforms().setValue(i,"morphTargetsTexture",v.texture,t),f.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}return{update:r}}function b$(i,e,t,n){let s=new WeakMap;function r(f){const d=n.render.frame,m=f.geometry,g=e.get(f,m);if(s.get(g)!==d&&(e.update(g),s.set(g,d)),f.isInstancedMesh&&(f.hasEventListener("dispose",c)===!1&&f.addEventListener("dispose",c),s.get(f)!==d&&(t.update(f.instanceMatrix,i.ARRAY_BUFFER),f.instanceColor!==null&&t.update(f.instanceColor,i.ARRAY_BUFFER),s.set(f,d))),f.isSkinnedMesh){const v=f.skeleton;s.get(v)!==d&&(v.update(),s.set(v,d))}return g}function o(){s=new WeakMap}function c(f){const d=f.target;d.removeEventListener("dispose",c),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:r,dispose:o}}const CL=new Fi,MC=new VM(1,1),NL=new iy,DL=new V1,OL=new sy,AC=[],wC=[],RC=new Float32Array(16),CC=new Float32Array(9),NC=new Float32Array(4);function _m(i,e,t){const n=i[0];if(n<=0||n>0)return i;const s=e*t;let r=AC[s];if(r===void 0&&(r=new Float32Array(s),AC[s]=r),e!==0){n.toArray(r,0);for(let o=1,c=0;o!==e;++o)c+=t,i[o].toArray(r,c)}return r}function Ts(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Ms(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function lb(i,e){let t=wC[e];t===void 0&&(t=new Int32Array(e),wC[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function S$(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function E$(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ts(t,e))return;i.uniform2fv(this.addr,e),Ms(t,e)}}function T$(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ts(t,e))return;i.uniform3fv(this.addr,e),Ms(t,e)}}function M$(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ts(t,e))return;i.uniform4fv(this.addr,e),Ms(t,e)}}function A$(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ts(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Ms(t,e)}else{if(Ts(t,n))return;NC.set(n),i.uniformMatrix2fv(this.addr,!1,NC),Ms(t,n)}}function w$(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ts(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Ms(t,e)}else{if(Ts(t,n))return;CC.set(n),i.uniformMatrix3fv(this.addr,!1,CC),Ms(t,n)}}function R$(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ts(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Ms(t,e)}else{if(Ts(t,n))return;RC.set(n),i.uniformMatrix4fv(this.addr,!1,RC),Ms(t,n)}}function C$(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function N$(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ts(t,e))return;i.uniform2iv(this.addr,e),Ms(t,e)}}function D$(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ts(t,e))return;i.uniform3iv(this.addr,e),Ms(t,e)}}function O$(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ts(t,e))return;i.uniform4iv(this.addr,e),Ms(t,e)}}function L$(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function U$(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ts(t,e))return;i.uniform2uiv(this.addr,e),Ms(t,e)}}function z$(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ts(t,e))return;i.uniform3uiv(this.addr,e),Ms(t,e)}}function P$(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ts(t,e))return;i.uniform4uiv(this.addr,e),Ms(t,e)}}function I$(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(MC.compareFunction=DM,r=MC):r=CL,t.setTexture2D(e||r,s)}function B$(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||DL,s)}function F$(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||OL,s)}function H$(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||NL,s)}function V$(i){switch(i){case 5126:return S$;case 35664:return E$;case 35665:return T$;case 35666:return M$;case 35674:return A$;case 35675:return w$;case 35676:return R$;case 5124:case 35670:return C$;case 35667:case 35671:return N$;case 35668:case 35672:return D$;case 35669:case 35673:return O$;case 5125:return L$;case 36294:return U$;case 36295:return z$;case 36296:return P$;case 35678:case 36198:case 36298:case 36306:case 35682:return I$;case 35679:case 36299:case 36307:return B$;case 35680:case 36300:case 36308:case 36293:return F$;case 36289:case 36303:case 36311:case 36292:return H$}}function G$(i,e){i.uniform1fv(this.addr,e)}function k$(i,e){const t=_m(e,this.size,2);i.uniform2fv(this.addr,t)}function $$(i,e){const t=_m(e,this.size,3);i.uniform3fv(this.addr,t)}function X$(i,e){const t=_m(e,this.size,4);i.uniform4fv(this.addr,t)}function q$(i,e){const t=_m(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function j$(i,e){const t=_m(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function Y$(i,e){const t=_m(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function W$(i,e){i.uniform1iv(this.addr,e)}function Z$(i,e){i.uniform2iv(this.addr,e)}function K$(i,e){i.uniform3iv(this.addr,e)}function Q$(i,e){i.uniform4iv(this.addr,e)}function J$(i,e){i.uniform1uiv(this.addr,e)}function eX(i,e){i.uniform2uiv(this.addr,e)}function tX(i,e){i.uniform3uiv(this.addr,e)}function nX(i,e){i.uniform4uiv(this.addr,e)}function iX(i,e,t){const n=this.cache,s=e.length,r=lb(t,s);Ts(n,r)||(i.uniform1iv(this.addr,r),Ms(n,r));for(let o=0;o!==s;++o)t.setTexture2D(e[o]||CL,r[o])}function sX(i,e,t){const n=this.cache,s=e.length,r=lb(t,s);Ts(n,r)||(i.uniform1iv(this.addr,r),Ms(n,r));for(let o=0;o!==s;++o)t.setTexture3D(e[o]||DL,r[o])}function rX(i,e,t){const n=this.cache,s=e.length,r=lb(t,s);Ts(n,r)||(i.uniform1iv(this.addr,r),Ms(n,r));for(let o=0;o!==s;++o)t.setTextureCube(e[o]||OL,r[o])}function aX(i,e,t){const n=this.cache,s=e.length,r=lb(t,s);Ts(n,r)||(i.uniform1iv(this.addr,r),Ms(n,r));for(let o=0;o!==s;++o)t.setTexture2DArray(e[o]||NL,r[o])}function oX(i){switch(i){case 5126:return G$;case 35664:return k$;case 35665:return $$;case 35666:return X$;case 35674:return q$;case 35675:return j$;case 35676:return Y$;case 5124:case 35670:return W$;case 35667:case 35671:return Z$;case 35668:case 35672:return K$;case 35669:case 35673:return Q$;case 5125:return J$;case 36294:return eX;case 36295:return tX;case 36296:return nX;case 35678:case 36198:case 36298:case 36306:case 35682:return iX;case 35679:case 36299:case 36307:return sX;case 35680:case 36300:case 36308:case 36293:return rX;case 36289:case 36303:case 36311:case 36292:return aX}}class lX{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=V$(t.type)}}class cX{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=oX(t.type)}}class uX{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const c=s[r];c.setValue(e,t[c.id],n)}}}const xE=/(\w+)(\])?(\[|\.)?/g;function DC(i,e){i.seq.push(e),i.map[e.id]=e}function fX(i,e,t){const n=i.name,s=n.length;for(xE.lastIndex=0;;){const r=xE.exec(n),o=xE.lastIndex;let c=r[1];const f=r[2]==="]",d=r[3];if(f&&(c=c|0),d===void 0||d==="["&&o+2===s){DC(t,d===void 0?new lX(c,i,e):new cX(c,i,e));break}else{let g=t.map[c];g===void 0&&(g=new uX(c),DC(t,g)),t=g}}}class a_{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=e.getActiveUniform(t,s),o=e.getUniformLocation(t,r.name);fX(r,o,this)}}setValue(e,t,n,s){const r=this.map[t];r!==void 0&&r.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let r=0,o=t.length;r!==o;++r){const c=t[r],f=n[c.id];f.needsUpdate!==!1&&c.setValue(e,f.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,r=e.length;s!==r;++s){const o=e[s];o.id in t&&n.push(o)}return n}}function OC(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const hX=37297;let dX=0;function pX(i,e){const t=i.split(`
`),n=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=s;o<r;o++){const c=o+1;n.push(`${c===e?">":" "} ${c}: ${t[o]}`)}return n.join(`
`)}const LC=new ln;function mX(i){vn._getMatrix(LC,vn.workingColorSpace,i);const e=`mat3( ${LC.elements.map(t=>t.toFixed(4))} )`;switch(vn.getTransfer(i)){case I0:return[e,"LinearTransferOETF"];case Wn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function UC(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=i.getShaderInfoLog(e).trim();if(n&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const o=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+pX(i.getShaderSource(e),o)}else return s}function gX(i,e){const t=mX(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function yX(i,e){let t;switch(e){case tO:t="Linear";break;case nO:t="Reinhard";break;case iO:t="Cineon";break;case xM:t="ACESFilmic";break;case rO:t="AgX";break;case aO:t="Neutral";break;case sO:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const $x=new K;function vX(){vn.getLuminanceCoefficients($x);const i=$x.x.toFixed(4),e=$x.y.toFixed(4),t=$x.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function xX(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(d0).join(`
`)}function _X(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function bX(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(e,s),o=r.name;let c=1;r.type===i.FLOAT_MAT2&&(c=2),r.type===i.FLOAT_MAT3&&(c=3),r.type===i.FLOAT_MAT4&&(c=4),t[o]={type:r.type,location:i.getAttribLocation(e,o),locationSize:c}}return t}function d0(i){return i!==""}function zC(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function PC(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const SX=/^[ \t]*#include +<([\w\d./]+)>/gm;function FT(i){return i.replace(SX,TX)}const EX=new Map;function TX(i,e){let t=on[e];if(t===void 0){const n=EX.get(e);if(n!==void 0)t=on[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return FT(t)}const MX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function IC(i){return i.replace(MX,AX)}function AX(i,e,t,n){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function BC(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function wX(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===N1?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===v0?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Go&&(e="SHADOWMAP_TYPE_VSM"),e}function RX(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Xc:case pf:e="ENVMAP_TYPE_CUBE";break;case dm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function CX(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case pf:e="ENVMAP_MODE_REFRACTION";break}return e}function NX(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case ty:e="ENVMAP_BLENDING_MULTIPLY";break;case JD:e="ENVMAP_BLENDING_MIX";break;case eO:e="ENVMAP_BLENDING_ADD";break}return e}function DX(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function OX(i,e,t,n){const s=i.getContext(),r=t.defines;let o=t.vertexShader,c=t.fragmentShader;const f=wX(t),d=RX(t),m=CX(t),g=NX(t),v=DX(t),_=xX(t),b=_X(r),A=s.createProgram();let M,T,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(d0).join(`
`),M.length>0&&(M+=`
`),T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(d0).join(`
`),T.length>0&&(T+=`
`)):(M=[BC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(d0).join(`
`),T=[BC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+m:"",t.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Fl?"#define TONE_MAPPING":"",t.toneMapping!==Fl?on.tonemapping_pars_fragment:"",t.toneMapping!==Fl?yX("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",on.colorspace_pars_fragment,gX("linearToOutputTexel",t.outputColorSpace),vX(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(d0).join(`
`)),o=FT(o),o=zC(o,t),o=PC(o,t),c=FT(c),c=zC(c,t),c=PC(c,t),o=IC(o),c=IC(c),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,M=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,T=["#define varying in",t.glslVersion===NT?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===NT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);const D=C+M+o,N=C+T+c,I=OC(s,s.VERTEX_SHADER,D),L=OC(s,s.FRAGMENT_SHADER,N);s.attachShader(A,I),s.attachShader(A,L),t.index0AttributeName!==void 0?s.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(A,0,"position"),s.linkProgram(A);function P(j){if(i.debug.checkShaderErrors){const ae=s.getProgramInfoLog(A).trim(),ne=s.getShaderInfoLog(I).trim(),de=s.getShaderInfoLog(L).trim();let he=!0,F=!0;if(s.getProgramParameter(A,s.LINK_STATUS)===!1)if(he=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,A,I,L);else{const W=UC(s,I,"vertex"),Z=UC(s,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(A,s.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+ae+`
`+W+`
`+Z)}else ae!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ae):(ne===""||de==="")&&(F=!1);F&&(j.diagnostics={runnable:he,programLog:ae,vertexShader:{log:ne,prefix:M},fragmentShader:{log:de,prefix:T}})}s.deleteShader(I),s.deleteShader(L),G=new a_(s,A),B=bX(s,A)}let G;this.getUniforms=function(){return G===void 0&&P(this),G};let B;this.getAttributes=function(){return B===void 0&&P(this),B};let U=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=s.getProgramParameter(A,hX)),U},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=dX++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=I,this.fragmentShader=L,this}let LX=0;class UX{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new zX(e),t.set(e,n)),n}}class zX{constructor(e){this.id=LX++,this.code=e,this.usedTimes=0}}function PX(i,e,t,n,s,r,o){const c=new Kp,f=new UX,d=new Set,m=[],g=s.logarithmicDepthBuffer,v=s.vertexTextures;let _=s.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(B){return d.add(B),B===0?"uv":`uv${B}`}function M(B,U,j,ae,ne){const de=ae.fog,he=ne.geometry,F=B.isMeshStandardMaterial?ae.environment:null,W=(B.isMeshStandardMaterial?t:e).get(B.envMap||F),Z=W&&W.mapping===dm?W.image.height:null,fe=b[B.type];B.precision!==null&&(_=s.getMaxPrecision(B.precision),_!==B.precision&&console.warn("THREE.WebGLProgram.getParameters:",B.precision,"not supported, using",_,"instead."));const X=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,ie=X!==void 0?X.length:0;let Ee=0;he.morphAttributes.position!==void 0&&(Ee=1),he.morphAttributes.normal!==void 0&&(Ee=2),he.morphAttributes.color!==void 0&&(Ee=3);let Ue,re,Ce,Be;if(fe){const gn=$o[fe];Ue=gn.vertexShader,re=gn.fragmentShader}else Ue=B.vertexShader,re=B.fragmentShader,f.update(B),Ce=f.getVertexShaderID(B),Be=f.getFragmentShaderID(B);const qe=i.getRenderTarget(),Ke=i.state.buffers.depth.getReversed(),Ct=ne.isInstancedMesh===!0,bt=ne.isBatchedMesh===!0,$t=!!B.map,jt=!!B.matcap,Nt=!!W,te=!!B.aoMap,_n=!!B.lightMap,Fe=!!B.bumpMap,Pe=!!B.normalMap,Ie=!!B.displacementMap,Je=!!B.emissiveMap,Ne=!!B.metalnessMap,Y=!!B.roughnessMap,H=B.anisotropy>0,Q=B.clearcoat>0,pe=B.dispersion>0,De=B.iridescence>0,Me=B.sheen>0,et=B.transmission>0,We=H&&!!B.anisotropyMap,tt=Q&&!!B.clearcoatMap,Zt=Q&&!!B.clearcoatNormalMap,Ye=Q&&!!B.clearcoatRoughnessMap,pt=De&&!!B.iridescenceMap,yt=De&&!!B.iridescenceThicknessMap,vt=Me&&!!B.sheenColorMap,st=Me&&!!B.sheenRoughnessMap,Xt=!!B.specularMap,wt=!!B.specularColorMap,bn=!!B.specularIntensityMap,ue=et&&!!B.transmissionMap,ct=et&&!!B.thicknessMap,Oe=!!B.gradientMap,ke=!!B.alphaMap,ft=B.alphaTest>0,ut=!!B.alphaHash,qt=!!B.extensions;let Pn=Fl;B.toneMapped&&(qe===null||qe.isXRRenderTarget===!0)&&(Pn=i.toneMapping);const ai={shaderID:fe,shaderType:B.type,shaderName:B.name,vertexShader:Ue,fragmentShader:re,defines:B.defines,customVertexShaderID:Ce,customFragmentShaderID:Be,isRawShaderMaterial:B.isRawShaderMaterial===!0,glslVersion:B.glslVersion,precision:_,batching:bt,batchingColor:bt&&ne._colorsTexture!==null,instancing:Ct,instancingColor:Ct&&ne.instanceColor!==null,instancingMorph:Ct&&ne.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:qe===null?i.outputColorSpace:qe.isXRRenderTarget===!0?qe.texture.colorSpace:qs,alphaToCoverage:!!B.alphaToCoverage,map:$t,matcap:jt,envMap:Nt,envMapMode:Nt&&W.mapping,envMapCubeUVHeight:Z,aoMap:te,lightMap:_n,bumpMap:Fe,normalMap:Pe,displacementMap:v&&Ie,emissiveMap:Je,normalMapObjectSpace:Pe&&B.normalMapType===pO,normalMapTangentSpace:Pe&&B.normalMapType===yf,metalnessMap:Ne,roughnessMap:Y,anisotropy:H,anisotropyMap:We,clearcoat:Q,clearcoatMap:tt,clearcoatNormalMap:Zt,clearcoatRoughnessMap:Ye,dispersion:pe,iridescence:De,iridescenceMap:pt,iridescenceThicknessMap:yt,sheen:Me,sheenColorMap:vt,sheenRoughnessMap:st,specularMap:Xt,specularColorMap:wt,specularIntensityMap:bn,transmission:et,transmissionMap:ue,thicknessMap:ct,gradientMap:Oe,opaque:B.transparent===!1&&B.blending===Fh&&B.alphaToCoverage===!1,alphaMap:ke,alphaTest:ft,alphaHash:ut,combine:B.combine,mapUv:$t&&A(B.map.channel),aoMapUv:te&&A(B.aoMap.channel),lightMapUv:_n&&A(B.lightMap.channel),bumpMapUv:Fe&&A(B.bumpMap.channel),normalMapUv:Pe&&A(B.normalMap.channel),displacementMapUv:Ie&&A(B.displacementMap.channel),emissiveMapUv:Je&&A(B.emissiveMap.channel),metalnessMapUv:Ne&&A(B.metalnessMap.channel),roughnessMapUv:Y&&A(B.roughnessMap.channel),anisotropyMapUv:We&&A(B.anisotropyMap.channel),clearcoatMapUv:tt&&A(B.clearcoatMap.channel),clearcoatNormalMapUv:Zt&&A(B.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ye&&A(B.clearcoatRoughnessMap.channel),iridescenceMapUv:pt&&A(B.iridescenceMap.channel),iridescenceThicknessMapUv:yt&&A(B.iridescenceThicknessMap.channel),sheenColorMapUv:vt&&A(B.sheenColorMap.channel),sheenRoughnessMapUv:st&&A(B.sheenRoughnessMap.channel),specularMapUv:Xt&&A(B.specularMap.channel),specularColorMapUv:wt&&A(B.specularColorMap.channel),specularIntensityMapUv:bn&&A(B.specularIntensityMap.channel),transmissionMapUv:ue&&A(B.transmissionMap.channel),thicknessMapUv:ct&&A(B.thicknessMap.channel),alphaMapUv:ke&&A(B.alphaMap.channel),vertexTangents:!!he.attributes.tangent&&(Pe||H),vertexColors:B.vertexColors,vertexAlphas:B.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,pointsUvs:ne.isPoints===!0&&!!he.attributes.uv&&($t||ke),fog:!!de,useFog:B.fog===!0,fogExp2:!!de&&de.isFogExp2,flatShading:B.flatShading===!0,sizeAttenuation:B.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:Ke,skinning:ne.isSkinnedMesh===!0,morphTargets:he.morphAttributes.position!==void 0,morphNormals:he.morphAttributes.normal!==void 0,morphColors:he.morphAttributes.color!==void 0,morphTargetsCount:ie,morphTextureStride:Ee,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:B.dithering,shadowMapEnabled:i.shadowMap.enabled&&j.length>0,shadowMapType:i.shadowMap.type,toneMapping:Pn,decodeVideoTexture:$t&&B.map.isVideoTexture===!0&&vn.getTransfer(B.map.colorSpace)===Wn,decodeVideoTextureEmissive:Je&&B.emissiveMap.isVideoTexture===!0&&vn.getTransfer(B.emissiveMap.colorSpace)===Wn,premultipliedAlpha:B.premultipliedAlpha,doubleSided:B.side===Xo,flipSided:B.side===Hr,useDepthPacking:B.depthPacking>=0,depthPacking:B.depthPacking||0,index0AttributeName:B.index0AttributeName,extensionClipCullDistance:qt&&B.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(qt&&B.extensions.multiDraw===!0||bt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:B.customProgramCacheKey()};return ai.vertexUv1s=d.has(1),ai.vertexUv2s=d.has(2),ai.vertexUv3s=d.has(3),d.clear(),ai}function T(B){const U=[];if(B.shaderID?U.push(B.shaderID):(U.push(B.customVertexShaderID),U.push(B.customFragmentShaderID)),B.defines!==void 0)for(const j in B.defines)U.push(j),U.push(B.defines[j]);return B.isRawShaderMaterial===!1&&(C(U,B),D(U,B),U.push(i.outputColorSpace)),U.push(B.customProgramCacheKey),U.join()}function C(B,U){B.push(U.precision),B.push(U.outputColorSpace),B.push(U.envMapMode),B.push(U.envMapCubeUVHeight),B.push(U.mapUv),B.push(U.alphaMapUv),B.push(U.lightMapUv),B.push(U.aoMapUv),B.push(U.bumpMapUv),B.push(U.normalMapUv),B.push(U.displacementMapUv),B.push(U.emissiveMapUv),B.push(U.metalnessMapUv),B.push(U.roughnessMapUv),B.push(U.anisotropyMapUv),B.push(U.clearcoatMapUv),B.push(U.clearcoatNormalMapUv),B.push(U.clearcoatRoughnessMapUv),B.push(U.iridescenceMapUv),B.push(U.iridescenceThicknessMapUv),B.push(U.sheenColorMapUv),B.push(U.sheenRoughnessMapUv),B.push(U.specularMapUv),B.push(U.specularColorMapUv),B.push(U.specularIntensityMapUv),B.push(U.transmissionMapUv),B.push(U.thicknessMapUv),B.push(U.combine),B.push(U.fogExp2),B.push(U.sizeAttenuation),B.push(U.morphTargetsCount),B.push(U.morphAttributeCount),B.push(U.numDirLights),B.push(U.numPointLights),B.push(U.numSpotLights),B.push(U.numSpotLightMaps),B.push(U.numHemiLights),B.push(U.numRectAreaLights),B.push(U.numDirLightShadows),B.push(U.numPointLightShadows),B.push(U.numSpotLightShadows),B.push(U.numSpotLightShadowsWithMaps),B.push(U.numLightProbes),B.push(U.shadowMapType),B.push(U.toneMapping),B.push(U.numClippingPlanes),B.push(U.numClipIntersection),B.push(U.depthPacking)}function D(B,U){c.disableAll(),U.supportsVertexTextures&&c.enable(0),U.instancing&&c.enable(1),U.instancingColor&&c.enable(2),U.instancingMorph&&c.enable(3),U.matcap&&c.enable(4),U.envMap&&c.enable(5),U.normalMapObjectSpace&&c.enable(6),U.normalMapTangentSpace&&c.enable(7),U.clearcoat&&c.enable(8),U.iridescence&&c.enable(9),U.alphaTest&&c.enable(10),U.vertexColors&&c.enable(11),U.vertexAlphas&&c.enable(12),U.vertexUv1s&&c.enable(13),U.vertexUv2s&&c.enable(14),U.vertexUv3s&&c.enable(15),U.vertexTangents&&c.enable(16),U.anisotropy&&c.enable(17),U.alphaHash&&c.enable(18),U.batching&&c.enable(19),U.dispersion&&c.enable(20),U.batchingColor&&c.enable(21),B.push(c.mask),c.disableAll(),U.fog&&c.enable(0),U.useFog&&c.enable(1),U.flatShading&&c.enable(2),U.logarithmicDepthBuffer&&c.enable(3),U.reverseDepthBuffer&&c.enable(4),U.skinning&&c.enable(5),U.morphTargets&&c.enable(6),U.morphNormals&&c.enable(7),U.morphColors&&c.enable(8),U.premultipliedAlpha&&c.enable(9),U.shadowMapEnabled&&c.enable(10),U.doubleSided&&c.enable(11),U.flipSided&&c.enable(12),U.useDepthPacking&&c.enable(13),U.dithering&&c.enable(14),U.transmission&&c.enable(15),U.sheen&&c.enable(16),U.opaque&&c.enable(17),U.pointsUvs&&c.enable(18),U.decodeVideoTexture&&c.enable(19),U.decodeVideoTextureEmissive&&c.enable(20),U.alphaToCoverage&&c.enable(21),B.push(c.mask)}function N(B){const U=b[B.type];let j;if(U){const ae=$o[U];j=LO.clone(ae.uniforms)}else j=B.uniforms;return j}function I(B,U){let j;for(let ae=0,ne=m.length;ae<ne;ae++){const de=m[ae];if(de.cacheKey===U){j=de,++j.usedTimes;break}}return j===void 0&&(j=new OX(i,U,B,r),m.push(j)),j}function L(B){if(--B.usedTimes===0){const U=m.indexOf(B);m[U]=m[m.length-1],m.pop(),B.destroy()}}function P(B){f.remove(B)}function G(){f.dispose()}return{getParameters:M,getProgramCacheKey:T,getUniforms:N,acquireProgram:I,releaseProgram:L,releaseShaderCache:P,programs:m,dispose:G}}function IX(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let c=i.get(o);return c===void 0&&(c={},i.set(o,c)),c}function n(o){i.delete(o)}function s(o,c,f){i.get(o)[c]=f}function r(){i=new WeakMap}return{has:e,get:t,remove:n,update:s,dispose:r}}function BX(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function FC(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function HC(){const i=[];let e=0;const t=[],n=[],s=[];function r(){e=0,t.length=0,n.length=0,s.length=0}function o(g,v,_,b,A,M){let T=i[e];return T===void 0?(T={id:g.id,object:g,geometry:v,material:_,groupOrder:b,renderOrder:g.renderOrder,z:A,group:M},i[e]=T):(T.id=g.id,T.object=g,T.geometry=v,T.material=_,T.groupOrder=b,T.renderOrder=g.renderOrder,T.z=A,T.group=M),e++,T}function c(g,v,_,b,A,M){const T=o(g,v,_,b,A,M);_.transmission>0?n.push(T):_.transparent===!0?s.push(T):t.push(T)}function f(g,v,_,b,A,M){const T=o(g,v,_,b,A,M);_.transmission>0?n.unshift(T):_.transparent===!0?s.unshift(T):t.unshift(T)}function d(g,v){t.length>1&&t.sort(g||BX),n.length>1&&n.sort(v||FC),s.length>1&&s.sort(v||FC)}function m(){for(let g=e,v=i.length;g<v;g++){const _=i[g];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:n,transparent:s,init:r,push:c,unshift:f,finish:m,sort:d}}function FX(){let i=new WeakMap;function e(n,s){const r=i.get(n);let o;return r===void 0?(o=new HC,i.set(n,[o])):s>=r.length?(o=new HC,r.push(o)):o=r[s],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function HX(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new K,color:new lt};break;case"SpotLight":t={position:new K,direction:new K,color:new lt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new K,color:new lt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new K,skyColor:new lt,groundColor:new lt};break;case"RectAreaLight":t={color:new lt,position:new K,halfWidth:new K,halfHeight:new K};break}return i[e.id]=t,t}}}function VX(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let GX=0;function kX(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function $X(i){const e=new HX,t=VX(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)n.probe.push(new K);const s=new K,r=new Gt,o=new Gt;function c(d){let m=0,g=0,v=0;for(let B=0;B<9;B++)n.probe[B].set(0,0,0);let _=0,b=0,A=0,M=0,T=0,C=0,D=0,N=0,I=0,L=0,P=0;d.sort(kX);for(let B=0,U=d.length;B<U;B++){const j=d[B],ae=j.color,ne=j.intensity,de=j.distance,he=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)m+=ae.r*ne,g+=ae.g*ne,v+=ae.b*ne;else if(j.isLightProbe){for(let F=0;F<9;F++)n.probe[F].addScaledVector(j.sh.coefficients[F],ne);P++}else if(j.isDirectionalLight){const F=e.get(j);if(F.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const W=j.shadow,Z=t.get(j);Z.shadowIntensity=W.intensity,Z.shadowBias=W.bias,Z.shadowNormalBias=W.normalBias,Z.shadowRadius=W.radius,Z.shadowMapSize=W.mapSize,n.directionalShadow[_]=Z,n.directionalShadowMap[_]=he,n.directionalShadowMatrix[_]=j.shadow.matrix,C++}n.directional[_]=F,_++}else if(j.isSpotLight){const F=e.get(j);F.position.setFromMatrixPosition(j.matrixWorld),F.color.copy(ae).multiplyScalar(ne),F.distance=de,F.coneCos=Math.cos(j.angle),F.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),F.decay=j.decay,n.spot[A]=F;const W=j.shadow;if(j.map&&(n.spotLightMap[I]=j.map,I++,W.updateMatrices(j),j.castShadow&&L++),n.spotLightMatrix[A]=W.matrix,j.castShadow){const Z=t.get(j);Z.shadowIntensity=W.intensity,Z.shadowBias=W.bias,Z.shadowNormalBias=W.normalBias,Z.shadowRadius=W.radius,Z.shadowMapSize=W.mapSize,n.spotShadow[A]=Z,n.spotShadowMap[A]=he,N++}A++}else if(j.isRectAreaLight){const F=e.get(j);F.color.copy(ae).multiplyScalar(ne),F.halfWidth.set(j.width*.5,0,0),F.halfHeight.set(0,j.height*.5,0),n.rectArea[M]=F,M++}else if(j.isPointLight){const F=e.get(j);if(F.color.copy(j.color).multiplyScalar(j.intensity),F.distance=j.distance,F.decay=j.decay,j.castShadow){const W=j.shadow,Z=t.get(j);Z.shadowIntensity=W.intensity,Z.shadowBias=W.bias,Z.shadowNormalBias=W.normalBias,Z.shadowRadius=W.radius,Z.shadowMapSize=W.mapSize,Z.shadowCameraNear=W.camera.near,Z.shadowCameraFar=W.camera.far,n.pointShadow[b]=Z,n.pointShadowMap[b]=he,n.pointShadowMatrix[b]=j.shadow.matrix,D++}n.point[b]=F,b++}else if(j.isHemisphereLight){const F=e.get(j);F.skyColor.copy(j.color).multiplyScalar(ne),F.groundColor.copy(j.groundColor).multiplyScalar(ne),n.hemi[T]=F,T++}}M>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=dt.LTC_FLOAT_1,n.rectAreaLTC2=dt.LTC_FLOAT_2):(n.rectAreaLTC1=dt.LTC_HALF_1,n.rectAreaLTC2=dt.LTC_HALF_2)),n.ambient[0]=m,n.ambient[1]=g,n.ambient[2]=v;const G=n.hash;(G.directionalLength!==_||G.pointLength!==b||G.spotLength!==A||G.rectAreaLength!==M||G.hemiLength!==T||G.numDirectionalShadows!==C||G.numPointShadows!==D||G.numSpotShadows!==N||G.numSpotMaps!==I||G.numLightProbes!==P)&&(n.directional.length=_,n.spot.length=A,n.rectArea.length=M,n.point.length=b,n.hemi.length=T,n.directionalShadow.length=C,n.directionalShadowMap.length=C,n.pointShadow.length=D,n.pointShadowMap.length=D,n.spotShadow.length=N,n.spotShadowMap.length=N,n.directionalShadowMatrix.length=C,n.pointShadowMatrix.length=D,n.spotLightMatrix.length=N+I-L,n.spotLightMap.length=I,n.numSpotLightShadowsWithMaps=L,n.numLightProbes=P,G.directionalLength=_,G.pointLength=b,G.spotLength=A,G.rectAreaLength=M,G.hemiLength=T,G.numDirectionalShadows=C,G.numPointShadows=D,G.numSpotShadows=N,G.numSpotMaps=I,G.numLightProbes=P,n.version=GX++)}function f(d,m){let g=0,v=0,_=0,b=0,A=0;const M=m.matrixWorldInverse;for(let T=0,C=d.length;T<C;T++){const D=d[T];if(D.isDirectionalLight){const N=n.directional[g];N.direction.setFromMatrixPosition(D.matrixWorld),s.setFromMatrixPosition(D.target.matrixWorld),N.direction.sub(s),N.direction.transformDirection(M),g++}else if(D.isSpotLight){const N=n.spot[_];N.position.setFromMatrixPosition(D.matrixWorld),N.position.applyMatrix4(M),N.direction.setFromMatrixPosition(D.matrixWorld),s.setFromMatrixPosition(D.target.matrixWorld),N.direction.sub(s),N.direction.transformDirection(M),_++}else if(D.isRectAreaLight){const N=n.rectArea[b];N.position.setFromMatrixPosition(D.matrixWorld),N.position.applyMatrix4(M),o.identity(),r.copy(D.matrixWorld),r.premultiply(M),o.extractRotation(r),N.halfWidth.set(D.width*.5,0,0),N.halfHeight.set(0,D.height*.5,0),N.halfWidth.applyMatrix4(o),N.halfHeight.applyMatrix4(o),b++}else if(D.isPointLight){const N=n.point[v];N.position.setFromMatrixPosition(D.matrixWorld),N.position.applyMatrix4(M),v++}else if(D.isHemisphereLight){const N=n.hemi[A];N.direction.setFromMatrixPosition(D.matrixWorld),N.direction.transformDirection(M),A++}}}return{setup:c,setupView:f,state:n}}function VC(i){const e=new $X(i),t=[],n=[];function s(m){d.camera=m,t.length=0,n.length=0}function r(m){t.push(m)}function o(m){n.push(m)}function c(){e.setup(t)}function f(m){e.setupView(t,m)}const d={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:d,setupLights:c,setupLightsView:f,pushLight:r,pushShadow:o}}function XX(i){let e=new WeakMap;function t(s,r=0){const o=e.get(s);let c;return o===void 0?(c=new VC(i),e.set(s,[c])):r>=o.length?(c=new VC(i),o.push(c)):c=o[r],c}function n(){e=new WeakMap}return{get:t,dispose:n}}const qX=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,jX=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function YX(i,e,t){let n=new oy;const s=new Xe,r=new Xe,o=new Bn,c=new YM({depthPacking:dO}),f=new WM,d={},m=t.maxTextureSize,g={[Xl]:Hr,[Hr]:Xl,[Xo]:Xo},v=new La({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Xe},radius:{value:4}},vertexShader:qX,fragmentShader:jX}),_=v.clone();_.defines.HORIZONTAL_PASS=1;const b=new rn;b.setAttribute("position",new Fn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Yi(b,v),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=N1;let T=this.type;this.render=function(L,P,G){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||L.length===0)return;const B=i.getRenderTarget(),U=i.getActiveCubeFace(),j=i.getActiveMipmapLevel(),ae=i.state;ae.setBlending(Fc),ae.buffers.color.setClear(1,1,1,1),ae.buffers.depth.setTest(!0),ae.setScissorTest(!1);const ne=T!==Go&&this.type===Go,de=T===Go&&this.type!==Go;for(let he=0,F=L.length;he<F;he++){const W=L[he],Z=W.shadow;if(Z===void 0){console.warn("THREE.WebGLShadowMap:",W,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;s.copy(Z.mapSize);const fe=Z.getFrameExtents();if(s.multiply(fe),r.copy(Z.mapSize),(s.x>m||s.y>m)&&(s.x>m&&(r.x=Math.floor(m/fe.x),s.x=r.x*fe.x,Z.mapSize.x=r.x),s.y>m&&(r.y=Math.floor(m/fe.y),s.y=r.y*fe.y,Z.mapSize.y=r.y)),Z.map===null||ne===!0||de===!0){const ie=this.type!==Go?{minFilter:Ss,magFilter:Ss}:{};Z.map!==null&&Z.map.dispose(),Z.map=new ql(s.x,s.y,ie),Z.map.texture.name=W.name+".shadowMap",Z.camera.updateProjectionMatrix()}i.setRenderTarget(Z.map),i.clear();const X=Z.getViewportCount();for(let ie=0;ie<X;ie++){const Ee=Z.getViewport(ie);o.set(r.x*Ee.x,r.y*Ee.y,r.x*Ee.z,r.y*Ee.w),ae.viewport(o),Z.updateMatrices(W,ie),n=Z.getFrustum(),N(P,G,Z.camera,W,this.type)}Z.isPointLightShadow!==!0&&this.type===Go&&C(Z,G),Z.needsUpdate=!1}T=this.type,M.needsUpdate=!1,i.setRenderTarget(B,U,j)};function C(L,P){const G=e.update(A);v.defines.VSM_SAMPLES!==L.blurSamples&&(v.defines.VSM_SAMPLES=L.blurSamples,_.defines.VSM_SAMPLES=L.blurSamples,v.needsUpdate=!0,_.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new ql(s.x,s.y)),v.uniforms.shadow_pass.value=L.map.texture,v.uniforms.resolution.value=L.mapSize,v.uniforms.radius.value=L.radius,i.setRenderTarget(L.mapPass),i.clear(),i.renderBufferDirect(P,null,G,v,A,null),_.uniforms.shadow_pass.value=L.mapPass.texture,_.uniforms.resolution.value=L.mapSize,_.uniforms.radius.value=L.radius,i.setRenderTarget(L.map),i.clear(),i.renderBufferDirect(P,null,G,_,A,null)}function D(L,P,G,B){let U=null;const j=G.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(j!==void 0)U=j;else if(U=G.isPointLight===!0?f:c,i.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const ae=U.uuid,ne=P.uuid;let de=d[ae];de===void 0&&(de={},d[ae]=de);let he=de[ne];he===void 0&&(he=U.clone(),de[ne]=he,P.addEventListener("dispose",I)),U=he}if(U.visible=P.visible,U.wireframe=P.wireframe,B===Go?U.side=P.shadowSide!==null?P.shadowSide:P.side:U.side=P.shadowSide!==null?P.shadowSide:g[P.side],U.alphaMap=P.alphaMap,U.alphaTest=P.alphaTest,U.map=P.map,U.clipShadows=P.clipShadows,U.clippingPlanes=P.clippingPlanes,U.clipIntersection=P.clipIntersection,U.displacementMap=P.displacementMap,U.displacementScale=P.displacementScale,U.displacementBias=P.displacementBias,U.wireframeLinewidth=P.wireframeLinewidth,U.linewidth=P.linewidth,G.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const ae=i.properties.get(U);ae.light=G}return U}function N(L,P,G,B,U){if(L.visible===!1)return;if(L.layers.test(P.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&U===Go)&&(!L.frustumCulled||n.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,L.matrixWorld);const ne=e.update(L),de=L.material;if(Array.isArray(de)){const he=ne.groups;for(let F=0,W=he.length;F<W;F++){const Z=he[F],fe=de[Z.materialIndex];if(fe&&fe.visible){const X=D(L,fe,B,U);L.onBeforeShadow(i,L,P,G,ne,X,Z),i.renderBufferDirect(G,null,ne,X,L,Z),L.onAfterShadow(i,L,P,G,ne,X,Z)}}}else if(de.visible){const he=D(L,de,B,U);L.onBeforeShadow(i,L,P,G,ne,he,null),i.renderBufferDirect(G,null,ne,he,L,null),L.onAfterShadow(i,L,P,G,ne,he,null)}}const ae=L.children;for(let ne=0,de=ae.length;ne<de;ne++)N(ae[ne],P,G,B,U)}function I(L){L.target.removeEventListener("dispose",I);for(const G in d){const B=d[G],U=L.target.uuid;U in B&&(B[U].dispose(),delete B[U])}}}const WX={[R_]:C_,[N_]:L_,[D_]:U_,[$h]:O_,[C_]:R_,[L_]:N_,[U_]:D_,[O_]:$h};function ZX(i,e){function t(){let ue=!1;const ct=new Bn;let Oe=null;const ke=new Bn(0,0,0,0);return{setMask:function(ft){Oe!==ft&&!ue&&(i.colorMask(ft,ft,ft,ft),Oe=ft)},setLocked:function(ft){ue=ft},setClear:function(ft,ut,qt,Pn,ai){ai===!0&&(ft*=Pn,ut*=Pn,qt*=Pn),ct.set(ft,ut,qt,Pn),ke.equals(ct)===!1&&(i.clearColor(ft,ut,qt,Pn),ke.copy(ct))},reset:function(){ue=!1,Oe=null,ke.set(-1,0,0,0)}}}function n(){let ue=!1,ct=!1,Oe=null,ke=null,ft=null;return{setReversed:function(ut){if(ct!==ut){const qt=e.get("EXT_clip_control");ut?qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.ZERO_TO_ONE_EXT):qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.NEGATIVE_ONE_TO_ONE_EXT),ct=ut;const Pn=ft;ft=null,this.setClear(Pn)}},getReversed:function(){return ct},setTest:function(ut){ut?qe(i.DEPTH_TEST):Ke(i.DEPTH_TEST)},setMask:function(ut){Oe!==ut&&!ue&&(i.depthMask(ut),Oe=ut)},setFunc:function(ut){if(ct&&(ut=WX[ut]),ke!==ut){switch(ut){case R_:i.depthFunc(i.NEVER);break;case C_:i.depthFunc(i.ALWAYS);break;case N_:i.depthFunc(i.LESS);break;case $h:i.depthFunc(i.LEQUAL);break;case D_:i.depthFunc(i.EQUAL);break;case O_:i.depthFunc(i.GEQUAL);break;case L_:i.depthFunc(i.GREATER);break;case U_:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}ke=ut}},setLocked:function(ut){ue=ut},setClear:function(ut){ft!==ut&&(ct&&(ut=1-ut),i.clearDepth(ut),ft=ut)},reset:function(){ue=!1,Oe=null,ke=null,ft=null,ct=!1}}}function s(){let ue=!1,ct=null,Oe=null,ke=null,ft=null,ut=null,qt=null,Pn=null,ai=null;return{setTest:function(gn){ue||(gn?qe(i.STENCIL_TEST):Ke(i.STENCIL_TEST))},setMask:function(gn){ct!==gn&&!ue&&(i.stencilMask(gn),ct=gn)},setFunc:function(gn,js,Hi){(Oe!==gn||ke!==js||ft!==Hi)&&(i.stencilFunc(gn,js,Hi),Oe=gn,ke=js,ft=Hi)},setOp:function(gn,js,Hi){(ut!==gn||qt!==js||Pn!==Hi)&&(i.stencilOp(gn,js,Hi),ut=gn,qt=js,Pn=Hi)},setLocked:function(gn){ue=gn},setClear:function(gn){ai!==gn&&(i.clearStencil(gn),ai=gn)},reset:function(){ue=!1,ct=null,Oe=null,ke=null,ft=null,ut=null,qt=null,Pn=null,ai=null}}}const r=new t,o=new n,c=new s,f=new WeakMap,d=new WeakMap;let m={},g={},v=new WeakMap,_=[],b=null,A=!1,M=null,T=null,C=null,D=null,N=null,I=null,L=null,P=new lt(0,0,0),G=0,B=!1,U=null,j=null,ae=null,ne=null,de=null;const he=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let F=!1,W=0;const Z=i.getParameter(i.VERSION);Z.indexOf("WebGL")!==-1?(W=parseFloat(/^WebGL (\d)/.exec(Z)[1]),F=W>=1):Z.indexOf("OpenGL ES")!==-1&&(W=parseFloat(/^OpenGL ES (\d)/.exec(Z)[1]),F=W>=2);let fe=null,X={};const ie=i.getParameter(i.SCISSOR_BOX),Ee=i.getParameter(i.VIEWPORT),Ue=new Bn().fromArray(ie),re=new Bn().fromArray(Ee);function Ce(ue,ct,Oe,ke){const ft=new Uint8Array(4),ut=i.createTexture();i.bindTexture(ue,ut),i.texParameteri(ue,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(ue,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let qt=0;qt<Oe;qt++)ue===i.TEXTURE_3D||ue===i.TEXTURE_2D_ARRAY?i.texImage3D(ct,0,i.RGBA,1,1,ke,0,i.RGBA,i.UNSIGNED_BYTE,ft):i.texImage2D(ct+qt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,ft);return ut}const Be={};Be[i.TEXTURE_2D]=Ce(i.TEXTURE_2D,i.TEXTURE_2D,1),Be[i.TEXTURE_CUBE_MAP]=Ce(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Be[i.TEXTURE_2D_ARRAY]=Ce(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Be[i.TEXTURE_3D]=Ce(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),o.setClear(1),c.setClear(0),qe(i.DEPTH_TEST),o.setFunc($h),Fe(!1),Pe(TT),qe(i.CULL_FACE),te(Fc);function qe(ue){m[ue]!==!0&&(i.enable(ue),m[ue]=!0)}function Ke(ue){m[ue]!==!1&&(i.disable(ue),m[ue]=!1)}function Ct(ue,ct){return g[ue]!==ct?(i.bindFramebuffer(ue,ct),g[ue]=ct,ue===i.DRAW_FRAMEBUFFER&&(g[i.FRAMEBUFFER]=ct),ue===i.FRAMEBUFFER&&(g[i.DRAW_FRAMEBUFFER]=ct),!0):!1}function bt(ue,ct){let Oe=_,ke=!1;if(ue){Oe=v.get(ct),Oe===void 0&&(Oe=[],v.set(ct,Oe));const ft=ue.textures;if(Oe.length!==ft.length||Oe[0]!==i.COLOR_ATTACHMENT0){for(let ut=0,qt=ft.length;ut<qt;ut++)Oe[ut]=i.COLOR_ATTACHMENT0+ut;Oe.length=ft.length,ke=!0}}else Oe[0]!==i.BACK&&(Oe[0]=i.BACK,ke=!0);ke&&i.drawBuffers(Oe)}function $t(ue){return b!==ue?(i.useProgram(ue),b=ue,!0):!1}const jt={[af]:i.FUNC_ADD,[PD]:i.FUNC_SUBTRACT,[ID]:i.FUNC_REVERSE_SUBTRACT};jt[BD]=i.MIN,jt[FD]=i.MAX;const Nt={[HD]:i.ZERO,[VD]:i.ONE,[GD]:i.SRC_COLOR,[A_]:i.SRC_ALPHA,[YD]:i.SRC_ALPHA_SATURATE,[qD]:i.DST_COLOR,[$D]:i.DST_ALPHA,[kD]:i.ONE_MINUS_SRC_COLOR,[w_]:i.ONE_MINUS_SRC_ALPHA,[jD]:i.ONE_MINUS_DST_COLOR,[XD]:i.ONE_MINUS_DST_ALPHA,[WD]:i.CONSTANT_COLOR,[ZD]:i.ONE_MINUS_CONSTANT_COLOR,[KD]:i.CONSTANT_ALPHA,[QD]:i.ONE_MINUS_CONSTANT_ALPHA};function te(ue,ct,Oe,ke,ft,ut,qt,Pn,ai,gn){if(ue===Fc){A===!0&&(Ke(i.BLEND),A=!1);return}if(A===!1&&(qe(i.BLEND),A=!0),ue!==zD){if(ue!==M||gn!==B){if((T!==af||N!==af)&&(i.blendEquation(i.FUNC_ADD),T=af,N=af),gn)switch(ue){case Fh:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case MT:i.blendFunc(i.ONE,i.ONE);break;case AT:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case wT:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}else switch(ue){case Fh:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case MT:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case AT:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case wT:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}C=null,D=null,I=null,L=null,P.set(0,0,0),G=0,M=ue,B=gn}return}ft=ft||ct,ut=ut||Oe,qt=qt||ke,(ct!==T||ft!==N)&&(i.blendEquationSeparate(jt[ct],jt[ft]),T=ct,N=ft),(Oe!==C||ke!==D||ut!==I||qt!==L)&&(i.blendFuncSeparate(Nt[Oe],Nt[ke],Nt[ut],Nt[qt]),C=Oe,D=ke,I=ut,L=qt),(Pn.equals(P)===!1||ai!==G)&&(i.blendColor(Pn.r,Pn.g,Pn.b,ai),P.copy(Pn),G=ai),M=ue,B=!1}function _n(ue,ct){ue.side===Xo?Ke(i.CULL_FACE):qe(i.CULL_FACE);let Oe=ue.side===Hr;ct&&(Oe=!Oe),Fe(Oe),ue.blending===Fh&&ue.transparent===!1?te(Fc):te(ue.blending,ue.blendEquation,ue.blendSrc,ue.blendDst,ue.blendEquationAlpha,ue.blendSrcAlpha,ue.blendDstAlpha,ue.blendColor,ue.blendAlpha,ue.premultipliedAlpha),o.setFunc(ue.depthFunc),o.setTest(ue.depthTest),o.setMask(ue.depthWrite),r.setMask(ue.colorWrite);const ke=ue.stencilWrite;c.setTest(ke),ke&&(c.setMask(ue.stencilWriteMask),c.setFunc(ue.stencilFunc,ue.stencilRef,ue.stencilFuncMask),c.setOp(ue.stencilFail,ue.stencilZFail,ue.stencilZPass)),Je(ue.polygonOffset,ue.polygonOffsetFactor,ue.polygonOffsetUnits),ue.alphaToCoverage===!0?qe(i.SAMPLE_ALPHA_TO_COVERAGE):Ke(i.SAMPLE_ALPHA_TO_COVERAGE)}function Fe(ue){U!==ue&&(ue?i.frontFace(i.CW):i.frontFace(i.CCW),U=ue)}function Pe(ue){ue!==OD?(qe(i.CULL_FACE),ue!==j&&(ue===TT?i.cullFace(i.BACK):ue===LD?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Ke(i.CULL_FACE),j=ue}function Ie(ue){ue!==ae&&(F&&i.lineWidth(ue),ae=ue)}function Je(ue,ct,Oe){ue?(qe(i.POLYGON_OFFSET_FILL),(ne!==ct||de!==Oe)&&(i.polygonOffset(ct,Oe),ne=ct,de=Oe)):Ke(i.POLYGON_OFFSET_FILL)}function Ne(ue){ue?qe(i.SCISSOR_TEST):Ke(i.SCISSOR_TEST)}function Y(ue){ue===void 0&&(ue=i.TEXTURE0+he-1),fe!==ue&&(i.activeTexture(ue),fe=ue)}function H(ue,ct,Oe){Oe===void 0&&(fe===null?Oe=i.TEXTURE0+he-1:Oe=fe);let ke=X[Oe];ke===void 0&&(ke={type:void 0,texture:void 0},X[Oe]=ke),(ke.type!==ue||ke.texture!==ct)&&(fe!==Oe&&(i.activeTexture(Oe),fe=Oe),i.bindTexture(ue,ct||Be[ue]),ke.type=ue,ke.texture=ct)}function Q(){const ue=X[fe];ue!==void 0&&ue.type!==void 0&&(i.bindTexture(ue.type,null),ue.type=void 0,ue.texture=void 0)}function pe(){try{i.compressedTexImage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function De(){try{i.compressedTexImage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Me(){try{i.texSubImage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function et(){try{i.texSubImage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function We(){try{i.compressedTexSubImage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function tt(){try{i.compressedTexSubImage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Zt(){try{i.texStorage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ye(){try{i.texStorage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function pt(){try{i.texImage2D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function yt(){try{i.texImage3D(...arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function vt(ue){Ue.equals(ue)===!1&&(i.scissor(ue.x,ue.y,ue.z,ue.w),Ue.copy(ue))}function st(ue){re.equals(ue)===!1&&(i.viewport(ue.x,ue.y,ue.z,ue.w),re.copy(ue))}function Xt(ue,ct){let Oe=d.get(ct);Oe===void 0&&(Oe=new WeakMap,d.set(ct,Oe));let ke=Oe.get(ue);ke===void 0&&(ke=i.getUniformBlockIndex(ct,ue.name),Oe.set(ue,ke))}function wt(ue,ct){const ke=d.get(ct).get(ue);f.get(ct)!==ke&&(i.uniformBlockBinding(ct,ke,ue.__bindingPointIndex),f.set(ct,ke))}function bn(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),m={},fe=null,X={},g={},v=new WeakMap,_=[],b=null,A=!1,M=null,T=null,C=null,D=null,N=null,I=null,L=null,P=new lt(0,0,0),G=0,B=!1,U=null,j=null,ae=null,ne=null,de=null,Ue.set(0,0,i.canvas.width,i.canvas.height),re.set(0,0,i.canvas.width,i.canvas.height),r.reset(),o.reset(),c.reset()}return{buffers:{color:r,depth:o,stencil:c},enable:qe,disable:Ke,bindFramebuffer:Ct,drawBuffers:bt,useProgram:$t,setBlending:te,setMaterial:_n,setFlipSided:Fe,setCullFace:Pe,setLineWidth:Ie,setPolygonOffset:Je,setScissorTest:Ne,activeTexture:Y,bindTexture:H,unbindTexture:Q,compressedTexImage2D:pe,compressedTexImage3D:De,texImage2D:pt,texImage3D:yt,updateUBOMapping:Xt,uniformBlockBinding:wt,texStorage2D:Zt,texStorage3D:Ye,texSubImage2D:Me,texSubImage3D:et,compressedTexSubImage2D:We,compressedTexSubImage3D:tt,scissor:vt,viewport:st,reset:bn}}function KX(i,e,t,n,s,r,o){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Xe,m=new WeakMap;let g;const v=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(Y,H){return _?new OffscreenCanvas(Y,H):H0("canvas")}function A(Y,H,Q){let pe=1;const De=Ne(Y);if((De.width>Q||De.height>Q)&&(pe=Q/Math.max(De.width,De.height)),pe<1)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap||typeof VideoFrame<"u"&&Y instanceof VideoFrame){const Me=Math.floor(pe*De.width),et=Math.floor(pe*De.height);g===void 0&&(g=b(Me,et));const We=H?b(Me,et):g;return We.width=Me,We.height=et,We.getContext("2d").drawImage(Y,0,0,Me,et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+De.width+"x"+De.height+") to ("+Me+"x"+et+")."),We}else return"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+De.width+"x"+De.height+")."),Y;return Y}function M(Y){return Y.generateMipmaps}function T(Y){i.generateMipmap(Y)}function C(Y){return Y.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:Y.isWebGL3DRenderTarget?i.TEXTURE_3D:Y.isWebGLArrayRenderTarget||Y.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function D(Y,H,Q,pe,De=!1){if(Y!==null){if(i[Y]!==void 0)return i[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let Me=H;if(H===i.RED&&(Q===i.FLOAT&&(Me=i.R32F),Q===i.HALF_FLOAT&&(Me=i.R16F),Q===i.UNSIGNED_BYTE&&(Me=i.R8)),H===i.RED_INTEGER&&(Q===i.UNSIGNED_BYTE&&(Me=i.R8UI),Q===i.UNSIGNED_SHORT&&(Me=i.R16UI),Q===i.UNSIGNED_INT&&(Me=i.R32UI),Q===i.BYTE&&(Me=i.R8I),Q===i.SHORT&&(Me=i.R16I),Q===i.INT&&(Me=i.R32I)),H===i.RG&&(Q===i.FLOAT&&(Me=i.RG32F),Q===i.HALF_FLOAT&&(Me=i.RG16F),Q===i.UNSIGNED_BYTE&&(Me=i.RG8)),H===i.RG_INTEGER&&(Q===i.UNSIGNED_BYTE&&(Me=i.RG8UI),Q===i.UNSIGNED_SHORT&&(Me=i.RG16UI),Q===i.UNSIGNED_INT&&(Me=i.RG32UI),Q===i.BYTE&&(Me=i.RG8I),Q===i.SHORT&&(Me=i.RG16I),Q===i.INT&&(Me=i.RG32I)),H===i.RGB_INTEGER&&(Q===i.UNSIGNED_BYTE&&(Me=i.RGB8UI),Q===i.UNSIGNED_SHORT&&(Me=i.RGB16UI),Q===i.UNSIGNED_INT&&(Me=i.RGB32UI),Q===i.BYTE&&(Me=i.RGB8I),Q===i.SHORT&&(Me=i.RGB16I),Q===i.INT&&(Me=i.RGB32I)),H===i.RGBA_INTEGER&&(Q===i.UNSIGNED_BYTE&&(Me=i.RGBA8UI),Q===i.UNSIGNED_SHORT&&(Me=i.RGBA16UI),Q===i.UNSIGNED_INT&&(Me=i.RGBA32UI),Q===i.BYTE&&(Me=i.RGBA8I),Q===i.SHORT&&(Me=i.RGBA16I),Q===i.INT&&(Me=i.RGBA32I)),H===i.RGB&&Q===i.UNSIGNED_INT_5_9_9_9_REV&&(Me=i.RGB9_E5),H===i.RGBA){const et=De?I0:vn.getTransfer(pe);Q===i.FLOAT&&(Me=i.RGBA32F),Q===i.HALF_FLOAT&&(Me=i.RGBA16F),Q===i.UNSIGNED_BYTE&&(Me=et===Wn?i.SRGB8_ALPHA8:i.RGBA8),Q===i.UNSIGNED_SHORT_4_4_4_4&&(Me=i.RGBA4),Q===i.UNSIGNED_SHORT_5_5_5_1&&(Me=i.RGB5_A1)}return(Me===i.R16F||Me===i.R32F||Me===i.RG16F||Me===i.RG32F||Me===i.RGBA16F||Me===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Me}function N(Y,H){let Q;return Y?H===null||H===qc||H===Xp?Q=i.DEPTH24_STENCIL8:H===aa?Q=i.DEPTH32F_STENCIL8:H===$p&&(Q=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):H===null||H===qc||H===Xp?Q=i.DEPTH_COMPONENT24:H===aa?Q=i.DEPTH_COMPONENT32F:H===$p&&(Q=i.DEPTH_COMPONENT16),Q}function I(Y,H){return M(Y)===!0||Y.isFramebufferTexture&&Y.minFilter!==Ss&&Y.minFilter!==Bi?Math.log2(Math.max(H.width,H.height))+1:Y.mipmaps!==void 0&&Y.mipmaps.length>0?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?H.mipmaps.length:1}function L(Y){const H=Y.target;H.removeEventListener("dispose",L),G(H),H.isVideoTexture&&m.delete(H)}function P(Y){const H=Y.target;H.removeEventListener("dispose",P),U(H)}function G(Y){const H=n.get(Y);if(H.__webglInit===void 0)return;const Q=Y.source,pe=v.get(Q);if(pe){const De=pe[H.__cacheKey];De.usedTimes--,De.usedTimes===0&&B(Y),Object.keys(pe).length===0&&v.delete(Q)}n.remove(Y)}function B(Y){const H=n.get(Y);i.deleteTexture(H.__webglTexture);const Q=Y.source,pe=v.get(Q);delete pe[H.__cacheKey],o.memory.textures--}function U(Y){const H=n.get(Y);if(Y.depthTexture&&(Y.depthTexture.dispose(),n.remove(Y.depthTexture)),Y.isWebGLCubeRenderTarget)for(let pe=0;pe<6;pe++){if(Array.isArray(H.__webglFramebuffer[pe]))for(let De=0;De<H.__webglFramebuffer[pe].length;De++)i.deleteFramebuffer(H.__webglFramebuffer[pe][De]);else i.deleteFramebuffer(H.__webglFramebuffer[pe]);H.__webglDepthbuffer&&i.deleteRenderbuffer(H.__webglDepthbuffer[pe])}else{if(Array.isArray(H.__webglFramebuffer))for(let pe=0;pe<H.__webglFramebuffer.length;pe++)i.deleteFramebuffer(H.__webglFramebuffer[pe]);else i.deleteFramebuffer(H.__webglFramebuffer);if(H.__webglDepthbuffer&&i.deleteRenderbuffer(H.__webglDepthbuffer),H.__webglMultisampledFramebuffer&&i.deleteFramebuffer(H.__webglMultisampledFramebuffer),H.__webglColorRenderbuffer)for(let pe=0;pe<H.__webglColorRenderbuffer.length;pe++)H.__webglColorRenderbuffer[pe]&&i.deleteRenderbuffer(H.__webglColorRenderbuffer[pe]);H.__webglDepthRenderbuffer&&i.deleteRenderbuffer(H.__webglDepthRenderbuffer)}const Q=Y.textures;for(let pe=0,De=Q.length;pe<De;pe++){const Me=n.get(Q[pe]);Me.__webglTexture&&(i.deleteTexture(Me.__webglTexture),o.memory.textures--),n.remove(Q[pe])}n.remove(Y)}let j=0;function ae(){j=0}function ne(){const Y=j;return Y>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+s.maxTextures),j+=1,Y}function de(Y){const H=[];return H.push(Y.wrapS),H.push(Y.wrapT),H.push(Y.wrapR||0),H.push(Y.magFilter),H.push(Y.minFilter),H.push(Y.anisotropy),H.push(Y.internalFormat),H.push(Y.format),H.push(Y.type),H.push(Y.generateMipmaps),H.push(Y.premultiplyAlpha),H.push(Y.flipY),H.push(Y.unpackAlignment),H.push(Y.colorSpace),H.join()}function he(Y,H){const Q=n.get(Y);if(Y.isVideoTexture&&Ie(Y),Y.isRenderTargetTexture===!1&&Y.version>0&&Q.__version!==Y.version){const pe=Y.image;if(pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{re(Q,Y,H);return}}t.bindTexture(i.TEXTURE_2D,Q.__webglTexture,i.TEXTURE0+H)}function F(Y,H){const Q=n.get(Y);if(Y.version>0&&Q.__version!==Y.version){re(Q,Y,H);return}t.bindTexture(i.TEXTURE_2D_ARRAY,Q.__webglTexture,i.TEXTURE0+H)}function W(Y,H){const Q=n.get(Y);if(Y.version>0&&Q.__version!==Y.version){re(Q,Y,H);return}t.bindTexture(i.TEXTURE_3D,Q.__webglTexture,i.TEXTURE0+H)}function Z(Y,H){const Q=n.get(Y);if(Y.version>0&&Q.__version!==Y.version){Ce(Q,Y,H);return}t.bindTexture(i.TEXTURE_CUBE_MAP,Q.__webglTexture,i.TEXTURE0+H)}const fe={[mf]:i.REPEAT,[Ca]:i.CLAMP_TO_EDGE,[kp]:i.MIRRORED_REPEAT},X={[Ss]:i.NEAREST,[O1]:i.NEAREST_MIPMAP_NEAREST,[Oh]:i.NEAREST_MIPMAP_LINEAR,[Bi]:i.LINEAR,[Ip]:i.LINEAR_MIPMAP_NEAREST,[ro]:i.LINEAR_MIPMAP_LINEAR},ie={[mO]:i.NEVER,[bO]:i.ALWAYS,[gO]:i.LESS,[DM]:i.LEQUAL,[yO]:i.EQUAL,[_O]:i.GEQUAL,[vO]:i.GREATER,[xO]:i.NOTEQUAL};function Ee(Y,H){if(H.type===aa&&e.has("OES_texture_float_linear")===!1&&(H.magFilter===Bi||H.magFilter===Ip||H.magFilter===Oh||H.magFilter===ro||H.minFilter===Bi||H.minFilter===Ip||H.minFilter===Oh||H.minFilter===ro)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(Y,i.TEXTURE_WRAP_S,fe[H.wrapS]),i.texParameteri(Y,i.TEXTURE_WRAP_T,fe[H.wrapT]),(Y===i.TEXTURE_3D||Y===i.TEXTURE_2D_ARRAY)&&i.texParameteri(Y,i.TEXTURE_WRAP_R,fe[H.wrapR]),i.texParameteri(Y,i.TEXTURE_MAG_FILTER,X[H.magFilter]),i.texParameteri(Y,i.TEXTURE_MIN_FILTER,X[H.minFilter]),H.compareFunction&&(i.texParameteri(Y,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(Y,i.TEXTURE_COMPARE_FUNC,ie[H.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(H.magFilter===Ss||H.minFilter!==Oh&&H.minFilter!==ro||H.type===aa&&e.has("OES_texture_float_linear")===!1)return;if(H.anisotropy>1||n.get(H).__currentAnisotropy){const Q=e.get("EXT_texture_filter_anisotropic");i.texParameterf(Y,Q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,s.getMaxAnisotropy())),n.get(H).__currentAnisotropy=H.anisotropy}}}function Ue(Y,H){let Q=!1;Y.__webglInit===void 0&&(Y.__webglInit=!0,H.addEventListener("dispose",L));const pe=H.source;let De=v.get(pe);De===void 0&&(De={},v.set(pe,De));const Me=de(H);if(Me!==Y.__cacheKey){De[Me]===void 0&&(De[Me]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,Q=!0),De[Me].usedTimes++;const et=De[Y.__cacheKey];et!==void 0&&(De[Y.__cacheKey].usedTimes--,et.usedTimes===0&&B(H)),Y.__cacheKey=Me,Y.__webglTexture=De[Me].texture}return Q}function re(Y,H,Q){let pe=i.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&&(pe=i.TEXTURE_2D_ARRAY),H.isData3DTexture&&(pe=i.TEXTURE_3D);const De=Ue(Y,H),Me=H.source;t.bindTexture(pe,Y.__webglTexture,i.TEXTURE0+Q);const et=n.get(Me);if(Me.version!==et.__version||De===!0){t.activeTexture(i.TEXTURE0+Q);const We=vn.getPrimaries(vn.workingColorSpace),tt=H.colorSpace===Oc?null:vn.getPrimaries(H.colorSpace),Zt=H.colorSpace===Oc||We===tt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,H.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,H.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Zt);let Ye=A(H.image,!1,s.maxTextureSize);Ye=Je(H,Ye);const pt=r.convert(H.format,H.colorSpace),yt=r.convert(H.type);let vt=D(H.internalFormat,pt,yt,H.colorSpace,H.isVideoTexture);Ee(pe,H);let st;const Xt=H.mipmaps,wt=H.isVideoTexture!==!0,bn=et.__version===void 0||De===!0,ue=Me.dataReady,ct=I(H,Ye);if(H.isDepthTexture)vt=N(H.format===jp,H.type),bn&&(wt?t.texStorage2D(i.TEXTURE_2D,1,vt,Ye.width,Ye.height):t.texImage2D(i.TEXTURE_2D,0,vt,Ye.width,Ye.height,0,pt,yt,null));else if(H.isDataTexture)if(Xt.length>0){wt&&bn&&t.texStorage2D(i.TEXTURE_2D,ct,vt,Xt[0].width,Xt[0].height);for(let Oe=0,ke=Xt.length;Oe<ke;Oe++)st=Xt[Oe],wt?ue&&t.texSubImage2D(i.TEXTURE_2D,Oe,0,0,st.width,st.height,pt,yt,st.data):t.texImage2D(i.TEXTURE_2D,Oe,vt,st.width,st.height,0,pt,yt,st.data);H.generateMipmaps=!1}else wt?(bn&&t.texStorage2D(i.TEXTURE_2D,ct,vt,Ye.width,Ye.height),ue&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Ye.width,Ye.height,pt,yt,Ye.data)):t.texImage2D(i.TEXTURE_2D,0,vt,Ye.width,Ye.height,0,pt,yt,Ye.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){wt&&bn&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ct,vt,Xt[0].width,Xt[0].height,Ye.depth);for(let Oe=0,ke=Xt.length;Oe<ke;Oe++)if(st=Xt[Oe],H.format!==ur)if(pt!==null)if(wt){if(ue)if(H.layerUpdates.size>0){const ft=IT(st.width,st.height,H.format,H.type);for(const ut of H.layerUpdates){const qt=st.data.subarray(ut*ft/st.data.BYTES_PER_ELEMENT,(ut+1)*ft/st.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Oe,0,0,ut,st.width,st.height,1,pt,qt)}H.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Oe,0,0,0,st.width,st.height,Ye.depth,pt,st.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Oe,vt,st.width,st.height,Ye.depth,0,st.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else wt?ue&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,Oe,0,0,0,st.width,st.height,Ye.depth,pt,yt,st.data):t.texImage3D(i.TEXTURE_2D_ARRAY,Oe,vt,st.width,st.height,Ye.depth,0,pt,yt,st.data)}else{wt&&bn&&t.texStorage2D(i.TEXTURE_2D,ct,vt,Xt[0].width,Xt[0].height);for(let Oe=0,ke=Xt.length;Oe<ke;Oe++)st=Xt[Oe],H.format!==ur?pt!==null?wt?ue&&t.compressedTexSubImage2D(i.TEXTURE_2D,Oe,0,0,st.width,st.height,pt,st.data):t.compressedTexImage2D(i.TEXTURE_2D,Oe,vt,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?ue&&t.texSubImage2D(i.TEXTURE_2D,Oe,0,0,st.width,st.height,pt,yt,st.data):t.texImage2D(i.TEXTURE_2D,Oe,vt,st.width,st.height,0,pt,yt,st.data)}else if(H.isDataArrayTexture)if(wt){if(bn&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ct,vt,Ye.width,Ye.height,Ye.depth),ue)if(H.layerUpdates.size>0){const Oe=IT(Ye.width,Ye.height,H.format,H.type);for(const ke of H.layerUpdates){const ft=Ye.data.subarray(ke*Oe/Ye.data.BYTES_PER_ELEMENT,(ke+1)*Oe/Ye.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,ke,Ye.width,Ye.height,1,pt,yt,ft)}H.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ye.width,Ye.height,Ye.depth,pt,yt,Ye.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,vt,Ye.width,Ye.height,Ye.depth,0,pt,yt,Ye.data);else if(H.isData3DTexture)wt?(bn&&t.texStorage3D(i.TEXTURE_3D,ct,vt,Ye.width,Ye.height,Ye.depth),ue&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ye.width,Ye.height,Ye.depth,pt,yt,Ye.data)):t.texImage3D(i.TEXTURE_3D,0,vt,Ye.width,Ye.height,Ye.depth,0,pt,yt,Ye.data);else if(H.isFramebufferTexture){if(bn)if(wt)t.texStorage2D(i.TEXTURE_2D,ct,vt,Ye.width,Ye.height);else{let Oe=Ye.width,ke=Ye.height;for(let ft=0;ft<ct;ft++)t.texImage2D(i.TEXTURE_2D,ft,vt,Oe,ke,0,pt,yt,null),Oe>>=1,ke>>=1}}else if(Xt.length>0){if(wt&&bn){const Oe=Ne(Xt[0]);t.texStorage2D(i.TEXTURE_2D,ct,vt,Oe.width,Oe.height)}for(let Oe=0,ke=Xt.length;Oe<ke;Oe++)st=Xt[Oe],wt?ue&&t.texSubImage2D(i.TEXTURE_2D,Oe,0,0,pt,yt,st):t.texImage2D(i.TEXTURE_2D,Oe,vt,pt,yt,st);H.generateMipmaps=!1}else if(wt){if(bn){const Oe=Ne(Ye);t.texStorage2D(i.TEXTURE_2D,ct,vt,Oe.width,Oe.height)}ue&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,pt,yt,Ye)}else t.texImage2D(i.TEXTURE_2D,0,vt,pt,yt,Ye);M(H)&&T(pe),et.__version=Me.version,H.onUpdate&&H.onUpdate(H)}Y.__version=H.version}function Ce(Y,H,Q){if(H.image.length!==6)return;const pe=Ue(Y,H),De=H.source;t.bindTexture(i.TEXTURE_CUBE_MAP,Y.__webglTexture,i.TEXTURE0+Q);const Me=n.get(De);if(De.version!==Me.__version||pe===!0){t.activeTexture(i.TEXTURE0+Q);const et=vn.getPrimaries(vn.workingColorSpace),We=H.colorSpace===Oc?null:vn.getPrimaries(H.colorSpace),tt=H.colorSpace===Oc||et===We?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,H.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,H.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,tt);const Zt=H.isCompressedTexture||H.image[0].isCompressedTexture,Ye=H.image[0]&&H.image[0].isDataTexture,pt=[];for(let ke=0;ke<6;ke++)!Zt&&!Ye?pt[ke]=A(H.image[ke],!0,s.maxCubemapSize):pt[ke]=Ye?H.image[ke].image:H.image[ke],pt[ke]=Je(H,pt[ke]);const yt=pt[0],vt=r.convert(H.format,H.colorSpace),st=r.convert(H.type),Xt=D(H.internalFormat,vt,st,H.colorSpace),wt=H.isVideoTexture!==!0,bn=Me.__version===void 0||pe===!0,ue=De.dataReady;let ct=I(H,yt);Ee(i.TEXTURE_CUBE_MAP,H);let Oe;if(Zt){wt&&bn&&t.texStorage2D(i.TEXTURE_CUBE_MAP,ct,Xt,yt.width,yt.height);for(let ke=0;ke<6;ke++){Oe=pt[ke].mipmaps;for(let ft=0;ft<Oe.length;ft++){const ut=Oe[ft];H.format!==ur?vt!==null?wt?ue&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ft,0,0,ut.width,ut.height,vt,ut.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ft,Xt,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):wt?ue&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ft,0,0,ut.width,ut.height,vt,st,ut.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ft,Xt,ut.width,ut.height,0,vt,st,ut.data)}}}else{if(Oe=H.mipmaps,wt&&bn){Oe.length>0&&ct++;const ke=Ne(pt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,ct,Xt,ke.width,ke.height)}for(let ke=0;ke<6;ke++)if(Ye){wt?ue&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,pt[ke].width,pt[ke].height,vt,st,pt[ke].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,Xt,pt[ke].width,pt[ke].height,0,vt,st,pt[ke].data);for(let ft=0;ft<Oe.length;ft++){const qt=Oe[ft].image[ke].image;wt?ue&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ft+1,0,0,qt.width,qt.height,vt,st,qt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ft+1,Xt,qt.width,qt.height,0,vt,st,qt.data)}}else{wt?ue&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,vt,st,pt[ke]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,Xt,vt,st,pt[ke]);for(let ft=0;ft<Oe.length;ft++){const ut=Oe[ft];wt?ue&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ft+1,0,0,vt,st,ut.image[ke]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ft+1,Xt,vt,st,ut.image[ke])}}}M(H)&&T(i.TEXTURE_CUBE_MAP),Me.__version=De.version,H.onUpdate&&H.onUpdate(H)}Y.__version=H.version}function Be(Y,H,Q,pe,De,Me){const et=r.convert(Q.format,Q.colorSpace),We=r.convert(Q.type),tt=D(Q.internalFormat,et,We,Q.colorSpace),Zt=n.get(H),Ye=n.get(Q);if(Ye.__renderTarget=H,!Zt.__hasExternalTextures){const pt=Math.max(1,H.width>>Me),yt=Math.max(1,H.height>>Me);De===i.TEXTURE_3D||De===i.TEXTURE_2D_ARRAY?t.texImage3D(De,Me,tt,pt,yt,H.depth,0,et,We,null):t.texImage2D(De,Me,tt,pt,yt,0,et,We,null)}t.bindFramebuffer(i.FRAMEBUFFER,Y),Pe(H)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,pe,De,Ye.__webglTexture,0,Fe(H)):(De===i.TEXTURE_2D||De>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&De<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,pe,De,Ye.__webglTexture,Me),t.bindFramebuffer(i.FRAMEBUFFER,null)}function qe(Y,H,Q){if(i.bindRenderbuffer(i.RENDERBUFFER,Y),H.depthBuffer){const pe=H.depthTexture,De=pe&&pe.isDepthTexture?pe.type:null,Me=N(H.stencilBuffer,De),et=H.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,We=Fe(H);Pe(H)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,We,Me,H.width,H.height):Q?i.renderbufferStorageMultisample(i.RENDERBUFFER,We,Me,H.width,H.height):i.renderbufferStorage(i.RENDERBUFFER,Me,H.width,H.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,et,i.RENDERBUFFER,Y)}else{const pe=H.textures;for(let De=0;De<pe.length;De++){const Me=pe[De],et=r.convert(Me.format,Me.colorSpace),We=r.convert(Me.type),tt=D(Me.internalFormat,et,We,Me.colorSpace),Zt=Fe(H);Q&&Pe(H)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Zt,tt,H.width,H.height):Pe(H)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Zt,tt,H.width,H.height):i.renderbufferStorage(i.RENDERBUFFER,tt,H.width,H.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Ke(Y,H){if(H&&H.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,Y),!(H.depthTexture&&H.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const pe=n.get(H.depthTexture);pe.__renderTarget=H,(!pe.__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&&(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),he(H.depthTexture,0);const De=pe.__webglTexture,Me=Fe(H);if(H.depthTexture.format===qp)Pe(H)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,De,0,Me):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,De,0);else if(H.depthTexture.format===jp)Pe(H)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,De,0,Me):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,De,0);else throw new Error("Unknown depthTexture format")}function Ct(Y){const H=n.get(Y),Q=Y.isWebGLCubeRenderTarget===!0;if(H.__boundDepthTexture!==Y.depthTexture){const pe=Y.depthTexture;if(H.__depthDisposeCallback&&H.__depthDisposeCallback(),pe){const De=()=>{delete H.__boundDepthTexture,delete H.__depthDisposeCallback,pe.removeEventListener("dispose",De)};pe.addEventListener("dispose",De),H.__depthDisposeCallback=De}H.__boundDepthTexture=pe}if(Y.depthTexture&&!H.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");Ke(H.__webglFramebuffer,Y)}else if(Q){H.__webglDepthbuffer=[];for(let pe=0;pe<6;pe++)if(t.bindFramebuffer(i.FRAMEBUFFER,H.__webglFramebuffer[pe]),H.__webglDepthbuffer[pe]===void 0)H.__webglDepthbuffer[pe]=i.createRenderbuffer(),qe(H.__webglDepthbuffer[pe],Y,!1);else{const De=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Me=H.__webglDepthbuffer[pe];i.bindRenderbuffer(i.RENDERBUFFER,Me),i.framebufferRenderbuffer(i.FRAMEBUFFER,De,i.RENDERBUFFER,Me)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer===void 0)H.__webglDepthbuffer=i.createRenderbuffer(),qe(H.__webglDepthbuffer,Y,!1);else{const pe=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,De=H.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,De),i.framebufferRenderbuffer(i.FRAMEBUFFER,pe,i.RENDERBUFFER,De)}t.bindFramebuffer(i.FRAMEBUFFER,null)}function bt(Y,H,Q){const pe=n.get(Y);H!==void 0&&Be(pe.__webglFramebuffer,Y,Y.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),Q!==void 0&&Ct(Y)}function $t(Y){const H=Y.texture,Q=n.get(Y),pe=n.get(H);Y.addEventListener("dispose",P);const De=Y.textures,Me=Y.isWebGLCubeRenderTarget===!0,et=De.length>1;if(et||(pe.__webglTexture===void 0&&(pe.__webglTexture=i.createTexture()),pe.__version=H.version,o.memory.textures++),Me){Q.__webglFramebuffer=[];for(let We=0;We<6;We++)if(H.mipmaps&&H.mipmaps.length>0){Q.__webglFramebuffer[We]=[];for(let tt=0;tt<H.mipmaps.length;tt++)Q.__webglFramebuffer[We][tt]=i.createFramebuffer()}else Q.__webglFramebuffer[We]=i.createFramebuffer()}else{if(H.mipmaps&&H.mipmaps.length>0){Q.__webglFramebuffer=[];for(let We=0;We<H.mipmaps.length;We++)Q.__webglFramebuffer[We]=i.createFramebuffer()}else Q.__webglFramebuffer=i.createFramebuffer();if(et)for(let We=0,tt=De.length;We<tt;We++){const Zt=n.get(De[We]);Zt.__webglTexture===void 0&&(Zt.__webglTexture=i.createTexture(),o.memory.textures++)}if(Y.samples>0&&Pe(Y)===!1){Q.__webglMultisampledFramebuffer=i.createFramebuffer(),Q.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Q.__webglMultisampledFramebuffer);for(let We=0;We<De.length;We++){const tt=De[We];Q.__webglColorRenderbuffer[We]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Q.__webglColorRenderbuffer[We]);const Zt=r.convert(tt.format,tt.colorSpace),Ye=r.convert(tt.type),pt=D(tt.internalFormat,Zt,Ye,tt.colorSpace,Y.isXRRenderTarget===!0),yt=Fe(Y);i.renderbufferStorageMultisample(i.RENDERBUFFER,yt,pt,Y.width,Y.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+We,i.RENDERBUFFER,Q.__webglColorRenderbuffer[We])}i.bindRenderbuffer(i.RENDERBUFFER,null),Y.depthBuffer&&(Q.__webglDepthRenderbuffer=i.createRenderbuffer(),qe(Q.__webglDepthRenderbuffer,Y,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Me){t.bindTexture(i.TEXTURE_CUBE_MAP,pe.__webglTexture),Ee(i.TEXTURE_CUBE_MAP,H);for(let We=0;We<6;We++)if(H.mipmaps&&H.mipmaps.length>0)for(let tt=0;tt<H.mipmaps.length;tt++)Be(Q.__webglFramebuffer[We][tt],Y,H,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+We,tt);else Be(Q.__webglFramebuffer[We],Y,H,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+We,0);M(H)&&T(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(et){for(let We=0,tt=De.length;We<tt;We++){const Zt=De[We],Ye=n.get(Zt);t.bindTexture(i.TEXTURE_2D,Ye.__webglTexture),Ee(i.TEXTURE_2D,Zt),Be(Q.__webglFramebuffer,Y,Zt,i.COLOR_ATTACHMENT0+We,i.TEXTURE_2D,0),M(Zt)&&T(i.TEXTURE_2D)}t.unbindTexture()}else{let We=i.TEXTURE_2D;if((Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(We=Y.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(We,pe.__webglTexture),Ee(We,H),H.mipmaps&&H.mipmaps.length>0)for(let tt=0;tt<H.mipmaps.length;tt++)Be(Q.__webglFramebuffer[tt],Y,H,i.COLOR_ATTACHMENT0,We,tt);else Be(Q.__webglFramebuffer,Y,H,i.COLOR_ATTACHMENT0,We,0);M(H)&&T(We),t.unbindTexture()}Y.depthBuffer&&Ct(Y)}function jt(Y){const H=Y.textures;for(let Q=0,pe=H.length;Q<pe;Q++){const De=H[Q];if(M(De)){const Me=C(Y),et=n.get(De).__webglTexture;t.bindTexture(Me,et),T(Me),t.unbindTexture()}}}const Nt=[],te=[];function _n(Y){if(Y.samples>0){if(Pe(Y)===!1){const H=Y.textures,Q=Y.width,pe=Y.height;let De=i.COLOR_BUFFER_BIT;const Me=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,et=n.get(Y),We=H.length>1;if(We)for(let tt=0;tt<H.length;tt++)t.bindFramebuffer(i.FRAMEBUFFER,et.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+tt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,et.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+tt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,et.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,et.__webglFramebuffer);for(let tt=0;tt<H.length;tt++){if(Y.resolveDepthBuffer&&(Y.depthBuffer&&(De|=i.DEPTH_BUFFER_BIT),Y.stencilBuffer&&Y.resolveStencilBuffer&&(De|=i.STENCIL_BUFFER_BIT)),We){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,et.__webglColorRenderbuffer[tt]);const Zt=n.get(H[tt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Zt,0)}i.blitFramebuffer(0,0,Q,pe,0,0,Q,pe,De,i.NEAREST),f===!0&&(Nt.length=0,te.length=0,Nt.push(i.COLOR_ATTACHMENT0+tt),Y.depthBuffer&&Y.resolveDepthBuffer===!1&&(Nt.push(Me),te.push(Me),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,te)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Nt))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),We)for(let tt=0;tt<H.length;tt++){t.bindFramebuffer(i.FRAMEBUFFER,et.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+tt,i.RENDERBUFFER,et.__webglColorRenderbuffer[tt]);const Zt=n.get(H[tt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,et.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+tt,i.TEXTURE_2D,Zt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,et.__webglMultisampledFramebuffer)}else if(Y.depthBuffer&&Y.resolveDepthBuffer===!1&&f){const H=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[H])}}}function Fe(Y){return Math.min(s.maxSamples,Y.samples)}function Pe(Y){const H=n.get(Y);return Y.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&H.__useRenderToTexture!==!1}function Ie(Y){const H=o.render.frame;m.get(Y)!==H&&(m.set(Y,H),Y.update())}function Je(Y,H){const Q=Y.colorSpace,pe=Y.format,De=Y.type;return Y.isCompressedTexture===!0||Y.isVideoTexture===!0||Q!==qs&&Q!==Oc&&(vn.getTransfer(Q)===Wn?(pe!==ur||De!==Wo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Q)),H}function Ne(Y){return typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement?(d.width=Y.naturalWidth||Y.width,d.height=Y.naturalHeight||Y.height):typeof VideoFrame<"u"&&Y instanceof VideoFrame?(d.width=Y.displayWidth,d.height=Y.displayHeight):(d.width=Y.width,d.height=Y.height),d}this.allocateTextureUnit=ne,this.resetTextureUnits=ae,this.setTexture2D=he,this.setTexture2DArray=F,this.setTexture3D=W,this.setTextureCube=Z,this.rebindTextures=bt,this.setupRenderTarget=$t,this.updateRenderTargetMipmap=jt,this.updateMultisampleRenderTarget=_n,this.setupDepthRenderbuffer=Ct,this.setupFrameBufferTexture=Be,this.useMultisampledRTT=Pe}function LL(i,e){function t(n,s=Oc){let r;const o=vn.getTransfer(s);if(n===Wo)return i.UNSIGNED_BYTE;if(n===U1)return i.UNSIGNED_SHORT_4_4_4_4;if(n===z1)return i.UNSIGNED_SHORT_5_5_5_1;if(n===SM)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===_M)return i.BYTE;if(n===bM)return i.SHORT;if(n===$p)return i.UNSIGNED_SHORT;if(n===L1)return i.INT;if(n===qc)return i.UNSIGNED_INT;if(n===aa)return i.FLOAT;if(n===pm)return i.HALF_FLOAT;if(n===EM)return i.ALPHA;if(n===TM)return i.RGB;if(n===ur)return i.RGBA;if(n===MM)return i.LUMINANCE;if(n===AM)return i.LUMINANCE_ALPHA;if(n===qp)return i.DEPTH_COMPONENT;if(n===jp)return i.DEPTH_STENCIL;if(n===P1)return i.RED;if(n===ny)return i.RED_INTEGER;if(n===wM)return i.RG;if(n===I1)return i.RG_INTEGER;if(n===B1)return i.RGBA_INTEGER;if(n===x0||n===_0||n===b0||n===S0)if(o===Wn)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===x0)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===_0)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===b0)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===S0)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===x0)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===_0)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===b0)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===S0)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===z_||n===P_||n===I_||n===B_)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===z_)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===P_)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===I_)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===B_)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===F_||n===H_||n===V_)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(n===F_||n===H_)return o===Wn?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===V_)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===G_||n===k_||n===$_||n===X_||n===q_||n===j_||n===Y_||n===W_||n===Z_||n===K_||n===Q_||n===J_||n===e1||n===t1)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(n===G_)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===k_)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===$_)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===X_)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===q_)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===j_)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Y_)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===W_)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Z_)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===K_)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Q_)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===J_)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===e1)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===t1)return o===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===E0||n===n1||n===i1)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(n===E0)return o===Wn?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===n1)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===i1)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===RM||n===s1||n===r1||n===a1)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(n===E0)return r.COMPRESSED_RED_RGTC1_EXT;if(n===s1)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===r1)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===a1)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Xp?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const QX=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,JX=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class eq{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const s=new Fi,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new La({vertexShader:QX,fragmentShader:JX,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Yi(new ym(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class tq extends Yl{constructor(e,t){super();const n=this;let s=null,r=1,o=null,c="local-floor",f=1,d=null,m=null,g=null,v=null,_=null,b=null;const A=new eq,M=t.getContextAttributes();let T=null,C=null;const D=[],N=[],I=new Xe;let L=null;const P=new _s;P.viewport=new Bn;const G=new _s;G.viewport=new Bn;const B=[P,G],U=new bL;let j=null,ae=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let Ce=D[re];return Ce===void 0&&(Ce=new r_,D[re]=Ce),Ce.getTargetRaySpace()},this.getControllerGrip=function(re){let Ce=D[re];return Ce===void 0&&(Ce=new r_,D[re]=Ce),Ce.getGripSpace()},this.getHand=function(re){let Ce=D[re];return Ce===void 0&&(Ce=new r_,D[re]=Ce),Ce.getHandSpace()};function ne(re){const Ce=N.indexOf(re.inputSource);if(Ce===-1)return;const Be=D[Ce];Be!==void 0&&(Be.update(re.inputSource,re.frame,d||o),Be.dispatchEvent({type:re.type,data:re.inputSource}))}function de(){s.removeEventListener("select",ne),s.removeEventListener("selectstart",ne),s.removeEventListener("selectend",ne),s.removeEventListener("squeeze",ne),s.removeEventListener("squeezestart",ne),s.removeEventListener("squeezeend",ne),s.removeEventListener("end",de),s.removeEventListener("inputsourceschange",he);for(let re=0;re<D.length;re++){const Ce=N[re];Ce!==null&&(N[re]=null,D[re].disconnect(Ce))}j=null,ae=null,A.reset(),e.setRenderTarget(T),_=null,v=null,g=null,s=null,C=null,Ue.stop(),n.isPresenting=!1,e.setPixelRatio(L),e.setSize(I.width,I.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){r=re,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){c=re,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(re){d=re},this.getBaseLayer=function(){return v!==null?v:_},this.getBinding=function(){return g},this.getFrame=function(){return b},this.getSession=function(){return s},this.setSession=async function(re){if(s=re,s!==null){if(T=e.getRenderTarget(),s.addEventListener("select",ne),s.addEventListener("selectstart",ne),s.addEventListener("selectend",ne),s.addEventListener("squeeze",ne),s.addEventListener("squeezestart",ne),s.addEventListener("squeezeend",ne),s.addEventListener("end",de),s.addEventListener("inputsourceschange",he),M.xrCompatible!==!0&&await t.makeXRCompatible(),L=e.getPixelRatio(),e.getSize(I),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Be=null,qe=null,Ke=null;M.depth&&(Ke=M.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Be=M.stencil?jp:qp,qe=M.stencil?Xp:qc);const Ct={colorFormat:t.RGBA8,depthFormat:Ke,scaleFactor:r};g=new XRWebGLBinding(s,t),v=g.createProjectionLayer(Ct),s.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),C=new ql(v.textureWidth,v.textureHeight,{format:ur,type:Wo,depthTexture:new VM(v.textureWidth,v.textureHeight,qe,void 0,void 0,void 0,void 0,void 0,void 0,Be),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const Be={antialias:M.antialias,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:r};_=new XRWebGLLayer(s,t,Be),s.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),C=new ql(_.framebufferWidth,_.framebufferHeight,{format:ur,type:Wo,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(f),d=null,o=await s.requestReferenceSpace(c),Ue.setContext(s),Ue.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return A.getDepthTexture()};function he(re){for(let Ce=0;Ce<re.removed.length;Ce++){const Be=re.removed[Ce],qe=N.indexOf(Be);qe>=0&&(N[qe]=null,D[qe].disconnect(Be))}for(let Ce=0;Ce<re.added.length;Ce++){const Be=re.added[Ce];let qe=N.indexOf(Be);if(qe===-1){for(let Ct=0;Ct<D.length;Ct++)if(Ct>=N.length){N.push(Be),qe=Ct;break}else if(N[Ct]===null){N[Ct]=Be,qe=Ct;break}if(qe===-1)break}const Ke=D[qe];Ke&&Ke.connect(Be)}}const F=new K,W=new K;function Z(re,Ce,Be){F.setFromMatrixPosition(Ce.matrixWorld),W.setFromMatrixPosition(Be.matrixWorld);const qe=F.distanceTo(W),Ke=Ce.projectionMatrix.elements,Ct=Be.projectionMatrix.elements,bt=Ke[14]/(Ke[10]-1),$t=Ke[14]/(Ke[10]+1),jt=(Ke[9]+1)/Ke[5],Nt=(Ke[9]-1)/Ke[5],te=(Ke[8]-1)/Ke[0],_n=(Ct[8]+1)/Ct[0],Fe=bt*te,Pe=bt*_n,Ie=qe/(-te+_n),Je=Ie*-te;if(Ce.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(Je),re.translateZ(Ie),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert(),Ke[10]===-1)re.projectionMatrix.copy(Ce.projectionMatrix),re.projectionMatrixInverse.copy(Ce.projectionMatrixInverse);else{const Ne=bt+Ie,Y=$t+Ie,H=Fe-Je,Q=Pe+(qe-Je),pe=jt*$t/Y*Ne,De=Nt*$t/Y*Ne;re.projectionMatrix.makePerspective(H,Q,pe,De,Ne,Y),re.projectionMatrixInverse.copy(re.projectionMatrix).invert()}}function fe(re,Ce){Ce===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(Ce.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(s===null)return;let Ce=re.near,Be=re.far;A.texture!==null&&(A.depthNear>0&&(Ce=A.depthNear),A.depthFar>0&&(Be=A.depthFar)),U.near=G.near=P.near=Ce,U.far=G.far=P.far=Be,(j!==U.near||ae!==U.far)&&(s.updateRenderState({depthNear:U.near,depthFar:U.far}),j=U.near,ae=U.far),P.layers.mask=re.layers.mask|2,G.layers.mask=re.layers.mask|4,U.layers.mask=P.layers.mask|G.layers.mask;const qe=re.parent,Ke=U.cameras;fe(U,qe);for(let Ct=0;Ct<Ke.length;Ct++)fe(Ke[Ct],qe);Ke.length===2?Z(U,P,G):U.projectionMatrix.copy(P.projectionMatrix),X(re,U,qe)};function X(re,Ce,Be){Be===null?re.matrix.copy(Ce.matrixWorld):(re.matrix.copy(Be.matrixWorld),re.matrix.invert(),re.matrix.multiply(Ce.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0),re.projectionMatrix.copy(Ce.projectionMatrix),re.projectionMatrixInverse.copy(Ce.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=Zp*2*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}this.getCamera=function(){return U},this.getFoveation=function(){if(!(v===null&&_===null))return f},this.setFoveation=function(re){f=re,v!==null&&(v.fixedFoveation=re),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=re)},this.hasDepthSensing=function(){return A.texture!==null},this.getDepthSensingMesh=function(){return A.getMesh(U)};let ie=null;function Ee(re,Ce){if(m=Ce.getViewerPose(d||o),b=Ce,m!==null){const Be=m.views;_!==null&&(e.setRenderTargetFramebuffer(C,_.framebuffer),e.setRenderTarget(C));let qe=!1;Be.length!==U.cameras.length&&(U.cameras.length=0,qe=!0);for(let bt=0;bt<Be.length;bt++){const $t=Be[bt];let jt=null;if(_!==null)jt=_.getViewport($t);else{const te=g.getViewSubImage(v,$t);jt=te.viewport,bt===0&&(e.setRenderTargetTextures(C,te.colorTexture,te.depthStencilTexture),e.setRenderTarget(C))}let Nt=B[bt];Nt===void 0&&(Nt=new _s,Nt.layers.enable(bt),Nt.viewport=new Bn,B[bt]=Nt),Nt.matrix.fromArray($t.transform.matrix),Nt.matrix.decompose(Nt.position,Nt.quaternion,Nt.scale),Nt.projectionMatrix.fromArray($t.projectionMatrix),Nt.projectionMatrixInverse.copy(Nt.projectionMatrix).invert(),Nt.viewport.set(jt.x,jt.y,jt.width,jt.height),bt===0&&(U.matrix.copy(Nt.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale)),qe===!0&&U.cameras.push(Nt)}const Ke=s.enabledFeatures;if(Ke&&Ke.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&g){const bt=g.getDepthInformation(Be[0]);bt&&bt.isValid&&bt.texture&&A.init(e,bt,s.renderState)}}for(let Be=0;Be<D.length;Be++){const qe=N[Be],Ke=D[Be];qe!==null&&Ke!==void 0&&Ke.update(qe,Ce,d||o)}ie&&ie(re,Ce),Ce.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ce}),b=null}const Ue=new RL;Ue.setAnimationLoop(Ee),this.setAnimationLoop=function(re){ie=re},this.dispose=function(){}}}const Th=new Zo,nq=new Gt;function iq(i,e){function t(M,T){M.matrixAutoUpdate===!0&&M.updateMatrix(),T.value.copy(M.matrix)}function n(M,T){T.color.getRGB(M.fogColor.value,OO(i)),T.isFog?(M.fogNear.value=T.near,M.fogFar.value=T.far):T.isFogExp2&&(M.fogDensity.value=T.density)}function s(M,T,C,D,N){T.isMeshBasicMaterial||T.isMeshLambertMaterial?r(M,T):T.isMeshToonMaterial?(r(M,T),g(M,T)):T.isMeshPhongMaterial?(r(M,T),m(M,T)):T.isMeshStandardMaterial?(r(M,T),v(M,T),T.isMeshPhysicalMaterial&&_(M,T,N)):T.isMeshMatcapMaterial?(r(M,T),b(M,T)):T.isMeshDepthMaterial?r(M,T):T.isMeshDistanceMaterial?(r(M,T),A(M,T)):T.isMeshNormalMaterial?r(M,T):T.isLineBasicMaterial?(o(M,T),T.isLineDashedMaterial&&c(M,T)):T.isPointsMaterial?f(M,T,C,D):T.isSpriteMaterial?d(M,T):T.isShadowMaterial?(M.color.value.copy(T.color),M.opacity.value=T.opacity):T.isShaderMaterial&&(T.uniformsNeedUpdate=!1)}function r(M,T){M.opacity.value=T.opacity,T.color&&M.diffuse.value.copy(T.color),T.emissive&&M.emissive.value.copy(T.emissive).multiplyScalar(T.emissiveIntensity),T.map&&(M.map.value=T.map,t(T.map,M.mapTransform)),T.alphaMap&&(M.alphaMap.value=T.alphaMap,t(T.alphaMap,M.alphaMapTransform)),T.bumpMap&&(M.bumpMap.value=T.bumpMap,t(T.bumpMap,M.bumpMapTransform),M.bumpScale.value=T.bumpScale,T.side===Hr&&(M.bumpScale.value*=-1)),T.normalMap&&(M.normalMap.value=T.normalMap,t(T.normalMap,M.normalMapTransform),M.normalScale.value.copy(T.normalScale),T.side===Hr&&M.normalScale.value.negate()),T.displacementMap&&(M.displacementMap.value=T.displacementMap,t(T.displacementMap,M.displacementMapTransform),M.displacementScale.value=T.displacementScale,M.displacementBias.value=T.displacementBias),T.emissiveMap&&(M.emissiveMap.value=T.emissiveMap,t(T.emissiveMap,M.emissiveMapTransform)),T.specularMap&&(M.specularMap.value=T.specularMap,t(T.specularMap,M.specularMapTransform)),T.alphaTest>0&&(M.alphaTest.value=T.alphaTest);const C=e.get(T),D=C.envMap,N=C.envMapRotation;D&&(M.envMap.value=D,Th.copy(N),Th.x*=-1,Th.y*=-1,Th.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Th.y*=-1,Th.z*=-1),M.envMapRotation.value.setFromMatrix4(nq.makeRotationFromEuler(Th)),M.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=T.reflectivity,M.ior.value=T.ior,M.refractionRatio.value=T.refractionRatio),T.lightMap&&(M.lightMap.value=T.lightMap,M.lightMapIntensity.value=T.lightMapIntensity,t(T.lightMap,M.lightMapTransform)),T.aoMap&&(M.aoMap.value=T.aoMap,M.aoMapIntensity.value=T.aoMapIntensity,t(T.aoMap,M.aoMapTransform))}function o(M,T){M.diffuse.value.copy(T.color),M.opacity.value=T.opacity,T.map&&(M.map.value=T.map,t(T.map,M.mapTransform))}function c(M,T){M.dashSize.value=T.dashSize,M.totalSize.value=T.dashSize+T.gapSize,M.scale.value=T.scale}function f(M,T,C,D){M.diffuse.value.copy(T.color),M.opacity.value=T.opacity,M.size.value=T.size*C,M.scale.value=D*.5,T.map&&(M.map.value=T.map,t(T.map,M.uvTransform)),T.alphaMap&&(M.alphaMap.value=T.alphaMap,t(T.alphaMap,M.alphaMapTransform)),T.alphaTest>0&&(M.alphaTest.value=T.alphaTest)}function d(M,T){M.diffuse.value.copy(T.color),M.opacity.value=T.opacity,M.rotation.value=T.rotation,T.map&&(M.map.value=T.map,t(T.map,M.mapTransform)),T.alphaMap&&(M.alphaMap.value=T.alphaMap,t(T.alphaMap,M.alphaMapTransform)),T.alphaTest>0&&(M.alphaTest.value=T.alphaTest)}function m(M,T){M.specular.value.copy(T.specular),M.shininess.value=Math.max(T.shininess,1e-4)}function g(M,T){T.gradientMap&&(M.gradientMap.value=T.gradientMap)}function v(M,T){M.metalness.value=T.metalness,T.metalnessMap&&(M.metalnessMap.value=T.metalnessMap,t(T.metalnessMap,M.metalnessMapTransform)),M.roughness.value=T.roughness,T.roughnessMap&&(M.roughnessMap.value=T.roughnessMap,t(T.roughnessMap,M.roughnessMapTransform)),T.envMap&&(M.envMapIntensity.value=T.envMapIntensity)}function _(M,T,C){M.ior.value=T.ior,T.sheen>0&&(M.sheenColor.value.copy(T.sheenColor).multiplyScalar(T.sheen),M.sheenRoughness.value=T.sheenRoughness,T.sheenColorMap&&(M.sheenColorMap.value=T.sheenColorMap,t(T.sheenColorMap,M.sheenColorMapTransform)),T.sheenRoughnessMap&&(M.sheenRoughnessMap.value=T.sheenRoughnessMap,t(T.sheenRoughnessMap,M.sheenRoughnessMapTransform))),T.clearcoat>0&&(M.clearcoat.value=T.clearcoat,M.clearcoatRoughness.value=T.clearcoatRoughness,T.clearcoatMap&&(M.clearcoatMap.value=T.clearcoatMap,t(T.clearcoatMap,M.clearcoatMapTransform)),T.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=T.clearcoatRoughnessMap,t(T.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),T.clearcoatNormalMap&&(M.clearcoatNormalMap.value=T.clearcoatNormalMap,t(T.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(T.clearcoatNormalScale),T.side===Hr&&M.clearcoatNormalScale.value.negate())),T.dispersion>0&&(M.dispersion.value=T.dispersion),T.iridescence>0&&(M.iridescence.value=T.iridescence,M.iridescenceIOR.value=T.iridescenceIOR,M.iridescenceThicknessMinimum.value=T.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=T.iridescenceThicknessRange[1],T.iridescenceMap&&(M.iridescenceMap.value=T.iridescenceMap,t(T.iridescenceMap,M.iridescenceMapTransform)),T.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=T.iridescenceThicknessMap,t(T.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),T.transmission>0&&(M.transmission.value=T.transmission,M.transmissionSamplerMap.value=C.texture,M.transmissionSamplerSize.value.set(C.width,C.height),T.transmissionMap&&(M.transmissionMap.value=T.transmissionMap,t(T.transmissionMap,M.transmissionMapTransform)),M.thickness.value=T.thickness,T.thicknessMap&&(M.thicknessMap.value=T.thicknessMap,t(T.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=T.attenuationDistance,M.attenuationColor.value.copy(T.attenuationColor)),T.anisotropy>0&&(M.anisotropyVector.value.set(T.anisotropy*Math.cos(T.anisotropyRotation),T.anisotropy*Math.sin(T.anisotropyRotation)),T.anisotropyMap&&(M.anisotropyMap.value=T.anisotropyMap,t(T.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=T.specularIntensity,M.specularColor.value.copy(T.specularColor),T.specularColorMap&&(M.specularColorMap.value=T.specularColorMap,t(T.specularColorMap,M.specularColorMapTransform)),T.specularIntensityMap&&(M.specularIntensityMap.value=T.specularIntensityMap,t(T.specularIntensityMap,M.specularIntensityMapTransform))}function b(M,T){T.matcap&&(M.matcap.value=T.matcap)}function A(M,T){const C=e.get(T).light;M.referencePosition.value.setFromMatrixPosition(C.matrixWorld),M.nearDistance.value=C.shadow.camera.near,M.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function sq(i,e,t,n){let s={},r={},o=[];const c=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function f(C,D){const N=D.program;n.uniformBlockBinding(C,N)}function d(C,D){let N=s[C.id];N===void 0&&(b(C),N=m(C),s[C.id]=N,C.addEventListener("dispose",M));const I=D.program;n.updateUBOMapping(C,I);const L=e.render.frame;r[C.id]!==L&&(v(C),r[C.id]=L)}function m(C){const D=g();C.__bindingPointIndex=D;const N=i.createBuffer(),I=C.__size,L=C.usage;return i.bindBuffer(i.UNIFORM_BUFFER,N),i.bufferData(i.UNIFORM_BUFFER,I,L),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,D,N),N}function g(){for(let C=0;C<c;C++)if(o.indexOf(C)===-1)return o.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(C){const D=s[C.id],N=C.uniforms,I=C.__cache;i.bindBuffer(i.UNIFORM_BUFFER,D);for(let L=0,P=N.length;L<P;L++){const G=Array.isArray(N[L])?N[L]:[N[L]];for(let B=0,U=G.length;B<U;B++){const j=G[B];if(_(j,L,B,I)===!0){const ae=j.__offset,ne=Array.isArray(j.value)?j.value:[j.value];let de=0;for(let he=0;he<ne.length;he++){const F=ne[he],W=A(F);typeof F=="number"||typeof F=="boolean"?(j.__data[0]=F,i.bufferSubData(i.UNIFORM_BUFFER,ae+de,j.__data)):F.isMatrix3?(j.__data[0]=F.elements[0],j.__data[1]=F.elements[1],j.__data[2]=F.elements[2],j.__data[3]=0,j.__data[4]=F.elements[3],j.__data[5]=F.elements[4],j.__data[6]=F.elements[5],j.__data[7]=0,j.__data[8]=F.elements[6],j.__data[9]=F.elements[7],j.__data[10]=F.elements[8],j.__data[11]=0):(F.toArray(j.__data,de),de+=W.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,ae,j.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function _(C,D,N,I){const L=C.value,P=D+"_"+N;if(I[P]===void 0)return typeof L=="number"||typeof L=="boolean"?I[P]=L:I[P]=L.clone(),!0;{const G=I[P];if(typeof L=="number"||typeof L=="boolean"){if(G!==L)return I[P]=L,!0}else if(G.equals(L)===!1)return G.copy(L),!0}return!1}function b(C){const D=C.uniforms;let N=0;const I=16;for(let P=0,G=D.length;P<G;P++){const B=Array.isArray(D[P])?D[P]:[D[P]];for(let U=0,j=B.length;U<j;U++){const ae=B[U],ne=Array.isArray(ae.value)?ae.value:[ae.value];for(let de=0,he=ne.length;de<he;de++){const F=ne[de],W=A(F),Z=N%I,fe=Z%W.boundary,X=Z+fe;N+=fe,X!==0&&I-X<W.storage&&(N+=I-X),ae.__data=new Float32Array(W.storage/Float32Array.BYTES_PER_ELEMENT),ae.__offset=N,N+=W.storage}}}const L=N%I;return L>0&&(N+=I-L),C.__size=N,C.__cache={},this}function A(C){const D={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(D.boundary=4,D.storage=4):C.isVector2?(D.boundary=8,D.storage=8):C.isVector3||C.isColor?(D.boundary=16,D.storage=12):C.isVector4?(D.boundary=16,D.storage=16):C.isMatrix3?(D.boundary=48,D.storage=48):C.isMatrix4?(D.boundary=64,D.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),D}function M(C){const D=C.target;D.removeEventListener("dispose",M);const N=o.indexOf(D.__bindingPointIndex);o.splice(N,1),i.deleteBuffer(s[D.id]),delete s[D.id],delete r[D.id]}function T(){for(const C in s)i.deleteBuffer(s[C]);o=[],s={},r={}}return{bind:f,update:d,dispose:T}}class UL{constructor(e={}){const{canvas:t=AO(),context:n=null,depth:s=!0,stencil:r=!1,alpha:o=!1,antialias:c=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:d=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:v=!1}=e;this.isWebGLRenderer=!0;let _;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=o;const b=new Uint32Array(4),A=new Int32Array(4);let M=null,T=null;const C=[],D=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Fl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const N=this;let I=!1;this._outputColorSpace=ji;let L=0,P=0,G=null,B=-1,U=null;const j=new Bn,ae=new Bn;let ne=null;const de=new lt(0);let he=0,F=t.width,W=t.height,Z=1,fe=null,X=null;const ie=new Bn(0,0,F,W),Ee=new Bn(0,0,F,W);let Ue=!1;const re=new oy;let Ce=!1,Be=!1;const qe=new Gt,Ke=new Gt,Ct=new K,bt=new Bn,$t={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let jt=!1;function Nt(){return G===null?Z:1}let te=n;function _n($,ce){return t.getContext($,ce)}try{const $={alpha:!0,depth:s,stencil:r,antialias:c,premultipliedAlpha:f,preserveDrawingBuffer:d,powerPreference:m,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${C1}`),t.addEventListener("webglcontextlost",ke,!1),t.addEventListener("webglcontextrestored",ft,!1),t.addEventListener("webglcontextcreationerror",ut,!1),te===null){const ce="webgl2";if(te=_n(ce,$),te===null)throw _n(ce)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let Fe,Pe,Ie,Je,Ne,Y,H,Q,pe,De,Me,et,We,tt,Zt,Ye,pt,yt,vt,st,Xt,wt,bn,ue;function ct(){Fe=new g$(te),Fe.init(),wt=new LL(te,Fe),Pe=new c$(te,Fe,e,wt),Ie=new ZX(te,Fe),Pe.reverseDepthBuffer&&v&&Ie.buffers.depth.setReversed(!0),Je=new x$(te),Ne=new IX,Y=new KX(te,Fe,Ie,Ne,Pe,wt,Je),H=new f$(N),Q=new m$(N),pe=new M9(te),bn=new o$(te,pe),De=new y$(te,pe,Je,bn),Me=new b$(te,De,pe,Je),vt=new _$(te,Pe,Y),Ye=new u$(Ne),et=new PX(N,H,Q,Fe,Pe,bn,Ye),We=new iq(N,Ne),tt=new FX,Zt=new XX(Fe),yt=new a$(N,H,Q,Ie,Me,_,f),pt=new YX(N,Me,Pe),ue=new sq(te,Je,Pe,Ie),st=new l$(te,Fe,Je),Xt=new v$(te,Fe,Je),Je.programs=et.programs,N.capabilities=Pe,N.extensions=Fe,N.properties=Ne,N.renderLists=tt,N.shadowMap=pt,N.state=Ie,N.info=Je}ct();const Oe=new tq(N,te);this.xr=Oe,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const $=Fe.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=Fe.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function($){$!==void 0&&(Z=$,this.setSize(F,W,!1))},this.getSize=function($){return $.set(F,W)},this.setSize=function($,ce,Te=!0){if(Oe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=$,W=ce,t.width=Math.floor($*Z),t.height=Math.floor(ce*Z),Te===!0&&(t.style.width=$+"px",t.style.height=ce+"px"),this.setViewport(0,0,$,ce)},this.getDrawingBufferSize=function($){return $.set(F*Z,W*Z).floor()},this.setDrawingBufferSize=function($,ce,Te){F=$,W=ce,Z=Te,t.width=Math.floor($*Te),t.height=Math.floor(ce*Te),this.setViewport(0,0,$,ce)},this.getCurrentViewport=function($){return $.copy(j)},this.getViewport=function($){return $.copy(ie)},this.setViewport=function($,ce,Te,Ae){$.isVector4?ie.set($.x,$.y,$.z,$.w):ie.set($,ce,Te,Ae),Ie.viewport(j.copy(ie).multiplyScalar(Z).round())},this.getScissor=function($){return $.copy(Ee)},this.setScissor=function($,ce,Te,Ae){$.isVector4?Ee.set($.x,$.y,$.z,$.w):Ee.set($,ce,Te,Ae),Ie.scissor(ae.copy(Ee).multiplyScalar(Z).round())},this.getScissorTest=function(){return Ue},this.setScissorTest=function($){Ie.setScissorTest(Ue=$)},this.setOpaqueSort=function($){fe=$},this.setTransparentSort=function($){X=$},this.getClearColor=function($){return $.copy(yt.getClearColor())},this.setClearColor=function(){yt.setClearColor(...arguments)},this.getClearAlpha=function(){return yt.getClearAlpha()},this.setClearAlpha=function(){yt.setClearAlpha(...arguments)},this.clear=function($=!0,ce=!0,Te=!0){let Ae=0;if($){let ge=!1;if(G!==null){const je=G.texture.format;ge=je===B1||je===I1||je===ny}if(ge){const je=G.texture.type,rt=je===Wo||je===qc||je===$p||je===Xp||je===U1||je===z1,ot=yt.getClearColor(),gt=yt.getClearAlpha(),Pt=ot.r,Rt=ot.g,Et=ot.b;rt?(b[0]=Pt,b[1]=Rt,b[2]=Et,b[3]=gt,te.clearBufferuiv(te.COLOR,0,b)):(A[0]=Pt,A[1]=Rt,A[2]=Et,A[3]=gt,te.clearBufferiv(te.COLOR,0,A))}else Ae|=te.COLOR_BUFFER_BIT}ce&&(Ae|=te.DEPTH_BUFFER_BIT),Te&&(Ae|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(Ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ke,!1),t.removeEventListener("webglcontextrestored",ft,!1),t.removeEventListener("webglcontextcreationerror",ut,!1),yt.dispose(),tt.dispose(),Zt.dispose(),Ne.dispose(),H.dispose(),Q.dispose(),Me.dispose(),bn.dispose(),ue.dispose(),et.dispose(),Oe.dispose(),Oe.removeEventListener("sessionstart",Di),Oe.removeEventListener("sessionend",Vi),As.stop()};function ke($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function ft(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const $=Je.autoReset,ce=pt.enabled,Te=pt.autoUpdate,Ae=pt.needsUpdate,ge=pt.type;ct(),Je.autoReset=$,pt.enabled=ce,pt.autoUpdate=Te,pt.needsUpdate=Ae,pt.type=ge}function ut($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function qt($){const ce=$.target;ce.removeEventListener("dispose",qt),Pn(ce)}function Pn($){ai($),Ne.remove($)}function ai($){const ce=Ne.get($).programs;ce!==void 0&&(ce.forEach(function(Te){et.releaseProgram(Te)}),$.isShaderMaterial&&et.releaseShaderCache($))}this.renderBufferDirect=function($,ce,Te,Ae,ge,je){ce===null&&(ce=$t);const rt=ge.isMesh&&ge.matrixWorld.determinant()<0,ot=tl($,ce,Te,Ae,ge);Ie.setMaterial(Ae,rt);let gt=Te.index,Pt=1;if(Ae.wireframe===!0){if(gt=De.getWireframeAttribute(Te),gt===void 0)return;Pt=2}const Rt=Te.drawRange,Et=Te.attributes.position;let cn=Rt.start*Pt,Mn=(Rt.start+Rt.count)*Pt;je!==null&&(cn=Math.max(cn,je.start*Pt),Mn=Math.min(Mn,(je.start+je.count)*Pt)),gt!==null?(cn=Math.max(cn,0),Mn=Math.min(Mn,gt.count)):Et!=null&&(cn=Math.max(cn,0),Mn=Math.min(Mn,Et.count));const oi=Mn-cn;if(oi<0||oi===1/0)return;bn.setup(ge,Ae,ot,Te,gt);let fn,dn=st;if(gt!==null&&(fn=pe.get(gt),dn=Xt,dn.setIndex(fn)),ge.isMesh)Ae.wireframe===!0?(Ie.setLineWidth(Ae.wireframeLinewidth*Nt()),dn.setMode(te.LINES)):dn.setMode(te.TRIANGLES);else if(ge.isLine){let Dt=Ae.linewidth;Dt===void 0&&(Dt=1),Ie.setLineWidth(Dt*Nt()),ge.isLineSegments?dn.setMode(te.LINES):ge.isLineLoop?dn.setMode(te.LINE_LOOP):dn.setMode(te.LINE_STRIP)}else ge.isPoints?dn.setMode(te.POINTS):ge.isSprite&&dn.setMode(te.TRIANGLES);if(ge.isBatchedMesh)if(ge._multiDrawInstances!==null)i_("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),dn.renderMultiDrawInstances(ge._multiDrawStarts,ge._multiDrawCounts,ge._multiDrawCount,ge._multiDrawInstances);else if(Fe.get("WEBGL_multi_draw"))dn.renderMultiDraw(ge._multiDrawStarts,ge._multiDrawCounts,ge._multiDrawCount);else{const Dt=ge._multiDrawStarts,hi=ge._multiDrawCounts,Sn=ge._multiDrawCount,cs=gt?pe.get(gt).bytesPerElement:1,Ua=Ne.get(Ae).currentProgram.getUniforms();for(let $n=0;$n<Sn;$n++)Ua.setValue(te,"_gl_DrawID",$n),dn.render(Dt[$n]/cs,hi[$n])}else if(ge.isInstancedMesh)dn.renderInstances(cn,oi,ge.count);else if(Te.isInstancedBufferGeometry){const Dt=Te._maxInstanceCount!==void 0?Te._maxInstanceCount:1/0,hi=Math.min(Te.instanceCount,Dt);dn.renderInstances(cn,oi,hi)}else dn.render(cn,oi)};function gn($,ce,Te){$.transparent===!0&&$.side===Xo&&$.forceSinglePass===!1?($.side=Hr,$.needsUpdate=!0,Vn($,ce,Te),$.side=Xl,$.needsUpdate=!0,Vn($,ce,Te),$.side=Xo):Vn($,ce,Te)}this.compile=function($,ce,Te=null){Te===null&&(Te=$),T=Zt.get(Te),T.init(ce),D.push(T),Te.traverseVisible(function(ge){ge.isLight&&ge.layers.test(ce.layers)&&(T.pushLight(ge),ge.castShadow&&T.pushShadow(ge))}),$!==Te&&$.traverseVisible(function(ge){ge.isLight&&ge.layers.test(ce.layers)&&(T.pushLight(ge),ge.castShadow&&T.pushShadow(ge))}),T.setupLights();const Ae=new Set;return $.traverse(function(ge){if(!(ge.isMesh||ge.isPoints||ge.isLine||ge.isSprite))return;const je=ge.material;if(je)if(Array.isArray(je))for(let rt=0;rt<je.length;rt++){const ot=je[rt];gn(ot,Te,ge),Ae.add(ot)}else gn(je,Te,ge),Ae.add(je)}),T=D.pop(),Ae},this.compileAsync=function($,ce,Te=null){const Ae=this.compile($,ce,Te);return new Promise(ge=>{function je(){if(Ae.forEach(function(rt){Ne.get(rt).currentProgram.isReady()&&Ae.delete(rt)}),Ae.size===0){ge($);return}setTimeout(je,10)}Fe.get("KHR_parallel_shader_compile")!==null?je():setTimeout(je,10)})};let js=null;function Hi($){js&&js($)}function Di(){As.stop()}function Vi(){As.start()}const As=new RL;As.setAnimationLoop(Hi),typeof self<"u"&&As.setContext(self),this.setAnimationLoop=function($){js=$,Oe.setAnimationLoop($),$===null?As.stop():As.start()},Oe.addEventListener("sessionstart",Di),Oe.addEventListener("sessionend",Vi),this.render=function($,ce){if(ce!==void 0&&ce.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;if($.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),ce.parent===null&&ce.matrixWorldAutoUpdate===!0&&ce.updateMatrixWorld(),Oe.enabled===!0&&Oe.isPresenting===!0&&(Oe.cameraAutoUpdate===!0&&Oe.updateCamera(ce),ce=Oe.getCamera()),$.isScene===!0&&$.onBeforeRender(N,$,ce,G),T=Zt.get($,D.length),T.init(ce),D.push(T),Ke.multiplyMatrices(ce.projectionMatrix,ce.matrixWorldInverse),re.setFromProjectionMatrix(Ke),Be=this.localClippingEnabled,Ce=Ye.init(this.clippingPlanes,Be),M=tt.get($,C.length),M.init(),C.push(M),Oe.enabled===!0&&Oe.isPresenting===!0){const je=N.xr.getDepthSensingMesh();je!==null&&Ys(je,ce,-1/0,N.sortObjects)}Ys($,ce,0,N.sortObjects),M.finish(),N.sortObjects===!0&&M.sort(fe,X),jt=Oe.enabled===!1||Oe.isPresenting===!1||Oe.hasDepthSensing()===!1,jt&&yt.addToRenderList(M,$),this.info.render.frame++,Ce===!0&&Ye.beginShadows();const Te=T.state.shadowsArray;pt.render(Te,$,ce),Ce===!0&&Ye.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ae=M.opaque,ge=M.transmissive;if(T.setupLights(),ce.isArrayCamera){const je=ce.cameras;if(ge.length>0)for(let rt=0,ot=je.length;rt<ot;rt++){const gt=je[rt];ca(Ae,ge,$,gt)}jt&&yt.render($);for(let rt=0,ot=je.length;rt<ot;rt++){const gt=je[rt];_f(M,$,gt,gt.viewport)}}else ge.length>0&&ca(Ae,ge,$,ce),jt&&yt.render($),_f(M,$,ce);G!==null&&P===0&&(Y.updateMultisampleRenderTarget(G),Y.updateRenderTargetMipmap(G)),$.isScene===!0&&$.onAfterRender(N,$,ce),bn.resetDefaultState(),B=-1,U=null,D.pop(),D.length>0?(T=D[D.length-1],Ce===!0&&Ye.setGlobalState(N.clippingPlanes,T.state.camera)):T=null,C.pop(),C.length>0?M=C[C.length-1]:M=null};function Ys($,ce,Te,Ae){if($.visible===!1)return;if($.layers.test(ce.layers)){if($.isGroup)Te=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(ce);else if($.isLight)T.pushLight($),$.castShadow&&T.pushShadow($);else if($.isSprite){if(!$.frustumCulled||re.intersectsSprite($)){Ae&&bt.setFromMatrixPosition($.matrixWorld).applyMatrix4(Ke);const rt=Me.update($),ot=$.material;ot.visible&&M.push($,rt,ot,Te,bt.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||re.intersectsObject($))){const rt=Me.update($),ot=$.material;if(Ae&&($.boundingSphere!==void 0?($.boundingSphere===null&&$.computeBoundingSphere(),bt.copy($.boundingSphere.center)):(rt.boundingSphere===null&&rt.computeBoundingSphere(),bt.copy(rt.boundingSphere.center)),bt.applyMatrix4($.matrixWorld).applyMatrix4(Ke)),Array.isArray(ot)){const gt=rt.groups;for(let Pt=0,Rt=gt.length;Pt<Rt;Pt++){const Et=gt[Pt],cn=ot[Et.materialIndex];cn&&cn.visible&&M.push($,rt,cn,Te,bt.z,Et)}}else ot.visible&&M.push($,rt,ot,Te,bt.z,null)}}const je=$.children;for(let rt=0,ot=je.length;rt<ot;rt++)Ys(je[rt],ce,Te,Ae)}function _f($,ce,Te,Ae){const ge=$.opaque,je=$.transmissive,rt=$.transparent;T.setupLightsView(Te),Ce===!0&&Ye.setGlobalState(N.clippingPlanes,Te),Ae&&Ie.viewport(j.copy(Ae)),ge.length>0&&Us(ge,ce,Te),je.length>0&&Us(je,ce,Te),rt.length>0&&Us(rt,ce,Te),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function ca($,ce,Te,Ae){if((Te.isScene===!0?Te.overrideMaterial:null)!==null)return;T.state.transmissionRenderTarget[Ae.id]===void 0&&(T.state.transmissionRenderTarget[Ae.id]=new ql(1,1,{generateMipmaps:!0,type:Fe.has("EXT_color_buffer_half_float")||Fe.has("EXT_color_buffer_float")?pm:Wo,minFilter:ro,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:vn.workingColorSpace}));const je=T.state.transmissionRenderTarget[Ae.id],rt=Ae.viewport||j;je.setSize(rt.z*N.transmissionResolutionScale,rt.w*N.transmissionResolutionScale);const ot=N.getRenderTarget();N.setRenderTarget(je),N.getClearColor(de),he=N.getClearAlpha(),he<1&&N.setClearColor(16777215,.5),N.clear(),jt&&yt.render(Te);const gt=N.toneMapping;N.toneMapping=Fl;const Pt=Ae.viewport;if(Ae.viewport!==void 0&&(Ae.viewport=void 0),T.setupLightsView(Ae),Ce===!0&&Ye.setGlobalState(N.clippingPlanes,Ae),Us($,Te,Ae),Y.updateMultisampleRenderTarget(je),Y.updateRenderTargetMipmap(je),Fe.has("WEBGL_multisampled_render_to_texture")===!1){let Rt=!1;for(let Et=0,cn=ce.length;Et<cn;Et++){const Mn=ce[Et],oi=Mn.object,fn=Mn.geometry,dn=Mn.material,Dt=Mn.group;if(dn.side===Xo&&oi.layers.test(Ae.layers)){const hi=dn.side;dn.side=Hr,dn.needsUpdate=!0,ua(oi,Te,Ae,fn,dn,Dt),dn.side=hi,dn.needsUpdate=!0,Rt=!0}}Rt===!0&&(Y.updateMultisampleRenderTarget(je),Y.updateRenderTargetMipmap(je))}N.setRenderTarget(ot),N.setClearColor(de,he),Pt!==void 0&&(Ae.viewport=Pt),N.toneMapping=gt}function Us($,ce,Te){const Ae=ce.isScene===!0?ce.overrideMaterial:null;for(let ge=0,je=$.length;ge<je;ge++){const rt=$[ge],ot=rt.object,gt=rt.geometry,Pt=rt.group;let Rt=rt.material;Rt.allowOverride===!0&&Ae!==null&&(Rt=Ae),ot.layers.test(Te.layers)&&ua(ot,ce,Te,gt,Rt,Pt)}}function ua($,ce,Te,Ae,ge,je){$.onBeforeRender(N,ce,Te,Ae,ge,je),$.modelViewMatrix.multiplyMatrices(Te.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),ge.onBeforeRender(N,ce,Te,Ae,$,je),ge.transparent===!0&&ge.side===Xo&&ge.forceSinglePass===!1?(ge.side=Hr,ge.needsUpdate=!0,N.renderBufferDirect(Te,ce,Ae,ge,$,je),ge.side=Xl,ge.needsUpdate=!0,N.renderBufferDirect(Te,ce,Ae,ge,$,je),ge.side=Xo):N.renderBufferDirect(Te,ce,Ae,ge,$,je),$.onAfterRender(N,ce,Te,Ae,ge,je)}function Vn($,ce,Te){ce.isScene!==!0&&(ce=$t);const Ae=Ne.get($),ge=T.state.lights,je=T.state.shadowsArray,rt=ge.state.version,ot=et.getParameters($,ge.state,je,ce,Te),gt=et.getProgramCacheKey(ot);let Pt=Ae.programs;Ae.environment=$.isMeshStandardMaterial?ce.environment:null,Ae.fog=ce.fog,Ae.envMap=($.isMeshStandardMaterial?Q:H).get($.envMap||Ae.environment),Ae.envMapRotation=Ae.environment!==null&&$.envMap===null?ce.environmentRotation:$.envMapRotation,Pt===void 0&&($.addEventListener("dispose",qt),Pt=new Map,Ae.programs=Pt);let Rt=Pt.get(gt);if(Rt!==void 0){if(Ae.currentProgram===Rt&&Ae.lightsStateVersion===rt)return ha($,ot),Rt}else ot.uniforms=et.getUniforms($),$.onBeforeCompile(ot,N),Rt=et.acquireProgram(ot,gt),Pt.set(gt,Rt),Ae.uniforms=ot.uniforms;const Et=Ae.uniforms;return(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(Et.clippingPlanes=Ye.uniform),ha($,ot),Ae.needsLights=Oi($),Ae.lightsStateVersion=rt,Ae.needsLights&&(Et.ambientLightColor.value=ge.state.ambient,Et.lightProbe.value=ge.state.probe,Et.directionalLights.value=ge.state.directional,Et.directionalLightShadows.value=ge.state.directionalShadow,Et.spotLights.value=ge.state.spot,Et.spotLightShadows.value=ge.state.spotShadow,Et.rectAreaLights.value=ge.state.rectArea,Et.ltc_1.value=ge.state.rectAreaLTC1,Et.ltc_2.value=ge.state.rectAreaLTC2,Et.pointLights.value=ge.state.point,Et.pointLightShadows.value=ge.state.pointShadow,Et.hemisphereLights.value=ge.state.hemi,Et.directionalShadowMap.value=ge.state.directionalShadowMap,Et.directionalShadowMatrix.value=ge.state.directionalShadowMatrix,Et.spotShadowMap.value=ge.state.spotShadowMap,Et.spotLightMatrix.value=ge.state.spotLightMatrix,Et.spotLightMap.value=ge.state.spotLightMap,Et.pointShadowMap.value=ge.state.pointShadowMap,Et.pointShadowMatrix.value=ge.state.pointShadowMatrix),Ae.currentProgram=Rt,Ae.uniformsList=null,Rt}function fa($){if($.uniformsList===null){const ce=$.currentProgram.getUniforms();$.uniformsList=a_.seqWithValue(ce.seq,$.uniforms)}return $.uniformsList}function ha($,ce){const Te=Ne.get($);Te.outputColorSpace=ce.outputColorSpace,Te.batching=ce.batching,Te.batchingColor=ce.batchingColor,Te.instancing=ce.instancing,Te.instancingColor=ce.instancingColor,Te.instancingMorph=ce.instancingMorph,Te.skinning=ce.skinning,Te.morphTargets=ce.morphTargets,Te.morphNormals=ce.morphNormals,Te.morphColors=ce.morphColors,Te.morphTargetsCount=ce.morphTargetsCount,Te.numClippingPlanes=ce.numClippingPlanes,Te.numIntersection=ce.numClipIntersection,Te.vertexAlphas=ce.vertexAlphas,Te.vertexTangents=ce.vertexTangents,Te.toneMapping=ce.toneMapping}function tl($,ce,Te,Ae,ge){ce.isScene!==!0&&(ce=$t),Y.resetTextureUnits();const je=ce.fog,rt=Ae.isMeshStandardMaterial?ce.environment:null,ot=G===null?N.outputColorSpace:G.isXRRenderTarget===!0?G.texture.colorSpace:qs,gt=(Ae.isMeshStandardMaterial?Q:H).get(Ae.envMap||rt),Pt=Ae.vertexColors===!0&&!!Te.attributes.color&&Te.attributes.color.itemSize===4,Rt=!!Te.attributes.tangent&&(!!Ae.normalMap||Ae.anisotropy>0),Et=!!Te.morphAttributes.position,cn=!!Te.morphAttributes.normal,Mn=!!Te.morphAttributes.color;let oi=Fl;Ae.toneMapped&&(G===null||G.isXRRenderTarget===!0)&&(oi=N.toneMapping);const fn=Te.morphAttributes.position||Te.morphAttributes.normal||Te.morphAttributes.color,dn=fn!==void 0?fn.length:0,Dt=Ne.get(Ae),hi=T.state.lights;if(Ce===!0&&(Be===!0||$!==U)){const Zi=$===U&&Ae.id===B;Ye.setState(Ae,$,Zi)}let Sn=!1;Ae.version===Dt.__version?(Dt.needsLights&&Dt.lightsStateVersion!==hi.state.version||Dt.outputColorSpace!==ot||ge.isBatchedMesh&&Dt.batching===!1||!ge.isBatchedMesh&&Dt.batching===!0||ge.isBatchedMesh&&Dt.batchingColor===!0&&ge.colorTexture===null||ge.isBatchedMesh&&Dt.batchingColor===!1&&ge.colorTexture!==null||ge.isInstancedMesh&&Dt.instancing===!1||!ge.isInstancedMesh&&Dt.instancing===!0||ge.isSkinnedMesh&&Dt.skinning===!1||!ge.isSkinnedMesh&&Dt.skinning===!0||ge.isInstancedMesh&&Dt.instancingColor===!0&&ge.instanceColor===null||ge.isInstancedMesh&&Dt.instancingColor===!1&&ge.instanceColor!==null||ge.isInstancedMesh&&Dt.instancingMorph===!0&&ge.morphTexture===null||ge.isInstancedMesh&&Dt.instancingMorph===!1&&ge.morphTexture!==null||Dt.envMap!==gt||Ae.fog===!0&&Dt.fog!==je||Dt.numClippingPlanes!==void 0&&(Dt.numClippingPlanes!==Ye.numPlanes||Dt.numIntersection!==Ye.numIntersection)||Dt.vertexAlphas!==Pt||Dt.vertexTangents!==Rt||Dt.morphTargets!==Et||Dt.morphNormals!==cn||Dt.morphColors!==Mn||Dt.toneMapping!==oi||Dt.morphTargetsCount!==dn)&&(Sn=!0):(Sn=!0,Dt.__version=Ae.version);let cs=Dt.currentProgram;Sn===!0&&(cs=Vn(Ae,ce,ge));let Ua=!1,$n=!1,za=!1;const Gn=cs.getUniforms(),us=Dt.uniforms;if(Ie.useProgram(cs.program)&&(Ua=!0,$n=!0,za=!0),Ae.id!==B&&(B=Ae.id,$n=!0),Ua||U!==$){Ie.buffers.depth.getReversed()?(qe.copy($.projectionMatrix),j8(qe),Y8(qe),Gn.setValue(te,"projectionMatrix",qe)):Gn.setValue(te,"projectionMatrix",$.projectionMatrix),Gn.setValue(te,"viewMatrix",$.matrixWorldInverse);const Ki=Gn.map.cameraPosition;Ki!==void 0&&Ki.setValue(te,Ct.setFromMatrixPosition($.matrixWorld)),Pe.logarithmicDepthBuffer&&Gn.setValue(te,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),(Ae.isMeshPhongMaterial||Ae.isMeshToonMaterial||Ae.isMeshLambertMaterial||Ae.isMeshBasicMaterial||Ae.isMeshStandardMaterial||Ae.isShaderMaterial)&&Gn.setValue(te,"isOrthographic",$.isOrthographicCamera===!0),U!==$&&(U=$,$n=!0,za=!0)}if(ge.isSkinnedMesh){Gn.setOptional(te,ge,"bindMatrix"),Gn.setOptional(te,ge,"bindMatrixInverse");const Zi=ge.skeleton;Zi&&(Zi.boneTexture===null&&Zi.computeBoneTexture(),Gn.setValue(te,"boneTexture",Zi.boneTexture,Y))}ge.isBatchedMesh&&(Gn.setOptional(te,ge,"batchingTexture"),Gn.setValue(te,"batchingTexture",ge._matricesTexture,Y),Gn.setOptional(te,ge,"batchingIdTexture"),Gn.setValue(te,"batchingIdTexture",ge._indirectTexture,Y),Gn.setOptional(te,ge,"batchingColorTexture"),ge._colorsTexture!==null&&Gn.setValue(te,"batchingColorTexture",ge._colorsTexture,Y));const Li=Te.morphAttributes;if((Li.position!==void 0||Li.normal!==void 0||Li.color!==void 0)&&vt.update(ge,Te,cs),($n||Dt.receiveShadow!==ge.receiveShadow)&&(Dt.receiveShadow=ge.receiveShadow,Gn.setValue(te,"receiveShadow",ge.receiveShadow)),Ae.isMeshGouraudMaterial&&Ae.envMap!==null&&(us.envMap.value=gt,us.flipEnvMap.value=gt.isCubeTexture&&gt.isRenderTargetTexture===!1?-1:1),Ae.isMeshStandardMaterial&&Ae.envMap===null&&ce.environment!==null&&(us.envMapIntensity.value=ce.environmentIntensity),$n&&(Gn.setValue(te,"toneMappingExposure",N.toneMappingExposure),Dt.needsLights&&fo(us,za),je&&Ae.fog===!0&&We.refreshFogUniforms(us,je),We.refreshMaterialUniforms(us,Ae,Z,W,T.state.transmissionRenderTarget[$.id]),a_.upload(te,fa(Dt),us,Y)),Ae.isShaderMaterial&&Ae.uniformsNeedUpdate===!0&&(a_.upload(te,fa(Dt),us,Y),Ae.uniformsNeedUpdate=!1),Ae.isSpriteMaterial&&Gn.setValue(te,"center",ge.center),Gn.setValue(te,"modelViewMatrix",ge.modelViewMatrix),Gn.setValue(te,"normalMatrix",ge.normalMatrix),Gn.setValue(te,"modelMatrix",ge.matrixWorld),Ae.isShaderMaterial||Ae.isRawShaderMaterial){const Zi=Ae.uniformsGroups;for(let Ki=0,zs=Zi.length;Ki<zs;Ki++){const Pa=Zi[Ki];ue.update(Pa,cs),ue.bind(Pa,cs)}}return cs}function fo($,ce){$.ambientLightColor.needsUpdate=ce,$.lightProbe.needsUpdate=ce,$.directionalLights.needsUpdate=ce,$.directionalLightShadows.needsUpdate=ce,$.pointLights.needsUpdate=ce,$.pointLightShadows.needsUpdate=ce,$.spotLights.needsUpdate=ce,$.spotLightShadows.needsUpdate=ce,$.rectAreaLights.needsUpdate=ce,$.hemisphereLights.needsUpdate=ce}function Oi($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return G},this.setRenderTargetTextures=function($,ce,Te){const Ae=Ne.get($);Ae.__autoAllocateDepthBuffer=$.resolveDepthBuffer===!1,Ae.__autoAllocateDepthBuffer===!1&&(Ae.__useRenderToTexture=!1),Ne.get($.texture).__webglTexture=ce,Ne.get($.depthTexture).__webglTexture=Ae.__autoAllocateDepthBuffer?void 0:Te,Ae.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function($,ce){const Te=Ne.get($);Te.__webglFramebuffer=ce,Te.__useDefaultFramebuffer=ce===void 0};const Qc=te.createFramebuffer();this.setRenderTarget=function($,ce=0,Te=0){G=$,L=ce,P=Te;let Ae=!0,ge=null,je=!1,rt=!1;if($){const gt=Ne.get($);if(gt.__useDefaultFramebuffer!==void 0)Ie.bindFramebuffer(te.FRAMEBUFFER,null),Ae=!1;else if(gt.__webglFramebuffer===void 0)Y.setupRenderTarget($);else if(gt.__hasExternalTextures)Y.rebindTextures($,Ne.get($.texture).__webglTexture,Ne.get($.depthTexture).__webglTexture);else if($.depthBuffer){const Et=$.depthTexture;if(gt.__boundDepthTexture!==Et){if(Et!==null&&Ne.has(Et)&&($.width!==Et.image.width||$.height!==Et.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Y.setupDepthRenderbuffer($)}}const Pt=$.texture;(Pt.isData3DTexture||Pt.isDataArrayTexture||Pt.isCompressedArrayTexture)&&(rt=!0);const Rt=Ne.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Array.isArray(Rt[ce])?ge=Rt[ce][Te]:ge=Rt[ce],je=!0):$.samples>0&&Y.useMultisampledRTT($)===!1?ge=Ne.get($).__webglMultisampledFramebuffer:Array.isArray(Rt)?ge=Rt[Te]:ge=Rt,j.copy($.viewport),ae.copy($.scissor),ne=$.scissorTest}else j.copy(ie).multiplyScalar(Z).floor(),ae.copy(Ee).multiplyScalar(Z).floor(),ne=Ue;if(Te!==0&&(ge=Qc),Ie.bindFramebuffer(te.FRAMEBUFFER,ge)&&Ae&&Ie.drawBuffers($,ge),Ie.viewport(j),Ie.scissor(ae),Ie.setScissorTest(ne),je){const gt=Ne.get($.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+ce,gt.__webglTexture,Te)}else if(rt){const gt=Ne.get($.texture),Pt=ce;te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,gt.__webglTexture,Te,Pt)}else if($!==null&&Te!==0){const gt=Ne.get($.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,gt.__webglTexture,Te)}B=-1},this.readRenderTargetPixels=function($,ce,Te,Ae,ge,je,rt){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=Ne.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&rt!==void 0&&(ot=ot[rt]),ot){Ie.bindFramebuffer(te.FRAMEBUFFER,ot);try{const gt=$.texture,Pt=gt.format,Rt=gt.type;if(!Pe.textureFormatReadable(Pt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Pe.textureTypeReadable(Rt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ce>=0&&ce<=$.width-Ae&&Te>=0&&Te<=$.height-ge&&te.readPixels(ce,Te,Ae,ge,wt.convert(Pt),wt.convert(Rt),je)}finally{const gt=G!==null?Ne.get(G).__webglFramebuffer:null;Ie.bindFramebuffer(te.FRAMEBUFFER,gt)}}},this.readRenderTargetPixelsAsync=async function($,ce,Te,Ae,ge,je,rt){if(!($&&$.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ot=Ne.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&rt!==void 0&&(ot=ot[rt]),ot)if(ce>=0&&ce<=$.width-Ae&&Te>=0&&Te<=$.height-ge){Ie.bindFramebuffer(te.FRAMEBUFFER,ot);const gt=$.texture,Pt=gt.format,Rt=gt.type;if(!Pe.textureFormatReadable(Pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Pe.textureTypeReadable(Rt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Et=te.createBuffer();te.bindBuffer(te.PIXEL_PACK_BUFFER,Et),te.bufferData(te.PIXEL_PACK_BUFFER,je.byteLength,te.STREAM_READ),te.readPixels(ce,Te,Ae,ge,wt.convert(Pt),wt.convert(Rt),0);const cn=G!==null?Ne.get(G).__webglFramebuffer:null;Ie.bindFramebuffer(te.FRAMEBUFFER,cn);const Mn=te.fenceSync(te.SYNC_GPU_COMMANDS_COMPLETE,0);return te.flush(),await q8(te,Mn,4),te.bindBuffer(te.PIXEL_PACK_BUFFER,Et),te.getBufferSubData(te.PIXEL_PACK_BUFFER,0,je),te.deleteBuffer(Et),te.deleteSync(Mn),je}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function($,ce=null,Te=0){const Ae=Math.pow(2,-Te),ge=Math.floor($.image.width*Ae),je=Math.floor($.image.height*Ae),rt=ce!==null?ce.x:0,ot=ce!==null?ce.y:0;Y.setTexture2D($,0),te.copyTexSubImage2D(te.TEXTURE_2D,Te,0,0,rt,ot,ge,je),Ie.unbindTexture()};const Jc=te.createFramebuffer(),da=te.createFramebuffer();this.copyTextureToTexture=function($,ce,Te=null,Ae=null,ge=0,je=null){je===null&&(ge!==0?(i_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),je=ge,ge=0):je=0);let rt,ot,gt,Pt,Rt,Et,cn,Mn,oi;const fn=$.isCompressedTexture?$.mipmaps[je]:$.image;if(Te!==null)rt=Te.max.x-Te.min.x,ot=Te.max.y-Te.min.y,gt=Te.isBox3?Te.max.z-Te.min.z:1,Pt=Te.min.x,Rt=Te.min.y,Et=Te.isBox3?Te.min.z:0;else{const Li=Math.pow(2,-ge);rt=Math.floor(fn.width*Li),ot=Math.floor(fn.height*Li),$.isDataArrayTexture?gt=fn.depth:$.isData3DTexture?gt=Math.floor(fn.depth*Li):gt=1,Pt=0,Rt=0,Et=0}Ae!==null?(cn=Ae.x,Mn=Ae.y,oi=Ae.z):(cn=0,Mn=0,oi=0);const dn=wt.convert(ce.format),Dt=wt.convert(ce.type);let hi;ce.isData3DTexture?(Y.setTexture3D(ce,0),hi=te.TEXTURE_3D):ce.isDataArrayTexture||ce.isCompressedArrayTexture?(Y.setTexture2DArray(ce,0),hi=te.TEXTURE_2D_ARRAY):(Y.setTexture2D(ce,0),hi=te.TEXTURE_2D),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,ce.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,ce.unpackAlignment);const Sn=te.getParameter(te.UNPACK_ROW_LENGTH),cs=te.getParameter(te.UNPACK_IMAGE_HEIGHT),Ua=te.getParameter(te.UNPACK_SKIP_PIXELS),$n=te.getParameter(te.UNPACK_SKIP_ROWS),za=te.getParameter(te.UNPACK_SKIP_IMAGES);te.pixelStorei(te.UNPACK_ROW_LENGTH,fn.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,fn.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,Pt),te.pixelStorei(te.UNPACK_SKIP_ROWS,Rt),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Et);const Gn=$.isDataArrayTexture||$.isData3DTexture,us=ce.isDataArrayTexture||ce.isData3DTexture;if($.isDepthTexture){const Li=Ne.get($),Zi=Ne.get(ce),Ki=Ne.get(Li.__renderTarget),zs=Ne.get(Zi.__renderTarget);Ie.bindFramebuffer(te.READ_FRAMEBUFFER,Ki.__webglFramebuffer),Ie.bindFramebuffer(te.DRAW_FRAMEBUFFER,zs.__webglFramebuffer);for(let Pa=0;Pa<gt;Pa++)Gn&&(te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Ne.get($).__webglTexture,ge,Et+Pa),te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Ne.get(ce).__webglTexture,je,oi+Pa)),te.blitFramebuffer(Pt,Rt,rt,ot,cn,Mn,rt,ot,te.DEPTH_BUFFER_BIT,te.NEAREST);Ie.bindFramebuffer(te.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else if(ge!==0||$.isRenderTargetTexture||Ne.has($)){const Li=Ne.get($),Zi=Ne.get(ce);Ie.bindFramebuffer(te.READ_FRAMEBUFFER,Jc),Ie.bindFramebuffer(te.DRAW_FRAMEBUFFER,da);for(let Ki=0;Ki<gt;Ki++)Gn?te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Li.__webglTexture,ge,Et+Ki):te.framebufferTexture2D(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Li.__webglTexture,ge),us?te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Zi.__webglTexture,je,oi+Ki):te.framebufferTexture2D(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Zi.__webglTexture,je),ge!==0?te.blitFramebuffer(Pt,Rt,rt,ot,cn,Mn,rt,ot,te.COLOR_BUFFER_BIT,te.NEAREST):us?te.copyTexSubImage3D(hi,je,cn,Mn,oi+Ki,Pt,Rt,rt,ot):te.copyTexSubImage2D(hi,je,cn,Mn,Pt,Rt,rt,ot);Ie.bindFramebuffer(te.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else us?$.isDataTexture||$.isData3DTexture?te.texSubImage3D(hi,je,cn,Mn,oi,rt,ot,gt,dn,Dt,fn.data):ce.isCompressedArrayTexture?te.compressedTexSubImage3D(hi,je,cn,Mn,oi,rt,ot,gt,dn,fn.data):te.texSubImage3D(hi,je,cn,Mn,oi,rt,ot,gt,dn,Dt,fn):$.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,je,cn,Mn,rt,ot,dn,Dt,fn.data):$.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,je,cn,Mn,fn.width,fn.height,dn,fn.data):te.texSubImage2D(te.TEXTURE_2D,je,cn,Mn,rt,ot,dn,Dt,fn);te.pixelStorei(te.UNPACK_ROW_LENGTH,Sn),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,cs),te.pixelStorei(te.UNPACK_SKIP_PIXELS,Ua),te.pixelStorei(te.UNPACK_SKIP_ROWS,$n),te.pixelStorei(te.UNPACK_SKIP_IMAGES,za),je===0&&ce.generateMipmaps&&te.generateMipmap(hi),Ie.unbindTexture()},this.copyTextureToTexture3D=function($,ce,Te=null,Ae=null,ge=0){return i_('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture($,ce,Te,Ae,ge)},this.initRenderTarget=function($){Ne.get($).__webglFramebuffer===void 0&&Y.setupRenderTarget($)},this.initTexture=function($){$.isCubeTexture?Y.setTextureCube($,0):$.isData3DTexture?Y.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?Y.setTexture2DArray($,0):Y.setTexture2D($,0),Ie.unbindTexture()},this.resetState=function(){L=0,P=0,G=null,Ie.reset(),bn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return jo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=vn._getDrawingBufferColorSpace(e),t.unpackColorSpace=vn._getUnpackColorSpace()}}const rq=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:xM,AddEquation:af,AddOperation:eO,AdditiveAnimationBlendMode:CM,AdditiveBlending:MT,AgXToneMapping:rO,AlphaFormat:EM,AlwaysCompare:bO,AlwaysDepth:C_,AlwaysStencilFunc:CT,AmbientLight:pL,AnimationAction:TL,AnimationClip:tm,AnimationLoader:xG,AnimationMixer:qG,AnimationObjectGroup:$G,AnimationUtils:mG,ArcCurve:GO,ArrayCamera:bL,ArrowHelper:g9,AttachedBindMode:RT,Audio:SL,AudioAnalyser:UG,AudioContext:sA,AudioListener:DG,AudioLoader:RG,AxesHelper:y9,BackSide:Hr,BasicDepthPacking:hO,BasicShadowMap:UD,BatchedMesh:HO,Bone:X1,BooleanKeyframeTrack:ed,Box2:n9,Box3:hr,Box3Helper:p9,BoxGeometry:Jh,BoxHelper:d9,BufferAttribute:Fn,BufferGeometry:rn,BufferGeometryLoader:xL,ByteType:_M,Cache:zc,Camera:G1,CameraHelper:h9,CanvasTexture:BV,CapsuleGeometry:W1,CatmullRomCurve3:kO,CineonToneMapping:iO,CircleGeometry:Z1,ClampToEdgeWrapping:Ca,Clock:rA,Color:lt,ColorKeyframeTrack:QM,ColorManagement:vn,CompressedArrayTexture:PV,CompressedCubeTexture:IV,CompressedTexture:j1,CompressedTextureLoader:_G,ConeGeometry:K1,ConstantAlphaFactor:KD,ConstantColorFactor:WD,Controls:x9,CubeCamera:UO,CubeReflectionMapping:Xc,CubeRefractionMapping:pf,CubeTexture:sy,CubeTextureLoader:bG,CubeUVReflectionMapping:dm,CubicBezierCurve:kM,CubicBezierCurve3:$O,CubicInterpolant:cL,CullFaceBack:TT,CullFaceFront:LD,CullFaceFrontBack:K6,CullFaceNone:OD,Curve:el,CurvePath:qO,CustomBlending:zD,CustomToneMapping:sO,CylinderGeometry:gm,Cylindrical:e9,Data3DTexture:V1,DataArrayTexture:iy,DataTexture:Hl,DataTextureLoader:SG,DataUtils:cV,DecrementStencilOp:l8,DecrementWrapStencilOp:u8,DefaultLoadingManager:hL,DepthFormat:qp,DepthStencilFormat:jp,DepthTexture:VM,DetachedBindMode:oO,DirectionalLight:iA,DirectionalLightHelper:f9,DiscreteInterpolant:uL,DodecahedronGeometry:Q1,DoubleSide:Xo,DstAlphaFactor:$D,DstColorFactor:qD,DynamicCopyUsage:M8,DynamicDrawUsage:x8,DynamicReadUsage:S8,EdgesGeometry:jO,EllipseCurve:Y1,EqualCompare:yO,EqualDepth:D_,EqualStencilFunc:p8,EquirectangularReflectionMapping:U0,EquirectangularRefractionMapping:z0,Euler:Zo,EventDispatcher:Yl,ExtrudeGeometry:J1,FileLoader:Ko,Float16BufferAttribute:gV,Float32BufferAttribute:St,FloatType:aa,Fog:$1,FogExp2:k1,FramebufferTexture:zV,FrontSide:Xl,Frustum:oy,GLBufferAttribute:QG,GLSL1:w8,GLSL3:NT,GreaterCompare:vO,GreaterDepth:L_,GreaterEqualCompare:_O,GreaterEqualDepth:O_,GreaterEqualStencilFunc:v8,GreaterStencilFunc:g8,GridHelper:c9,Group:Uc,HalfFloatType:pm,HemisphereLight:dL,HemisphereLightHelper:l9,IcosahedronGeometry:eb,ImageBitmapLoader:_L,ImageLoader:X0,ImageUtils:wO,IncrementStencilOp:o8,IncrementWrapStencilOp:c8,InstancedBufferAttribute:Xh,InstancedBufferGeometry:vL,InstancedInterleavedBuffer:KG,InstancedMesh:BM,Int16BufferAttribute:pV,Int32BufferAttribute:mV,Int8BufferAttribute:fV,IntType:L1,InterleavedBuffer:ry,InterleavedBufferAttribute:Jp,Interpolant:vm,InterpolateDiscrete:Yp,InterpolateLinear:Wp,InterpolateSmooth:n_,InvertStencilOp:f8,KeepStencilOp:Ch,KeyframeTrack:uo,LOD:FO,LatheGeometry:ly,Layers:Kp,LessCompare:gO,LessDepth:N_,LessEqualCompare:DM,LessEqualDepth:$h,LessEqualStencilFunc:m8,LessStencilFunc:d8,Light:xf,LightProbe:yL,Line:jc,Line3:i9,LineBasicMaterial:mr,LineCurve:$M,LineCurve3:XO,LineDashedMaterial:aL,LineLoop:FM,LineSegments:Jo,LinearFilter:Bi,LinearInterpolant:KM,LinearMipMapLinearFilter:t8,LinearMipMapNearestFilter:e8,LinearMipmapLinearFilter:ro,LinearMipmapNearestFilter:Ip,LinearSRGBColorSpace:qs,LinearToneMapping:tO,LinearTransfer:I0,Loader:Vr,LoaderUtils:ff,LoadingManager:JM,LoopOnce:lO,LoopPingPong:uO,LoopRepeat:cO,LuminanceAlphaFormat:AM,LuminanceFormat:MM,MOUSE:W6,Material:Es,MaterialLoader:ob,MathUtils:SO,Matrix2:t9,Matrix3:ln,Matrix4:Gt,MaxEquation:FD,Mesh:Yi,MeshBasicMaterial:Na,MeshDepthMaterial:YM,MeshDistanceMaterial:WM,MeshLambertMaterial:sL,MeshMatcapMaterial:rL,MeshNormalMaterial:iL,MeshPhongMaterial:tL,MeshPhysicalMaterial:co,MeshStandardMaterial:fy,MeshToonMaterial:nL,MinEquation:BD,MirroredRepeatWrapping:kp,MixOperation:JD,MultiplyBlending:wT,MultiplyOperation:ty,NearestFilter:Ss,NearestMipMapLinearFilter:J6,NearestMipMapNearestFilter:Q6,NearestMipmapLinearFilter:Oh,NearestMipmapNearestFilter:O1,NeutralToneMapping:aO,NeverCompare:mO,NeverDepth:R_,NeverStencilFunc:h8,NoBlending:Fc,NoColorSpace:Oc,NoToneMapping:Fl,NormalAnimationBlendMode:F1,NormalBlending:Fh,NotEqualCompare:xO,NotEqualDepth:U_,NotEqualStencilFunc:y8,NumberKeyframeTrack:jh,Object3D:Rn,ObjectLoader:AG,ObjectSpaceNormalMap:pO,OctahedronGeometry:cy,OneFactor:VD,OneMinusConstantAlphaFactor:QD,OneMinusConstantColorFactor:ZD,OneMinusDstAlphaFactor:XD,OneMinusDstColorFactor:jD,OneMinusSrcAlphaFactor:w_,OneMinusSrcColorFactor:kD,OrthographicCamera:xm,PCFShadowMap:N1,PCFSoftShadowMap:v0,PMREMGenerator:BT,Path:V0,PerspectiveCamera:_s,Plane:rf,PlaneGeometry:ym,PlaneHelper:m9,PointLight:nA,PointLightHelper:a9,Points:HM,PointsMaterial:q1,PolarGridHelper:u9,PolyhedronGeometry:vf,PositionalAudio:LG,PropertyBinding:Dn,PropertyMixer:EL,QuadraticBezierCurve:XM,QuadraticBezierCurve3:qM,Quaternion:fr,QuaternionKeyframeTrack:Yh,QuaternionLinearInterpolant:fL,RED_GREEN_RGTC2_Format:r1,RED_RGTC1_Format:RM,REVISION:C1,RGBADepthPacking:dO,RGBAFormat:ur,RGBAIntegerFormat:B1,RGBA_ASTC_10x10_Format:J_,RGBA_ASTC_10x5_Format:Z_,RGBA_ASTC_10x6_Format:K_,RGBA_ASTC_10x8_Format:Q_,RGBA_ASTC_12x10_Format:e1,RGBA_ASTC_12x12_Format:t1,RGBA_ASTC_4x4_Format:G_,RGBA_ASTC_5x4_Format:k_,RGBA_ASTC_5x5_Format:$_,RGBA_ASTC_6x5_Format:X_,RGBA_ASTC_6x6_Format:q_,RGBA_ASTC_8x5_Format:j_,RGBA_ASTC_8x6_Format:Y_,RGBA_ASTC_8x8_Format:W_,RGBA_BPTC_Format:E0,RGBA_ETC2_EAC_Format:V_,RGBA_PVRTC_2BPPV1_Format:B_,RGBA_PVRTC_4BPPV1_Format:I_,RGBA_S3TC_DXT1_Format:_0,RGBA_S3TC_DXT3_Format:b0,RGBA_S3TC_DXT5_Format:S0,RGBDepthPacking:i8,RGBFormat:TM,RGBIntegerFormat:n8,RGB_BPTC_SIGNED_Format:n1,RGB_BPTC_UNSIGNED_Format:i1,RGB_ETC1_Format:F_,RGB_ETC2_Format:H_,RGB_PVRTC_2BPPV1_Format:P_,RGB_PVRTC_4BPPV1_Format:z_,RGB_S3TC_DXT1_Format:x0,RGDepthPacking:s8,RGFormat:wM,RGIntegerFormat:I1,RawShaderMaterial:eL,Ray:mm,Raycaster:ML,RectAreaLight:mL,RedFormat:P1,RedIntegerFormat:ny,ReinhardToneMapping:nO,RenderTarget:H1,RenderTarget3D:jG,RenderTargetArray:YG,RepeatWrapping:mf,ReplaceStencilOp:a8,ReverseSubtractEquation:ID,RingGeometry:tb,SIGNED_RED_GREEN_RGTC2_Format:a1,SIGNED_RED_RGTC1_Format:s1,SRGBColorSpace:ji,SRGBTransfer:Wn,Scene:zM,ShaderChunk:on,ShaderLib:$o,ShaderMaterial:La,ShadowMaterial:JO,Shape:Vh,ShapeGeometry:nb,ShapePath:v9,ShapeUtils:Vl,ShortType:bM,Skeleton:ay,SkeletonHelper:r9,SkinnedMesh:IM,Source:lf,Sphere:Xs,SphereGeometry:uy,Spherical:JG,SphericalHarmonics3:gL,SplineCurve:jM,SpotLight:tA,SpotLightHelper:s9,Sprite:BO,SpriteMaterial:PM,SrcAlphaFactor:A_,SrcAlphaSaturateFactor:YD,SrcColorFactor:GD,StaticCopyUsage:T8,StaticDrawUsage:B0,StaticReadUsage:b8,StereoCamera:CG,StreamCopyUsage:A8,StreamDrawUsage:_8,StreamReadUsage:E8,StringKeyframeTrack:td,SubtractEquation:PD,SubtractiveBlending:AT,TOUCH:Z6,TangentSpaceNormalMap:yf,TetrahedronGeometry:ib,Texture:Fi,TextureLoader:hy,TextureUtils:T9,TimestampQuery:R8,TorusGeometry:sb,TorusKnotGeometry:rb,Triangle:sa,TriangleFanDrawMode:o1,TriangleStripDrawMode:NM,TrianglesDrawMode:fO,TubeGeometry:ab,UVMapping:D1,Uint16BufferAttribute:LM,Uint32BufferAttribute:UM,Uint8BufferAttribute:hV,Uint8ClampedBufferAttribute:dV,Uniform:lA,UniformsGroup:ZG,UniformsLib:dt,UniformsUtils:LO,UnsignedByteType:Wo,UnsignedInt248Type:Xp,UnsignedInt5999Type:SM,UnsignedIntType:qc,UnsignedShort4444Type:U1,UnsignedShort5551Type:z1,UnsignedShortType:$p,VSMShadowMap:Go,Vector2:Xe,Vector3:K,Vector4:Bn,VectorKeyframeTrack:Wh,VideoFrameTexture:UV,VideoTexture:VO,WebGL3DRenderTarget:J8,WebGLArrayRenderTarget:Q8,WebGLCoordinateSystem:jo,WebGLCubeRenderTarget:zO,WebGLRenderTarget:ql,WebGLRenderer:UL,WebGLUtils:LL,WebGPUCoordinateSystem:F0,WebXRController:r_,WireframeGeometry:QO,WrapAroundEnding:P0,ZeroCurvatureEnding:Lh,ZeroFactor:HD,ZeroSlopeEnding:Uh,ZeroStencilOp:r8,createCanvasElement:AO},Symbol.toStringTag,{value:"Module"}));var _E={exports:{}},wc={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC;function aq(){return GC||(GC=1,wc.ConcurrentRoot=1,wc.ContinuousEventPriority=8,wc.DefaultEventPriority=32,wc.DiscreteEventPriority=2,wc.IdleEventPriority=268435456,wc.LegacyRoot=0,wc.NoEventPriority=0),wc}var kC;function oq(){return kC||(kC=1,_E.exports=aq()),_E.exports}var o_=oq(),bE={exports:{}},SE={},EE={exports:{}},TE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C;function lq(){if($C)return TE;$C=1;var i=am();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,s=i.useEffect,r=i.useLayoutEffect,o=i.useDebugValue;function c(g,v){var _=v(),b=n({inst:{value:_,getSnapshot:v}}),A=b[0].inst,M=b[1];return r(function(){A.value=_,A.getSnapshot=v,f(A)&&M({inst:A})},[g,_,v]),s(function(){return f(A)&&M({inst:A}),g(function(){f(A)&&M({inst:A})})},[g]),o(_),_}function f(g){var v=g.getSnapshot;g=g.value;try{var _=v();return!t(g,_)}catch{return!0}}function d(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return TE.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:m,TE}var XC;function cq(){return XC||(XC=1,EE.exports=lq()),EE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qC;function uq(){if(qC)return SE;qC=1;var i=am(),e=cq();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=i.useRef,o=i.useEffect,c=i.useMemo,f=i.useDebugValue;return SE.useSyncExternalStoreWithSelector=function(d,m,g,v,_){var b=r(null);if(b.current===null){var A={hasValue:!1,value:null};b.current=A}else A=b.current;b=c(function(){function T(L){if(!C){if(C=!0,D=L,L=v(L),_!==void 0&&A.hasValue){var P=A.value;if(_(P,L))return N=P}return N=L}if(P=N,n(D,L))return P;var G=v(L);return _!==void 0&&_(P,G)?(D=L,P):(D=L,N=G)}var C=!1,D,N,I=g===void 0?null:g;return[function(){return T(m())},I===null?void 0:function(){return T(I())}]},[m,g,v,_]);var M=s(d,b[0],b[1]);return o(function(){A.hasValue=!0,A.value=M},[M]),f(M),M},SE}var jC;function fq(){return jC||(jC=1,bE.exports=uq()),bE.exports}var hq=fq();const dq=Kh(hq),YC=i=>{let e;const t=new Set,n=(d,m)=>{const g=typeof d=="function"?d(e):d;if(!Object.is(g,e)){const v=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(_=>_(e,v))}},s=()=>e,c={setState:n,getState:s,getInitialState:()=>f,subscribe:d=>(t.add(d),()=>t.delete(d))},f=e=i(n,s,c);return c},pq=i=>i?YC(i):YC,{useSyncExternalStoreWithSelector:mq}=dq,gq=i=>i;function yq(i,e=gq,t){const n=mq(i.subscribe,i.getState,i.getInitialState,e,t);return se.useDebugValue(n),n}const WC=(i,e)=>{const t=pq(i),n=(s,r=e)=>yq(t,s,r);return Object.assign(n,t),n},vq=(i,e)=>i?WC(i,e):WC;var ME={exports:{}},AE={exports:{}},wE={exports:{}},RE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC;function xq(){return ZC||(ZC=1,function(i){function e(F,W){var Z=F.length;F.push(W);e:for(;0<Z;){var fe=Z-1>>>1,X=F[fe];if(0<s(X,W))F[fe]=W,F[Z]=X,Z=fe;else break e}}function t(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var W=F[0],Z=F.pop();if(Z!==W){F[0]=Z;e:for(var fe=0,X=F.length,ie=X>>>1;fe<ie;){var Ee=2*(fe+1)-1,Ue=F[Ee],re=Ee+1,Ce=F[re];if(0>s(Ue,Z))re<X&&0>s(Ce,Ue)?(F[fe]=Ce,F[re]=Z,fe=re):(F[fe]=Ue,F[Ee]=Z,fe=Ee);else if(re<X&&0>s(Ce,Z))F[fe]=Ce,F[re]=Z,fe=re;else break e}}return W}function s(F,W){var Z=F.sortIndex-W.sortIndex;return Z!==0?Z:F.id-W.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var f=[],d=[],m=1,g=null,v=3,_=!1,b=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(F){for(var W=t(d);W!==null;){if(W.callback===null)n(d);else if(W.startTime<=F)n(d),W.sortIndex=W.expirationTime,e(f,W);else break;W=t(d)}}function N(F){if(A=!1,D(F),!b)if(t(f)!==null)b=!0,de();else{var W=t(d);W!==null&&he(N,W.startTime-F)}}var I=!1,L=-1,P=5,G=-1;function B(){return!(i.unstable_now()-G<P)}function U(){if(I){var F=i.unstable_now();G=F;var W=!0;try{e:{b=!1,A&&(A=!1,T(L),L=-1),_=!0;var Z=v;try{t:{for(D(F),g=t(f);g!==null&&!(g.expirationTime>F&&B());){var fe=g.callback;if(typeof fe=="function"){g.callback=null,v=g.priorityLevel;var X=fe(g.expirationTime<=F);if(F=i.unstable_now(),typeof X=="function"){g.callback=X,D(F),W=!0;break t}g===t(f)&&n(f),D(F)}else n(f);g=t(f)}if(g!==null)W=!0;else{var ie=t(d);ie!==null&&he(N,ie.startTime-F),W=!1}}break e}finally{g=null,v=Z,_=!1}W=void 0}}finally{W?j():I=!1}}}var j;if(typeof C=="function")j=function(){C(U)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ne=ae.port2;ae.port1.onmessage=U,j=function(){ne.postMessage(null)}}else j=function(){M(U,0)};function de(){I||(I=!0,j())}function he(F,W){L=M(function(){F(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(F){F.callback=null},i.unstable_continueExecution=function(){b||_||(b=!0,de())},i.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<F?Math.floor(1e3/F):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(f)},i.unstable_next=function(F){switch(v){case 1:case 2:case 3:var W=3;break;default:W=v}var Z=v;v=W;try{return F()}finally{v=Z}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=v;v=F;try{return W()}finally{v=Z}},i.unstable_scheduleCallback=function(F,W,Z){var fe=i.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?fe+Z:fe):Z=fe,F){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Z+X,F={id:m++,callback:W,priorityLevel:F,startTime:Z,expirationTime:X,sortIndex:-1},Z>fe?(F.sortIndex=Z,e(d,F),t(f)===null&&F===t(d)&&(A?(T(L),L=-1):A=!0,he(N,Z-fe))):(F.sortIndex=X,e(f,F),b||_||(b=!0,de())),F},i.unstable_shouldYield=B,i.unstable_wrapCallback=function(F){var W=v;return function(){var Z=v;v=W;try{return F.apply(this,arguments)}finally{v=Z}}}}(RE)),RE}var KC;function _q(){return KC||(KC=1,wE.exports=xq()),wE.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QC;function bq(){return QC||(QC=1,function(i){i.exports=function(e){function t(u,h,x,E){return new Km(u,h,x,E)}function n(){}function s(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return u===null||typeof u!="object"?null:(u=Mo&&u[Mo]||u["@@iterator"],typeof u=="function"?u:null)}function o(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===tg?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case yl:return"Fragment";case Xr:return"Portal";case Md:return"Profiler";case Yf:return"StrictMode";case Ad:return"Suspense";case xu:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case ga:return(u.displayName||"Context")+".Provider";case Jm:return(u._context.displayName||"Context")+".Consumer";case Zf:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case wd:return h=u.displayName||null,h!==null?h:o(u.type)||"Memo";case qr:h=u._payload,u=u._init;try{return o(u(h))}catch{}}return null}function c(u){if(Va===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);Va=h&&h[1]||"",Ao=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Va+u+Ao}function f(u,h){if(!u||tc)return"";tc=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(h){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(Wt){var mt=Wt}Reflect.construct(u,[],ht)}else{try{ht.call()}catch(Wt){mt=Wt}u.call(ht.prototype)}}else{try{throw Error()}catch(Wt){mt=Wt}(ht=u())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(Wt){if(Wt&&mt&&typeof Wt.stack=="string")return[Wt.stack,mt.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=E.DetermineComponentFrameRoot(),q=O[0],ee=O[1];if(q&&ee){var ye=q.split(`
`),He=ee.split(`
`);for(R=E=0;E<ye.length&&!ye[E].includes("DetermineComponentFrameRoot");)E++;for(;R<He.length&&!He[R].includes("DetermineComponentFrameRoot");)R++;if(E===ye.length||R===He.length)for(E=ye.length-1,R=He.length-1;1<=E&&0<=R&&ye[E]!==He[R];)R--;for(;1<=E&&0<=R;E--,R--)if(ye[E]!==He[R]){if(E!==1||R!==1)do if(E--,R--,0>R||ye[E]!==He[R]){var nt=`
`+ye[E].replace(" at new "," at ");return u.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",u.displayName)),nt}while(1<=E&&0<=R);break}}}finally{tc=!1,Error.prepareStackTrace=x}return(x=u?u.displayName||u.name:"")?c(x):""}function d(u){switch(u.tag){case 26:case 27:case 5:return c(u.type);case 16:return c("Lazy");case 13:return c("Suspense");case 19:return c("SuspenseList");case 0:case 15:return u=f(u.type,!1),u;case 11:return u=f(u.type.render,!1),u;case 1:return u=f(u.type,!0),u;default:return""}}function m(u){try{var h="";do h+=d(u),u=u.return;while(u);return h}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function g(u){var h=u,x=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(x=h.return),u=h.return;while(u)}return h.tag===3?x:null}function v(u){if(g(u)!==u)throw Error(s(188))}function _(u){var h=u.alternate;if(!h){if(h=g(u),h===null)throw Error(s(188));return h!==u?null:u}for(var x=u,E=h;;){var R=x.return;if(R===null)break;var O=R.alternate;if(O===null){if(E=R.return,E!==null){x=E;continue}break}if(R.child===O.child){for(O=R.child;O;){if(O===x)return v(R),u;if(O===E)return v(R),h;O=O.sibling}throw Error(s(188))}if(x.return!==E.return)x=R,E=O;else{for(var q=!1,ee=R.child;ee;){if(ee===x){q=!0,x=R,E=O;break}if(ee===E){q=!0,E=R,x=O;break}ee=ee.sibling}if(!q){for(ee=O.child;ee;){if(ee===x){q=!0,x=O,E=R;break}if(ee===E){q=!0,E=O,x=R;break}ee=ee.sibling}if(!q)throw Error(s(189))}}if(x.alternate!==E)throw Error(s(190))}if(x.tag!==3)throw Error(s(188));return x.stateNode.current===x?u:h}function b(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=b(u),h!==null)return h;u=u.sibling}return null}function A(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(u.tag!==4&&(h=A(u),h!==null))return h;u=u.sibling}return null}function M(u){return{current:u}}function T(u){0>No||(u.current=Ti[No],Ti[No]=null,No--)}function C(u,h){No++,Ti[No]=u.current,u.current=h}function D(u){return u>>>=0,u===0?32:31-(Mv(u)/Av|0)|0}function N(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function I(u,h){var x=u.pendingLanes;if(x===0)return 0;var E=0,R=u.suspendedLanes,O=u.pingedLanes,q=u.warmLanes;u=u.finishedLanes!==0;var ee=x&134217727;return ee!==0?(x=ee&~R,x!==0?E=N(x):(O&=ee,O!==0?E=N(O):u||(q=ee&~q,q!==0&&(E=N(q))))):(ee=x&~R,ee!==0?E=N(ee):O!==0?E=N(O):u||(q=x&~q,q!==0&&(E=N(q)))),E===0?0:h!==0&&h!==E&&(h&R)===0&&(R=E&-E,q=h&-h,R>=q||R===32&&(q&4194176)!==0)?h:E}function L(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function P(u,h){switch(u){case 1:case 2:case 4:case 8:return h+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G(){var u=ka;return ka<<=1,(ka&4194176)===0&&(ka=128),u}function B(){var u=sc;return sc<<=1,(sc&62914560)===0&&(sc=4194304),u}function U(u){for(var h=[],x=0;31>x;x++)h.push(u);return h}function j(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ae(u,h,x,E,R,O){var q=u.pendingLanes;u.pendingLanes=x,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=x,u.entangledLanes&=x,u.errorRecoveryDisabledLanes&=x,u.shellSuspendCounter=0;var ee=u.entanglements,ye=u.expirationTimes,He=u.hiddenUpdates;for(x=q&~x;0<x;){var nt=31-Vs(x),ht=1<<nt;ee[nt]=0,ye[nt]=-1;var mt=He[nt];if(mt!==null)for(He[nt]=null,nt=0;nt<mt.length;nt++){var Wt=mt[nt];Wt!==null&&(Wt.lane&=-536870913)}x&=~ht}E!==0&&ne(u,E,0),O!==0&&R===0&&u.tag!==0&&(u.suspendedLanes|=O&~(q&~h))}function ne(u,h,x){u.pendingLanes|=h,u.suspendedLanes&=~h;var E=31-Vs(h);u.entangledLanes|=h,u.entanglements[E]=u.entanglements[E]|1073741824|x&4194218}function de(u,h){var x=u.entangledLanes|=h;for(u=u.entanglements;x;){var E=31-Vs(x),R=1<<E;R&h|u[E]&h&&(u[E]|=h),x&=~R}}function he(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function F(u){if(tr&&typeof tr.onCommitFiberRoot=="function")try{tr.onCommitFiberRoot(Mi,u,void 0,(u.current.flags&128)===128)}catch{}}function W(u){if(typeof Cv=="function"&&es(u),tr&&typeof tr.setStrictMode=="function")try{tr.setStrictMode(Mi,u)}catch{}}function Z(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}function fe(u,h){if(typeof u=="object"&&u!==null){var x=_g.get(u);return x!==void 0?x:(h={value:u,source:h,stack:m(h)},_g.set(u,h),h)}return{value:u,source:h,stack:m(h)}}function X(u,h){rc[ac++]=Ru,rc[ac++]=oc,oc=u,Ru=h}function ie(u,h,x){br[Sr++]=xa,br[Sr++]=_a,br[Sr++]=Tl,Tl=u;var E=xa;u=_a;var R=32-Vs(E)-1;E&=~(1<<R),x+=1;var O=32-Vs(h)+R;if(30<O){var q=R-R%5;O=(E&(1<<q)-1).toString(32),E>>=q,R-=q,xa=1<<32-Vs(h)+R|x<<R|E,_a=O+u}else xa=1<<O|x<<R|E,_a=u}function Ee(u){u.return!==null&&(X(u,1),ie(u,1,0))}function Ue(u){for(;u===oc;)oc=rc[--ac],rc[ac]=null,Ru=rc[--ac],rc[ac]=null;for(;u===Tl;)Tl=br[--Sr],br[Sr]=null,_a=br[--Sr],br[Sr]=null,xa=br[--Sr],br[Sr]=null}function re(u,h){C($a,h),C(Cu,u),C(ki,null),u=$y(h),T(ki),C(ki,u)}function Ce(){T(ki),T(Cu),T($a)}function Be(u){u.memoizedState!==null&&C(lc,u);var h=ki.current,x=Eu(h,u.type);h!==x&&(C(Cu,u),C(ki,x))}function qe(u){Cu.current===u&&(T(ki),T(Cu)),lc.current===u&&(T(lc),Fs?ya._currentValue=xl:ya._currentValue2=xl)}function Ke(u){var h=Error(s(418,""));throw Nt(fe(h,u)),rh}function Ct(u,h){if(!gs)throw Error(s(175));mv(u.stateNode,u.type,u.memoizedProps,h,u)||Ke(u)}function bt(u){for(ys=u.return;ys;)switch(ys.tag){case 3:case 27:ts=!0;return;case 5:case 13:ts=!1;return;default:ys=ys.return}}function $t(u){if(!gs||u!==ys)return!1;if(!En)return bt(u),En=!0,!1;var h=!1;if(Xn?u.tag!==3&&u.tag!==27&&(u.tag!==5||Pd(u.type)&&!Qt(u.type,u.memoizedProps))&&(h=!0):u.tag!==3&&(u.tag!==5||Pd(u.type)&&!Qt(u.type,u.memoizedProps))&&(h=!0),h&&vs&&Ke(u),bt(u),u.tag===13){if(!gs)throw Error(s(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));vs=yv(u)}else vs=ys?gg(u.stateNode):null;return!0}function jt(){gs&&(vs=ys=null,En=!1)}function Nt(u){Wr===null?Wr=[u]:Wr.push(u)}function te(){for(var u=cc,h=ba=cc=0;h<u;){var x=Zr[h];Zr[h++]=null;var E=Zr[h];Zr[h++]=null;var R=Zr[h];Zr[h++]=null;var O=Zr[h];if(Zr[h++]=null,E!==null&&R!==null){var q=E.pending;q===null?R.next=R:(R.next=q.next,q.next=R),E.pending=R}O!==0&&Ie(x,R,O)}}function _n(u,h,x,E){Zr[cc++]=u,Zr[cc++]=h,Zr[cc++]=x,Zr[cc++]=E,ba|=E,u.lanes|=E,u=u.alternate,u!==null&&(u.lanes|=E)}function Fe(u,h,x,E){return _n(u,h,x,E),Je(u)}function Pe(u,h){return _n(u,null,null,h),Je(u)}function Ie(u,h,x){u.lanes|=x;var E=u.alternate;E!==null&&(E.lanes|=x);for(var R=!1,O=u.return;O!==null;)O.childLanes|=x,E=O.alternate,E!==null&&(E.childLanes|=x),O.tag===22&&(u=O.stateNode,u===null||u._visibility&1||(R=!0)),u=O,O=O.return;R&&h!==null&&u.tag===3&&(O=u.stateNode,R=31-Vs(x),O=O.hiddenUpdates,u=O[R],u===null?O[R]=[h]:u.push(h),h.lane=x|536870912)}function Je(u){if(50<Bu)throw Bu=0,Kd=null,Error(s(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}function Ne(u){u!==Do&&u.next===null&&(Do===null?ah=Do=u:Do=Do.next=u),Qn=!0,uc||(uc=!0,Me(H))}function Y(u,h){if(!bg&&Qn){bg=!0;do for(var x=!1,E=ah;E!==null;){if(u!==0){var R=E.pendingLanes;if(R===0)var O=0;else{var q=E.suspendedLanes,ee=E.pingedLanes;O=(1<<31-Vs(42|u)+1)-1,O&=R&~(q&~ee),O=O&201326677?O&201326677|1:O?O|2:0}O!==0&&(x=!0,De(E,O))}else O=pn,O=I(E,E===Un?O:0),(O&3)===0||L(E,O)||(x=!0,De(E,O));E=E.next}while(x);bg=!1}}function H(){Qn=uc=!1;var u=0;Nu!==0&&(Yy()&&(u=Nu),Nu=0);for(var h=Yr(),x=null,E=ah;E!==null;){var R=E.next,O=Q(E,h);O===0?(E.next=null,x===null?ah=R:x.next=R,R===null&&(Do=x)):(x=E,(u!==0||(O&3)!==0)&&(Qn=!0)),E=R}Y(u)}function Q(u,h){for(var x=u.suspendedLanes,E=u.pingedLanes,R=u.expirationTimes,O=u.pendingLanes&-62914561;0<O;){var q=31-Vs(O),ee=1<<q,ye=R[q];ye===-1?((ee&x)===0||(ee&E)!==0)&&(R[q]=P(ee,h)):ye<=h&&(u.expiredLanes|=ee),O&=~ee}if(h=Un,x=pn,x=I(u,u===h?x:0),E=u.callbackNode,x===0||u===h&&kn===2||u.cancelPendingCommit!==null)return E!==null&&E!==null&&Hd(E),u.callbackNode=null,u.callbackPriority=0;if((x&3)===0||L(u,x)){if(h=x&-x,h===u.callbackPriority)return h;switch(E!==null&&Hd(E),he(x)){case 2:case 8:x=Rv;break;case 32:x=kd;break;case 268435456:x=Nb;break;default:x=kd}return E=pe.bind(null,u),x=sh(x,E),u.callbackPriority=h,u.callbackNode=x,h}return E!==null&&E!==null&&Hd(E),u.callbackPriority=2,u.callbackNode=null,2}function pe(u,h){var x=u.callbackNode;if(ma()&&u.callbackNode!==x)return null;var E=pn;return E=I(u,u===Un?E:0),E===0?null:(hl(u,E,h),Q(u,Yr()),u.callbackNode!=null&&u.callbackNode===x?pe.bind(null,u):null)}function De(u,h){if(ma())return null;hl(u,h,!0)}function Me(u){ag?Co(function(){(wn&6)!==0?sh(Gd,u):u()}):sh(Gd,u)}function et(){return Nu===0&&(Nu=G()),Nu}function We(u,h){if(Du===null){var x=Du=[];fc=0,Er=et(),hc={status:"pending",value:void 0,then:function(E){x.push(E)}}}return fc++,h.then(tt,tt),h}function tt(){if(--fc===0&&Du!==null){hc!==null&&(hc.status="fulfilled");var u=Du;Du=null,Er=0,hc=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function Zt(u,h){var x=[],E={status:"pending",value:null,reason:null,then:function(R){x.push(R)}};return u.then(function(){E.status="fulfilled",E.value=h;for(var R=0;R<x.length;R++)(0,x[R])(h)},function(R){for(E.status="rejected",E.reason=R,R=0;R<x.length;R++)(0,x[R])(void 0)}),E}function Ye(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pt(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function yt(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function vt(u,h,x){var E=u.updateQueue;if(E===null)return null;if(E=E.shared,(wn&2)!==0){var R=E.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),E.pending=h,h=Je(u),Ie(u,null,x),h}return _n(u,E,h,x),Je(u)}function st(u,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194176)!==0)){var E=h.lanes;E&=u.pendingLanes,x|=E,h.lanes=x,de(u,x)}}function Xt(u,h){var x=u.updateQueue,E=u.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var R=null,O=null;if(x=x.firstBaseUpdate,x!==null){do{var q={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};O===null?R=O=q:O=O.next=q,x=x.next}while(x!==null);O===null?R=O=h:O=O.next=h}else R=O=h;x={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:O,shared:E.shared,callbacks:E.callbacks},u.updateQueue=x;return}u=x.lastBaseUpdate,u===null?x.firstBaseUpdate=h:u.next=h,x.lastBaseUpdate=h}function wt(){if(dc){var u=hc;if(u!==null)throw u}}function bn(u,h,x,E){dc=!1;var R=u.updateQueue;Oo=!1;var O=R.firstBaseUpdate,q=R.lastBaseUpdate,ee=R.shared.pending;if(ee!==null){R.shared.pending=null;var ye=ee,He=ye.next;ye.next=null,q===null?O=He:q.next=He,q=ye;var nt=u.alternate;nt!==null&&(nt=nt.updateQueue,ee=nt.lastBaseUpdate,ee!==q&&(ee===null?nt.firstBaseUpdate=He:ee.next=He,nt.lastBaseUpdate=ye))}if(O!==null){var ht=R.baseState;q=0,nt=He=ye=null,ee=O;do{var mt=ee.lane&-536870913,Wt=mt!==ee.lane;if(Wt?(pn&mt)===mt:(E&mt)===mt){mt!==0&&mt===Er&&(dc=!0),nt!==null&&(nt=nt.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var Dr=u,Ll=ee;mt=h;var Ul=x;switch(Ll.tag){case 1:if(Dr=Ll.payload,typeof Dr=="function"){ht=Dr.call(Ul,ht,mt);break e}ht=Dr;break e;case 3:Dr.flags=Dr.flags&-65537|128;case 0:if(Dr=Ll.payload,mt=typeof Dr=="function"?Dr.call(Ul,ht,mt):Dr,mt==null)break e;ht=Td({},ht,mt);break e;case 2:Oo=!0}}mt=ee.callback,mt!==null&&(u.flags|=64,Wt&&(u.flags|=8192),Wt=R.callbacks,Wt===null?R.callbacks=[mt]:Wt.push(mt))}else Wt={lane:mt,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},nt===null?(He=nt=Wt,ye=ht):nt=nt.next=Wt,q|=mt;if(ee=ee.next,ee===null){if(ee=R.shared.pending,ee===null)break;Wt=ee,ee=Wt.next,Wt.next=null,R.lastBaseUpdate=Wt,R.shared.pending=null}}while(!0);nt===null&&(ye=ht),R.baseState=ye,R.firstBaseUpdate=He,R.lastBaseUpdate=nt,O===null&&(R.shared.lanes=0),Cr|=q,u.lanes=q,u.memoizedState=ht}}function ue(u,h){if(typeof u!="function")throw Error(s(191,u));u.call(h)}function ct(u,h){var x=u.callbacks;if(x!==null)for(u.callbacks=null,u=0;u<x.length;u++)ue(x[u],h)}function Oe(u,h){if(nr(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var x=Object.keys(u),E=Object.keys(h);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var R=x[E];if(!Xa.call(h,R)||!nr(u[R],h[R]))return!1}return!0}function ke(u){return u=u.status,u==="fulfilled"||u==="rejected"}function ft(){}function ut(u,h,x){switch(x=u[x],x===void 0?u.push(h):x!==h&&(h.then(ft,ft),h=x),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,u===Ou?Error(s(483)):u;default:if(typeof h.status=="string")h.then(ft,ft);else{if(u=Un,u!==null&&100<u.shellSuspendCounter)throw Error(s(482));u=h,u.status="pending",u.then(function(E){if(h.status==="pending"){var R=h;R.status="fulfilled",R.value=E}},function(E){if(h.status==="pending"){var R=h;R.status="rejected",R.reason=E}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,u===Ou?Error(s(483)):u}throw Ml=h,Ou}}function qt(){if(Ml===null)throw Error(s(459));var u=Ml;return Ml=null,u}function Pn(u){var h=wl;return wl+=1,Al===null&&(Al=[]),ut(Al,u,h)}function ai(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function gn(u,h){throw h.$$typeof===Eb?Error(s(525)):(u=Object.prototype.toString.call(h),Error(s(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function js(u){var h=u._init;return h(u._payload)}function Hi(u){function h(be,oe){if(u){var Re=be.deletions;Re===null?(be.deletions=[oe],be.flags|=16):Re.push(oe)}}function x(be,oe){if(!u)return null;for(;oe!==null;)h(be,oe),oe=oe.sibling;return null}function E(be){for(var oe=new Map;be!==null;)be.key!==null?oe.set(be.key,be):oe.set(be.index,be),be=be.sibling;return oe}function R(be,oe){return be=$r(be,oe),be.index=0,be.sibling=null,be}function O(be,oe,Re){return be.index=Re,u?(Re=be.alternate,Re!==null?(Re=Re.index,Re<oe?(be.flags|=33554434,oe):Re):(be.flags|=33554434,oe)):(be.flags|=1048576,oe)}function q(be){return u&&be.alternate===null&&(be.flags|=33554434),be}function ee(be,oe,Re,Qe){return oe===null||oe.tag!==6?(oe=Sd(Re,be.mode,Qe),oe.return=be,oe):(oe=R(oe,Re),oe.return=be,oe)}function ye(be,oe,Re,Qe){var Mt=Re.type;return Mt===yl?nt(be,oe,Re.props.children,Qe,Re.key):oe!==null&&(oe.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===qr&&js(Mt)===oe.type)?(oe=R(oe,Re.props),ai(oe,Re),oe.return=be,oe):(oe=Ha(Re.type,Re.key,Re.props,null,be.mode,Qe),ai(oe,Re),oe.return=be,oe)}function He(be,oe,Re,Qe){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==Re.containerInfo||oe.stateNode.implementation!==Re.implementation?(oe=Qm(Re,be.mode,Qe),oe.return=be,oe):(oe=R(oe,Re.children||[]),oe.return=be,oe)}function nt(be,oe,Re,Qe,Mt){return oe===null||oe.tag!==7?(oe=gi(Re,be.mode,Qe,Mt),oe.return=be,oe):(oe=R(oe,Re),oe.return=be,oe)}function ht(be,oe,Re){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return oe=Sd(""+oe,be.mode,Re),oe.return=be,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case jf:return Re=Ha(oe.type,oe.key,oe.props,null,be.mode,Re),ai(Re,oe),Re.return=be,Re;case Xr:return oe=Qm(oe,be.mode,Re),oe.return=be,oe;case qr:var Qe=oe._init;return oe=Qe(oe._payload),ht(be,oe,Re)}if(_u(oe)||r(oe))return oe=gi(oe,be.mode,Re,null),oe.return=be,oe;if(typeof oe.then=="function")return ht(be,Pn(oe),Re);if(oe.$$typeof===ga)return ht(be,Of(be,oe),Re);gn(be,oe)}return null}function mt(be,oe,Re,Qe){var Mt=oe!==null?oe.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return Mt!==null?null:ee(be,oe,""+Re,Qe);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case jf:return Re.key===Mt?ye(be,oe,Re,Qe):null;case Xr:return Re.key===Mt?He(be,oe,Re,Qe):null;case qr:return Mt=Re._init,Re=Mt(Re._payload),mt(be,oe,Re,Qe)}if(_u(Re)||r(Re))return Mt!==null?null:nt(be,oe,Re,Qe,null);if(typeof Re.then=="function")return mt(be,oe,Pn(Re),Qe);if(Re.$$typeof===ga)return mt(be,oe,Of(be,Re),Qe);gn(be,Re)}return null}function Wt(be,oe,Re,Qe,Mt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return be=be.get(Re)||null,ee(oe,be,""+Qe,Mt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case jf:return be=be.get(Qe.key===null?Re:Qe.key)||null,ye(oe,be,Qe,Mt);case Xr:return be=be.get(Qe.key===null?Re:Qe.key)||null,He(oe,be,Qe,Mt);case qr:var ri=Qe._init;return Qe=ri(Qe._payload),Wt(be,oe,Re,Qe,Mt)}if(_u(Qe)||r(Qe))return be=be.get(Re)||null,nt(oe,be,Qe,Mt,null);if(typeof Qe.then=="function")return Wt(be,oe,Re,Pn(Qe),Mt);if(Qe.$$typeof===ga)return Wt(be,oe,Re,Of(oe,Qe),Mt);gn(oe,Qe)}return null}function Dr(be,oe,Re,Qe){for(var Mt=null,ri=null,Ht=oe,Nn=oe=0,Ai=null;Ht!==null&&Nn<Re.length;Nn++){Ht.index>Nn?(Ai=Ht,Ht=null):Ai=Ht.sibling;var hn=mt(be,Ht,Re[Nn],Qe);if(hn===null){Ht===null&&(Ht=Ai);break}u&&Ht&&hn.alternate===null&&h(be,Ht),oe=O(hn,oe,Nn),ri===null?Mt=hn:ri.sibling=hn,ri=hn,Ht=Ai}if(Nn===Re.length)return x(be,Ht),En&&X(be,Nn),Mt;if(Ht===null){for(;Nn<Re.length;Nn++)Ht=ht(be,Re[Nn],Qe),Ht!==null&&(oe=O(Ht,oe,Nn),ri===null?Mt=Ht:ri.sibling=Ht,ri=Ht);return En&&X(be,Nn),Mt}for(Ht=E(Ht);Nn<Re.length;Nn++)Ai=Wt(Ht,be,Nn,Re[Nn],Qe),Ai!==null&&(u&&Ai.alternate!==null&&Ht.delete(Ai.key===null?Nn:Ai.key),oe=O(Ai,oe,Nn),ri===null?Mt=Ai:ri.sibling=Ai,ri=Ai);return u&&Ht.forEach(function(Ja){return h(be,Ja)}),En&&X(be,Nn),Mt}function Ll(be,oe,Re,Qe){if(Re==null)throw Error(s(151));for(var Mt=null,ri=null,Ht=oe,Nn=oe=0,Ai=null,hn=Re.next();Ht!==null&&!hn.done;Nn++,hn=Re.next()){Ht.index>Nn?(Ai=Ht,Ht=null):Ai=Ht.sibling;var Ja=mt(be,Ht,hn.value,Qe);if(Ja===null){Ht===null&&(Ht=Ai);break}u&&Ht&&Ja.alternate===null&&h(be,Ht),oe=O(Ja,oe,Nn),ri===null?Mt=Ja:ri.sibling=Ja,ri=Ja,Ht=Ai}if(hn.done)return x(be,Ht),En&&X(be,Nn),Mt;if(Ht===null){for(;!hn.done;Nn++,hn=Re.next())hn=ht(be,hn.value,Qe),hn!==null&&(oe=O(hn,oe,Nn),ri===null?Mt=hn:ri.sibling=hn,ri=hn);return En&&X(be,Nn),Mt}for(Ht=E(Ht);!hn.done;Nn++,hn=Re.next())hn=Wt(Ht,be,Nn,hn.value,Qe),hn!==null&&(u&&hn.alternate!==null&&Ht.delete(hn.key===null?Nn:hn.key),oe=O(hn,oe,Nn),ri===null?Mt=hn:ri.sibling=hn,ri=hn);return u&&Ht.forEach(function(Qd){return h(be,Qd)}),En&&X(be,Nn),Mt}function Ul(be,oe,Re,Qe){if(typeof Re=="object"&&Re!==null&&Re.type===yl&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case jf:e:{for(var Mt=Re.key;oe!==null;){if(oe.key===Mt){if(Mt=Re.type,Mt===yl){if(oe.tag===7){x(be,oe.sibling),Qe=R(oe,Re.props.children),Qe.return=be,be=Qe;break e}}else if(oe.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===qr&&js(Mt)===oe.type){x(be,oe.sibling),Qe=R(oe,Re.props),ai(Qe,Re),Qe.return=be,be=Qe;break e}x(be,oe);break}else h(be,oe);oe=oe.sibling}Re.type===yl?(Qe=gi(Re.props.children,be.mode,Qe,Re.key),Qe.return=be,be=Qe):(Qe=Ha(Re.type,Re.key,Re.props,null,be.mode,Qe),ai(Qe,Re),Qe.return=be,be=Qe)}return q(be);case Xr:e:{for(Mt=Re.key;oe!==null;){if(oe.key===Mt)if(oe.tag===4&&oe.stateNode.containerInfo===Re.containerInfo&&oe.stateNode.implementation===Re.implementation){x(be,oe.sibling),Qe=R(oe,Re.children||[]),Qe.return=be,be=Qe;break e}else{x(be,oe);break}else h(be,oe);oe=oe.sibling}Qe=Qm(Re,be.mode,Qe),Qe.return=be,be=Qe}return q(be);case qr:return Mt=Re._init,Re=Mt(Re._payload),Ul(be,oe,Re,Qe)}if(_u(Re))return Dr(be,oe,Re,Qe);if(r(Re)){if(Mt=r(Re),typeof Mt!="function")throw Error(s(150));return Re=Mt.call(Re),Ll(be,oe,Re,Qe)}if(typeof Re.then=="function")return Ul(be,oe,Pn(Re),Qe);if(Re.$$typeof===ga)return Ul(be,oe,Of(be,Re),Qe);gn(be,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint"?(Re=""+Re,oe!==null&&oe.tag===6?(x(be,oe.sibling),Qe=R(oe,Re),Qe.return=be,be=Qe):(x(be,oe),Qe=Sd(Re,be.mode,Qe),Qe.return=be,be=Qe),q(be)):x(be,oe)}return function(be,oe,Re,Qe){try{wl=0;var Mt=Ul(be,oe,Re,Qe);return Al=null,Mt}catch(Ht){if(Ht===Ou)throw Ht;var ri=t(29,Ht,null,be.mode);return ri.lanes=Qe,ri.return=be,ri}finally{}}}function Di(u,h){u=Ns,C(Lu,u),C(Jn,h),Ns=u|h.baseLanes}function Vi(){C(Lu,Ns),C(Jn,Jn.current)}function As(){Ns=Lu.current,T(Jn),T(Lu)}function Ys(u){var h=u.alternate;C($i,$i.current&1),C(Tr,u),qn===null&&(h===null||Jn.current!==null||h.memoizedState!==null)&&(qn=u)}function _f(u){if(u.tag===22){if(C($i,$i.current),C(Tr,u),qn===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&(qn=u)}}else ca()}function ca(){C($i,$i.current),C(Tr,Tr.current)}function Us(u){T(Tr),qn===u&&(qn=null),T($i)}function ua(u){for(var h=u;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Ld(x)||Ud(x)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function Vn(){throw Error(s(321))}function fa(u,h){if(h===null)return!1;for(var x=0;x<h.length&&x<u.length;x++)if(!nr(u[x],h[x]))return!1;return!0}function ha(u,h,x,E,R,O){return Lo=O,nn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Ft.H=u===null||u.memoizedState===null?Nl:Gs,Cl=!1,O=x(E,R),Cl=!1,pc&&(O=fo(h,x,E,R)),tl(u),O}function tl(u){Ft.H=yi;var h=Lt!==null&&Lt.next!==null;if(Lo=0,An=Lt=nn=null,Kr=!1,mc=0,ns=null,h)throw Error(s(300));u===null||jn||(u=u.dependencies,u!==null&&Df(u)&&(jn=!0))}function fo(u,h,x,E){nn=u;var R=0;do{if(pc&&(ns=null),mc=0,pc=!1,25<=R)throw Error(s(301));if(R+=1,An=Lt=null,u.updateQueue!=null){var O=u.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Ft.H=Mr,O=h(x,E)}while(pc);return O}function Oi(){var u=Ft.H,h=u.useState()[0];return h=typeof h.then=="function"?Te(h):h,u=u.useState()[0],(Lt!==null?Lt.memoizedState:null)!==u&&(nn.flags|=1024),h}function Qc(){var u=$d!==0;return $d=0,u}function Jc(u,h,x){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~x}function da(u){if(Kr){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}Kr=!1}Lo=0,An=Lt=nn=null,pc=!1,mc=$d=0,ns=null}function $(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?nn.memoizedState=An=u:An=An.next=u,An}function ce(){if(Lt===null){var u=nn.alternate;u=u!==null?u.memoizedState:null}else u=Lt.next;var h=An===null?nn.memoizedState:An.next;if(h!==null)An=h,Lt=u;else{if(u===null)throw nn.alternate===null?Error(s(467)):Error(s(310));Lt=u,u={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},An===null?nn.memoizedState=An=u:An=An.next=u}return An}function Te(u){var h=mc;return mc+=1,ns===null&&(ns=[]),u=ut(ns,u,h),h=nn,(An===null?h.memoizedState:An.next)===null&&(h=h.alternate,Ft.H=h===null||h.memoizedState===null?Nl:Gs),u}function Ae(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Te(u);if(u.$$typeof===ga)return hs(u)}throw Error(s(438,String(u)))}function ge(u){var h=null,x=nn.updateQueue;if(x!==null&&(h=x.memoCache),h==null){var E=nn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(h={data:E.data.map(function(R){return R.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),x===null&&(x=Xd(),nn.updateQueue=x),x.memoCache=h,x=h.data[h.index],x===void 0)for(x=h.data[h.index]=Array(u),E=0;E<u;E++)x[E]=ky;return h.index++,x}function je(u,h){return typeof h=="function"?h(u):h}function rt(u){var h=ce();return ot(h,Lt,u)}function ot(u,h,x){var E=u.queue;if(E===null)throw Error(s(311));E.lastRenderedReducer=x;var R=u.baseQueue,O=E.pending;if(O!==null){if(R!==null){var q=R.next;R.next=O.next,O.next=q}h.baseQueue=R=O,E.pending=null}if(O=u.baseState,R===null)u.memoizedState=O;else{h=R.next;var ee=q=null,ye=null,He=h,nt=!1;do{var ht=He.lane&-536870913;if(ht!==He.lane?(pn&ht)===ht:(Lo&ht)===ht){var mt=He.revertLane;if(mt===0)ye!==null&&(ye=ye.next={lane:0,revertLane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),ht===Er&&(nt=!0);else if((Lo&mt)===mt){He=He.next,mt===Er&&(nt=!0);continue}else ht={lane:0,revertLane:He.revertLane,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null},ye===null?(ee=ye=ht,q=O):ye=ye.next=ht,nn.lanes|=mt,Cr|=mt;ht=He.action,Cl&&x(O,ht),O=He.hasEagerState?He.eagerState:x(O,ht)}else mt={lane:ht,revertLane:He.revertLane,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null},ye===null?(ee=ye=mt,q=O):ye=ye.next=mt,nn.lanes|=ht,Cr|=ht;He=He.next}while(He!==null&&He!==h);if(ye===null?q=O:ye.next=ee,!nr(O,u.memoizedState)&&(jn=!0,nt&&(x=hc,x!==null)))throw x;u.memoizedState=O,u.baseState=q,u.baseQueue=ye,E.lastRenderedState=O}return R===null&&(E.lanes=0),[u.memoizedState,E.dispatch]}function gt(u){var h=ce(),x=h.queue;if(x===null)throw Error(s(311));x.lastRenderedReducer=u;var E=x.dispatch,R=x.pending,O=h.memoizedState;if(R!==null){x.pending=null;var q=R=R.next;do O=u(O,q.action),q=q.next;while(q!==R);nr(O,h.memoizedState)||(jn=!0),h.memoizedState=O,h.baseQueue===null&&(h.baseState=O),x.lastRenderedState=O}return[O,E]}function Pt(u,h,x){var E=nn,R=ce(),O=En;if(O){if(x===void 0)throw Error(s(407));x=x()}else x=h();var q=!nr((Lt||R).memoizedState,x);if(q&&(R.memoizedState=x,jn=!0),R=R.queue,Em(cn.bind(null,E,R,u),[u]),R.getSnapshot!==h||q||An!==null&&An.memoizedState.tag&1){if(E.flags|=2048,zs(9,Et.bind(null,E,R,x,h),{destroy:void 0},null),Un===null)throw Error(s(349));O||(Lo&60)!==0||Rt(E,h,x)}return x}function Rt(u,h,x){u.flags|=16384,u={getSnapshot:h,value:x},h=nn.updateQueue,h===null?(h=Xd(),nn.updateQueue=h,h.stores=[u]):(x=h.stores,x===null?h.stores=[u]:x.push(u))}function Et(u,h,x,E){h.value=x,h.getSnapshot=E,Mn(h)&&oi(u)}function cn(u,h,x){return x(function(){Mn(h)&&oi(u)})}function Mn(u){var h=u.getSnapshot;u=u.value;try{var x=h();return!nr(u,x)}catch{return!0}}function oi(u){var h=Pe(u,2);h!==null&&Ji(h,u,2)}function fn(u){var h=$();if(typeof u=="function"){var x=u;if(u=x(),Cl){W(!0);try{x()}finally{W(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:je,lastRenderedState:u},h}function dn(u,h,x,E){return u.baseState=x,ot(u,Lt,typeof E=="function"?E:je)}function Dt(u,h,x,E,R){if(Af(u))throw Error(s(485));if(u=h.action,u!==null){var O={payload:R,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){O.listeners.push(q)}};Ft.T!==null?x(!0):O.isTransition=!1,E(O),x=h.pending,x===null?(O.next=h.pending=O,hi(h,O)):(O.next=x.next,h.pending=x.next=O)}}function hi(u,h){var x=h.action,E=h.payload,R=u.state;if(h.isTransition){var O=Ft.T,q={};Ft.T=q;try{var ee=x(R,E),ye=Ft.S;ye!==null&&ye(q,ee),Sn(u,h,ee)}catch(He){Ua(u,h,He)}finally{Ft.T=O}}else try{O=x(R,E),Sn(u,h,O)}catch(He){Ua(u,h,He)}}function Sn(u,h,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(E){cs(u,h,E)},function(E){return Ua(u,h,E)}):cs(u,h,x)}function cs(u,h,x){h.status="fulfilled",h.value=x,$n(h),u.state=x,h=u.pending,h!==null&&(x=h.next,x===h?u.pending=null:(x=x.next,h.next=x,hi(u,x)))}function Ua(u,h,x){var E=u.pending;if(u.pending=null,E!==null){E=E.next;do h.status="rejected",h.reason=x,$n(h),h=h.next;while(h!==E)}u.action=null}function $n(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function za(u,h){return h}function Gn(u,h){if(En){var x=Un.formState;if(x!==null){e:{var E=nn;if(En){if(vs){var R=mg(vs,ts);if(R){vs=gg(R),E=fv(R);break e}}Ke(E)}E=!1}E&&(h=x[0])}}x=$(),x.memoizedState=x.baseState=h,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:h},x.queue=E,x=wm.bind(null,nn,E),E.dispatch=x,E=fn(!1);var O=nu.bind(null,nn,!1,E.queue);return E=$(),R={state:h,dispatch:null,action:u,pending:null},E.queue=R,x=Dt.bind(null,nn,R,O,x),R.dispatch=x,E.memoizedState=u,[h,x,!1]}function us(u){var h=ce();return Li(h,Lt,u)}function Li(u,h,x){h=ot(u,h,za)[0],u=rt(je)[0],h=typeof h=="object"&&h!==null&&typeof h.then=="function"?Te(h):h;var E=ce(),R=E.queue,O=R.dispatch;return x!==E.memoizedState&&(nn.flags|=2048,zs(9,Zi.bind(null,R,x),{destroy:void 0},null)),[h,O,u]}function Zi(u,h){u.action=h}function Ki(u){var h=ce(),x=Lt;if(x!==null)return Li(h,x,u);ce(),h=h.memoizedState,x=ce();var E=x.queue.dispatch;return x.memoizedState=u,[h,E,!1]}function zs(u,h,x,E){return u={tag:u,create:h,inst:x,deps:E,next:null},h=nn.updateQueue,h===null&&(h=Xd(),nn.updateQueue=h),x=h.lastEffect,x===null?h.lastEffect=u.next=u:(E=x.next,x.next=u,u.next=E,h.lastEffect=u),u}function Pa(){return ce().memoizedState}function bf(u,h,x,E){var R=$();nn.flags|=u,R.memoizedState=zs(1|h,x,{destroy:void 0},E===void 0?null:E)}function Sf(u,h,x,E){var R=ce();E=E===void 0?null:E;var O=R.memoizedState.inst;Lt!==null&&E!==null&&fa(E,Lt.memoizedState.deps)?R.memoizedState=zs(h,x,O,E):(nn.flags|=u,R.memoizedState=zs(1|h,x,O,E))}function nd(u,h){bf(8390656,8,u,h)}function Em(u,h){Sf(2048,8,u,h)}function by(u,h){return Sf(4,2,u,h)}function Ef(u,h){return Sf(4,4,u,h)}function id(u,h){if(typeof h=="function"){u=u();var x=h(u);return function(){typeof x=="function"?x():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function sd(u,h,x){x=x!=null?x.concat([u]):null,Sf(4,4,id.bind(null,h,u),x)}function nl(){}function Kl(u,h){var x=ce();h=h===void 0?null:h;var E=x.memoizedState;return h!==null&&fa(h,E[1])?E[0]:(x.memoizedState=[u,h],u)}function Tm(u,h){var x=ce();h=h===void 0?null:h;var E=x.memoizedState;if(h!==null&&fa(h,E[1]))return E[0];if(E=u(),Cl){W(!0);try{u()}finally{W(!1)}}return x.memoizedState=[E,h],E}function Tf(u,h,x){return x===void 0||(Lo&1073741824)!==0?u.memoizedState=h:(u.memoizedState=x,u=qm(),nn.lanes|=u,Cr|=u,x)}function Mm(u,h,x,E){return nr(x,h)?x:Jn.current!==null?(u=Tf(u,x,E),nr(u,h)||(jn=!0),u):(Lo&42)===0?(jn=!0,u.memoizedState=x):(u=qm(),nn.lanes|=u,Cr|=u,h)}function eu(u,h,x,E,R){var O=Ro();Rs(O!==0&&8>O?O:8);var q=Ft.T,ee={};Ft.T=ee,nu(u,!1,h,x);try{var ye=R(),He=Ft.S;if(He!==null&&He(ee,ye),ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var nt=Zt(ye,E);il(u,h,nt,Si(u))}else il(u,h,E,Si(u))}catch(ht){il(u,h,{then:function(){},status:"rejected",reason:ht},Si())}finally{Rs(O),Ft.T=q}}function Ia(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:xl,baseState:xl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:je,lastRenderedState:xl},next:null};var x={};return h.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:je,lastRenderedState:x},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function Mf(){return hs(ya)}function tu(){return ce().memoizedState}function ho(){return ce().memoizedState}function Am(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var x=Si();u=yt(x);var E=vt(h,u,x);E!==null&&(Ji(E,h,x),st(E,h,x)),h={cache:ol()},u.payload=h;return}h=h.return}}function rd(u,h,x){var E=Si();x={lane:E,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Af(u)?Ps(h,x):(x=Fe(u,h,x,E),x!==null&&(Ji(x,u,E),sl(x,h,E)))}function wm(u,h,x){var E=Si();il(u,h,x,E)}function il(u,h,x,E){var R={lane:E,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Af(u))Ps(h,R);else{var O=u.alternate;if(u.lanes===0&&(O===null||O.lanes===0)&&(O=h.lastRenderedReducer,O!==null))try{var q=h.lastRenderedState,ee=O(q,x);if(R.hasEagerState=!0,R.eagerState=ee,nr(ee,q))return _n(u,h,R,0),Un===null&&te(),!1}catch{}finally{}if(x=Fe(u,h,R,E),x!==null)return Ji(x,u,E),sl(x,h,E),!0}return!1}function nu(u,h,x,E){if(E={lane:2,revertLane:et(),action:E,hasEagerState:!1,eagerState:null,next:null},Af(u)){if(h)throw Error(s(479))}else h=Fe(u,x,E,2),h!==null&&Ji(h,u,2)}function Af(u){var h=u.alternate;return u===nn||h!==null&&h===nn}function Ps(u,h){pc=Kr=!0;var x=u.pending;x===null?h.next=h:(h.next=x.next,x.next=h),u.pending=h}function sl(u,h,x){if((x&4194176)!==0){var E=h.lanes;E&=u.pendingLanes,x|=E,h.lanes=x,de(u,x)}}function iu(u,h,x,E){h=u.memoizedState,x=x(E,h),x=x==null?h:Td({},h,x),u.memoizedState=x,u.lanes===0&&(u.updateQueue.baseState=x)}function su(u,h,x,E,R,O,q){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(E,O,q):h.prototype&&h.prototype.isPureReactComponent?!Oe(x,E)||!Oe(R,O):!0}function Sy(u,h,x,E){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,E),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,E),h.state!==u&&ja.enqueueReplaceState(h,h.state,null)}function po(u,h){var x=h;if("ref"in h){x={};for(var E in h)E!=="ref"&&(x[E]=h[E])}if(u=u.defaultProps){x===h&&(x=Td({},x));for(var R in u)x[R]===void 0&&(x[R]=u[R])}return x}function ru(u,h){try{var x=u.onUncaughtError;x(h.value,{componentStack:h.stack})}catch(E){setTimeout(function(){throw E})}}function au(u,h,x){try{var E=u.onCaughtError;E(x.value,{componentStack:x.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function ou(u,h,x){return x=yt(x),x.tag=3,x.payload={element:null},x.callback=function(){ru(u,h)},x}function Rm(u){return u=yt(u),u.tag=3,u}function Ey(u,h,x,E){var R=x.type.getDerivedStateFromError;if(typeof R=="function"){var O=E.value;u.payload=function(){return R(O)},u.callback=function(){au(h,x,E)}}var q=x.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(u.callback=function(){au(h,x,E),typeof R!="function"&&(Dl===null?Dl=new Set([this]):Dl.add(this));var ee=E.stack;this.componentDidCatch(E.value,{componentStack:ee!==null?ee:""})})}function xb(u,h,x,E,R){if(x.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(h=x.alternate,h!==null&&Nf(h,x,R,!0),x=Tr.current,x!==null){switch(x.tag){case 13:return qn===null?So():x.alternate===null&&Yn===0&&(Yn=3),x.flags&=-257,x.flags|=65536,x.lanes=R,E===lh?x.flags|=16384:(h=x.updateQueue,h===null?x.updateQueue=new Set([E]):h.add(E),ec(u,E,R)),!1;case 22:return x.flags|=65536,E===lh?x.flags|=16384:(h=x.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([E])},x.updateQueue=h):(x=h.retryQueue,x===null?h.retryQueue=new Set([E]):x.add(E)),ec(u,E,R)),!1}throw Error(s(435,x.tag))}return ec(u,E,R),So(),!1}if(En)return h=Tr.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=R,E!==rh&&(u=Error(s(422),{cause:E}),Nt(fe(u,x)))):(E!==rh&&(h=Error(s(423),{cause:E}),Nt(fe(h,x))),u=u.current.alternate,u.flags|=65536,R&=-R,u.lanes|=R,E=fe(E,x),R=ou(u.stateNode,E,R),Xt(u,R),Yn!==4&&(Yn=2)),!1;var O=Error(s(520),{cause:E});if(O=fe(O,x),yc===null?yc=[O]:yc.push(O),Yn!==4&&(Yn=2),h===null)return!0;E=fe(E,x),x=h;do{switch(x.tag){case 3:return x.flags|=65536,u=R&-R,x.lanes|=u,u=ou(x.stateNode,E,u),Xt(x,u),!1;case 1:if(h=x.type,O=x.stateNode,(x.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Dl===null||!Dl.has(O))))return x.flags|=65536,R&=-R,x.lanes|=R,R=Rm(R),Ey(R,u,x,E),Xt(x,R),!1}x=x.return}while(x!==null);return!1}function fs(u,h,x,E){h.child=u===null?qa(h,null,x,E):Rl(h,u.child,x,E)}function ad(u,h,x,E,R){x=x.render;var O=h.ref;if("ref"in E){var q={};for(var ee in E)ee!=="ref"&&(q[ee]=E[ee])}else q=E;return al(h),E=ha(u,h,x,q,O,R),ee=Qc(),u!==null&&!jn?(Jc(u,h,R),mo(u,h,R)):(En&&ee&&Ee(h),h.flags|=1,fs(u,h,E,R),h.child)}function Ty(u,h,x,E,R){if(u===null){var O=x.type;return typeof O=="function"&&!kf(O)&&O.defaultProps===void 0&&x.compare===null?(h.tag=15,h.type=O,My(u,h,O,E,R)):(u=Ha(x.type,null,E,h,h.mode,R),u.ref=h.ref,u.return=h,h.child=u)}if(O=u.child,!Lm(u,R)){var q=O.memoizedProps;if(x=x.compare,x=x!==null?x:Oe,x(q,E)&&u.ref===h.ref)return mo(u,h,R)}return h.flags|=1,u=$r(O,E),u.ref=h.ref,u.return=h,h.child=u}function My(u,h,x,E,R){if(u!==null){var O=u.memoizedProps;if(Oe(O,E)&&u.ref===h.ref)if(jn=!1,h.pendingProps=E=O,Lm(u,R))(u.flags&131072)!==0&&(jn=!0);else return h.lanes=u.lanes,mo(u,h,R)}return od(u,h,x,E,R)}function Ay(u,h,x){var E=h.pendingProps,R=E.children,O=(h.stateNode._pendingVisibility&2)!==0,q=u!==null?u.memoizedState:null;if(wf(u,h),E.mode==="hidden"||O){if((h.flags&128)!==0){if(E=q!==null?q.baseLanes|x:x,u!==null){for(R=h.child=u.child,O=0;R!==null;)O=O|R.lanes|R.childLanes,R=R.sibling;h.childLanes=O&~E}else h.childLanes=0,h.child=null;return wy(u,h,E,x)}if((x&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&cd(h,q!==null?q.cachePool:null),q!==null?Di(h,q):Vi(),_f(h);else return h.lanes=h.childLanes=536870912,wy(u,h,q!==null?q.baseLanes|x:x,x)}else q!==null?(cd(h,q.cachePool),Di(h,q),ca(),h.memoizedState=null):(u!==null&&cd(h,null),Vi(),ca());return fs(u,h,R,x),h.child}function wy(u,h,x,E){var R=zm();return R=R===null?null:{parent:Fs?ei._currentValue:ei._currentValue2,pool:R},h.memoizedState={baseLanes:x,cachePool:R},u!==null&&cd(h,null),Vi(),_f(h),u!==null&&Nf(u,h,E,!0),null}function wf(u,h){var x=h.ref;if(x===null)u!==null&&u.ref!==null&&(h.flags|=2097664);else{if(typeof x!="function"&&typeof x!="object")throw Error(s(284));(u===null||u.ref!==x)&&(h.flags|=2097664)}}function od(u,h,x,E,R){return al(h),x=ha(u,h,x,E,void 0,R),E=Qc(),u!==null&&!jn?(Jc(u,h,R),mo(u,h,R)):(En&&E&&Ee(h),h.flags|=1,fs(u,h,x,R),h.child)}function Ry(u,h,x,E,R,O){return al(h),h.updateQueue=null,x=fo(h,E,x,R),tl(u),E=Qc(),u!==null&&!jn?(Jc(u,h,O),mo(u,h,O)):(En&&E&&Ee(h),h.flags|=1,fs(u,h,x,O),h.child)}function Cy(u,h,x,E,R){if(al(h),h.stateNode===null){var O=El,q=x.contextType;typeof q=="object"&&q!==null&&(O=hs(q)),O=new x(E,O),h.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=ja,h.stateNode=O,O._reactInternals=h,O=h.stateNode,O.props=E,O.state=h.memoizedState,O.refs={},Ye(h),q=x.contextType,O.context=typeof q=="object"&&q!==null?hs(q):El,O.state=h.memoizedState,q=x.getDerivedStateFromProps,typeof q=="function"&&(iu(h,x,q,E),O.state=h.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(q=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),q!==O.state&&ja.enqueueReplaceState(O,O.state,null),bn(h,E,O,R),wt(),O.state=h.memoizedState),typeof O.componentDidMount=="function"&&(h.flags|=4194308),E=!0}else if(u===null){O=h.stateNode;var ee=h.memoizedProps,ye=po(x,ee);O.props=ye;var He=O.context,nt=x.contextType;q=El,typeof nt=="object"&&nt!==null&&(q=hs(nt));var ht=x.getDerivedStateFromProps;nt=typeof ht=="function"||typeof O.getSnapshotBeforeUpdate=="function",ee=h.pendingProps!==ee,nt||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(ee||He!==q)&&Sy(h,O,E,q),Oo=!1;var mt=h.memoizedState;O.state=mt,bn(h,E,O,R),wt(),He=h.memoizedState,ee||mt!==He||Oo?(typeof ht=="function"&&(iu(h,x,ht,E),He=h.memoizedState),(ye=Oo||su(h,x,ye,E,mt,He,q))?(nt||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(h.flags|=4194308)):(typeof O.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=E,h.memoizedState=He),O.props=E,O.state=He,O.context=q,E=ye):(typeof O.componentDidMount=="function"&&(h.flags|=4194308),E=!1)}else{O=h.stateNode,pt(u,h),q=h.memoizedProps,nt=po(x,q),O.props=nt,ht=h.pendingProps,mt=O.context,He=x.contextType,ye=El,typeof He=="object"&&He!==null&&(ye=hs(He)),ee=x.getDerivedStateFromProps,(He=typeof ee=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(q!==ht||mt!==ye)&&Sy(h,O,E,ye),Oo=!1,mt=h.memoizedState,O.state=mt,bn(h,E,O,R),wt();var Wt=h.memoizedState;q!==ht||mt!==Wt||Oo||u!==null&&u.dependencies!==null&&Df(u.dependencies)?(typeof ee=="function"&&(iu(h,x,ee,E),Wt=h.memoizedState),(nt=Oo||su(h,x,nt,E,mt,Wt,ye)||u!==null&&u.dependencies!==null&&Df(u.dependencies))?(He||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(E,Wt,ye),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(E,Wt,ye)),typeof O.componentDidUpdate=="function"&&(h.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof O.componentDidUpdate!="function"||q===u.memoizedProps&&mt===u.memoizedState||(h.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||q===u.memoizedProps&&mt===u.memoizedState||(h.flags|=1024),h.memoizedProps=E,h.memoizedState=Wt),O.props=E,O.state=Wt,O.context=ye,E=nt):(typeof O.componentDidUpdate!="function"||q===u.memoizedProps&&mt===u.memoizedState||(h.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||q===u.memoizedProps&&mt===u.memoizedState||(h.flags|=1024),E=!1)}return O=E,wf(u,h),E=(h.flags&128)!==0,O||E?(O=h.stateNode,x=E&&typeof x.getDerivedStateFromError!="function"?null:O.render(),h.flags|=1,u!==null&&E?(h.child=Rl(h,u.child,null,R),h.child=Rl(h,null,x,R)):fs(u,h,x,R),h.memoizedState=O.state,u=h.child):u=mo(u,h,R),u}function Ny(u,h,x,E){return jt(),h.flags|=256,fs(u,h,x,E),h.child}function Cm(u){return{baseLanes:u,cachePool:Pm()}}function Rf(u,h,x){return u=u!==null?u.childLanes&~x:0,h&&(u|=Nr),u}function Dy(u,h,x){var E=h.pendingProps,R=!1,O=(h.flags&128)!==0,q;if((q=O)||(q=u!==null&&u.memoizedState===null?!1:($i.current&2)!==0),q&&(R=!0,h.flags&=-129),q=(h.flags&32)!==0,h.flags&=-33,u===null){if(En){if(R?Ys(h):ca(),En){var ee=vs,ye;(ye=ee)&&(ee=pv(ee,ts),ee!==null?(h.memoizedState={dehydrated:ee,treeContext:Tl!==null?{id:xa,overflow:_a}:null,retryLane:536870912},ye=t(18,null,null,0),ye.stateNode=ee,ye.return=h,h.child=ye,ys=h,vs=null,ye=!0):ye=!1),ye||Ke(h)}if(ee=h.memoizedState,ee!==null&&(ee=ee.dehydrated,ee!==null))return Ud(ee)?h.lanes=16:h.lanes=536870912,null;Us(h)}return ee=E.children,E=E.fallback,R?(ca(),R=h.mode,ee=Dm({mode:"hidden",children:ee},R),E=gi(E,R,x,null),ee.return=h,E.return=h,ee.sibling=E,h.child=ee,R=h.child,R.memoizedState=Cm(x),R.childLanes=Rf(u,q,x),h.memoizedState=Yd,E):(Ys(h),Nm(h,ee))}if(ye=u.memoizedState,ye!==null&&(ee=ye.dehydrated,ee!==null)){if(O)h.flags&256?(Ys(h),h.flags&=-257,h=ld(u,h,x)):h.memoizedState!==null?(ca(),h.child=u.child,h.flags|=128,h=null):(ca(),R=E.fallback,ee=h.mode,E=Dm({mode:"visible",children:E.children},ee),R=gi(R,ee,x,null),R.flags|=2,E.return=h,R.return=h,E.sibling=R,h.child=E,Rl(h,u.child,null,x),E=h.child,E.memoizedState=Cm(x),E.childLanes=Rf(u,q,x),h.memoizedState=Yd,h=R);else if(Ys(h),Ud(ee))q=cv(ee).digest,E=Error(s(419)),E.stack="",E.digest=q,Nt({value:E,source:null,stack:null}),h=ld(u,h,x);else if(jn||Nf(u,h,x,!1),q=(x&u.childLanes)!==0,jn||q){if(q=Un,q!==null){if(E=x&-x,(E&42)!==0)E=1;else switch(E){case 2:E=1;break;case 8:E=4;break;case 32:E=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:E=64;break;case 268435456:E=134217728;break;default:E=0}if(E=(E&(q.suspendedLanes|x))!==0?0:E,E!==0&&E!==ye.retryLane)throw ye.retryLane=E,Pe(u,E),Ji(q,u,E),jd}Ld(ee)||So(),h=ld(u,h,x)}else Ld(ee)?(h.flags|=128,h.child=u.child,h=Eo.bind(null,u),uv(ee,h),h=null):(u=ye.treeContext,gs&&(vs=dv(ee),ys=h,En=!0,Wr=null,ts=!1,u!==null&&(br[Sr++]=xa,br[Sr++]=_a,br[Sr++]=Tl,xa=u.id,_a=u.overflow,Tl=h)),h=Nm(h,E.children),h.flags|=4096);return h}return R?(ca(),R=E.fallback,ee=h.mode,ye=u.child,O=ye.sibling,E=$r(ye,{mode:"hidden",children:E.children}),E.subtreeFlags=ye.subtreeFlags&31457280,O!==null?R=$r(O,R):(R=gi(R,ee,x,null),R.flags|=2),R.return=h,E.return=h,E.sibling=R,h.child=E,E=R,R=h.child,ee=u.child.memoizedState,ee===null?ee=Cm(x):(ye=ee.cachePool,ye!==null?(O=Fs?ei._currentValue:ei._currentValue2,ye=ye.parent!==O?{parent:O,pool:O}:ye):ye=Pm(),ee={baseLanes:ee.baseLanes|x,cachePool:ye}),R.memoizedState=ee,R.childLanes=Rf(u,q,x),h.memoizedState=Yd,E):(Ys(h),x=u.child,u=x.sibling,x=$r(x,{mode:"visible",children:E.children}),x.return=h,x.sibling=null,u!==null&&(q=h.deletions,q===null?(h.deletions=[u],h.flags|=16):q.push(u)),h.child=x,h.memoizedState=null,x)}function Nm(u,h){return h=Dm({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function Dm(u,h){return Xf(u,h,0,null)}function ld(u,h,x){return Rl(h,u.child,null,x),u=Nm(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function Oy(u,h,x){u.lanes|=h;var E=u.alternate;E!==null&&(E.lanes|=h),Cf(u.return,h,x)}function Om(u,h,x,E,R){var O=u.memoizedState;O===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:R}:(O.isBackwards=h,O.rendering=null,O.renderingStartTime=0,O.last=E,O.tail=x,O.tailMode=R)}function Ly(u,h,x){var E=h.pendingProps,R=E.revealOrder,O=E.tail;if(fs(u,h,E.children,x),E=$i.current,(E&2)!==0)E=E&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&Oy(u,x,h);else if(u.tag===19)Oy(u,x,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}E&=1}switch(C($i,E),R){case"forwards":for(x=h.child,R=null;x!==null;)u=x.alternate,u!==null&&ua(u)===null&&(R=x),x=x.sibling;x=R,x===null?(R=h.child,h.child=null):(R=x.sibling,x.sibling=null),Om(h,!1,R,x,O);break;case"backwards":for(x=null,R=h.child,h.child=null;R!==null;){if(u=R.alternate,u!==null&&ua(u)===null){h.child=R;break}u=R.sibling,R.sibling=x,x=R,R=u}Om(h,!0,x,null,O);break;case"together":Om(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function mo(u,h,x){if(u!==null&&(h.dependencies=u.dependencies),Cr|=h.lanes,(x&h.childLanes)===0)if(u!==null){if(Nf(u,h,x,!1),(x&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(s(153));if(h.child!==null){for(u=h.child,x=$r(u,u.pendingProps),h.child=x,x.return=h;u.sibling!==null;)u=u.sibling,x=x.sibling=$r(u,u.pendingProps),x.return=h;x.sibling=null}return h.child}function Lm(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&Df(u)))}function _b(u,h,x){switch(h.tag){case 3:re(h,h.stateNode.containerInfo),rl(h,ei,u.memoizedState.cache),jt();break;case 27:case 5:Be(h);break;case 4:re(h,h.stateNode.containerInfo);break;case 10:rl(h,h.type,h.memoizedProps.value);break;case 13:var E=h.memoizedState;if(E!==null)return E.dehydrated!==null?(Ys(h),h.flags|=128,null):(x&h.child.childLanes)!==0?Dy(u,h,x):(Ys(h),u=mo(u,h,x),u!==null?u.sibling:null);Ys(h);break;case 19:var R=(u.flags&128)!==0;if(E=(x&h.childLanes)!==0,E||(Nf(u,h,x,!1),E=(x&h.childLanes)!==0),R){if(E)return Ly(u,h,x);h.flags|=128}if(R=h.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),C($i,$i.current),E)break;return null;case 22:case 23:return h.lanes=0,Ay(u,h,x);case 24:rl(h,ei,u.memoizedState.cache)}return mo(u,h,x)}function Uy(u,h,x){if(u!==null)if(u.memoizedProps!==h.pendingProps)jn=!0;else{if(!Lm(u,x)&&(h.flags&128)===0)return jn=!1,_b(u,h,x);jn=(u.flags&131072)!==0}else jn=!1,En&&(h.flags&1048576)!==0&&ie(h,Ru,h.index);switch(h.lanes=0,h.tag){case 16:e:{u=h.pendingProps;var E=h.elementType,R=E._init;if(E=R(E._payload),h.type=E,typeof E=="function")kf(E)?(u=po(E,u),h.tag=1,h=Cy(null,h,E,u,x)):(h.tag=0,h=od(null,h,E,u,x));else{if(E!=null){if(R=E.$$typeof,R===Zf){h.tag=11,h=ad(null,h,E,u,x);break e}else if(R===wd){h.tag=14,h=Ty(null,h,E,u,x);break e}}throw h=o(E)||E,Error(s(306,h,""))}}return h;case 0:return od(u,h,h.type,h.pendingProps,x);case 1:return E=h.type,R=po(E,h.pendingProps),Cy(u,h,E,R,x);case 3:e:{if(re(h,h.stateNode.containerInfo),u===null)throw Error(s(387));var O=h.pendingProps;R=h.memoizedState,E=R.element,pt(u,h),bn(h,O,null,x);var q=h.memoizedState;if(O=q.cache,rl(h,ei,O),O!==R.cache&&Ql(h,[ei],x,!0),wt(),O=q.element,gs&&R.isDehydrated)if(R={element:O,isDehydrated:!1,cache:q.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=Ny(u,h,O,x);break e}else if(O!==E){E=fe(Error(s(424)),h),Nt(E),h=Ny(u,h,O,x);break e}else for(gs&&(vs=hv(h.stateNode.containerInfo),ys=h,En=!0,Wr=null,ts=!0),x=qa(h,null,O,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(jt(),O===E){h=mo(u,h,x);break e}fs(u,h,O,x)}h=h.child}return h;case 26:if(_r)return wf(u,h),u===null?(x=xg(h.type,null,h.pendingProps,null))?h.memoizedState=x:En||(h.stateNode=Fd(h.type,h.pendingProps,$a.current,h)):h.memoizedState=xg(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:if(Xn)return Be(h),u===null&&Xn&&En&&(E=h.stateNode=va(h.type,h.pendingProps,$a.current,ki.current,!1),ys=h,ts=!0,vs=zd(E)),E=h.pendingProps.children,u!==null||En?fs(u,h,E,x):h.child=Rl(h,null,E,x),wf(u,h),h.child;case 5:return u===null&&En&&(Id(h.type,h.pendingProps,ki.current),(R=E=vs)&&(E=wb(E,h.type,h.pendingProps,ts),E!==null?(h.stateNode=E,ys=h,vs=zd(E),ts=!1,R=!0):R=!1),R||Ke(h)),Be(h),R=h.type,O=h.pendingProps,q=u!==null?u.memoizedProps:null,E=O.children,Qt(R,O)?E=null:q!==null&&Qt(R,q)&&(h.flags|=32),h.memoizedState!==null&&(R=ha(u,h,Oi,null,null,x),Fs?ya._currentValue=R:ya._currentValue2=R),wf(u,h),fs(u,h,E,x),h.child;case 6:return u===null&&En&&(xv(h.pendingProps,ki.current),(u=x=vs)&&(x=yg(x,h.pendingProps,ts),x!==null?(h.stateNode=x,ys=h,vs=null,u=!0):u=!1),u||Ke(h)),null;case 13:return Dy(u,h,x);case 4:return re(h,h.stateNode.containerInfo),E=h.pendingProps,u===null?h.child=Rl(h,null,E,x):fs(u,h,E,x),h.child;case 11:return ad(u,h,h.type,h.pendingProps,x);case 7:return fs(u,h,h.pendingProps,x),h.child;case 8:return fs(u,h,h.pendingProps.children,x),h.child;case 12:return fs(u,h,h.pendingProps.children,x),h.child;case 10:return E=h.pendingProps,rl(h,h.type,E.value),fs(u,h,E.children,x),h.child;case 9:return R=h.type._context,E=h.pendingProps.children,al(h),R=hs(R),E=E(R),h.flags|=1,fs(u,h,E,x),h.child;case 14:return Ty(u,h,h.type,h.pendingProps,x);case 15:return My(u,h,h.type,h.pendingProps,x);case 19:return Ly(u,h,x);case 22:return Ay(u,h,x);case 24:return al(h),E=hs(ei),u===null?(R=zm(),R===null&&(R=Un,O=ol(),R.pooledCache=O,O.refCount++,O!==null&&(R.pooledCacheLanes|=x),R=O),h.memoizedState={parent:E,cache:R},Ye(h),rl(h,ei,R)):((u.lanes&x)!==0&&(pt(u,h),bn(h,null,null,x),wt()),R=u.memoizedState,O=h.memoizedState,R.parent!==E?(R={parent:E,cache:E},h.memoizedState=R,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=R),rl(h,ei,E)):(E=O.cache,rl(h,ei,E),E!==R.cache&&Ql(h,[ei],x,!0))),fs(u,h,h.pendingProps.children,x),h.child;case 29:throw h.pendingProps}throw Error(s(156,h.tag))}function rl(u,h,x){Fs?(C(Uo,h._currentValue),h._currentValue=x):(C(Uo,h._currentValue2),h._currentValue2=x)}function go(u){var h=Uo.current;Fs?u._currentValue=h:u._currentValue2=h,T(Uo)}function Cf(u,h,x){for(;u!==null;){var E=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,E!==null&&(E.childLanes|=h)):E!==null&&(E.childLanes&h)!==h&&(E.childLanes|=h),u===x)break;u=u.return}}function Ql(u,h,x,E){var R=u.child;for(R!==null&&(R.return=u);R!==null;){var O=R.dependencies;if(O!==null){var q=R.child;O=O.firstContext;e:for(;O!==null;){var ee=O;O=R;for(var ye=0;ye<h.length;ye++)if(ee.context===h[ye]){O.lanes|=x,ee=O.alternate,ee!==null&&(ee.lanes|=x),Cf(O.return,x,u),E||(q=null);break e}O=ee.next}}else if(R.tag===18){if(q=R.return,q===null)throw Error(s(341));q.lanes|=x,O=q.alternate,O!==null&&(O.lanes|=x),Cf(q,x,u),q=null}else q=R.child;if(q!==null)q.return=R;else for(q=R;q!==null;){if(q===u){q=null;break}if(R=q.sibling,R!==null){R.return=q.return,q=R;break}q=q.return}R=q}}function Nf(u,h,x,E){u=null;for(var R=h,O=!1;R!==null;){if(!O){if((R.flags&524288)!==0)O=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var q=R.alternate;if(q===null)throw Error(s(387));if(q=q.memoizedProps,q!==null){var ee=R.type;nr(R.pendingProps.value,q.value)||(u!==null?u.push(ee):u=[ee])}}else if(R===lc.current){if(q=R.alternate,q===null)throw Error(s(387));q.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(u!==null?u.push(ya):u=[ya])}R=R.return}u!==null&&Ql(h,u,x,E),h.flags|=262144}function Df(u){for(u=u.firstContext;u!==null;){var h=u.context;if(!nr(Fs?h._currentValue:h._currentValue2,u.memoizedValue))return!0;u=u.next}return!1}function al(u){Ea=u,Ar=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function hs(u){return Um(Ea,u)}function Of(u,h){return Ea===null&&al(u),Um(u,h)}function Um(u,h){var x=Fs?h._currentValue:h._currentValue2;if(h={context:h,memoizedValue:x,next:null},Ar===null){if(u===null)throw Error(s(308));Ar=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else Ar=Ar.next=h;return x}function ol(){return{controller:new Uu,data:new Map,refCount:0}}function Lf(u){u.refCount--,u.refCount===0&&Nv(Dv,function(){u.controller.abort()})}function zm(){var u=Ya.current;return u!==null?u:Un.pooledCache}function cd(u,h){h===null?C(Ya,Ya.current):C(Ya,h.pool)}function Pm(){var u=zm();return u===null?null:{parent:Fs?ei._currentValue:ei._currentValue2,pool:u}}function Ws(u){u.flags|=4}function lu(u,h){if(u!==null&&u.child===h.child)return!1;if((h.flags&16)!==0)return!0;for(u=h.child;u!==null;){if((u.flags&13878)!==0||(u.subtreeFlags&13878)!==0)return!0;u=u.sibling}return!1}function Jl(u,h,x,E){if(Gi)for(x=h.child;x!==null;){if(x.tag===5||x.tag===6)Qf(u,x.stateNode);else if(!(x.tag===4||Xn&&x.tag===27)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else if(jr)for(var R=h.child;R!==null;){if(R.tag===5){var O=R.stateNode;x&&E&&(O=dg(O,R.type,R.memoizedProps)),Qf(u,O)}else if(R.tag===6)O=R.stateNode,x&&E&&(O=pg(O,R.memoizedProps)),Qf(u,O);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)O=R.child,O!==null&&(O.return=R),Jl(u,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function zy(u,h,x,E){if(jr)for(var R=h.child;R!==null;){if(R.tag===5){var O=R.stateNode;x&&E&&(O=dg(O,R.type,R.memoizedProps)),hg(u,O)}else if(R.tag===6)O=R.stateNode,x&&E&&(O=pg(O,R.memoizedProps)),hg(u,O);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)O=R.child,O!==null&&(O.return=R),zy(u,R,!(R.memoizedProps!==null&&R.memoizedProps.mode==="manual"),!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function Uf(u,h){if(jr&&lu(u,h)){u=h.stateNode;var x=u.containerInfo,E=Jf();zy(E,h,!1,!1),u.pendingChildren=E,Ws(h),Od(x,E)}}function ud(u,h,x,E){if(Gi)u.memoizedProps!==E&&Ws(h);else if(jr){var R=u.stateNode,O=u.memoizedProps;if((u=lu(u,h))||O!==E){var q=ki.current;O=Mu(R,x,O,E,!u,null),O===R?h.stateNode=R:(wo(O,x,E,q)&&Ws(h),h.stateNode=O,u?Jl(O,h,!1,!1):Ws(h))}else h.stateNode=R}}function fd(u,h,x){if(sg(h,x)){if(u.flags|=16777216,!Nd(h,x))if(dl())u.flags|=8192;else throw Ml=lh,oh}else u.flags&=-16777217}function hd(u,h){if(Sv(h)){if(u.flags|=16777216,!ic(h))if(dl())u.flags|=8192;else throw Ml=lh,oh}else u.flags&=-16777217}function cu(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?B():536870912,u.lanes|=h,Ka|=h)}function uu(u,h){if(!En)switch(u.tailMode){case"hidden":h=u.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?u.tail=null:x.sibling=null;break;case"collapsed":x=u.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:E.sibling=null}}function li(u){var h=u.alternate!==null&&u.alternate.child===u.child,x=0,E=0;if(h)for(var R=u.child;R!==null;)x|=R.lanes|R.childLanes,E|=R.subtreeFlags&31457280,E|=R.flags&31457280,R.return=u,R=R.sibling;else for(R=u.child;R!==null;)x|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=u,R=R.sibling;return u.subtreeFlags|=E,u.childLanes=x,h}function Py(u,h,x){var E=h.pendingProps;switch(Ue(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return li(h),null;case 1:return li(h),null;case 3:return x=h.stateNode,E=null,u!==null&&(E=u.memoizedState.cache),h.memoizedState.cache!==E&&(h.flags|=2048),go(ei),Ce(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(u===null||u.child===null)&&($t(h)?Ws(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Wr!==null&&(Vf(Wr),Wr=null))),Uf(u,h),li(h),null;case 26:if(_r){x=h.type;var R=h.memoizedState;return u===null?(Ws(h),R!==null?(li(h),hd(h,R)):(li(h),fd(h,x,E))):R?R!==u.memoizedState?(Ws(h),li(h),hd(h,R)):(li(h),h.flags&=-16777217):(Gi?u.memoizedProps!==E&&Ws(h):ud(u,h,x,E),li(h),fd(h,x,E)),null}case 27:if(Xn){if(qe(h),x=$a.current,R=h.type,u!==null&&h.stateNode!=null)Gi?u.memoizedProps!==E&&Ws(h):ud(u,h,R,E);else{if(!E){if(h.stateNode===null)throw Error(s(166));return li(h),null}u=ki.current,$t(h)?Ct(h,u):(u=va(R,E,x,u,!0),h.stateNode=u,Ws(h))}return li(h),null}case 5:if(qe(h),x=h.type,u!==null&&h.stateNode!=null)ud(u,h,x,E);else{if(!E){if(h.stateNode===null)throw Error(s(166));return li(h),null}u=ki.current,$t(h)?Ct(h,u):(R=ig(x,E,$a.current,u,h),Jl(R,h,!1,!1),h.stateNode=R,wo(R,x,E,u)&&Ws(h))}return li(h),fd(h,h.type,h.pendingProps),null;case 6:if(u&&h.stateNode!=null)x=u.memoizedProps,Gi?x!==E&&Ws(h):jr&&(x!==E?(h.stateNode=In(E,$a.current,ki.current,h),Ws(h)):h.stateNode=u.stateNode);else{if(typeof E!="string"&&h.stateNode===null)throw Error(s(166));if(u=$a.current,x=ki.current,$t(h)){if(!gs)throw Error(s(176));if(u=h.stateNode,x=h.memoizedProps,E=null,R=ys,R!==null)switch(R.tag){case 27:case 5:E=R.memoizedProps}vg(u,x,h,E)||Ke(h)}else h.stateNode=In(E,u,x,h)}return li(h),null;case 13:if(E=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(R=$t(h),E!==null&&E.dehydrated!==null){if(u===null){if(!R)throw Error(s(318));if(!gs)throw Error(s(344));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(s(317));gv(R,h)}else jt(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;li(h),R=!1}else Wr!==null&&(Vf(Wr),Wr=null),R=!0;if(!R)return h.flags&256?(Us(h),h):(Us(h),null)}if(Us(h),(h.flags&128)!==0)return h.lanes=x,h;if(x=E!==null,u=u!==null&&u.memoizedState!==null,x){E=h.child,R=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(R=E.alternate.memoizedState.cachePool.pool);var O=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(O=E.memoizedState.cachePool.pool),O!==R&&(E.flags|=2048)}return x!==u&&x&&(h.child.flags|=8192),cu(h,h.updateQueue),li(h),null;case 4:return Ce(),Uf(u,h),u===null&&Ei(h.stateNode.containerInfo),li(h),null;case 10:return go(h.type),li(h),null;case 19:if(T($i),R=h.memoizedState,R===null)return li(h),null;if(E=(h.flags&128)!==0,O=R.rendering,O===null)if(E)uu(R,!1);else{if(Yn!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(O=ua(u),O!==null){for(h.flags|=128,uu(R,!1),u=O.updateQueue,h.updateQueue=u,cu(h,u),h.subtreeFlags=0,u=x,x=h.child;x!==null;)$f(x,u),x=x.sibling;return C($i,$i.current&1|2),h.child}u=u.sibling}R.tail!==null&&Yr()>Iu&&(h.flags|=128,E=!0,uu(R,!1),h.lanes=4194304)}else{if(!E)if(u=ua(O),u!==null){if(h.flags|=128,E=!0,u=u.updateQueue,h.updateQueue=u,cu(h,u),uu(R,!0),R.tail===null&&R.tailMode==="hidden"&&!O.alternate&&!En)return li(h),null}else 2*Yr()-R.renderingStartTime>Iu&&x!==536870912&&(h.flags|=128,E=!0,uu(R,!1),h.lanes=4194304);R.isBackwards?(O.sibling=h.child,h.child=O):(u=R.last,u!==null?u.sibling=O:h.child=O,R.last=O)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=Yr(),h.sibling=null,u=$i.current,C($i,E?u&1|2:u&1),h):(li(h),null);case 22:case 23:return Us(h),As(),E=h.memoizedState!==null,u!==null?u.memoizedState!==null!==E&&(h.flags|=8192):E&&(h.flags|=8192),E?(x&536870912)!==0&&(h.flags&128)===0&&(li(h),h.subtreeFlags&6&&(h.flags|=8192)):li(h),x=h.updateQueue,x!==null&&cu(h,x.retryQueue),x=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==x&&(h.flags|=2048),u!==null&&T(Ya),null;case 24:return x=null,u!==null&&(x=u.memoizedState.cache),h.memoizedState.cache!==x&&(h.flags|=2048),go(ei),li(h),null;case 25:return null}throw Error(s(156,h.tag))}function bb(u,h){switch(Ue(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return go(ei),Ce(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return qe(h),null;case 13:if(Us(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(s(340));jt()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return T($i),null;case 4:return Ce(),null;case 10:return go(h.type),null;case 22:case 23:return Us(h),As(),u!==null&&T(Ya),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return go(ei),null;case 25:return null;default:return null}}function Iy(u,h){switch(Ue(h),h.tag){case 3:go(ei),Ce();break;case 26:case 27:case 5:qe(h);break;case 4:Ce();break;case 13:Us(h);break;case 19:T($i);break;case 10:go(h.type);break;case 22:case 23:Us(h),As(),u!==null&&T(Ya);break;case 24:go(ei)}}function zf(u,h){try{var x=h.updateQueue,E=x!==null?x.lastEffect:null;if(E!==null){var R=E.next;x=R;do{if((x.tag&u)===u){E=void 0;var O=x.create,q=x.inst;E=O(),q.destroy=E}x=x.next}while(x!==R)}}catch(ee){On(h,h.return,ee)}}function ll(u,h,x){try{var E=h.updateQueue,R=E!==null?E.lastEffect:null;if(R!==null){var O=R.next;E=O;do{if((E.tag&u)===u){var q=E.inst,ee=q.destroy;if(ee!==void 0){q.destroy=void 0,R=h;var ye=x;try{ee()}catch(He){On(R,ye,He)}}}E=E.next}while(E!==O)}}catch(He){On(h,h.return,He)}}function By(u){var h=u.updateQueue;if(h!==null){var x=u.stateNode;try{ct(h,x)}catch(E){On(u,u.return,E)}}}function Zs(u,h,x){x.props=po(u.type,u.memoizedProps),x.state=u.memoizedState;try{x.componentWillUnmount()}catch(E){On(u,h,E)}}function pa(u,h){try{var x=u.ref;if(x!==null){var E=u.stateNode;switch(u.tag){case 26:case 27:case 5:var R=Su(E);break;default:R=E}typeof x=="function"?u.refCleanup=x(R):x.current=R}}catch(O){On(u,h,O)}}function Ks(u,h){var x=u.ref,E=u.refCleanup;if(x!==null)if(typeof E=="function")try{E()}catch(R){On(u,h,R)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(R){On(u,h,R)}else x.current=null}function Im(u){var h=u.type,x=u.memoizedProps,E=u.stateNode;try{Mb(E,h,x,u)}catch(R){On(u,u.return,R)}}function Bm(u,h,x){try{tv(u.stateNode,u.type,x,h,u)}catch(E){On(u,u.return,E)}}function Fm(u){return u.tag===5||u.tag===3||(_r?u.tag===26:!1)||(Xn?u.tag===27:!1)||u.tag===4}function Pf(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Fm(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&(!Xn||u.tag!==27)&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Hm(u,h,x){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?iv(x,u,h):cg(x,u);else if(!(E===4||Xn&&E===27)&&(u=u.child,u!==null))for(Hm(u,h,x),u=u.sibling;u!==null;)Hm(u,h,x),u=u.sibling}function yo(u,h,x){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?nv(x,u,h):Jy(x,u);else if(!(E===4||Xn&&E===27)&&(u=u.child,u!==null))for(yo(u,h,x),u=u.sibling;u!==null;)yo(u,h,x),u=u.sibling}function dd(u,h,x){u=u.containerInfo;try{Au(u,x)}catch(E){On(h,h.return,E)}}function If(u,h){for(Rd(u.containerInfo),Yt=h;Yt!==null;)if(u=Yt,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,Yt=h;else for(;Yt!==null;){u=Yt;var x=u.alternate;switch(h=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&x!==null){h=void 0;var E=u,R=x.memoizedProps;x=x.memoizedState;var O=E.stateNode;try{var q=po(E.type,R,E.elementType===E.type);h=O.getSnapshotBeforeUpdate(q,x),O.__reactInternalSnapshotBeforeUpdate=h}catch(ee){On(E,E.return,ee)}}break;case 3:(h&1024)!==0&&Gi&&lv(u.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(s(163))}if(h=u.sibling,h!==null){h.return=u.return,Yt=h;break}Yt=u.return}return q=un,un=!1,q}function pd(u,h,x){var E=x.flags;switch(x.tag){case 0:case 11:case 15:xo(u,x),E&4&&zf(5,x);break;case 1:if(xo(u,x),E&4)if(u=x.stateNode,h===null)try{u.componentDidMount()}catch(ee){On(x,x.return,ee)}else{var R=po(x.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(R,h,u.__reactInternalSnapshotBeforeUpdate)}catch(ee){On(x,x.return,ee)}}E&64&&By(x),E&512&&pa(x,x.return);break;case 3:if(xo(u,x),E&64&&(E=x.updateQueue,E!==null)){if(u=null,x.child!==null)switch(x.child.tag){case 27:case 5:u=Su(x.child.stateNode);break;case 1:u=x.child.stateNode}try{ct(E,u)}catch(ee){On(x,x.return,ee)}}break;case 26:if(_r){xo(u,x),E&512&&pa(x,x.return);break}case 27:case 5:xo(u,x),h===null&&E&4&&Im(x),E&512&&pa(x,x.return);break;case 12:xo(u,x);break;case 13:xo(u,x),E&4&&md(u,x);break;case 22:if(R=x.memoizedState!==null||Wa,!R){h=h!==null&&h.memoizedState!==null||vi;var O=Wa,q=vi;Wa=R,(vi=h)&&!q?_o(u,x,(x.subtreeFlags&8772)!==0):xo(u,x),Wa=O,vi=q}E&512&&(x.memoizedProps.mode==="manual"?pa(x,x.return):Ks(x,x.return));break;default:xo(u,x)}}function Vm(u){var h=u.alternate;h!==null&&(u.alternate=null,Vm(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&Tb(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function ds(u,h,x){for(x=x.child;x!==null;)cl(u,h,x),x=x.sibling}function cl(u,h,x){if(tr&&typeof tr.onCommitFiberUnmount=="function")try{tr.onCommitFiberUnmount(Mi,x)}catch{}switch(x.tag){case 26:if(_r){vi||Ks(x,h),ds(u,h,x),x.memoizedState?nc(x.memoizedState):x.stateNode&&wu(x.stateNode);break}case 27:if(Xn){vi||Ks(x,h);var E=Ot,R=en;Ot=x.stateNode,ds(u,h,x),Sl(x.stateNode),Ot=E,en=R;break}case 5:vi||Ks(x,h);case 6:if(Gi){if(E=Ot,R=en,Ot=null,ds(u,h,x),Ot=E,en=R,Ot!==null)if(en)try{sv(Ot,x.stateNode)}catch(O){On(x,h,O)}else try{ug(Ot,x.stateNode)}catch(O){On(x,h,O)}}else ds(u,h,x);break;case 18:Gi&&Ot!==null&&(en?eh(Ot,x.stateNode):vv(Ot,x.stateNode));break;case 4:Gi?(E=Ot,R=en,Ot=x.stateNode.containerInfo,en=!0,ds(u,h,x),Ot=E,en=R):(jr&&dd(x.stateNode,x,Jf()),ds(u,h,x));break;case 0:case 11:case 14:case 15:vi||ll(2,x,h),vi||ll(4,x,h),ds(u,h,x);break;case 1:vi||(Ks(x,h),E=x.stateNode,typeof E.componentWillUnmount=="function"&&Zs(x,h,E)),ds(u,h,x);break;case 21:ds(u,h,x);break;case 22:vi||Ks(x,h),vi=(E=vi)||x.memoizedState!==null,ds(u,h,x),vi=E;break;default:ds(u,h,x)}}function md(u,h){if(gs&&h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Cb(u)}catch(x){On(h,h.return,x)}}function Fy(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new Ln),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new Ln),h;default:throw Error(s(435,u.tag))}}function vo(u,h){var x=Fy(u);h.forEach(function(E){var R=gl.bind(null,u,E);x.has(E)||(x.add(E),E.then(R,R))})}function Is(u,h){var x=h.deletions;if(x!==null)for(var E=0;E<x.length;E++){var R=x[E],O=u,q=h;if(Gi){var ee=q;e:for(;ee!==null;){switch(ee.tag){case 27:case 5:Ot=ee.stateNode,en=!1;break e;case 3:Ot=ee.stateNode.containerInfo,en=!0;break e;case 4:Ot=ee.stateNode.containerInfo,en=!0;break e}ee=ee.return}if(Ot===null)throw Error(s(160));cl(O,q,R),Ot=null,en=!1}else cl(O,q,R);O=R.alternate,O!==null&&(O.return=null),R.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)Gm(h,u),h=h.sibling}function Gm(u,h){var x=u.alternate,E=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Is(h,u),Qs(u),E&4&&(ll(3,u,u.return),zf(3,u),ll(5,u,u.return));break;case 1:Is(h,u),Qs(u),E&512&&(vi||x===null||Ks(x,x.return)),E&64&&Wa&&(u=u.updateQueue,u!==null&&(E=u.callbacks,E!==null&&(x=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=x===null?E:x.concat(E))));break;case 26:if(_r){var R=pi;Is(h,u),Qs(u),E&512&&(vi||x===null||Ks(x,x.return)),E&4&&(E=x!==null?x.memoizedState:null,h=u.memoizedState,x===null?h===null?u.stateNode===null?u.stateNode=nh(R,u.type,u.memoizedProps,u):ih(R,u.type,u.stateNode):u.stateNode=_v(R,h,u.memoizedProps):E!==h?(E===null?x.stateNode!==null&&wu(x.stateNode):nc(E),h===null?ih(R,u.type,u.stateNode):_v(R,h,u.memoizedProps)):h===null&&u.stateNode!==null&&Bm(u,u.memoizedProps,x.memoizedProps));break}case 27:if(Xn&&E&4&&u.alternate===null){R=u.stateNode;var O=u.memoizedProps;try{bl(R),Tv(u.type,O,R,u)}catch(nt){On(u,u.return,nt)}}case 5:if(Is(h,u),Qs(u),E&512&&(vi||x===null||Ks(x,x.return)),Gi){if(u.flags&32){h=u.stateNode;try{fg(h)}catch(nt){On(u,u.return,nt)}}E&4&&u.stateNode!=null&&(h=u.memoizedProps,Bm(u,h,x!==null?x.memoizedProps:h)),E&1024&&(Eg=!0)}break;case 6:if(Is(h,u),Qs(u),E&4&&Gi){if(u.stateNode===null)throw Error(s(162));E=u.memoizedProps,x=x!==null?x.memoizedProps:E,h=u.stateNode;try{ev(h,x,E)}catch(nt){On(u,u.return,nt)}}break;case 3:if(_r?(bv(),R=pi,pi=Bd(h.containerInfo),Is(h,u),pi=R):Is(h,u),Qs(u),E&4){if(Gi&&gs&&x!==null&&x.memoizedState.isDehydrated)try{Rb(h.containerInfo)}catch(nt){On(u,u.return,nt)}if(jr){E=h.containerInfo,x=h.pendingChildren;try{Au(E,x)}catch(nt){On(u,u.return,nt)}}}Eg&&(Eg=!1,Hy(u));break;case 4:_r?(x=pi,pi=Bd(u.stateNode.containerInfo),Is(h,u),Qs(u),pi=x):(Is(h,u),Qs(u)),E&4&&jr&&dd(u.stateNode,u,u.stateNode.pendingChildren);break;case 12:Is(h,u),Qs(u);break;case 13:Is(h,u),Qs(u),u.child.flags&8192&&u.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(ks=Yr()),E&4&&(E=u.updateQueue,E!==null&&(u.updateQueue=null,vo(u,E)));break;case 22:E&512&&(vi||x===null||Ks(x,x.return)),R=u.memoizedState!==null;var q=x!==null&&x.memoizedState!==null,ee=Wa,ye=vi;if(Wa=ee||R,vi=ye||q,Is(h,u),vi=ye,Wa=ee,Qs(u),h=u.stateNode,h._current=u,h._visibility&=-3,h._visibility|=h._pendingVisibility&2,E&8192&&(h._visibility=R?h._visibility&-2:h._visibility|1,R&&(h=Wa||vi,x===null||q||h||fu(u)),Gi&&(u.memoizedProps===null||u.memoizedProps.mode!=="manual"))){e:if(x=null,Gi)for(h=u;;){if(h.tag===5||_r&&h.tag===26||Xn&&h.tag===27){if(x===null){q=x=h;try{O=q.stateNode,R?rv(O):ov(q.stateNode,q.memoizedProps)}catch(nt){On(q,q.return,nt)}}}else if(h.tag===6){if(x===null){q=h;try{var He=q.stateNode;R?av(He):Ab(He,q.memoizedProps)}catch(nt){On(q,q.return,nt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;x===h&&(x=null),h=h.return}x===h&&(x=null),h.sibling.return=h.return,h=h.sibling}}E&4&&(E=u.updateQueue,E!==null&&(x=E.retryQueue,x!==null&&(E.retryQueue=null,vo(u,x))));break;case 19:Is(h,u),Qs(u),E&4&&(E=u.updateQueue,E!==null&&(u.updateQueue=null,vo(u,E)));break;case 21:break;default:Is(h,u),Qs(u)}}function Qs(u){var h=u.flags;if(h&2){try{if(Gi&&(!Xn||u.tag!==27)){e:{for(var x=u.return;x!==null;){if(Fm(x)){var E=x;break e}x=x.return}throw Error(s(160))}switch(E.tag){case 27:if(Xn){var R=E.stateNode,O=Pf(u);yo(u,O,R);break}case 5:var q=E.stateNode;E.flags&32&&(fg(q),E.flags&=-33);var ee=Pf(u);yo(u,ee,q);break;case 3:case 4:var ye=E.stateNode.containerInfo,He=Pf(u);Hm(u,He,ye);break;default:throw Error(s(161))}}}catch(nt){On(u,u.return,nt)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function Hy(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;Hy(h),h.tag===5&&h.flags&1024&&Dd(h.stateNode),u=u.sibling}}function xo(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)pd(u,h.alternate,h),h=h.sibling}function fu(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:ll(4,h,h.return),fu(h);break;case 1:Ks(h,h.return);var x=h.stateNode;typeof x.componentWillUnmount=="function"&&Zs(h,h.return,x),fu(h);break;case 26:case 27:case 5:Ks(h,h.return),fu(h);break;case 22:Ks(h,h.return),h.memoizedState===null&&fu(h);break;default:fu(h)}u=u.sibling}}function _o(u,h,x){for(x=x&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var E=h.alternate,R=u,O=h,q=O.flags;switch(O.tag){case 0:case 11:case 15:_o(R,O,x),zf(4,O);break;case 1:if(_o(R,O,x),E=O,R=E.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(He){On(E,E.return,He)}if(E=O,R=E.updateQueue,R!==null){var ee=E.stateNode;try{var ye=R.shared.hiddenCallbacks;if(ye!==null)for(R.shared.hiddenCallbacks=null,R=0;R<ye.length;R++)ue(ye[R],ee)}catch(He){On(E,E.return,He)}}x&&q&64&&By(O),pa(O,O.return);break;case 26:case 27:case 5:_o(R,O,x),x&&E===null&&q&4&&Im(O),pa(O,O.return);break;case 12:_o(R,O,x);break;case 13:_o(R,O,x),x&&q&4&&md(R,O);break;case 22:O.memoizedState===null&&_o(R,O,x),pa(O,O.return);break;default:_o(R,O,x)}h=h.sibling}}function gd(u,h){var x=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==x&&(u!=null&&u.refCount++,x!=null&&Lf(x))}function Bf(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Lf(u))}function Qi(u,h,x,E){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)km(u,h,x,E),h=h.sibling}function km(u,h,x,E){var R=h.flags;switch(h.tag){case 0:case 11:case 15:Qi(u,h,x,E),R&2048&&zf(9,h);break;case 3:Qi(u,h,x,E),R&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Lf(u)));break;case 12:if(R&2048){Qi(u,h,x,E),u=h.stateNode;try{var O=h.memoizedProps,q=O.id,ee=O.onPostCommit;typeof ee=="function"&&ee(q,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(ye){On(h,h.return,ye)}}else Qi(u,h,x,E);break;case 23:break;case 22:O=h.stateNode,h.memoizedState!==null?O._visibility&4?Qi(u,h,x,E):ws(u,h):O._visibility&4?Qi(u,h,x,E):(O._visibility|=4,ps(u,h,x,E,(h.subtreeFlags&10256)!==0)),R&2048&&gd(h.alternate,h);break;case 24:Qi(u,h,x,E),R&2048&&Bf(h.alternate,h);break;default:Qi(u,h,x,E)}}function ps(u,h,x,E,R){for(R=R&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var O=u,q=h,ee=x,ye=E,He=q.flags;switch(q.tag){case 0:case 11:case 15:ps(O,q,ee,ye,R),zf(8,q);break;case 23:break;case 22:var nt=q.stateNode;q.memoizedState!==null?nt._visibility&4?ps(O,q,ee,ye,R):ws(O,q):(nt._visibility|=4,ps(O,q,ee,ye,R)),R&&He&2048&&gd(q.alternate,q);break;case 24:ps(O,q,ee,ye,R),R&&He&2048&&Bf(q.alternate,q);break;default:ps(O,q,ee,ye,R)}h=h.sibling}}function ws(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var x=u,E=h,R=E.flags;switch(E.tag){case 22:ws(x,E),R&2048&&gd(E.alternate,E);break;case 24:ws(x,E),R&2048&&Bf(E.alternate,E);break;default:ws(x,E)}h=h.sibling}}function Gr(u){if(u.subtreeFlags&wr)for(u=u.child;u!==null;)yd(u),u=u.sibling}function yd(u){switch(u.tag){case 26:Gr(u),u.flags&wr&&(u.memoizedState!==null?Ev(pi,u.memoizedState,u.memoizedProps):Hs(u.type,u.memoizedProps));break;case 5:Gr(u),u.flags&wr&&Hs(u.type,u.memoizedProps);break;case 3:case 4:if(_r){var h=pi;pi=Bd(u.stateNode.containerInfo),Gr(u),pi=h}else Gr(u);break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=wr,wr=16777216,Gr(u),wr=h):Gr(u));break;default:Gr(u)}}function Ff(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function ul(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var x=0;x<h.length;x++){var E=h[x];Yt=E,$m(E,u)}Ff(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)vd(u),u=u.sibling}function vd(u){switch(u.tag){case 0:case 11:case 15:ul(u),u.flags&2048&&ll(9,u,u.return);break;case 3:ul(u);break;case 12:ul(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&4&&(u.return===null||u.return.tag!==13)?(h._visibility&=-5,bo(u)):ul(u);break;default:ul(u)}}function bo(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var x=0;x<h.length;x++){var E=h[x];Yt=E,$m(E,u)}Ff(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:ll(8,h,h.return),bo(h);break;case 22:x=h.stateNode,x._visibility&4&&(x._visibility&=-5,bo(h));break;default:bo(h)}u=u.sibling}}function $m(u,h){for(;Yt!==null;){var x=Yt;switch(x.tag){case 0:case 11:case 15:ll(8,x,h);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var E=x.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Lf(x.memoizedState.cache)}if(E=x.child,E!==null)E.return=x,Yt=E;else e:for(x=u;Yt!==null;){E=Yt;var R=E.sibling,O=E.return;if(Vm(E),E===x){Yt=null;break e}if(R!==null){R.return=O,Yt=R;break e}Yt=O}}}function hu(u){var h=qy(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(s(364));return h}if(u=og(u),u===null)throw Error(s(362));return u.stateNode.current}function fl(u,h){var x=u.tag;switch(h.$$typeof){case Pu:if(u.type===h.value)return!0;break;case Qr:e:{for(h=h.value,u=[u,0],x=0;x<u.length;){var E=u[x++],R=E.tag,O=u[x++],q=h[O];if(R!==5&&R!==26&&R!==27||!Tu(E)){for(;q!=null&&fl(E,q);)O++,q=h[O];if(O===h.length){h=!0;break e}else for(E=E.child;E!==null;)u.push(E,O),E=E.sibling}}h=!1}return h;case si:if((x===5||x===26||x===27)&&Zy(u.stateNode,h.value))return!0;break;case Za:if((x===5||x===6||x===26||x===27)&&(u=Wy(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case Ta:if((x===5||x===26||x===27)&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Xm(u){switch(u.$$typeof){case Pu:return"<"+(o(u.value)||"Unknown")+">";case Qr:return":has("+(Xm(u)||"")+")";case si:return'[role="'+u.value+'"]';case Za:return'"'+u.value+'"';case Ta:return'[data-testname="'+u.value+'"]';default:throw Error(s(365))}}function Js(u,h){var x=[];u=[u,0];for(var E=0;E<u.length;){var R=u[E++],O=R.tag,q=u[E++],ee=h[q];if(O!==5&&O!==26&&O!==27||!Tu(R)){for(;ee!=null&&fl(R,ee);)q++,ee=h[q];if(q===h.length)x.push(R);else for(R=R.child;R!==null;)u.push(R,q),R=R.sibling}}return x}function Hf(u,h){if(!_l)throw Error(s(363));u=hu(u),u=Js(u,h),h=[],u=Array.from(u);for(var x=0;x<u.length;){var E=u[x++],R=E.tag;if(R===5||R===26||R===27)Tu(E)||h.push(E.stateNode);else for(E=E.child;E!==null;)u.push(E),E=E.sibling}return h}function Si(){if((wn&2)!==0&&pn!==0)return pn&-pn;if(Ft.T!==null){var u=Er;return u!==0?u:et()}return jy()}function qm(){Nr===0&&(Nr=(pn&536870912)===0||En?G():536870912);var u=Tr.current;return u!==null&&(u.flags|=32),Nr}function Ji(u,h,x){(u===Un&&kn===2||u.cancelPendingCommit!==null)&&(ms(u,0),er(u,pn,Nr,!1)),j(u,x),((wn&2)===0||u!==Un)&&(u===Un&&((wn&2)===0&&(zo|=x),Yn===4&&er(u,pn,Nr,!1)),Ne(u))}function hl(u,h,x){if((wn&6)!==0)throw Error(s(327));var E=!x&&(h&60)===0&&(h&u.expiredLanes)===0||L(u,h),R=E?Ym(u,h):_d(u,h,!0),O=E;do{if(R===0){Rr&&!E&&er(u,h,0,!1);break}else if(R===6)er(u,h,0,!ea);else{if(x=u.current.alternate,O&&!du(x)){R=_d(u,h,!1),O=!1;continue}if(R===2){if(O=h,u.errorRecoveryDisabledLanes&O)var q=0;else q=u.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){h=q;e:{var ee=u;R=yc;var ye=gs&&ee.current.memoizedState.isDehydrated;if(ye&&(ms(ee,q).flags|=256),q=_d(ee,q,!1),q!==2){if(Xi&&!ye){ee.errorRecoveryDisabledLanes|=O,zo|=O,R=4;break e}O=xi,xi=R,O!==null&&Vf(O)}R=q}if(O=!1,R!==2)continue}}if(R===1){ms(u,0),er(u,h,0,!0);break}e:{switch(E=u,R){case 0:case 1:throw Error(s(345));case 4:if((h&4194176)===h){er(E,h,Nr,!ea);break e}break;case 2:xi=null;break;case 3:case 5:break;default:throw Error(s(329))}if(E.finishedWork=x,E.finishedLanes=h,(h&62914560)===h&&(O=ks+300-Yr(),10<O)){if(er(E,h,Nr,!ea),I(E,0)!==0)break e;E.timeoutHandle=zi(xd.bind(null,E,x,xi,uh,Wd,h,Nr,zo,Ka,ea,2,-0,0),O);break e}xd(E,x,xi,uh,Wd,h,Nr,zo,Ka,ea,0,-0,0)}}break}while(!0);Ne(u)}function Vf(u){xi===null?xi=u:xi.push.apply(xi,u)}function xd(u,h,x,E,R,O,q,ee,ye,He,nt,ht,mt){var Wt=h.subtreeFlags;if((Wt&8192||(Wt&16785408)===16785408)&&(rg(),yd(h),h=Pi(),h!==null)){u.cancelPendingCommit=h(pl.bind(null,u,x,E,R,q,ee,ye,1,ht,mt)),er(u,O,q,!He);return}pl(u,x,E,R,q,ee,ye,nt,ht,mt)}function du(u){for(var h=u;;){var x=h.tag;if((x===0||x===11||x===15)&&h.flags&16384&&(x=h.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var E=0;E<x.length;E++){var R=x[E],O=R.getSnapshot;R=R.value;try{if(!nr(O(),R))return!1}catch{return!1}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function er(u,h,x,E){h&=~ch,h&=~zo,u.suspendedLanes|=h,u.pingedLanes&=~h,E&&(u.warmLanes|=h),E=u.expirationTimes;for(var R=h;0<R;){var O=31-Vs(R),q=1<<O;E[O]=-1,R&=~q}x!==0&&ne(u,x,h)}function Gf(){return(wn&6)===0?(Y(0),!1):!0}function pu(){if(Ut!==null){if(kn===0)var u=Ut.return;else u=Ut,Ar=Ea=null,da(u),Al=null,wl=0,u=Ut;for(;u!==null;)Iy(u.alternate,u),u=u.return;Ut=null}}function ms(u,h){u.finishedWork=null,u.finishedLanes=0;var x=u.timeoutHandle;x!==vl&&(u.timeoutHandle=vl,Cd(x)),x=u.cancelPendingCommit,x!==null&&(u.cancelPendingCommit=null,x()),pu(),Un=u,Ut=x=$r(u.current,null),pn=h,kn=0,Cs=null,ea=!1,Rr=L(u,h),Xi=!1,Ka=Nr=ch=zo=Cr=Yn=0,xi=yc=null,Wd=!1,(h&8)!==0&&(h|=h&32);var E=u.entangledLanes;if(E!==0)for(u=u.entanglements,E&=h;0<E;){var R=31-Vs(E),O=1<<R;h|=u[R],E&=~O}return Ns=h,te(),x}function yr(u,h){nn=null,Ft.H=yi,h===Ou?(h=qt(),kn=3):h===oh?(h=qt(),kn=4):kn=h===jd?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Cs=h,Ut===null&&(Yn=1,ru(u,fe(h,u.current)))}function dl(){var u=Tr.current;return u===null?!0:(pn&4194176)===pn?qn===null:(pn&62914560)===pn||(pn&536870912)!==0?u===qn:!1}function Ba(){var u=Ft.H;return Ft.H=yi,u===null?yi:u}function Fa(){var u=Ft.A;return Ft.A=zu,u}function So(){Yn=4,ea||(pn&4194176)!==pn&&Tr.current!==null||(Rr=!0),(Cr&134217727)===0&&(zo&134217727)===0||Un===null||er(Un,pn,Nr,!1)}function _d(u,h,x){var E=wn;wn|=2;var R=Ba(),O=Fa();(Un!==u||pn!==h)&&(uh=null,ms(u,h)),h=!1;var q=Yn;e:do try{if(kn!==0&&Ut!==null){var ee=Ut,ye=Cs;switch(kn){case 8:pu(),q=6;break e;case 3:case 2:case 6:Tr.current===null&&(h=!0);var He=kn;if(kn=0,Cs=null,kr(u,ee,ye,He),x&&Rr){q=0;break e}break;default:He=kn,kn=0,Cs=null,kr(u,ee,ye,He)}}jm(),q=Yn;break}catch(nt){yr(u,nt)}while(!0);return h&&u.shellSuspendCounter++,Ar=Ea=null,wn=E,Ft.H=R,Ft.A=O,Ut===null&&(Un=null,pn=0,te()),q}function jm(){for(;Ut!==null;)di(Ut)}function Ym(u,h){var x=wn;wn|=2;var E=Ba(),R=Fa();Un!==u||pn!==h?(uh=null,Iu=Yr()+500,ms(u,h)):Rr=L(u,h);e:do try{if(kn!==0&&Ut!==null){h=Ut;var O=Cs;t:switch(kn){case 1:kn=0,Cs=null,kr(u,h,O,1);break;case 2:if(ke(O)){kn=0,Cs=null,Cn(h);break}h=function(){kn===2&&Un===u&&(kn=7),Ne(u)},O.then(h,h);break e;case 3:kn=7;break e;case 4:kn=5;break e;case 7:ke(O)?(kn=0,Cs=null,Cn(h)):(kn=0,Cs=null,kr(u,h,O,7));break;case 5:var q=null;switch(Ut.tag){case 26:q=Ut.memoizedState;case 5:case 27:var ee=Ut,ye=ee.type,He=ee.pendingProps;if(q?ic(q):Nd(ye,He)){kn=0,Cs=null;var nt=ee.sibling;if(nt!==null)Ut=nt;else{var ht=ee.return;ht!==null?(Ut=ht,vr(ht)):Ut=null}break t}}kn=0,Cs=null,kr(u,h,O,5);break;case 6:kn=0,Cs=null,kr(u,h,O,6);break;case 8:pu(),Yn=6;break e;default:throw Error(s(462))}}Bs();break}catch(mt){yr(u,mt)}while(!0);return Ar=Ea=null,Ft.H=E,Ft.A=R,wn=x,Ut!==null?0:(Un=null,pn=0,te(),Yn)}function Bs(){for(;Ut!==null&&!wv();)di(Ut)}function di(u){var h=Uy(u.alternate,u,Ns);u.memoizedProps=u.pendingProps,h===null?vr(u):Ut=h}function Cn(u){var h=u,x=h.alternate;switch(h.tag){case 15:case 0:h=Ry(x,h,h.pendingProps,h.type,void 0,pn);break;case 11:h=Ry(x,h,h.pendingProps,h.type.render,h.ref,pn);break;case 5:da(h);default:Iy(x,h),h=Ut=$f(h,Ns),h=Uy(x,h,Ns)}u.memoizedProps=u.pendingProps,h===null?vr(u):Ut=h}function kr(u,h,x,E){Ar=Ea=null,da(h),Al=null,wl=0;var R=h.return;try{if(xb(u,R,h,x,pn)){Yn=1,ru(u,fe(x,u.current)),Ut=null;return}}catch(O){if(R!==null)throw Ut=R,O;Yn=1,ru(u,fe(x,u.current)),Ut=null;return}h.flags&32768?(En||E===1?u=!0:Rr||(pn&536870912)!==0?u=!1:(ea=u=!0,(E===2||E===3||E===6)&&(E=Tr.current,E!==null&&E.tag===13&&(E.flags|=16384))),bd(h,u)):vr(h)}function vr(u){var h=u;do{if((h.flags&32768)!==0){bd(h,ea);return}u=h.return;var x=Py(h.alternate,h,Ns);if(x!==null){Ut=x;return}if(h=h.sibling,h!==null){Ut=h;return}Ut=h=u}while(h!==null);Yn===0&&(Yn=5)}function bd(u,h){do{var x=bb(u.alternate,u);if(x!==null){x.flags&=32767,Ut=x;return}if(x=u.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!h&&(u=u.sibling,u!==null)){Ut=u;return}Ut=u=x}while(u!==null);Yn=6,Ut=null}function pl(u,h,x,E,R,O,q,ee,ye,He){var nt=Ft.T,ht=Ro();try{Rs(2),Ft.T=null,Vy(u,h,x,E,ht,R,O,q,ee,ye,He)}finally{Ft.T=nt,Rs(ht)}}function Vy(u,h,x,E,R,O,q,ee){do ma();while(Qa!==null);if((wn&6)!==0)throw Error(s(327));var ye=u.finishedWork;if(E=u.finishedLanes,ye===null)return null;if(u.finishedWork=null,u.finishedLanes=0,ye===u.current)throw Error(s(177));u.callbackNode=null,u.callbackPriority=0,u.cancelPendingCommit=null;var He=ye.lanes|ye.childLanes;if(He|=ba,ae(u,E,He,O,q,ee),u===Un&&(Ut=Un=null,pn=0),(ye.subtreeFlags&10256)===0&&(ye.flags&10256)===0||Ma||(Ma=!0,Ol=He,Zd=x,To(kd,function(){return ma(),null})),x=(ye.flags&15990)!==0,(ye.subtreeFlags&15990)!==0||x?(x=Ft.T,Ft.T=null,O=Ro(),Rs(2),q=wn,wn|=4,If(u,ye),Gm(ye,u),Xy(u.containerInfo),u.current=ye,pd(u,ye.alternate,ye),Vd(),wn=q,Rs(O),Ft.T=x):u.current=ye,Ma?(Ma=!1,Qa=u,vc=E):Wm(u,He),He=u.pendingLanes,He===0&&(Dl=null),F(ye.stateNode),Ne(u),h!==null)for(R=u.onRecoverableError,ye=0;ye<h.length;ye++)He=h[ye],R(He.value,{componentStack:He.stack});return(vc&3)!==0&&ma(),He=u.pendingLanes,(E&4194218)!==0&&(He&42)!==0?u===Kd?Bu++:(Bu=0,Kd=u):Bu=0,Y(0),null}function Wm(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,Lf(h)))}function ma(){if(Qa!==null){var u=Qa,h=Ol;Ol=0;var x=he(vc),E=32>x?32:x;x=Ft.T;var R=Ro();try{if(Rs(E),Ft.T=null,Qa===null)var O=!1;else{E=Zd,Zd=null;var q=Qa,ee=vc;if(Qa=null,vc=0,(wn&6)!==0)throw Error(s(331));var ye=wn;if(wn|=4,vd(q.current),km(q,q.current,ee,E),wn=ye,Y(0,!1),tr&&typeof tr.onPostCommitFiberRoot=="function")try{tr.onPostCommitFiberRoot(Mi,q)}catch{}O=!0}return O}finally{Rs(R),Ft.T=x,Wm(u,h)}}return!1}function mu(u,h,x){h=fe(x,h),h=ou(u.stateNode,h,2),u=vt(u,h,2),u!==null&&(j(u,2),Ne(u))}function On(u,h,x){if(u.tag===3)mu(u,u,x);else for(;h!==null;){if(h.tag===3){mu(h,u,x);break}else if(h.tag===1){var E=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Dl===null||!Dl.has(E))){u=fe(x,u),x=Rm(2),E=vt(h,x,2),E!==null&&(Ey(x,E,h,u),j(E,2),Ne(E));break}}h=h.return}}function ec(u,h,x){var E=u.pingCache;if(E===null){E=u.pingCache=new Jr;var R=new Set;E.set(h,R)}else R=E.get(h),R===void 0&&(R=new Set,E.set(h,R));R.has(x)||(Xi=!0,R.add(x),u=Zm.bind(null,u,h,x),h.then(u,u))}function Zm(u,h,x){var E=u.pingCache;E!==null&&E.delete(h),u.pingedLanes|=u.suspendedLanes&x,u.warmLanes&=~x,Un===u&&(pn&x)===x&&(Yn===4||Yn===3&&(pn&62914560)===pn&&300>Yr()-ks?(wn&2)===0&&ms(u,0):ch|=x,Ka===pn&&(Ka=0)),Ne(u)}function ml(u,h){h===0&&(h=B()),u=Pe(u,h),u!==null&&(j(u,h),Ne(u))}function Eo(u){var h=u.memoizedState,x=0;h!==null&&(x=h.retryLane),ml(u,x)}function gl(u,h){var x=0;switch(u.tag){case 13:var E=u.stateNode,R=u.memoizedState;R!==null&&(x=R.retryLane);break;case 19:E=u.stateNode;break;case 22:E=u.stateNode._retryCache;break;default:throw Error(s(314))}E!==null&&E.delete(h),ml(u,x)}function To(u,h){return sh(u,h)}function Km(u,h,x,E){this.tag=u,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kf(u){return u=u.prototype,!(!u||!u.isReactComponent)}function $r(u,h){var x=u.alternate;return x===null?(x=t(u.tag,h,u.key,u.mode),x.elementType=u.elementType,x.type=u.type,x.stateNode=u.stateNode,x.alternate=u,u.alternate=x):(x.pendingProps=h,x.type=u.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=u.flags&31457280,x.childLanes=u.childLanes,x.lanes=u.lanes,x.child=u.child,x.memoizedProps=u.memoizedProps,x.memoizedState=u.memoizedState,x.updateQueue=u.updateQueue,h=u.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=u.sibling,x.index=u.index,x.ref=u.ref,x.refCleanup=u.refCleanup,x}function $f(u,h){u.flags&=31457282;var x=u.alternate;return x===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=x.childLanes,u.lanes=x.lanes,u.child=x.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=x.memoizedProps,u.memoizedState=x.memoizedState,u.updateQueue=x.updateQueue,u.type=x.type,h=x.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function Ha(u,h,x,E,R,O){var q=0;if(E=u,typeof u=="function")kf(u)&&(q=1);else if(typeof u=="string")q=_r&&Xn?th(u,x,ki.current)?26:Ga(u)?27:5:_r?th(u,x,ki.current)?26:5:Xn&&Ga(u)?27:5;else e:switch(u){case yl:return gi(x.children,R,O,h);case Yf:q=8,R|=24;break;case Md:return u=t(12,x,h,R|2),u.elementType=Md,u.lanes=O,u;case Ad:return u=t(13,x,h,R),u.elementType=Ad,u.lanes=O,u;case xu:return u=t(19,x,h,R),u.elementType=xu,u.lanes=O,u;case eg:return Xf(x,R,O,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case Wf:case ga:q=10;break e;case Jm:q=9;break e;case Zf:q=11;break e;case wd:q=14;break e;case qr:q=16,E=null;break e}q=29,x=Error(s(130,u===null?"null":typeof u,"")),E=null}return h=t(q,x,h,R),h.elementType=u,h.type=E,h.lanes=O,h}function gi(u,h,x,E){return u=t(7,u,E,h),u.lanes=x,u}function Xf(u,h,x,E){u=t(22,u,E,h),u.elementType=eg,u.lanes=x;var R={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var O=R._current;if(O===null)throw Error(s(456));if((R._pendingVisibility&2)===0){var q=Pe(O,2);q!==null&&(R._pendingVisibility|=2,Ji(q,O,2))}},attach:function(){var O=R._current;if(O===null)throw Error(s(456));if((R._pendingVisibility&2)!==0){var q=Pe(O,2);q!==null&&(R._pendingVisibility&=-3,Ji(q,O,2))}}};return u.stateNode=R,u}function Sd(u,h,x){return u=t(6,u,null,h),u.lanes=x,u}function Qm(u,h,x){return h=t(4,u.children!==null?u.children:[],u.key,h),h.lanes=x,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function Sb(u,h,x,E,R,O,q,ee){this.tag=1,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=vl,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=U(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=U(0),this.hiddenUpdates=U(null),this.identifierPrefix=E,this.onUncaughtError=R,this.onCaughtError=O,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function Gy(u,h,x,E,R,O,q,ee,ye,He,nt,ht){return u=new Sb(u,h,x,q,ee,ye,He,ht),h=1,O===!0&&(h|=24),O=t(3,null,null,h),u.current=O,O.stateNode=u,h=ol(),h.refCount++,u.pooledCache=h,h.refCount++,O.memoizedState={element:E,isDehydrated:x,cache:h},Ye(O),u}function Ui(u){return u?(u=El,u):El}function Ed(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(s(188)):(u=Object.keys(u).join(","),Error(s(268,u)));return u=_(h),u=u!==null?b(u):null,u===null?null:Su(u.stateNode)}function gu(u,h,x,E,R,O){R=Ui(R),E.context===null?E.context=R:E.pendingContext=R,E=yt(h),E.payload={element:x},O=O===void 0?null:O,O!==null&&(E.callback=O),x=vt(u,E,h),x!==null&&(Ji(x,u,h),st(x,u,h))}function yu(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var x=u.retryLane;u.retryLane=x!==0&&x<h?x:h}}function qf(u,h){yu(u,h),(u=u.alternate)&&yu(u,h)}var Kt={},vu=am(),xr=_q(),Td=Object.assign,Eb=Symbol.for("react.element"),jf=Symbol.for("react.transitional.element"),Xr=Symbol.for("react.portal"),yl=Symbol.for("react.fragment"),Yf=Symbol.for("react.strict_mode"),Md=Symbol.for("react.profiler"),Wf=Symbol.for("react.provider"),Jm=Symbol.for("react.consumer"),ga=Symbol.for("react.context"),Zf=Symbol.for("react.forward_ref"),Ad=Symbol.for("react.suspense"),xu=Symbol.for("react.suspense_list"),wd=Symbol.for("react.memo"),qr=Symbol.for("react.lazy"),eg=Symbol.for("react.offscreen"),ky=Symbol.for("react.memo_cache_sentinel"),Mo=Symbol.iterator,tg=Symbol.for("react.client.reference"),Ft=vu.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Va,Ao,tc=!1,_u=Array.isArray,ng=e.rendererVersion,Kf=e.rendererPackageName,bu=e.extraDevToolsConfig,Su=e.getPublicInstance,$y=e.getRootHostContext,Eu=e.getChildHostContext,Rd=e.prepareForCommit,Xy=e.resetAfterCommit,ig=e.createInstance,Qf=e.appendInitialChild,wo=e.finalizeInitialChildren,Qt=e.shouldSetTextContent,In=e.createTextInstance,zi=e.scheduleTimeout,Cd=e.cancelTimeout,vl=e.noTimeout,Fs=e.isPrimaryRenderer;e.warnsIfNotActing;var Gi=e.supportsMutation,jr=e.supportsPersistence,gs=e.supportsHydration,qy=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Ei=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Rs=e.setCurrentUpdatePriority,Ro=e.getCurrentUpdatePriority,jy=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Yy=e.shouldAttemptEagerTransition,Tb=e.detachDeletedInstance;e.requestPostPaintCallback;var sg=e.maySuspendCommit,Nd=e.preloadInstance,rg=e.startSuspendingCommit,Hs=e.suspendInstance,Pi=e.waitForCommitToBeReady,xl=e.NotPendingTransition,ya=e.HostTransitionContext,Dd=e.resetFormInstance;e.bindToConsole;var ag=e.supportsMicrotasks,Co=e.scheduleMicrotask,_l=e.supportsTestSelectors,og=e.findFiberRoot,lg=e.getBoundingRect,Wy=e.getTextContent,Tu=e.isHiddenSubtree,Zy=e.matchAccessibilityRole,Ky=e.setFocusIfFocusable,Qy=e.setupIntersectionObserver,Jy=e.appendChild,cg=e.appendChildToContainer,ev=e.commitTextUpdate,Mb=e.commitMount,tv=e.commitUpdate,nv=e.insertBefore,iv=e.insertInContainerBefore,ug=e.removeChild,sv=e.removeChildFromContainer,fg=e.resetTextContent,rv=e.hideInstance,av=e.hideTextInstance,ov=e.unhideInstance,Ab=e.unhideTextInstance,lv=e.clearContainer,Mu=e.cloneInstance,Jf=e.createContainerChildSet,hg=e.appendChildToContainerChildSet,Od=e.finalizeContainerChildren,Au=e.replaceContainerChildren,dg=e.cloneHiddenInstance,pg=e.cloneHiddenTextInstance,Ld=e.isSuspenseInstancePending,Ud=e.isSuspenseInstanceFallback,cv=e.getSuspenseInstanceFallbackErrorDetails,uv=e.registerSuspenseInstanceRetry,mg=e.canHydrateFormStateMarker,fv=e.isFormStateMarkerMatching,gg=e.getNextHydratableSibling,zd=e.getFirstHydratableChild,hv=e.getFirstHydratableChildWithinContainer,dv=e.getFirstHydratableChildWithinSuspenseInstance,wb=e.canHydrateInstance,yg=e.canHydrateTextInstance,pv=e.canHydrateSuspenseInstance,mv=e.hydrateInstance,vg=e.hydrateTextInstance,gv=e.hydrateSuspenseInstance,yv=e.getNextHydratableInstanceAfterSuspenseInstance,Rb=e.commitHydratedContainer,Cb=e.commitHydratedSuspenseInstance,vv=e.clearSuspenseBoundary,eh=e.clearSuspenseBoundaryFromContainer,Pd=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Id=e.validateHydratableInstance,xv=e.validateHydratableTextInstance,_r=e.supportsResources,th=e.isHostHoistableType,Bd=e.getHoistableRoot,xg=e.getResource,_v=e.acquireResource,nc=e.releaseResource,nh=e.hydrateHoistable,ih=e.mountHoistable,wu=e.unmountHoistable,Fd=e.createHoistableInstance,bv=e.prepareToCommitHoistables,Sv=e.mayResourceSuspendCommit,ic=e.preloadResource,Ev=e.suspendResource,Xn=e.supportsSingletons,va=e.resolveSingletonInstance,bl=e.clearSingleton,Tv=e.acquireSingletonInstance,Sl=e.releaseSingletonInstance,Ga=e.isHostSingletonType,Ti=[],No=-1,El={},Vs=Math.clz32?Math.clz32:D,Mv=Math.log,Av=Math.LN2,ka=128,sc=4194304,sh=xr.unstable_scheduleCallback,Hd=xr.unstable_cancelCallback,wv=xr.unstable_shouldYield,Vd=xr.unstable_requestPaint,Yr=xr.unstable_now,Gd=xr.unstable_ImmediatePriority,Rv=xr.unstable_UserBlockingPriority,kd=xr.unstable_NormalPriority,Nb=xr.unstable_IdlePriority,Cv=xr.log,es=xr.unstable_setDisableYieldValue,Mi=null,tr=null,nr=typeof Object.is=="function"?Object.is:Z,_g=new WeakMap,rc=[],ac=0,oc=null,Ru=0,br=[],Sr=0,Tl=null,xa=1,_a="",ki=M(null),Cu=M(null),$a=M(null),lc=M(null),ys=null,vs=null,En=!1,Wr=null,ts=!1,rh=Error(s(519)),Zr=[],cc=0,ba=0,ah=null,Do=null,uc=!1,Qn=!1,bg=!1,Nu=0,Du=null,fc=0,Er=0,hc=null,Oo=!1,dc=!1,Xa=Object.prototype.hasOwnProperty,Ou=Error(s(460)),oh=Error(s(474)),lh={then:function(){}},Ml=null,Al=null,wl=0,Rl=Hi(!0),qa=Hi(!1),Jn=M(null),Lu=M(0),Tr=M(null),qn=null,$i=M(0),Lo=0,nn=null,Lt=null,An=null,Kr=!1,pc=!1,Cl=!1,$d=0,mc=0,ns=null,Sa=0,Xd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},yi={readContext:hs,use:Ae,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useLayoutEffect:Vn,useInsertionEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useSyncExternalStore:Vn,useId:Vn};yi.useCacheRefresh=Vn,yi.useMemoCache=Vn,yi.useHostTransitionStatus=Vn,yi.useFormState=Vn,yi.useActionState=Vn,yi.useOptimistic=Vn;var Nl={readContext:hs,use:Ae,useCallback:function(u,h){return $().memoizedState=[u,h===void 0?null:h],u},useContext:hs,useEffect:nd,useImperativeHandle:function(u,h,x){x=x!=null?x.concat([u]):null,bf(4194308,4,id.bind(null,h,u),x)},useLayoutEffect:function(u,h){return bf(4194308,4,u,h)},useInsertionEffect:function(u,h){bf(4,2,u,h)},useMemo:function(u,h){var x=$();h=h===void 0?null:h;var E=u();if(Cl){W(!0);try{u()}finally{W(!1)}}return x.memoizedState=[E,h],E},useReducer:function(u,h,x){var E=$();if(x!==void 0){var R=x(h);if(Cl){W(!0);try{x(h)}finally{W(!1)}}}else R=h;return E.memoizedState=E.baseState=R,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:R},E.queue=u,u=u.dispatch=rd.bind(null,nn,u),[E.memoizedState,u]},useRef:function(u){var h=$();return u={current:u},h.memoizedState=u},useState:function(u){u=fn(u);var h=u.queue,x=wm.bind(null,nn,h);return h.dispatch=x,[u.memoizedState,x]},useDebugValue:nl,useDeferredValue:function(u,h){var x=$();return Tf(x,u,h)},useTransition:function(){var u=fn(!1);return u=eu.bind(null,nn,u.queue,!0,!1),$().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,x){var E=nn,R=$();if(En){if(x===void 0)throw Error(s(407));x=x()}else{if(x=h(),Un===null)throw Error(s(349));(pn&60)!==0||Rt(E,h,x)}R.memoizedState=x;var O={value:x,getSnapshot:h};return R.queue=O,nd(cn.bind(null,E,O,u),[u]),E.flags|=2048,zs(9,Et.bind(null,E,O,x,h),{destroy:void 0},null),x},useId:function(){var u=$(),h=Un.identifierPrefix;if(En){var x=_a,E=xa;x=(E&~(1<<32-Vs(E)-1)).toString(32)+x,h=":"+h+"R"+x,x=$d++,0<x&&(h+="H"+x.toString(32)),h+=":"}else x=Sa++,h=":"+h+"r"+x.toString(32)+":";return u.memoizedState=h},useCacheRefresh:function(){return $().memoizedState=Am.bind(null,nn)}};Nl.useMemoCache=ge,Nl.useHostTransitionStatus=Mf,Nl.useFormState=Gn,Nl.useActionState=Gn,Nl.useOptimistic=function(u){var h=$();h.memoizedState=h.baseState=u;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=x,h=nu.bind(null,nn,!0,x),x.dispatch=h,[u,h]};var Gs={readContext:hs,use:Ae,useCallback:Kl,useContext:hs,useEffect:Em,useImperativeHandle:sd,useInsertionEffect:by,useLayoutEffect:Ef,useMemo:Tm,useReducer:rt,useRef:Pa,useState:function(){return rt(je)},useDebugValue:nl,useDeferredValue:function(u,h){var x=ce();return Mm(x,Lt.memoizedState,u,h)},useTransition:function(){var u=rt(je)[0],h=ce().memoizedState;return[typeof u=="boolean"?u:Te(u),h]},useSyncExternalStore:Pt,useId:tu};Gs.useCacheRefresh=ho,Gs.useMemoCache=ge,Gs.useHostTransitionStatus=Mf,Gs.useFormState=us,Gs.useActionState=us,Gs.useOptimistic=function(u,h){var x=ce();return dn(x,Lt,u,h)};var Mr={readContext:hs,use:Ae,useCallback:Kl,useContext:hs,useEffect:Em,useImperativeHandle:sd,useInsertionEffect:by,useLayoutEffect:Ef,useMemo:Tm,useReducer:gt,useRef:Pa,useState:function(){return gt(je)},useDebugValue:nl,useDeferredValue:function(u,h){var x=ce();return Lt===null?Tf(x,u,h):Mm(x,Lt.memoizedState,u,h)},useTransition:function(){var u=gt(je)[0],h=ce().memoizedState;return[typeof u=="boolean"?u:Te(u),h]},useSyncExternalStore:Pt,useId:tu};Mr.useCacheRefresh=ho,Mr.useMemoCache=ge,Mr.useHostTransitionStatus=Mf,Mr.useFormState=Ki,Mr.useActionState=Ki,Mr.useOptimistic=function(u,h){var x=ce();return Lt!==null?dn(x,Lt,u,h):(x.baseState=u,[u,x.queue.dispatch])};var ja={isMounted:function(u){return(u=u._reactInternals)?g(u)===u:!1},enqueueSetState:function(u,h,x){u=u._reactInternals;var E=Si(),R=yt(E);R.payload=h,x!=null&&(R.callback=x),h=vt(u,R,E),h!==null&&(Ji(h,u,E),st(h,u,E))},enqueueReplaceState:function(u,h,x){u=u._reactInternals;var E=Si(),R=yt(E);R.tag=1,R.payload=h,x!=null&&(R.callback=x),h=vt(u,R,E),h!==null&&(Ji(h,u,E),st(h,u,E))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var x=Si(),E=yt(x);E.tag=2,h!=null&&(E.callback=h),h=vt(u,E,x),h!==null&&(Ji(h,u,x),st(h,u,x))}},qd=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},jd=Error(s(461)),jn=!1,Yd={dehydrated:null,treeContext:null,retryLane:0},Uo=M(null),Ea=null,Ar=null,Uu=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(x,E){u.push(E)}};this.abort=function(){h.aborted=!0,u.forEach(function(x){return x()})}},Nv=xr.unstable_scheduleCallback,Dv=xr.unstable_NormalPriority,ei={$$typeof:ga,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Sg=Ft.S;Ft.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&We(u,h),Sg!==null&&Sg(u,h)};var Ya=M(null),Wa=!1,vi=!1,Eg=!1,Ln=typeof WeakSet=="function"?WeakSet:Set,Yt=null,un=!1,Ot=null,en=!1,pi=null,wr=8192,zu={getCacheForType:function(u){var h=hs(ei),x=h.data.get(u);return x===void 0&&(x=u(),h.data.set(u,x)),x}},Pu=0,Qr=1,si=2,Ta=3,Za=4;if(typeof Symbol=="function"&&Symbol.for){var gc=Symbol.for;Pu=gc("selector.component"),Qr=gc("selector.has_pseudo_class"),si=gc("selector.role"),Ta=gc("selector.test_id"),Za=gc("selector.text")}var Jr=typeof WeakMap=="function"?WeakMap:Map,wn=0,Un=null,Ut=null,pn=0,kn=0,Cs=null,ea=!1,Rr=!1,Xi=!1,Ns=0,Yn=0,Cr=0,zo=0,ch=0,Nr=0,Ka=0,yc=null,xi=null,Wd=!1,ks=0,Iu=1/0,uh=null,Dl=null,Ma=!1,Qa=null,vc=0,Ol=0,Zd=null,Bu=0,Kd=null;return Kt.attemptContinuousHydration=function(u){if(u.tag===13){var h=Pe(u,67108864);h!==null&&Ji(h,u,67108864),qf(u,67108864)}},Kt.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=Si(),x=Pe(u,h);x!==null&&Ji(x,u,h),qf(u,h)}},Kt.attemptSynchronousHydration=function(u){switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=N(u.pendingLanes);if(h!==0){for(u.pendingLanes|=2,u.entangledLanes|=2;h;){var x=1<<31-Vs(h);u.entanglements[1]|=x,h&=~x}Ne(u),(wn&6)===0&&(Iu=Yr()+500,Y(0))}}break;case 13:h=Pe(u,2),h!==null&&Ji(h,u,2),Gf(),qf(u,2)}},Kt.batchedUpdates=function(u,h){return u(h)},Kt.createComponentSelector=function(u){return{$$typeof:Pu,value:u}},Kt.createContainer=function(u,h,x,E,R,O,q,ee,ye,He){return Gy(u,h,!1,null,x,E,O,q,ee,ye,He,null)},Kt.createHasPseudoClassSelector=function(u){return{$$typeof:Qr,value:u}},Kt.createHydrationContainer=function(u,h,x,E,R,O,q,ee,ye,He,nt,ht,mt){return u=Gy(x,E,!0,u,R,O,ee,ye,He,nt,ht,mt),u.context=Ui(null),x=u.current,E=Si(),R=yt(E),R.callback=h??null,vt(x,R,E),u.current.lanes=E,j(u,E),Ne(u),u},Kt.createPortal=function(u,h,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xr,key:E==null?null:""+E,children:u,containerInfo:h,implementation:x}},Kt.createRoleSelector=function(u){return{$$typeof:si,value:u}},Kt.createTestNameSelector=function(u){return{$$typeof:Ta,value:u}},Kt.createTextSelector=function(u){return{$$typeof:Za,value:u}},Kt.defaultOnCaughtError=function(u){console.error(u)},Kt.defaultOnRecoverableError=function(u){qd(u)},Kt.defaultOnUncaughtError=function(u){qd(u)},Kt.deferredUpdates=function(u){var h=Ft.T,x=Ro();try{return Rs(32),Ft.T=null,u()}finally{Rs(x),Ft.T=h}},Kt.discreteUpdates=function(u,h,x,E,R){var O=Ft.T,q=Ro();try{return Rs(2),Ft.T=null,u(h,x,E,R)}finally{Rs(q),Ft.T=O,wn===0&&(Iu=Yr()+500)}},Kt.findAllNodes=Hf,Kt.findBoundingRects=function(u,h){if(!_l)throw Error(s(363));h=Hf(u,h),u=[];for(var x=0;x<h.length;x++)u.push(lg(h[x]));for(h=u.length-1;0<h;h--){x=u[h];for(var E=x.x,R=E+x.width,O=x.y,q=O+x.height,ee=h-1;0<=ee;ee--)if(h!==ee){var ye=u[ee],He=ye.x,nt=He+ye.width,ht=ye.y,mt=ht+ye.height;if(E>=He&&O>=ht&&R<=nt&&q<=mt){u.splice(h,1);break}else if(E!==He||x.width!==ye.width||mt<O||ht>q){if(!(O!==ht||x.height!==ye.height||nt<E||He>R)){He>E&&(ye.width+=He-E,ye.x=E),nt<R&&(ye.width=R-He),u.splice(h,1);break}}else{ht>O&&(ye.height+=ht-O,ye.y=O),mt<q&&(ye.height=q-ht),u.splice(h,1);break}}}return u},Kt.findHostInstance=Ed,Kt.findHostInstanceWithNoPortals=function(u){return u=_(u),u=u!==null?A(u):null,u===null?null:Su(u.stateNode)},Kt.findHostInstanceWithWarning=function(u){return Ed(u)},Kt.flushPassiveEffects=ma,Kt.flushSyncFromReconciler=function(u){var h=wn;wn|=1;var x=Ft.T,E=Ro();try{if(Rs(2),Ft.T=null,u)return u()}finally{Rs(E),Ft.T=x,wn=h,(wn&6)===0&&Y(0)}},Kt.flushSyncWork=Gf,Kt.focusWithin=function(u,h){if(!_l)throw Error(s(363));for(u=hu(u),h=Js(u,h),h=Array.from(h),u=0;u<h.length;){var x=h[u++],E=x.tag;if(!Tu(x)){if((E===5||E===26||E===27)&&Ky(x.stateNode))return!0;for(x=x.child;x!==null;)h.push(x),x=x.sibling}}return!1},Kt.getFindAllNodesFailureDescription=function(u,h){if(!_l)throw Error(s(363));var x=0,E=[];u=[hu(u),0];for(var R=0;R<u.length;){var O=u[R++],q=O.tag,ee=u[R++],ye=h[ee];if((q!==5&&q!==26&&q!==27||!Tu(O))&&(fl(O,ye)&&(E.push(Xm(ye)),ee++,ee>x&&(x=ee)),ee<h.length))for(O=O.child;O!==null;)u.push(O,ee),O=O.sibling}if(x<h.length){for(u=[];x<h.length;x++)u.push(Xm(h[x]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},Kt.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 27:case 5:return Su(u.child.stateNode);default:return u.child.stateNode}},Kt.injectIntoDevTools=function(){var u={bundleType:0,version:ng,rendererPackageName:Kf,currentDispatcherRef:Ft,findFiberByHostInstance:qy,reconcilerVersion:"19.0.0"};if(bu!==null&&(u.rendererConfig=bu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{Mi=h.inject(u),tr=h}catch{}u=!!h.checkDCE}}return u},Kt.isAlreadyRendering=function(){return!1},Kt.observeVisibleRects=function(u,h,x,E){if(!_l)throw Error(s(363));u=Hf(u,h);var R=Qy(u,x,E).disconnect;return{disconnect:function(){R()}}},Kt.shouldError=function(){return null},Kt.shouldSuspend=function(){return!1},Kt.startHostTransition=function(u,h,x,E){if(u.tag!==5)throw Error(s(476));var R=Ia(u).queue;eu(u,R,h,xl,x===null?n:function(){var O=Ia(u).next.queue;return il(u,O,{},Si()),x(E)})},Kt.updateContainer=function(u,h,x,E){var R=h.current,O=Si();return gu(R,O,u,h,x,E),O},Kt.updateContainerSync=function(u,h,x,E){return h.tag===0&&ma(),gu(h.current,2,u,h,x,E),2},Kt},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(AE)),AE.exports}var JC;function Sq(){return JC||(JC=1,ME.exports=bq()),ME.exports}var Eq=Sq();const Tq=Kh(Eq);var CE={exports:{}},NE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eN;function Mq(){return eN||(eN=1,function(i){function e(F,W){var Z=F.length;F.push(W);e:for(;0<Z;){var fe=Z-1>>>1,X=F[fe];if(0<s(X,W))F[fe]=W,F[Z]=X,Z=fe;else break e}}function t(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var W=F[0],Z=F.pop();if(Z!==W){F[0]=Z;e:for(var fe=0,X=F.length,ie=X>>>1;fe<ie;){var Ee=2*(fe+1)-1,Ue=F[Ee],re=Ee+1,Ce=F[re];if(0>s(Ue,Z))re<X&&0>s(Ce,Ue)?(F[fe]=Ce,F[re]=Z,fe=re):(F[fe]=Ue,F[Ee]=Z,fe=Ee);else if(re<X&&0>s(Ce,Z))F[fe]=Ce,F[re]=Z,fe=re;else break e}}return W}function s(F,W){var Z=F.sortIndex-W.sortIndex;return Z!==0?Z:F.id-W.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var f=[],d=[],m=1,g=null,v=3,_=!1,b=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(F){for(var W=t(d);W!==null;){if(W.callback===null)n(d);else if(W.startTime<=F)n(d),W.sortIndex=W.expirationTime,e(f,W);else break;W=t(d)}}function N(F){if(A=!1,D(F),!b)if(t(f)!==null)b=!0,de();else{var W=t(d);W!==null&&he(N,W.startTime-F)}}var I=!1,L=-1,P=5,G=-1;function B(){return!(i.unstable_now()-G<P)}function U(){if(I){var F=i.unstable_now();G=F;var W=!0;try{e:{b=!1,A&&(A=!1,T(L),L=-1),_=!0;var Z=v;try{t:{for(D(F),g=t(f);g!==null&&!(g.expirationTime>F&&B());){var fe=g.callback;if(typeof fe=="function"){g.callback=null,v=g.priorityLevel;var X=fe(g.expirationTime<=F);if(F=i.unstable_now(),typeof X=="function"){g.callback=X,D(F),W=!0;break t}g===t(f)&&n(f),D(F)}else n(f);g=t(f)}if(g!==null)W=!0;else{var ie=t(d);ie!==null&&he(N,ie.startTime-F),W=!1}}break e}finally{g=null,v=Z,_=!1}W=void 0}}finally{W?j():I=!1}}}var j;if(typeof C=="function")j=function(){C(U)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ne=ae.port2;ae.port1.onmessage=U,j=function(){ne.postMessage(null)}}else j=function(){M(U,0)};function de(){I||(I=!0,j())}function he(F,W){L=M(function(){F(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(F){F.callback=null},i.unstable_continueExecution=function(){b||_||(b=!0,de())},i.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<F?Math.floor(1e3/F):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(f)},i.unstable_next=function(F){switch(v){case 1:case 2:case 3:var W=3;break;default:W=v}var Z=v;v=W;try{return F()}finally{v=Z}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=v;v=F;try{return W()}finally{v=Z}},i.unstable_scheduleCallback=function(F,W,Z){var fe=i.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?fe+Z:fe):Z=fe,F){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Z+X,F={id:m++,callback:W,priorityLevel:F,startTime:Z,expirationTime:X,sortIndex:-1},Z>fe?(F.sortIndex=Z,e(d,F),t(f)===null&&F===t(d)&&(A?(T(L),L=-1):A=!0,he(N,Z-fe))):(F.sortIndex=X,e(f,F),b||_||(b=!0,de())),F},i.unstable_shouldYield=B,i.unstable_wrapCallback=function(F){var W=v;return function(){var Z=v;v=W;try{return F.apply(this,arguments)}finally{v=Z}}}}(NE)),NE}var tN;function Aq(){return tN||(tN=1,CE.exports=Mq()),CE.exports}var nN=Aq();const wq=i=>typeof i=="object"&&typeof i.then=="function",Ph=[];function zL(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let s=0;s<n;s++)if(!t(i[s],e[s]))return!1;return!0}function PL(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const r of Ph)if(zL(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!t)throw r.promise}const s={keys:e,equal:n.equal,remove:()=>{const r=Ph.indexOf(s);r!==-1&&Ph.splice(r,1)},promise:(wq(i)?i:i(...e)).then(r=>{s.response=r,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(r=>s.error=r)};if(Ph.push(s),!t)throw s.promise}const Rq=(i,e,t)=>PL(i,e,!1,t),Cq=(i,e,t)=>void PL(i,e,!0,t),Nq=i=>{if(i===void 0||i.length===0)Ph.splice(0,Ph.length);else{const e=Ph.find(t=>zL(i,t.keys,t.equal));e&&e.remove()}};function uA(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const s=uA(n,e,t);if(s)return s;n=e?null:n.sibling}}function IL(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const fA=IL(V.createContext(null));class BL extends V.Component{render(){return V.createElement(fA.Provider,{value:this._reactInternals},this.props.children)}}function FL(){const i=V.useContext(fA);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=V.useId();return V.useMemo(()=>{for(const t of[i,i==null?void 0:i.alternate]){if(!t)continue;const n=uA(t,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===e)return!0;r=r.next}});if(n)return n}},[i,e])}const Dq=Symbol.for("react.context"),Oq=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===Dq;function Lq(){const i=FL(),[e]=V.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;Oq(n)&&n!==fA&&!e.has(n)&&e.set(n,V.use(IL(n))),t=t.return}return e}function Uq(){const i=Lq();return V.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>V.createElement(e,null,V.createElement(t.Provider,{...n,value:i.get(t)})),e=>V.createElement(BL,{...e})),[i])}function HL(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const VL=i=>i&&i.isOrthographicCamera,zq=i=>i&&i.hasOwnProperty("current"),Pq=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),dy=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?V.useLayoutEffect:V.useEffect;function GL(i){const e=V.useRef(i);return dy(()=>void(e.current=i),[i]),e}function Iq(){const i=FL(),e=Uq();return V.useMemo(()=>({children:t})=>{const s=!!uA(i,!0,r=>r.type===V.StrictMode)?V.StrictMode:V.Fragment;return Ze.jsx(s,{children:Ze.jsx(e,{children:t})})},[i,e])}function Bq({set:i}){return dy(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const Fq=(i=>(i=class extends V.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function kL(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function Tp(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const _i={obj:i=>i===Object(i)&&!_i.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(_i.str(i)||_i.num(i)||_i.boo(i))return i===e;const r=_i.obj(i);if(r&&n==="reference")return i===e;const o=_i.arr(i);if(o&&t==="reference")return i===e;if((o||r)&&i===e)return!0;let c;for(c in i)if(!(c in e))return!1;if(r&&t==="shallow"&&n==="shallow"){for(c in s?e:i)if(!_i.equ(i[c],e[c],{strict:s,objects:"reference"}))return!1}else for(c in s?e:i)if(i[c]!==e[c])return!1;if(_i.und(c)){if(o&&i.length===0&&e.length===0||r&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function Hq(i){const e={nodes:{},materials:{},meshes:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function Vq(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const $L=["children","key","ref"];function Gq(i){const e={};for(const t in i)$L.includes(t)||(e[t]=i[t]);return e}function f1(i,e,t,n){const s=i;let r=s==null?void 0:s.__r3f;return r||(r={root:e,type:t,parent:null,children:[],props:Gq(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function q0(i,e){let t=i[e];if(!e.includes("-"))return{root:i,key:e,target:t};t=i;for(const s of e.split("-")){var n;e=s,i=t,t=(n=t)==null?void 0:n[e]}return{root:i,key:e,target:t}}const iN=/-\d+$/;function h1(i,e){if(_i.str(e.props.attach)){if(iN.test(e.props.attach)){const s=e.props.attach.replace(iN,""),{root:r,key:o}=q0(i.object,s);Array.isArray(r[o])||(r[o]=[])}const{root:t,key:n}=q0(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else _i.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function d1(i,e){if(_i.str(e.props.attach)){const{root:t,key:n}=q0(i.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[n]:t[n]=s}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const HT=[...$L,"args","dispose","attach","object","onUpdate","dispose"],sN=new Map;function kq(i){let e=sN.get(i.constructor);try{e||(e=new i.constructor,sN.set(i.constructor,e))}catch{}return e}function $q(i,e){const t={};for(const n in e)if(!HT.includes(n)&&!_i.equ(e[n],i.props[n])){t[n]=e[n];for(const s in e)s.startsWith(`${n}-`)&&(t[s]=e[s])}for(const n in i.props){if(HT.includes(n)||e.hasOwnProperty(n))continue;const{root:s,key:r}=q0(i.object,n);if(s.constructor&&s.constructor.length===0){const o=kq(s);_i.und(o)||(t[r]=o[r])}else t[r]=0}return t}const Xq=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],qq=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function of(i,e){var t;const n=i.__r3f,s=n&&HL(n).getState(),r=n==null?void 0:n.eventCount;for(const c in e){let f=e[c];if(HT.includes(c))continue;if(n&&qq.test(c)){typeof f=="function"?n.handlers[c]=f:delete n.handlers[c],n.eventCount=Object.keys(n.handlers).length;continue}if(f===void 0)continue;let{root:d,key:m,target:g}=q0(i,c);if(g instanceof Kp&&f instanceof Kp)g.mask=f.mask;else if(g instanceof lt&&Pq(f))g.set(f);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&f!=null&&f.constructor&&g.constructor===f.constructor)g.copy(f);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(f))typeof g.fromArray=="function"?g.fromArray(f):g.set(...f);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof f=="number")typeof g.setScalar=="function"?g.setScalar(f):g.set(f);else{var o;d[m]=f,s&&!s.linear&&Xq.includes(m)&&(o=d[m])!=null&&o.isTexture&&d[m].format===ur&&d[m].type===Wo&&(d[m].colorSpace=ji)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(t=n.object)!=null&&t.isObject3D&&r!==n.eventCount){const c=n.object,f=s.internal.interaction.indexOf(c);f>-1&&s.internal.interaction.splice(f,1),n.eventCount&&c.raycast!==null&&s.internal.interaction.push(c)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&bm(n),i}function bm(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function jq(i,e){i.manual||(VL(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const Ir=i=>i==null?void 0:i.isObject3D;function Xx(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function XL(i,e,t,n){const s=t.get(e);s&&(t.delete(e),t.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function Yq(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,s)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((n,s)=>{XL(t.capturedMap,e,n,s)})}function Wq(i){function e(f){const{internal:d}=i.getState(),m=f.offsetX-d.initialClick[0],g=f.offsetY-d.initialClick[1];return Math.round(Math.sqrt(m*m+g*g))}function t(f){return f.filter(d=>["Move","Over","Enter","Out","Leave"].some(m=>{var g;return(g=d.__r3f)==null?void 0:g.handlers["onPointer"+m]}))}function n(f,d){const m=i.getState(),g=new Set,v=[],_=d?d(m.internal.interaction):m.internal.interaction;for(let T=0;T<_.length;T++){const C=Tp(_[T]);C&&(C.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(f,m);function b(T){const C=Tp(T);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var D;C.events.compute==null||C.events.compute(f,C,(D=C.previousRoot)==null?void 0:D.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(T,!0):[]}let A=_.flatMap(b).sort((T,C)=>{const D=Tp(T.object),N=Tp(C.object);return!D||!N?T.distance-C.distance:N.events.priority-D.events.priority||T.distance-C.distance}).filter(T=>{const C=Xx(T);return g.has(C)?!1:(g.add(C),!0)});m.events.filter&&(A=m.events.filter(A,m));for(const T of A){let C=T.object;for(;C;){var M;(M=C.__r3f)!=null&&M.eventCount&&v.push({...T,eventObject:C}),C=C.parent}}if("pointerId"in f&&m.internal.capturedMap.has(f.pointerId))for(let T of m.internal.capturedMap.get(f.pointerId).values())g.has(Xx(T.intersection))||v.push(T.intersection);return v}function s(f,d,m,g){if(f.length){const v={stopped:!1};for(const _ of f){let b=Tp(_.object);if(b||_.object.traverseAncestors(A=>{const M=Tp(A);if(M)return b=M,!1}),b){const{raycaster:A,pointer:M,camera:T,internal:C}=b,D=new K(M.x,M.y,0).unproject(T),N=B=>{var U,j;return(U=(j=C.capturedMap.get(B))==null?void 0:j.has(_.eventObject))!=null?U:!1},I=B=>{const U={intersection:_,target:d.target};C.capturedMap.has(B)?C.capturedMap.get(B).set(_.eventObject,U):C.capturedMap.set(B,new Map([[_.eventObject,U]])),d.target.setPointerCapture(B)},L=B=>{const U=C.capturedMap.get(B);U&&XL(C.capturedMap,_.eventObject,U,B)};let P={};for(let B in d){let U=d[B];typeof U!="function"&&(P[B]=U)}let G={..._,...P,pointer:M,intersections:f,stopped:v.stopped,delta:m,unprojectedPoint:D,ray:A.ray,camera:T,stopPropagation(){const B="pointerId"in d&&C.capturedMap.get(d.pointerId);if((!B||B.has(_.eventObject))&&(G.stopped=v.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(U=>U.eventObject===_.eventObject))){const U=f.slice(0,f.indexOf(_));r([...U,_])}},target:{hasPointerCapture:N,setPointerCapture:I,releasePointerCapture:L},currentTarget:{hasPointerCapture:N,setPointerCapture:I,releasePointerCapture:L},nativeEvent:d};if(g(G),v.stopped===!0)break}}}return f}function r(f){const{internal:d}=i.getState();for(const m of d.hovered.values())if(!f.length||!f.find(g=>g.object===m.object&&g.index===m.index&&g.instanceId===m.instanceId)){const v=m.eventObject.__r3f;if(d.hovered.delete(Xx(m)),v!=null&&v.eventCount){const _=v.handlers,b={...m,intersections:f};_.onPointerOut==null||_.onPointerOut(b),_.onPointerLeave==null||_.onPointerLeave(b)}}}function o(f,d){for(let m=0;m<d.length;m++){const g=d[m].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(f)}}function c(f){switch(f){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return d=>{const{internal:m}=i.getState();"pointerId"in d&&m.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(d.pointerId)&&(m.capturedMap.delete(d.pointerId),r([]))})}}return function(m){const{onPointerMissed:g,internal:v}=i.getState();v.lastEvent.current=m;const _=f==="onPointerMove",b=f==="onClick"||f==="onContextMenu"||f==="onDoubleClick",M=n(m,_?t:void 0),T=b?e(m):0;f==="onPointerDown"&&(v.initialClick=[m.offsetX,m.offsetY],v.initialHits=M.map(D=>D.eventObject)),b&&!M.length&&T<=2&&(o(m,v.interaction),g&&g(m)),_&&r(M);function C(D){const N=D.eventObject,I=N.__r3f;if(!(I!=null&&I.eventCount))return;const L=I.handlers;if(_){if(L.onPointerOver||L.onPointerEnter||L.onPointerOut||L.onPointerLeave){const P=Xx(D),G=v.hovered.get(P);G?G.stopped&&D.stopPropagation():(v.hovered.set(P,D),L.onPointerOver==null||L.onPointerOver(D),L.onPointerEnter==null||L.onPointerEnter(D))}L.onPointerMove==null||L.onPointerMove(D)}else{const P=L[f];P?(!b||v.initialHits.includes(N))&&(o(m,v.interaction.filter(G=>!v.initialHits.includes(G))),P(D)):b&&v.initialHits.includes(N)&&o(m,v.interaction.filter(G=>!v.initialHits.includes(G)))}}s(M,m,T,C)}}return{handlePointer:c}}const rN=i=>!!(i!=null&&i.render),qL=V.createContext(null),Zq=(i,e)=>{const t=vq((c,f)=>{const d=new K,m=new K,g=new K;function v(T=f().camera,C=m,D=f().size){const{width:N,height:I,top:L,left:P}=D,G=N/I;C.isVector3?g.copy(C):g.set(...C);const B=T.getWorldPosition(d).distanceTo(g);if(VL(T))return{width:N/T.zoom,height:I/T.zoom,top:L,left:P,factor:1,distance:B,aspect:G};{const U=T.fov*Math.PI/180,j=2*Math.tan(U/2)*B,ae=j*(N/I);return{width:ae,height:j,top:L,left:P,factor:N/ae,distance:B,aspect:G}}}let _;const b=T=>c(C=>({performance:{...C.performance,current:T}})),A=new Xe;return{set:c,get:f,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(T=1)=>i(f(),T),advance:(T,C)=>e(T,C,f()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new rA,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const T=f();_&&clearTimeout(_),T.performance.current!==T.performance.min&&b(T.performance.min),_=setTimeout(()=>b(f().performance.max),T.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:T=>c(C=>({...C,events:{...C.events,...T}})),setSize:(T,C,D=0,N=0)=>{const I=f().camera,L={width:T,height:C,top:D,left:N};c(P=>({size:L,viewport:{...P.viewport,...v(I,m,L)}}))},setDpr:T=>c(C=>{const D=kL(T);return{viewport:{...C.viewport,dpr:D,initialDpr:C.viewport.initialDpr||D}}}),setFrameloop:(T="always")=>{const C=f().clock;C.stop(),C.elapsedTime=0,T!=="never"&&(C.start(),C.elapsedTime=0),c(()=>({frameloop:T}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:V.createRef(),active:!1,frames:0,priority:0,subscribe:(T,C,D)=>{const N=f().internal;return N.priority=N.priority+(C>0?1:0),N.subscribers.push({ref:T,priority:C,store:D}),N.subscribers=N.subscribers.sort((I,L)=>I.priority-L.priority),()=>{const I=f().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(C>0?1:0),I.subscribers=I.subscribers.filter(L=>L.ref!==T))}}}}}),n=t.getState();let s=n.size,r=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:c,size:f,viewport:d,gl:m,set:g}=t.getState();if(f.width!==s.width||f.height!==s.height||d.dpr!==r){s=f,r=d.dpr,jq(c,f),d.dpr>0&&m.setPixelRatio(d.dpr);const v=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(f.width,f.height,v)}c!==o&&(o=c,g(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>i(c)),t};function jL(){const i=V.useContext(qL);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function YL(i=t=>t,e){return jL()(i,e)}function WL(i,e=0){const t=jL(),n=t.getState().internal.subscribe,s=GL(i);return dy(()=>n(s,e,t),[e,n,t]),null}const aN=new WeakMap,Kq=i=>{var e;return typeof i=="function"&&(i==null||(e=i.prototype)==null?void 0:e.constructor)===i};function ZL(i,e){return function(t,...n){let s;return Kq(t)?(s=aN.get(t),s||(s=new t,aN.set(t,s))):s=t,i&&i(s),Promise.all(n.map(r=>new Promise((o,c)=>s.load(r,f=>{Ir(f==null?void 0:f.scene)&&Object.assign(f,Hq(f.scene)),o(f)},e,f=>c(new Error(`Could not load ${r}: ${f==null?void 0:f.message}`))))))}}function Sm(i,e,t,n){const s=Array.isArray(e)?e:[e],r=Rq(ZL(t,n),[i,...s],{equal:_i.equ});return Array.isArray(e)?r:r[0]}Sm.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return Cq(ZL(t),[i,...n])};Sm.clear=function(i,e){const t=Array.isArray(e)?e:[e];return Nq([i,...t])};function Qq(i){const e=Tq(i);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:V.version}),e}const KL=0,nm={},Jq=/^three(?=[A-Z])/,cb=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let ej=0;const tj=i=>typeof i=="function";function nj(i){if(tj(i)){const e=`${ej++}`;return nm[e]=i,e}else Object.assign(nm,i)}function QL(i,e){const t=cb(i),n=nm[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function ij(i,e,t){var n;return i=cb(i)in nm?i:i.replace(Jq,""),QL(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,f1(e.object,t,i,e)}function sj(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?d1(i.parent,i):Ir(i.object)&&(i.object.visible=!1),i.isHidden=!0,bm(i)}}function JL(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?h1(i.parent,i):Ir(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,bm(i)}}function hA(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var s,r;const o=nm[cb(e.type)];e.object=(s=e.props.object)!=null?s:new o(...(r=e.props.args)!=null?r:[]),e.object.__r3f=e}if(of(e.object,e.props),e.props.attach)h1(i,e);else if(Ir(e.object)&&Ir(i.object)){const o=i.object.children.indexOf(t==null?void 0:t.object);if(t&&o!==-1){const c=i.object.children.indexOf(e.object);if(c!==-1){i.object.children.splice(c,1);const f=c<o?o-1:o;i.object.children.splice(f,0,e.object)}else e.object.parent=i.object,i.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const o of e.children)hA(e,o);bm(e)}}function DE(i,e){e&&(e.parent=i,i.children.push(e),hA(i,e))}function oN(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),hA(i,e,t)}function eU(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():nN.unstable_scheduleCallback(nN.unstable_IdlePriority,e)}}function VT(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?d1(i,e):Ir(e.object)&&Ir(i.object)&&(i.object.remove(e.object),Yq(HL(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let r=e.children.length-1;r>=0;r--){const o=e.children[r];VT(e,o,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&eU(e.object),t===void 0&&bm(e)}function rj(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const l_=[];function aj(){for(const[t]of l_){const n=t.parent;if(n){t.props.attach?d1(n,t):Ir(t.object)&&Ir(n.object)&&n.object.remove(t.object);for(const s of t.children)s.props.attach?d1(t,s):Ir(s.object)&&Ir(t.object)&&t.object.remove(s.object)}t.isHidden&&JL(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&eU(t.object)}for(const[t,n,s]of l_){t.props=n;const r=t.parent;if(r){var i,e;const o=nm[cb(t.type)];t.object=(i=t.props.object)!=null?i:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,rj(s,t.object),of(t.object,t.props),t.props.attach?h1(r,t):Ir(t.object)&&Ir(r.object)&&r.object.add(t.object);for(const c of t.children)c.props.attach?h1(t,c):Ir(c.object)&&Ir(t.object)&&t.object.add(c.object);bm(t)}}l_.length=0}const OE=()=>{},lN={};let qx=KL;const oj=0,lj=4,GT=Qq({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:ij,removeChild:VT,appendChild:DE,appendInitialChild:DE,insertBefore:oN,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||DE(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||VT(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||oN(n,e,t)},getRootHostContext:()=>lN,getChildHostContext:()=>lN,commitUpdate(i,e,t,n,s){var r,o,c;QL(e,n);let f=!1;if((i.type==="primitive"&&t.object!==n.object||((r=n.args)==null?void 0:r.length)!==((o=t.args)==null?void 0:o.length)||(c=n.args)!=null&&c.some((m,g)=>{var v;return m!==((v=t.args)==null?void 0:v[g])}))&&(f=!0),f)l_.push([i,{...n},s]);else{const m=$q(i,n);Object.keys(m).length&&(Object.assign(i.props,m),of(i.object,m))}(s.sibling===null||(s.flags&lj)===oj)&&aj()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>f1(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:sj,unhideInstance:JL,createTextInstance:OE,hideTextInstance:OE,unhideTextInstance:OE,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:V.createContext(null),setCurrentUpdatePriority(i){qx=i},getCurrentUpdatePriority(){return qx},resolveUpdatePriority(){var i;if(qx!==KL)return qx;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return o_.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return o_.ContinuousEventPriority;default:return o_.DefaultEventPriority}},resetFormInstance(){}}),Zh=new Map,Mp={objects:"shallow",strict:!1};function cj(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:s,left:r}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:s,left:r}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function uj(i){const e=Zh.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=n||Zq(XT,uN),o=t||GT.createContainer(r,o_.ConcurrentRoot,null,!1,null,"",s,s,s,null);e||Zh.set(i,{fiber:o,store:r});let c,f,d=!1,m=null;return{async configure(g={}){let v;m=new Promise(ie=>v=ie);let{gl:_,size:b,scene:A,events:M,onCreated:T,shadows:C=!1,linear:D=!1,flat:N=!1,legacy:I=!1,orthographic:L=!1,frameloop:P="always",dpr:G=[1,2],performance:B,raycaster:U,camera:j,onPointerMissed:ae}=g,ne=r.getState(),de=ne.gl;if(!ne.gl){const ie={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},Ee=typeof _=="function"?await _(ie):_;rN(Ee)?de=Ee:de=new UL({...ie,..._}),ne.set({gl:de})}let he=ne.raycaster;he||ne.set({raycaster:he=new ML});const{params:F,...W}=U||{};if(_i.equ(W,he,Mp)||of(he,{...W}),_i.equ(F,he.params,Mp)||of(he,{params:{...he.params,...F}}),!ne.camera||ne.camera===f&&!_i.equ(f,j,Mp)){f=j;const ie=j==null?void 0:j.isCamera,Ee=ie?j:L?new xm(0,0,0,0,.1,1e3):new _s(75,0,.1,1e3);ie||(Ee.position.z=5,j&&(of(Ee,j),Ee.manual||("aspect"in j||"left"in j||"right"in j||"bottom"in j||"top"in j)&&(Ee.manual=!0,Ee.updateProjectionMatrix())),!ne.camera&&!(j!=null&&j.rotation)&&Ee.lookAt(0,0,0)),ne.set({camera:Ee}),he.camera=Ee}if(!ne.scene){let ie;A!=null&&A.isScene?(ie=A,f1(ie,r,"",{})):(ie=new zM,f1(ie,r,"",{}),A&&of(ie,A)),ne.set({scene:ie})}M&&!ne.events.handlers&&ne.set({events:M(r)});const Z=cj(i,b);if(_i.equ(Z,ne.size,Mp)||ne.setSize(Z.width,Z.height,Z.top,Z.left),G&&ne.viewport.dpr!==kL(G)&&ne.setDpr(G),ne.frameloop!==P&&ne.setFrameloop(P),ne.onPointerMissed||ne.set({onPointerMissed:ae}),B&&!_i.equ(B,ne.performance,Mp)&&ne.set(ie=>({performance:{...ie.performance,...B}})),!ne.xr){var fe;const ie=(re,Ce)=>{const Be=r.getState();Be.frameloop!=="never"&&uN(re,!0,Be,Ce)},Ee=()=>{const re=r.getState();re.gl.xr.enabled=re.gl.xr.isPresenting,re.gl.xr.setAnimationLoop(re.gl.xr.isPresenting?ie:null),re.gl.xr.isPresenting||XT(re)},Ue={connect(){const re=r.getState().gl;re.xr.addEventListener("sessionstart",Ee),re.xr.addEventListener("sessionend",Ee)},disconnect(){const re=r.getState().gl;re.xr.removeEventListener("sessionstart",Ee),re.xr.removeEventListener("sessionend",Ee)}};typeof((fe=de.xr)==null?void 0:fe.addEventListener)=="function"&&Ue.connect(),ne.set({xr:Ue})}if(de.shadowMap){const ie=de.shadowMap.enabled,Ee=de.shadowMap.type;if(de.shadowMap.enabled=!!C,_i.boo(C))de.shadowMap.type=v0;else if(_i.str(C)){var X;const Ue={basic:UD,percentage:N1,soft:v0,variance:Go};de.shadowMap.type=(X=Ue[C])!=null?X:v0}else _i.obj(C)&&Object.assign(de.shadowMap,C);(ie!==de.shadowMap.enabled||Ee!==de.shadowMap.type)&&(de.shadowMap.needsUpdate=!0)}return vn.enabled=!I,d||(de.outputColorSpace=D?qs:ji,de.toneMapping=N?Fl:xM),ne.legacy!==I&&ne.set(()=>({legacy:I})),ne.linear!==D&&ne.set(()=>({linear:D})),ne.flat!==N&&ne.set(()=>({flat:N})),_&&!_i.fun(_)&&!rN(_)&&!_i.equ(_,de,Mp)&&of(de,_),c=T,d=!0,v(),this},render(g){return!d&&!m&&this.configure(),m.then(()=>{GT.updateContainer(Ze.jsx(fj,{store:r,children:g,onCreated:c,rootElement:i}),o,null,()=>{})}),r},unmount(){tU(i)}}}function fj({store:i,children:e,onCreated:t,rootElement:n}){return dy(()=>{const s=i.getState();s.set(r=>({internal:{...r.internal,active:!0}})),t&&t(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),Ze.jsx(qL.Provider,{value:i,children:e})}function tU(i,e){const t=Zh.get(i),n=t==null?void 0:t.fiber;if(n){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),GT.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var r,o,c,f;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(o=r.renderLists)==null||o.dispose==null||o.dispose(),(c=s.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(f=s.gl)!=null&&f.xr&&s.xr.disconnect(),Vq(s.scene),Zh.delete(i)}catch{}},500)})}}const hj=new Set,dj=new Set,pj=new Set;function LE(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function w0(i,e){switch(i){case"before":return LE(hj,e);case"after":return LE(dj,e);case"tail":return LE(pj,e)}}let UE,zE;function kT(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),UE=e.internal.subscribers;for(let s=0;s<UE.length;s++)zE=UE[s],zE.ref.current(zE.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let p1=!1,$T=!1,PE,cN,Ap;function nU(i){cN=requestAnimationFrame(nU),p1=!0,PE=0,w0("before",i),$T=!0;for(const t of Zh.values()){var e;Ap=t.store.getState(),Ap.internal.active&&(Ap.frameloop==="always"||Ap.internal.frames>0)&&!((e=Ap.gl.xr)!=null&&e.isPresenting)&&(PE+=kT(i,Ap))}if($T=!1,w0("after",i),PE===0)return w0("tail",i),p1=!1,cancelAnimationFrame(cN)}function XT(i,e=1){var t;if(!i)return Zh.forEach(n=>XT(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):$T?i.internal.frames=2:i.internal.frames=1,p1||(p1=!0,requestAnimationFrame(nU)))}function uN(i,e=!0,t,n){if(e&&w0("before",i),t)kT(i,t,n);else for(const s of Zh.values())kT(i,s.store.getState());e&&w0("after",i)}const IE={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function mj(i){const{handlePointer:e}=Wq(i);return{priority:1,enabled:!0,compute(t,n,s){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(IE).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:s}=i.getState();(t=s.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(r=>({events:{...r.events,connected:t}})),s.handlers)for(const r in s.handlers){const o=s.handlers[r],[c,f]=IE[r];t.addEventListener(c,o,{passive:f})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const r=n.handlers[s],[o]=IE[s];n.connected.removeEventListener(o,r)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function fN(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function gj({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,o]=V.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=V.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),f=i?typeof i=="number"?i:i.scroll:null,d=i?typeof i=="number"?i:i.resize:null,m=V.useRef(!1);V.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[g,v,_]=V.useMemo(()=>{const T=()=>{if(!c.current.element)return;const{left:C,top:D,width:N,height:I,bottom:L,right:P,x:G,y:B}=c.current.element.getBoundingClientRect(),U={left:C,top:D,width:N,height:I,bottom:L,right:P,x:G,y:B};c.current.element instanceof HTMLElement&&n&&(U.height=c.current.element.offsetHeight,U.width=c.current.element.offsetWidth),Object.freeze(U),m.current&&!_j(c.current.lastBounds,U)&&o(c.current.lastBounds=U)};return[T,d?fN(T,d):T,f?fN(T,f):T]},[o,n,f,d]);function b(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(T=>T.removeEventListener("scroll",_,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function A(){c.current.element&&(c.current.resizeObserver=new s(_),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(T=>T.addEventListener("scroll",_,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const M=T=>{!T||T===c.current.element||(b(),c.current.element=T,c.current.scrollContainers=iU(T),A())};return vj(_,!!e),yj(v),V.useEffect(()=>{b(),A()},[e,_,v]),V.useEffect(()=>b,[]),[M,r,g]}function yj(i){V.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function vj(i,e){V.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function iU(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[t,n,s].some(r=>r==="auto"||r==="scroll")&&e.push(i),[...e,...iU(i.parentElement)]}const xj=["x","y","top","bottom","left","right","width","height"],_j=(i,e)=>xj.every(t=>i[t]===e[t]);function bj({ref:i,children:e,fallback:t,resize:n,style:s,gl:r,events:o=mj,eventSource:c,eventPrefix:f,shadows:d,linear:m,flat:g,legacy:v,orthographic:_,frameloop:b,dpr:A,performance:M,raycaster:T,camera:C,scene:D,onPointerMissed:N,onCreated:I,...L}){V.useMemo(()=>nj(rq),[]);const P=Iq(),[G,B]=gj({scroll:!0,debounce:{scroll:50,resize:0},...n}),U=V.useRef(null),j=V.useRef(null);V.useImperativeHandle(i,()=>U.current);const ae=GL(N),[ne,de]=V.useState(!1),[he,F]=V.useState(!1);if(ne)throw ne;if(he)throw he;const W=V.useRef(null);dy(()=>{const fe=U.current;if(B.width>0&&B.height>0&&fe){W.current||(W.current=uj(fe));async function X(){await W.current.configure({gl:r,scene:D,events:o,shadows:d,linear:m,flat:g,legacy:v,orthographic:_,frameloop:b,dpr:A,performance:M,raycaster:T,camera:C,size:B,onPointerMissed:(...ie)=>ae.current==null?void 0:ae.current(...ie),onCreated:ie=>{ie.events.connect==null||ie.events.connect(c?zq(c)?c.current:c:j.current),f&&ie.setEvents({compute:(Ee,Ue)=>{const re=Ee[f+"X"],Ce=Ee[f+"Y"];Ue.pointer.set(re/Ue.size.width*2-1,-(Ce/Ue.size.height)*2+1),Ue.raycaster.setFromCamera(Ue.pointer,Ue.camera)}}),I==null||I(ie)}}),W.current.render(Ze.jsx(P,{children:Ze.jsx(Fq,{set:F,children:Ze.jsx(V.Suspense,{fallback:Ze.jsx(Bq,{set:de}),children:e??null})})}))}X()}}),V.useEffect(()=>{const fe=U.current;if(fe)return()=>tU(fe)},[]);const Z=c?"none":"auto";return Ze.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Z,...s},...L,children:Ze.jsx("div",{ref:G,style:{width:"100%",height:"100%"},children:Ze.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}function Sj(i){return Ze.jsx(BL,{children:Ze.jsx(bj,{...i})})}const Ej={greeting:"Hi, I am Brandon Pratama Kwee",summary:"I am a student at Ritsumeikan university, my passion lies within front end web design therefore I learned to be able to incorporate 3D model as well as my own shader to elevate the customizability of my websites. I also have a passion in AI, more specifically Large Language Models or LLM. I also believe that communication is essential so I have learned several tools to illustrate my ideas to others. I also can speak in English, Japanese, and Indonesia",Tech_Stack:"Tech Stack : ",Other_Skills:"Other Skills : ",Projects:"Projects",Project_desc:"Use the buttons to navigate through the projects",Certificate:"Certificate",Certificate_desc:"Press the buttons to see my certificates",Contact:"Contact",Contact_Me:"Let's Connect !"},Tj={greeting:"Selamat datang, Nama saya Brandon Pratama Kwee",summary:"Saya murid dari universitas Ritsumeikan, saya tertarik mendesain front end website sehingga saya memplejari cara menggunakan model 3 dimensi dan shader sendiri untuk meningkatkan fleksibilitas website saya. Saya juga tertarik mengenai AI, terutama Model Ai Bahasa (LLM). Menurut saya komunikasi itu sangat penting sehingga saya mempelajari berberapa program untuk menyampaikan ide saya ke orang lain. Saya bisa berbicara bahasa Indonesia, Jepang, dan Inggris",Tech_Stack:"Tech Stack: ",Other_Skills:"Other Skills: ",Projects:"Projects",Project_desc:"Press the vending machine to see the list of projects",Certificate:"Certificate",Certificate_desc:"Press the laptop to see my certificates",Contact:"Contact",Contact_Me:"Contact Me"},Mj={greeting:"place"},Il={English:Ej,Indonesia:Tj,Japanese:Mj};function Aj(i){const e="English";return Ze.jsx("div",{className:`h-screen grid ${i.className}`,style:i.style,children:Ze.jsxs("div",{className:"relative mx-32 my-32 ",children:[Ze.jsx("div",{className:"absolute h-full w-full bg-red-100 rounded-xl",style:{opacity:"0.6"}}),Ze.jsxs("div",{className:"relative z-20 mx-4 my-4",children:[Ze.jsxs("div",{className:"flex mx-4",children:[Ze.jsx("div",{className:"text-5xl pt-6",style:{fontWeight:"600",letterSpacing:"-1px"},children:Il[e].greeting}),Ze.jsx("img",{className:"ml-auto pt-4 cursor-pointer",src:"/images/aws-certified-ai-practitioner.png",style:{width:"100px"},onClick:()=>window.open("https://www.credly.com/badges/98f22b06-b4dd-4dcd-a219-db0d2c32aa81/public_url","_blank")})]}),Ze.jsxs("div",{className:"mt-10 mx-16 text-2xl semi-bold",children:[Ze.jsx("div",{className:"font-medium",children:Il[e].summary}),Ze.jsxs("div",{className:"mt-10 font-medium",children:[Ze.jsx("span",{className:"font-bold",children:Il[e].Tech_Stack}),"   Python, Java, Html, Css, Javascript, React, Three.js, React Three Fiber, Tailwind, WebGL, GLSL, Typescript"]}),Ze.jsxs("div",{className:"mt-5 font-medium",children:[Ze.jsx("span",{className:"font-bold",children:Il[e].Other_Skills}),"   Figma, Blender"]})]})]})]})})}function wj(i){const e="English",n=[{title:"Pollen Mapping System",desc:`My team made a full stack website to display pollenous flowers on a map, 
                this project aims to help people with pollen allergies by showing highly 
                pollenous areas. The full stack was built using React for the front end, Python Flask for the backend, and SQLAlchemy 
                for the database. We also implemented a model to classify the flower with a 0.86 accuracy`,img:"/images/proj1.png",tech:"Technology used : Keras, Python, React, Flask, SQLAlchemy, Tailwind CSS",prototypeLink:"NA",GithubLink:"NA"},{title:"3D Portfolio website",desc:`I created a portfolio website that has all my introductions, projects, certificates, and ways
        to contact me. I achieved this by using R3F (React three fiber) for the 3D background and React. I also
        learned GLSL for the water caustic. For the model, I created it in Blender.`,img:"/images/proj2.png",tech:"Technology used : React, R3F, GLSL, Blender, Tailwind CSS",prototypeLink:"NA",GithubLink:"NA"}],s=r=>Ze.jsx("div",{className:"grid my-4 bg-red-100 rounded-xl",style:{marginInline:"20px",height:"550px"},children:Ze.jsxs("div",{className:"flex py-10 px-10",children:[Ze.jsx("img",{src:n[r.X].img,className:"object-cover",style:{width:"500px",height:"350px"}}),Ze.jsxs("div",{className:" ml-5 flex-1 flex flex-col justify-between ",children:[Ze.jsxs("div",{children:[Ze.jsx("p",{className:"mx-6 text-5xl font-bold",children:n[r.X].title}),Ze.jsx("p",{className:"mx-6 text-xl pt-2",children:n[r.X].desc}),Ze.jsx("p",{className:"mx-6 text-xl pt-4",children:n[r.X].tech})]}),Ze.jsxs("div",{className:"flex justify-between mx-32 pt-8",children:[Ze.jsx("div",{className:`bg-yellow-300 px-5 py-4 text-lg rounded-xl ${n[r.X].prototypeLink=="NA"?"invisible":""}`,children:"Visit prototype"}),Ze.jsx("div",{className:`bg-gray-300 px-5 py-4 text-lg rounded-xl ${n[r.X].prototypeLink=="NA"?"invisible":""}`,children:"View on Github"})]}),Ze.jsx("div",{className:"-mb-6 flex gap-3",children:n.map((o,c)=>Ze.jsx("div",{className:` rounded-full ${c==r.X?"bg-yellow-600":"bg-gray-400 "}`,style:{height:"20px",width:"20px"}},c))})]})]})});return Ze.jsx("div",{className:`h-screen grid ${i.className}`,style:i.style,children:Ze.jsxs("div",{className:"relative mx-24 my-10",children:[Ze.jsx("div",{className:"absolute h-full w-full bg-red-100 rounded-xl",style:{opacity:"0.6"}}),Ze.jsxs("div",{className:"relative z-20  my-4",children:[Ze.jsx("div",{className:"text-5xl mx-8",style:{fontWeight:"600",letterSpacing:"-1px"},children:Il[e].Projects}),Ze.jsx("div",{className:"font-medium mt-2 mx-16 text-2xl semi-bold",children:Il[e].Project_desc}),Ze.jsxs("div",{className:"relative flex items-center gap-0 px-6",children:[Ze.jsx("div",{className:" py-4 px-4 bg-green-300 rounded-xl left-2",onClick:()=>i.setX((i.X-1+2)%2),children:"Previous"}),Ze.jsx(s,{X:i.X,setX:i.setX}),Ze.jsx("div",{className:" py-4 px-8 bg-green-300 rounded-xl right-2",onClick:()=>i.setX((i.X+1)%2),children:"Next"})]})]})]})})}function Rj(i){const e="English",n=[{title:"AWS Certified AI Practioner",desc:`Learned the foundational knowledge of using Amazon's AI services such as Rekognition, Polly, Amazon Q.
             I also learned some foundational AI knowledge such as bias and variance, and retrieval-=augmented learning(RAG).`,img:"/images/cert1AwsHD.png",link:"https://www.credly.com/badges/98f22b06-b4dd-4dcd-a219-db0d2c32aa81/public_url"},{title:"Figma UI UX Design Essentials",desc:`Learned the software Figma for website UI UX designs, including how to create wireframes, prorotypes, and design components
         . Also learned about intuitive website design both on mobile and PC.`,img:"/images/Cert2Figma.jpg",link:"https://www.udemy.com/certificate/UC-0517c98b-5969-42ac-b170-dca57e23650f/"},{title:"React Three Fiber",desc:`Learned React Three Fiber which allows developers to render and interact with 3D objects directly inside of the browser
        using React. As well as learned the essential 3D scene elements such as camera, lighting, and object controls.`,img:"/images/Cert3R3F.jpg",link:"https://www.udemy.com/certificate/UC-5a4ce06c-20e1-4d04-bb6f-c1427ac598cf/"}],s=r=>Ze.jsx("div",{className:"grid my-4 bg-red-100 rounded-xl",style:{marginInline:"20px",height:"550px"},children:Ze.jsxs("div",{className:"flex py-10 px-10",children:[Ze.jsx("img",{src:n[r.Y].img,className:"object-scale-down",style:{width:"500px",height:"350px"}}),Ze.jsxs("div",{className:" ml-5 flex-1 flex flex-col justify-between ",children:[Ze.jsxs("div",{children:[Ze.jsx("p",{className:"mx-6 text-5xl font-bold",children:n[r.Y].title}),Ze.jsx("p",{className:"mx-6 text-xl pt-2",children:n[r.Y].desc})]}),Ze.jsx("div",{className:"flex justify-center pt-8",children:Ze.jsx("div",{className:`border-gray-700 border bg-yellow-300 px-8 py-2 text-lg rounded-xl cursor-pointer${n[r.Y].prototypeLink=="NA"?"invisible":""}`,onClick:()=>window.open(n[r.Y].link,"_blank"),children:"Link"})}),Ze.jsx("div",{className:"-mb-6 flex gap-3",children:n.map((o,c)=>Ze.jsx("div",{className:` rounded-full ${c==r.Y?"bg-yellow-600":"bg-gray-400 "}`,style:{height:"20px",width:"20px"}},c))})]})]})});return Ze.jsx("div",{className:`h-screen grid ${i.className}`,style:i.style,children:Ze.jsxs("div",{className:"relative mx-24 my-10",children:[Ze.jsx("div",{className:"absolute h-full w-full bg-red-100 rounded-xl",style:{opacity:"0.6"}}),Ze.jsxs("div",{className:"relative z-20  my-4",children:[Ze.jsx("div",{className:"text-5xl mx-8",style:{fontWeight:"600",letterSpacing:"-1px"},children:Il[e].Certificate}),Ze.jsx("div",{className:"font-medium mt-2 mx-16 text-2xl semi-bold",children:Il[e].Certificate_desc}),Ze.jsxs("div",{className:"relative flex items-center gap-0 px-6",children:[Ze.jsx("div",{className:" py-4 px-4 bg-green-300 rounded-xl left-2",onClick:()=>i.setY((i.Y-1+3)%3),children:"Previous"}),Ze.jsx(s,{Y:i.Y,setY:i.setY}),Ze.jsx("div",{className:" py-4 px-8 bg-green-300 rounded-xl right-2",onClick:()=>i.setY((i.Y+1)%3),children:"Next"})]})]})]})})}const BE=i=>i===Object(i)&&!Array.isArray(i)&&typeof i!="function";function dA(i,e){const t=YL(r=>r.gl),n=Sm(hy,BE(i)?Object.values(i):i);return V.useLayoutEffect(()=>{e==null||e(n)},[e]),V.useEffect(()=>{if("initTexture"in t){let r=[];Array.isArray(n)?r=n:n instanceof Fi?r=[n]:BE(n)&&(r=Object.values(n)),r.forEach(o=>{o instanceof Fi&&t.initTexture(o)})}},[t,n]),V.useMemo(()=>{if(BE(i)){const r={};let o=0;for(const c in i)r[c]=n[o++];return r}else return n},[i,n])}dA.preload=i=>Sm.preload(hy,i);dA.clear=i=>Sm.clear(hy,i);function hN(i,e){if(e===fO)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===o1||e===NM){let t=i.getIndex();if(t===null){const o=[],c=i.getAttribute("position");if(c!==void 0){for(let f=0;f<c.count;f++)o.push(f);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,s=[];if(e===o1)for(let o=1;o<=n;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=i.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}class Cj extends Vr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Uj(t)}),this.register(function(t){return new zj(t)}),this.register(function(t){return new $j(t)}),this.register(function(t){return new Xj(t)}),this.register(function(t){return new qj(t)}),this.register(function(t){return new Ij(t)}),this.register(function(t){return new Bj(t)}),this.register(function(t){return new Fj(t)}),this.register(function(t){return new Hj(t)}),this.register(function(t){return new Lj(t)}),this.register(function(t){return new Vj(t)}),this.register(function(t){return new Pj(t)}),this.register(function(t){return new kj(t)}),this.register(function(t){return new Gj(t)}),this.register(function(t){return new Dj(t)}),this.register(function(t){return new jj(t)}),this.register(function(t){return new Yj(t)})}load(e,t,n,s){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const d=ff.extractUrlBase(e);o=ff.resolveURL(d,this.path)}else o=ff.extractUrlBase(e);this.manager.itemStart(e);const c=function(d){s?s(d):console.error(d),r.manager.itemError(e),r.manager.itemEnd(e)},f=new Ko(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,function(d){try{r.parse(d,o,function(m){t(m),r.manager.itemEnd(e)},c)}catch(m){c(m)}},n,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){let r;const o={},c={},f=new TextDecoder;if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(f.decode(new Uint8Array(e,0,4))===sU){try{o[xn.KHR_BINARY_GLTF]=new Wj(e)}catch(g){s&&s(g);return}r=JSON.parse(o[xn.KHR_BINARY_GLTF].content)}else r=JSON.parse(f.decode(e));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new lY(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let m=0;m<this.pluginCallbacks.length;m++){const g=this.pluginCallbacks[m](d);g.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),c[g.name]=g,o[g.name]=!0}if(r.extensionsUsed)for(let m=0;m<r.extensionsUsed.length;++m){const g=r.extensionsUsed[m],v=r.extensionsRequired||[];switch(g){case xn.KHR_MATERIALS_UNLIT:o[g]=new Oj;break;case xn.KHR_DRACO_MESH_COMPRESSION:o[g]=new Zj(r,this.dracoLoader);break;case xn.KHR_TEXTURE_TRANSFORM:o[g]=new Kj;break;case xn.KHR_MESH_QUANTIZATION:o[g]=new Qj;break;default:v.indexOf(g)>=0&&c[g]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}d.setExtensions(o),d.setPlugins(c),d.parse(n,s)}parseAsync(e,t){const n=this;return new Promise(function(s,r){n.parse(e,t,s,r)})}}function Nj(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const xn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Dj{constructor(e){this.parser=e,this.name=xn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const r=t.json,f=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let d;const m=new lt(16777215);f.color!==void 0&&m.setRGB(f.color[0],f.color[1],f.color[2],qs);const g=f.range!==void 0?f.range:0;switch(f.type){case"directional":d=new iA(m),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new nA(m),d.distance=g;break;case"spot":d=new tA(m),d.distance=g,f.spot=f.spot||{},f.spot.innerConeAngle=f.spot.innerConeAngle!==void 0?f.spot.innerConeAngle:0,f.spot.outerConeAngle=f.spot.outerConeAngle!==void 0?f.spot.outerConeAngle:Math.PI/4,d.angle=f.spot.outerConeAngle,d.penumbra=1-f.spot.innerConeAngle/f.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+f.type)}return d.position.set(0,0,0),Cc(d,f),f.intensity!==void 0&&(d.intensity=f.intensity),d.name=t.createUniqueName(f.name||"light_"+e),s=Promise.resolve(d),t.cache.add(n,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],c=(r.extensions&&r.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(f){return n._getNodeRef(t.cache,c,f)})}}class Oj{constructor(){this.name=xn.KHR_MATERIALS_UNLIT}getMaterialType(){return Na}extendParams(e,t,n){const s=[];e.color=new lt(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],qs),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(n.assignTexture(e,"map",r.baseColorTexture,ji))}return Promise.all(s)}}class Lj{constructor(e){this.parser=e,this.name=xn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class Uj{constructor(e){this.parser=e,this.name=xn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:co}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const c=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Xe(c,c)}return Promise.all(r)}}class zj{constructor(e){this.parser=e,this.name=xn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:co}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class Pj{constructor(e){this.parser=e,this.name=xn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:co}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class Ij{constructor(e){this.parser=e,this.name=xn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:co}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new lt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];if(o.sheenColorFactor!==void 0){const c=o.sheenColorFactor;t.sheenColor.setRGB(c[0],c[1],c[2],qs)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,ji)),o.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class Bj{constructor(e){this.parser=e,this.name=xn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:co}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class Fj{constructor(e){this.parser=e,this.name=xn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:co}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const c=o.attenuationColor||[1,1,1];return t.attenuationColor=new lt().setRGB(c[0],c[1],c[2],qs),Promise.all(r)}}class Hj{constructor(e){this.parser=e,this.name=xn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:co}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class Vj{constructor(e){this.parser=e,this.name=xn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:co}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const c=o.specularColorFactor||[1,1,1];return t.specularColor=new lt().setRGB(c[0],c[1],c[2],qs),o.specularColorTexture!==void 0&&r.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,ji)),Promise.all(r)}}class Gj{constructor(e){this.parser=e,this.name=xn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:co}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class kj{constructor(e){this.parser=e,this.name=xn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:co}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class $j{constructor(e){this.parser=e,this.name=xn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class Xj{constructor(e){this.parser=e,this.name=xn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],c=s.images[o.source];let f=n.textureLoader;if(c.uri){const d=n.options.manager.getHandler(c.uri);d!==null&&(f=d)}return this.detectSupport().then(function(d){if(d)return n.loadTextureImage(e,o.source,f);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class qj{constructor(e){this.parser=e,this.name=xn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],c=s.images[o.source];let f=n.textureLoader;if(c.uri){const d=n.options.manager.getHandler(c.uri);d!==null&&(f=d)}return this.detectSupport().then(function(d){if(d)return n.loadTextureImage(e,o.source,f);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class jj{constructor(e){this.name=xn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(c){const f=s.byteOffset||0,d=s.byteLength||0,m=s.count,g=s.byteStride,v=new Uint8Array(c,f,d);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(m,g,v,s.mode,s.filter).then(function(_){return _.buffer}):o.ready.then(function(){const _=new ArrayBuffer(m*g);return o.decodeGltfBuffer(new Uint8Array(_),m,g,v,s.mode,s.filter),_})})}else return null}}class Yj{constructor(e){this.name=xn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const s=t.meshes[n.mesh];for(const d of s.primitives)if(d.mode!==no.TRIANGLES&&d.mode!==no.TRIANGLE_STRIP&&d.mode!==no.TRIANGLE_FAN&&d.mode!==void 0)return null;const o=n.extensions[this.name].attributes,c=[],f={};for(const d in o)c.push(this.parser.getDependency("accessor",o[d]).then(m=>(f[d]=m,f[d])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(d=>{const m=d.pop(),g=m.isGroup?m.children:[m],v=d[0].count,_=[];for(const b of g){const A=new Gt,M=new K,T=new fr,C=new K(1,1,1),D=new BM(b.geometry,b.material,v);for(let N=0;N<v;N++)f.TRANSLATION&&M.fromBufferAttribute(f.TRANSLATION,N),f.ROTATION&&T.fromBufferAttribute(f.ROTATION,N),f.SCALE&&C.fromBufferAttribute(f.SCALE,N),D.setMatrixAt(N,A.compose(M,T,C));for(const N in f)if(N==="_COLOR_0"){const I=f[N];D.instanceColor=new Xh(I.array,I.itemSize,I.normalized)}else N!=="TRANSLATION"&&N!=="ROTATION"&&N!=="SCALE"&&b.geometry.setAttribute(N,f[N]);Rn.prototype.copy.call(D,b),this.parser.assignFinalMaterial(D),_.push(D)}return m.isGroup?(m.clear(),m.add(..._),m):_[0]}))}}const sU="glTF",Jg=12,dN={JSON:1313821514,BIN:5130562};class Wj{constructor(e){this.name=xn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Jg),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==sU)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-Jg,r=new DataView(e,Jg);let o=0;for(;o<s;){const c=r.getUint32(o,!0);o+=4;const f=r.getUint32(o,!0);if(o+=4,f===dN.JSON){const d=new Uint8Array(e,Jg+o,c);this.content=n.decode(d)}else if(f===dN.BIN){const d=Jg+o;this.body=e.slice(d,d+c)}o+=c}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Zj{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=xn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,c={},f={},d={};for(const m in o){const g=qT[m]||m.toLowerCase();c[g]=o[m]}for(const m in e.attributes){const g=qT[m]||m.toLowerCase();if(o[m]!==void 0){const v=n.accessors[e.attributes[m]],_=Fp[v.componentType];d[g]=_.name,f[g]=v.normalized===!0}}return t.getDependency("bufferView",r).then(function(m){return new Promise(function(g,v){s.decodeDracoFile(m,function(_){for(const b in _.attributes){const A=_.attributes[b],M=f[b];M!==void 0&&(A.normalized=M)}g(_)},c,d,qs,v)})})}}class Kj{constructor(){this.name=xn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Qj{constructor(){this.name=xn.KHR_MESH_QUANTIZATION}}class rU extends vm{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=n[r+o];return t}interpolate_(e,t,n,s){const r=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=c*2,d=c*3,m=s-t,g=(n-t)/m,v=g*g,_=v*g,b=e*d,A=b-d,M=-2*_+3*v,T=_-v,C=1-M,D=T-v+g;for(let N=0;N!==c;N++){const I=o[A+N+c],L=o[A+N+f]*m,P=o[b+N+c],G=o[b+N]*m;r[N]=C*I+D*L+M*P+T*G}return r}}const Jj=new fr;class eY extends rU{interpolate_(e,t,n,s){const r=super.interpolate_(e,t,n,s);return Jj.fromArray(r).normalize().toArray(r),r}}const no={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Fp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},pN={9728:Ss,9729:Bi,9984:O1,9985:Ip,9986:Oh,9987:ro},mN={33071:Ca,33648:kp,10497:mf},FE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},qT={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Qu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},tY={CUBICSPLINE:void 0,LINEAR:Wp,STEP:Yp},HE={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function nY(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new fy({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Xl})),i.DefaultMaterial}function Mh(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Cc(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function iY(i,e,t){let n=!1,s=!1,r=!1;for(let d=0,m=e.length;d<m;d++){const g=e[d];if(g.POSITION!==void 0&&(n=!0),g.NORMAL!==void 0&&(s=!0),g.COLOR_0!==void 0&&(r=!0),n&&s&&r)break}if(!n&&!s&&!r)return Promise.resolve(i);const o=[],c=[],f=[];for(let d=0,m=e.length;d<m;d++){const g=e[d];if(n){const v=g.POSITION!==void 0?t.getDependency("accessor",g.POSITION):i.attributes.position;o.push(v)}if(s){const v=g.NORMAL!==void 0?t.getDependency("accessor",g.NORMAL):i.attributes.normal;c.push(v)}if(r){const v=g.COLOR_0!==void 0?t.getDependency("accessor",g.COLOR_0):i.attributes.color;f.push(v)}}return Promise.all([Promise.all(o),Promise.all(c),Promise.all(f)]).then(function(d){const m=d[0],g=d[1],v=d[2];return n&&(i.morphAttributes.position=m),s&&(i.morphAttributes.normal=g),r&&(i.morphAttributes.color=v),i.morphTargetsRelative=!0,i})}function sY(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,s=t.length;n<s;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function rY(i){let e;const t=i.extensions&&i.extensions[xn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+VE(t.attributes):e=i.indices+":"+VE(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,s=i.targets.length;n<s;n++)e+=":"+VE(i.targets[n]);return e}function VE(i){let e="";const t=Object.keys(i).sort();for(let n=0,s=t.length;n<s;n++)e+=t[n]+":"+i[t[n]]+";";return e}function jT(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function aY(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":i.search(/\.ktx2($|\?)/i)>0||i.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const oY=new Gt;class lY{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Nj,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=-1,r=!1,o=-1;if(typeof navigator<"u"){const c=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(c)===!0;const f=c.match(/Version\/(\d+)/);s=n&&f?parseInt(f[1],10):-1,r=c.indexOf("Firefox")>-1,o=r?c.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&s<17||r&&o<98?this.textureLoader=new hy(this.options.manager):this.textureLoader=new _L(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ko(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const c={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:n,userData:{}};return Mh(r,c,s),Cc(c,s),Promise.all(n._invokeAll(function(f){return f.afterRoot&&f.afterRoot(c)})).then(function(){for(const f of c.scenes)f.updateMatrixWorld();e(c)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let c=0,f=o.length;c<f;c++)e[o[c]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone(),r=(o,c)=>{const f=this.associations.get(o);f!=null&&this.associations.set(c,f);for(const[d,m]of o.children.entries())r(m,c.children[d])};return r(n,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[xn.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){n.load(ff.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteLength||0,r=t.byteOffset||0;return n.slice(r,r+s)})}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const o=FE[s.type],c=Fp[s.componentType],f=s.normalized===!0,d=new c(s.count*o);return Promise.resolve(new Fn(d,o,f))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const c=o[0],f=FE[s.type],d=Fp[s.componentType],m=d.BYTES_PER_ELEMENT,g=m*f,v=s.byteOffset||0,_=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,b=s.normalized===!0;let A,M;if(_&&_!==g){const T=Math.floor(v/_),C="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+T+":"+s.count;let D=t.cache.get(C);D||(A=new d(c,T*_,s.count*_/m),D=new ry(A,_/m),t.cache.add(C,D)),M=new Jp(D,f,v%_/m,b)}else c===null?A=new d(s.count*f):A=new d(c,v,s.count*f),M=new Fn(A,f,b);if(s.sparse!==void 0){const T=FE.SCALAR,C=Fp[s.sparse.indices.componentType],D=s.sparse.indices.byteOffset||0,N=s.sparse.values.byteOffset||0,I=new C(o[1],D,s.sparse.count*T),L=new d(o[2],N,s.sparse.count*f);c!==null&&(M=new Fn(M.array.slice(),M.itemSize,M.normalized)),M.normalized=!1;for(let P=0,G=I.length;P<G;P++){const B=I[P];if(M.setX(B,L[P*f]),f>=2&&M.setY(B,L[P*f+1]),f>=3&&M.setZ(B,L[P*f+2]),f>=4&&M.setW(B,L[P*f+3]),f>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}M.normalized=b}return M})}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,o=t.images[r];let c=this.textureLoader;if(o.uri){const f=n.manager.getHandler(o.uri);f!==null&&(c=f)}return this.loadTextureImage(e,r,c)}loadTextureImage(e,t,n){const s=this,r=this.json,o=r.textures[e],c=r.images[t],f=(c.uri||c.bufferView)+":"+o.sampler;if(this.textureCache[f])return this.textureCache[f];const d=this.loadImageSource(t,n).then(function(m){m.flipY=!1,m.name=o.name||c.name||"",m.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(m.name=c.uri);const v=(r.samplers||{})[o.sampler]||{};return m.magFilter=pN[v.magFilter]||Bi,m.minFilter=pN[v.minFilter]||ro,m.wrapS=mN[v.wrapS]||mf,m.wrapT=mN[v.wrapT]||mf,m.generateMipmaps=!m.isCompressedTexture&&m.minFilter!==Ss&&m.minFilter!==Bi,s.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[f]=d,d}loadImageSource(e,t){const n=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(g=>g.clone());const o=s.images[e],c=self.URL||self.webkitURL;let f=o.uri||"",d=!1;if(o.bufferView!==void 0)f=n.getDependency("bufferView",o.bufferView).then(function(g){d=!0;const v=new Blob([g],{type:o.mimeType});return f=c.createObjectURL(v),f});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(f).then(function(g){return new Promise(function(v,_){let b=v;t.isImageBitmapLoader===!0&&(b=function(A){const M=new Fi(A);M.needsUpdate=!0,v(M)}),t.load(ff.resolveURL(g,r.path),b,void 0,_)})}).then(function(g){return d===!0&&c.revokeObjectURL(f),Cc(g,o),g.userData.mimeType=o.mimeType||aY(o.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",f),g});return this.sourceCache[e]=m,m}assignTexture(e,t,n,s){const r=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),r.extensions[xn.KHR_TEXTURE_TRANSFORM]){const c=n.extensions!==void 0?n.extensions[xn.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const f=r.associations.get(o);o=r.extensions[xn.KHR_TEXTURE_TRANSFORM].extendTexture(o,c),r.associations.set(o,f)}}return s!==void 0&&(o.colorSpace=s),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+n.uuid;let f=this.cache.get(c);f||(f=new q1,Es.prototype.copy.call(f,n),f.color.copy(n.color),f.map=n.map,f.sizeAttenuation=!1,this.cache.add(c,f)),n=f}else if(e.isLine){const c="LineBasicMaterial:"+n.uuid;let f=this.cache.get(c);f||(f=new mr,Es.prototype.copy.call(f,n),f.color.copy(n.color),f.map=n.map,this.cache.add(c,f)),n=f}if(s||r||o){let c="ClonedMaterial:"+n.uuid+":";s&&(c+="derivative-tangents:"),r&&(c+="vertex-colors:"),o&&(c+="flat-shading:");let f=this.cache.get(c);f||(f=n.clone(),r&&(f.vertexColors=!0),o&&(f.flatShading=!0),s&&(f.normalScale&&(f.normalScale.y*=-1),f.clearcoatNormalScale&&(f.clearcoatNormalScale.y*=-1)),this.cache.add(c,f),this.associations.set(f,this.associations.get(n))),n=f}e.material=n}getMaterialType(){return fy}loadMaterial(e){const t=this,n=this.json,s=this.extensions,r=n.materials[e];let o;const c={},f=r.extensions||{},d=[];if(f[xn.KHR_MATERIALS_UNLIT]){const g=s[xn.KHR_MATERIALS_UNLIT];o=g.getMaterialType(),d.push(g.extendParams(c,r,t))}else{const g=r.pbrMetallicRoughness||{};if(c.color=new lt(1,1,1),c.opacity=1,Array.isArray(g.baseColorFactor)){const v=g.baseColorFactor;c.color.setRGB(v[0],v[1],v[2],qs),c.opacity=v[3]}g.baseColorTexture!==void 0&&d.push(t.assignTexture(c,"map",g.baseColorTexture,ji)),c.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,c.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(d.push(t.assignTexture(c,"metalnessMap",g.metallicRoughnessTexture)),d.push(t.assignTexture(c,"roughnessMap",g.metallicRoughnessTexture))),o=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),d.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,c)})))}r.doubleSided===!0&&(c.side=Xo);const m=r.alphaMode||HE.OPAQUE;if(m===HE.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,m===HE.MASK&&(c.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==Na&&(d.push(t.assignTexture(c,"normalMap",r.normalTexture)),c.normalScale=new Xe(1,1),r.normalTexture.scale!==void 0)){const g=r.normalTexture.scale;c.normalScale.set(g,g)}if(r.occlusionTexture!==void 0&&o!==Na&&(d.push(t.assignTexture(c,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==Na){const g=r.emissiveFactor;c.emissive=new lt().setRGB(g[0],g[1],g[2],qs)}return r.emissiveTexture!==void 0&&o!==Na&&d.push(t.assignTexture(c,"emissiveMap",r.emissiveTexture,ji)),Promise.all(d).then(function(){const g=new o(c);return r.name&&(g.name=r.name),Cc(g,r),t.associations.set(g,{materials:e}),r.extensions&&Mh(s,g,r),g})}createUniqueName(e){const t=Dn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function r(c){return n[xn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,t).then(function(f){return gN(f,c,t)})}const o=[];for(let c=0,f=e.length;c<f;c++){const d=e[c],m=rY(d),g=s[m];if(g)o.push(g.promise);else{let v;d.extensions&&d.extensions[xn.KHR_DRACO_MESH_COMPRESSION]?v=r(d):v=gN(new rn,d,t),s[m]={primitive:d,promise:v},o.push(v)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,s=this.extensions,r=n.meshes[e],o=r.primitives,c=[];for(let f=0,d=o.length;f<d;f++){const m=o[f].material===void 0?nY(this.cache):this.getDependency("material",o[f].material);c.push(m)}return c.push(t.loadGeometries(o)),Promise.all(c).then(function(f){const d=f.slice(0,f.length-1),m=f[f.length-1],g=[];for(let _=0,b=m.length;_<b;_++){const A=m[_],M=o[_];let T;const C=d[_];if(M.mode===no.TRIANGLES||M.mode===no.TRIANGLE_STRIP||M.mode===no.TRIANGLE_FAN||M.mode===void 0)T=r.isSkinnedMesh===!0?new IM(A,C):new Yi(A,C),T.isSkinnedMesh===!0&&T.normalizeSkinWeights(),M.mode===no.TRIANGLE_STRIP?T.geometry=hN(T.geometry,NM):M.mode===no.TRIANGLE_FAN&&(T.geometry=hN(T.geometry,o1));else if(M.mode===no.LINES)T=new Jo(A,C);else if(M.mode===no.LINE_STRIP)T=new jc(A,C);else if(M.mode===no.LINE_LOOP)T=new FM(A,C);else if(M.mode===no.POINTS)T=new HM(A,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);Object.keys(T.geometry.morphAttributes).length>0&&sY(T,r),T.name=t.createUniqueName(r.name||"mesh_"+e),Cc(T,r),M.extensions&&Mh(s,T,M),t.assignFinalMaterial(T),g.push(T)}for(let _=0,b=g.length;_<b;_++)t.associations.set(g[_],{meshes:e,primitives:_});if(g.length===1)return r.extensions&&Mh(s,g[0],r),g[0];const v=new Uc;r.extensions&&Mh(s,v,r),t.associations.set(v,{meshes:e});for(let _=0,b=g.length;_<b;_++)v.add(g[_]);return v})}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new _s(SO.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(t=new xm(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Cc(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let s=0,r=t.joints.length;s<r;s++)n.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(s){const r=s.pop(),o=s,c=[],f=[];for(let d=0,m=o.length;d<m;d++){const g=o[d];if(g){c.push(g);const v=new Gt;r!==null&&v.fromArray(r.array,d*16),f.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[d])}return new ay(c,f)})}loadAnimation(e){const t=this.json,n=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],c=[],f=[],d=[],m=[];for(let g=0,v=s.channels.length;g<v;g++){const _=s.channels[g],b=s.samplers[_.sampler],A=_.target,M=A.node,T=s.parameters!==void 0?s.parameters[b.input]:b.input,C=s.parameters!==void 0?s.parameters[b.output]:b.output;A.node!==void 0&&(o.push(this.getDependency("node",M)),c.push(this.getDependency("accessor",T)),f.push(this.getDependency("accessor",C)),d.push(b),m.push(A))}return Promise.all([Promise.all(o),Promise.all(c),Promise.all(f),Promise.all(d),Promise.all(m)]).then(function(g){const v=g[0],_=g[1],b=g[2],A=g[3],M=g[4],T=[];for(let C=0,D=v.length;C<D;C++){const N=v[C],I=_[C],L=b[C],P=A[C],G=M[C];if(N===void 0)continue;N.updateMatrix&&N.updateMatrix();const B=n._createAnimationTracks(N,I,L,P,G);if(B)for(let U=0;U<B.length;U++)T.push(B[U])}return new tm(r,void 0,T)})}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(r){const o=n._getNodeRef(n.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(c){if(c.isMesh)for(let f=0,d=s.weights.length;f<d;f++)c.morphTargetInfluences[f]=s.weights[f]}),o})}loadNode(e){const t=this.json,n=this,s=t.nodes[e],r=n._loadNodeShallow(e),o=[],c=s.children||[];for(let d=0,m=c.length;d<m;d++)o.push(n.getDependency("node",c[d]));const f=s.skin===void 0?Promise.resolve(null):n.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),f]).then(function(d){const m=d[0],g=d[1],v=d[2];v!==null&&m.traverse(function(_){_.isSkinnedMesh&&_.bind(v,oY)});for(let _=0,b=g.length;_<b;_++)m.add(g[_]);return m})}_loadNodeShallow(e){const t=this.json,n=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",c=[],f=s._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});return f&&c.push(f),r.camera!==void 0&&c.push(s.getDependency("camera",r.camera).then(function(d){return s._getNodeRef(s.cameraCache,r.camera,d)})),s._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){c.push(d)}),this.nodeCache[e]=Promise.all(c).then(function(d){let m;if(r.isBone===!0?m=new X1:d.length>1?m=new Uc:d.length===1?m=d[0]:m=new Rn,m!==d[0])for(let g=0,v=d.length;g<v;g++)m.add(d[g]);if(r.name&&(m.userData.name=r.name,m.name=o),Cc(m,r),r.extensions&&Mh(n,m,r),r.matrix!==void 0){const g=new Gt;g.fromArray(r.matrix),m.applyMatrix4(g)}else r.translation!==void 0&&m.position.fromArray(r.translation),r.rotation!==void 0&&m.quaternion.fromArray(r.rotation),r.scale!==void 0&&m.scale.fromArray(r.scale);return s.associations.has(m)||s.associations.set(m,{}),s.associations.get(m).nodes=e,m}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],s=this,r=new Uc;n.name&&(r.name=s.createUniqueName(n.name)),Cc(r,n),n.extensions&&Mh(t,r,n);const o=n.nodes||[],c=[];for(let f=0,d=o.length;f<d;f++)c.push(s.getDependency("node",o[f]));return Promise.all(c).then(function(f){for(let m=0,g=f.length;m<g;m++)r.add(f[m]);const d=m=>{const g=new Map;for(const[v,_]of s.associations)(v instanceof Es||v instanceof Fi)&&g.set(v,_);return m.traverse(v=>{const _=s.associations.get(v);_!=null&&g.set(v,_)}),g};return s.associations=d(r),r})}_createAnimationTracks(e,t,n,s,r){const o=[],c=e.name?e.name:e.uuid,f=[];Qu[r.path]===Qu.weights?e.traverse(function(v){v.morphTargetInfluences&&f.push(v.name?v.name:v.uuid)}):f.push(c);let d;switch(Qu[r.path]){case Qu.weights:d=jh;break;case Qu.rotation:d=Yh;break;case Qu.translation:case Qu.scale:d=Wh;break;default:switch(n.itemSize){case 1:d=jh;break;case 2:case 3:default:d=Wh;break}break}const m=s.interpolation!==void 0?tY[s.interpolation]:Wp,g=this._getArrayFromAccessor(n);for(let v=0,_=f.length;v<_;v++){const b=new d(f[v]+"."+Qu[r.path],t.array,g,m);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(b),o.push(b)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=jT(t.constructor),s=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r++)s[r]=t[r]*n;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const s=this instanceof Yh?eY:rU;return new s(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function cY(i,e,t){const n=e.attributes,s=new hr;if(n.POSITION!==void 0){const c=t.json.accessors[n.POSITION],f=c.min,d=c.max;if(f!==void 0&&d!==void 0){if(s.set(new K(f[0],f[1],f[2]),new K(d[0],d[1],d[2])),c.normalized){const m=jT(Fp[c.componentType]);s.min.multiplyScalar(m),s.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const c=new K,f=new K;for(let d=0,m=r.length;d<m;d++){const g=r[d];if(g.POSITION!==void 0){const v=t.json.accessors[g.POSITION],_=v.min,b=v.max;if(_!==void 0&&b!==void 0){if(f.setX(Math.max(Math.abs(_[0]),Math.abs(b[0]))),f.setY(Math.max(Math.abs(_[1]),Math.abs(b[1]))),f.setZ(Math.max(Math.abs(_[2]),Math.abs(b[2]))),v.normalized){const A=jT(Fp[v.componentType]);f.multiplyScalar(A)}c.max(f)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(c)}i.boundingBox=s;const o=new Xs;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=o}function gN(i,e,t){const n=e.attributes,s=[];function r(o,c){return t.getDependency("accessor",o).then(function(f){i.setAttribute(c,f)})}for(const o in n){const c=qT[o]||o.toLowerCase();c in i.attributes||s.push(r(n[o],c))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(c){i.setIndex(c)});s.push(o)}return vn.workingColorSpace!==qs&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${vn.workingColorSpace}" not supported.`),Cc(i,e),cY(i,e,t),Promise.all(s).then(function(){return e.targets!==void 0?iY(i,e.targets,t):i})}const yN=`
uniform mat4 view_matrix;
uniform mat4 model_matrix;
uniform vec3 uColor;
varying vec2 vUv;
varying vec3 newpos;
varying vec4 worldpos;
void main(){
  newpos=position;
  vUv=uv;
  vec4 worldpos=vec4(position,1.0)*modelMatrix;
  gl_Position= projectionMatrix * modelViewMatrix *vec4(position,1.0);

}
`,vN=`
varying vec2 vUv;
uniform float uTime;
uniform vec3 uCausticColor;
uniform float uCausticSpeed;
uniform float uCausticScale;
uniform float uCausticOffset;
uniform float uCausticThickness;
uniform float uCausticIntensity;
uniform vec3 uColor;
varying vec3 newpos;
varying vec4 worldpos;
vec3 mod289(vec3 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 mod289(vec4 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 permute(vec4 x) {
     return mod289(((x*34.0)+10.0)*x);
}

vec4 taylorInvSqrt(vec4 r)
{
  return 1.79284291400159 - 0.85373472095314 * r;
}

float snoise(vec3 v)
  { 
  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);

// First corner
  vec3 i  = floor(v + dot(v, C.yyy) );
  vec3 x0 =   v - i + dot(i, C.xxx) ;

// Other corners
  vec3 g = step(x0.yzx, x0.xyz);
  vec3 l = 1.0 - g;
  vec3 i1 = min( g.xyz, l.zxy );
  vec3 i2 = max( g.xyz, l.zxy );

  //   x0 = x0 - 0.0 + 0.0 * C.xxx;
  //   x1 = x0 - i1  + 1.0 * C.xxx;
  //   x2 = x0 - i2  + 2.0 * C.xxx;
  //   x3 = x0 - 1.0 + 3.0 * C.xxx;
  vec3 x1 = x0 - i1 + C.xxx;
  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y

// Permutations
  i = mod289(i); 
  vec4 p = permute( permute( permute( 
             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));

// Gradients: 7x7 points over a square, mapped onto an octahedron.
// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
  float n_ = 0.142857142857; // 1.0/7.0
  vec3  ns = n_ * D.wyz - D.xzx;

  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)

  vec4 x_ = floor(j * ns.z);
  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)

  vec4 x = x_ *ns.x + ns.yyyy;
  vec4 y = y_ *ns.x + ns.yyyy;
  vec4 h = 1.0 - abs(x) - abs(y);

  vec4 b0 = vec4( x.xy, y.xy );
  vec4 b1 = vec4( x.zw, y.zw );

  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;
  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;
  vec4 s0 = floor(b0)*2.0 + 1.0;
  vec4 s1 = floor(b1)*2.0 + 1.0;
  vec4 sh = -step(h, vec4(0.0));

  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;

  vec3 p0 = vec3(a0.xy,h.x);
  vec3 p1 = vec3(a0.zw,h.y);
  vec3 p2 = vec3(a1.xy,h.z);
  vec3 p3 = vec3(a1.zw,h.w);

//Normalise gradients
  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;

// Mix final noise value
  vec4 m = max(0.5 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
  m = m * m;
  return 105.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
                                dot(p2,x2), dot(p3,x3) ) );
  }

void main(){
    vec3 color=uColor;
    float t = uCausticSpeed * uTime;
    float noise1 = abs(snoise(vec3(vUv.xy*uCausticScale, t)));
    float noise2 = abs(snoise(vec3(vUv.yx*uCausticScale, -t)));
    float caustic = uCausticOffset-(noise1+noise2)/2.0;
    caustic=smoothstep(0.5-uCausticThickness, 0.5+uCausticThickness,caustic);
    caustic = clamp(uCausticIntensity*caustic,0.0,1.0);
    color.rgb=color.rgb+uCausticColor*caustic;
    gl_FragColor=vec4(color,1.0);
   

}
`,xN={VERTEX:"vertex"},bs={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},py=["x","y","z","w"],or=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _N=1234567;const aU=Math.PI/180,oU=180/Math.PI;function Hp(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(or[i&255]+or[i>>8&255]+or[i>>16&255]+or[i>>24&255]+"-"+or[e&255]+or[e>>8&255]+"-"+or[e>>16&15|64]+or[e>>24&255]+"-"+or[t&63|128]+or[t>>8&255]+"-"+or[t>>16&255]+or[t>>24&255]+or[n&255]+or[n>>8&255]+or[n>>16&255]+or[n>>24&255]).toLowerCase()}function Tn(i,e,t){return Math.max(e,Math.min(t,i))}function pA(i,e){return(i%e+e)%e}function uY(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function fY(i,e,t){return i!==e?(t-i)/(e-i):0}function R0(i,e,t){return(1-t)*i+t*e}function hY(i,e,t,n){return R0(i,e,1-Math.exp(-t*n))}function dY(i,e=1){return e-Math.abs(pA(i,e*2)-e)}function pY(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function mY(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function gY(i,e){return i+Math.floor(Math.random()*(e-i+1))}function yY(i,e){return i+Math.random()*(e-i)}function vY(i){return i*(.5-Math.random())}function xY(i){i!==void 0&&(_N=i);let e=_N+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function _Y(i){return i*aU}function bY(i){return i*oU}function SY(i){return(i&i-1)===0&&i!==0}function EY(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function TY(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function MY(i,e,t,n,s){const r=Math.cos,o=Math.sin,c=r(t/2),f=o(t/2),d=r((e+n)/2),m=o((e+n)/2),g=r((e-n)/2),v=o((e-n)/2),_=r((n-e)/2),b=o((n-e)/2);switch(s){case"XYX":i.set(c*m,f*g,f*v,c*d);break;case"YZY":i.set(f*v,c*m,f*g,c*d);break;case"ZXZ":i.set(f*g,f*v,c*m,c*d);break;case"XZX":i.set(c*m,f*b,f*_,c*d);break;case"YXY":i.set(f*_,c*m,f*b,c*d);break;case"ZYZ":i.set(f*b,f*_,c*m,c*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function qo(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Zn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const AY={DEG2RAD:aU,RAD2DEG:oU,generateUUID:Hp,clamp:Tn,euclideanModulo:pA,mapLinear:uY,inverseLerp:fY,lerp:R0,damp:hY,pingpong:dY,smoothstep:pY,smootherstep:mY,randInt:gY,randFloat:yY,randFloatSpread:vY,seededRandom:xY,degToRad:_Y,radToDeg:bY,isPowerOfTwo:SY,ceilPowerOfTwo:EY,floorPowerOfTwo:TY,setQuaternionFromProperEuler:MY,normalize:Zn,denormalize:qo},wY=1,YT=0,mA=300,RY=301,CY=302,bN=1e3,jx=1001,SN=1002,im=1003,lU=1006,cU=1008,NY=1009,DY=1013,uU=1014,OY=1015,LY=1016,UY=1023,EN=1026,zY=1027,TN=0,PY=1,m1="",ko="srgb",MN="srgb-linear",AN="linear",C0="srgb",g1=35044,cf=2e3,y1=2001;class Wl{constructor(e,t,n,s,r,o,c,f,d){Wl.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,o,c,f,d)}set(e,t,n,s,r,o,c,f,d){const m=this.elements;return m[0]=e,m[1]=s,m[2]=c,m[3]=t,m[4]=r,m[5]=f,m[6]=n,m[7]=o,m[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,o=n[0],c=n[3],f=n[6],d=n[1],m=n[4],g=n[7],v=n[2],_=n[5],b=n[8],A=s[0],M=s[3],T=s[6],C=s[1],D=s[4],N=s[7],I=s[2],L=s[5],P=s[8];return r[0]=o*A+c*C+f*I,r[3]=o*M+c*D+f*L,r[6]=o*T+c*N+f*P,r[1]=d*A+m*C+g*I,r[4]=d*M+m*D+g*L,r[7]=d*T+m*N+g*P,r[2]=v*A+_*C+b*I,r[5]=v*M+_*D+b*L,r[8]=v*T+_*N+b*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],c=e[5],f=e[6],d=e[7],m=e[8];return t*o*m-t*c*d-n*r*m+n*c*f+s*r*d-s*o*f}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],c=e[5],f=e[6],d=e[7],m=e[8],g=m*o-c*d,v=c*f-m*r,_=d*r-o*f,b=t*g+n*v+s*_;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/b;return e[0]=g*A,e[1]=(s*d-m*n)*A,e[2]=(c*n-s*o)*A,e[3]=v*A,e[4]=(m*t-s*f)*A,e[5]=(s*r-c*t)*A,e[6]=_*A,e[7]=(n*f-d*t)*A,e[8]=(o*t-n*r)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,r,o,c){const f=Math.cos(r),d=Math.sin(r);return this.set(n*f,n*d,-n*(f*o+d*c)+o+e,-s*d,s*f,-s*(-d*o+f*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(GE.makeScale(e,t)),this}rotate(e){return this.premultiply(GE.makeRotation(-e)),this}translate(e,t){return this.premultiply(GE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const GE=new Wl,wN=new Wl().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),RN=new Wl().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function IY(){const i={enabled:!0,workingColorSpace:MN,spaces:{},convert:function(s,r,o){return this.enabled===!1||r===o||!r||!o||(this.spaces[r].transfer===C0&&(s.r=Vc(s.r),s.g=Vc(s.g),s.b=Vc(s.b)),this.spaces[r].primaries!==this.spaces[o].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===C0&&(s.r=Vp(s.r),s.g=Vp(s.g),s.b=Vp(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===m1?AN:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,o){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[MN]:{primaries:e,whitePoint:n,transfer:AN,toXYZ:wN,fromXYZ:RN,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:ko},outputColorSpaceConfig:{drawingBufferColorSpace:ko}},[ko]:{primaries:e,whitePoint:n,transfer:C0,toXYZ:wN,fromXYZ:RN,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:ko}}}),i}const xs=IY();function Vc(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Vp(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}const fU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ju={h:0,s:0,l:0},Yx={h:0,s:0,l:0};function kE(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class gA{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ko){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,xs.toWorkingColorSpace(this,t),this}setRGB(e,t,n,s=xs.workingColorSpace){return this.r=e,this.g=t,this.b=n,xs.toWorkingColorSpace(this,s),this}setHSL(e,t,n,s=xs.workingColorSpace){if(e=pA(e,1),t=Tn(t,0,1),n=Tn(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,o=2*n-r;this.r=kE(o,r,e+1/3),this.g=kE(o,r,e),this.b=kE(o,r,e-1/3)}return xs.toWorkingColorSpace(this,s),this}setStyle(e,t=ko){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=s[1],c=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ko){const n=fU[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Vc(e.r),this.g=Vc(e.g),this.b=Vc(e.b),this}copyLinearToSRGB(e){return this.r=Vp(e.r),this.g=Vp(e.g),this.b=Vp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ko){return xs.fromWorkingColorSpace(lr.copy(this),e),Math.round(Tn(lr.r*255,0,255))*65536+Math.round(Tn(lr.g*255,0,255))*256+Math.round(Tn(lr.b*255,0,255))}getHexString(e=ko){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=xs.workingColorSpace){xs.fromWorkingColorSpace(lr.copy(this),t);const n=lr.r,s=lr.g,r=lr.b,o=Math.max(n,s,r),c=Math.min(n,s,r);let f,d;const m=(c+o)/2;if(c===o)f=0,d=0;else{const g=o-c;switch(d=m<=.5?g/(o+c):g/(2-o-c),o){case n:f=(s-r)/g+(s<r?6:0);break;case s:f=(r-n)/g+2;break;case r:f=(n-s)/g+4;break}f/=6}return e.h=f,e.s=d,e.l=m,e}getRGB(e,t=xs.workingColorSpace){return xs.fromWorkingColorSpace(lr.copy(this),t),e.r=lr.r,e.g=lr.g,e.b=lr.b,e}getStyle(e=ko){xs.fromWorkingColorSpace(lr.copy(this),e);const t=lr.r,n=lr.g,s=lr.b;return e!==ko?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(Ju),this.setHSL(Ju.h+e,Ju.s+t,Ju.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ju),e.getHSL(Yx);const n=R0(Ju.h,Yx.h,t),s=R0(Ju.s,Yx.s,t),r=R0(Ju.l,Yx.l,t);return this.setHSL(n,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*s,this.g=r[1]*t+r[4]*n+r[7]*s,this.b=r[2]*t+r[5]*n+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const lr=new gA;gA.NAMES=fU;class yA{constructor(e,t,n,s){yA.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,s){const r=this.elements;return r[0]=e,r[2]=t,r[1]=n,r[3]=s,this}}class hU{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,r,o,c){let f=n[s+0],d=n[s+1],m=n[s+2],g=n[s+3];const v=r[o+0],_=r[o+1],b=r[o+2],A=r[o+3];if(c===0){e[t+0]=f,e[t+1]=d,e[t+2]=m,e[t+3]=g;return}if(c===1){e[t+0]=v,e[t+1]=_,e[t+2]=b,e[t+3]=A;return}if(g!==A||f!==v||d!==_||m!==b){let M=1-c;const T=f*v+d*_+m*b+g*A,C=T>=0?1:-1,D=1-T*T;if(D>Number.EPSILON){const I=Math.sqrt(D),L=Math.atan2(I,T*C);M=Math.sin(M*L)/I,c=Math.sin(c*L)/I}const N=c*C;if(f=f*M+v*N,d=d*M+_*N,m=m*M+b*N,g=g*M+A*N,M===1-c){const I=1/Math.sqrt(f*f+d*d+m*m+g*g);f*=I,d*=I,m*=I,g*=I}}e[t]=f,e[t+1]=d,e[t+2]=m,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,s,r,o){const c=n[s],f=n[s+1],d=n[s+2],m=n[s+3],g=r[o],v=r[o+1],_=r[o+2],b=r[o+3];return e[t]=c*b+m*g+f*_-d*v,e[t+1]=f*b+m*v+d*g-c*_,e[t+2]=d*b+m*_+c*v-f*g,e[t+3]=m*b-c*g-f*v-d*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,r=e._z,o=e._order,c=Math.cos,f=Math.sin,d=c(n/2),m=c(s/2),g=c(r/2),v=f(n/2),_=f(s/2),b=f(r/2);switch(o){case"XYZ":this._x=v*m*g+d*_*b,this._y=d*_*g-v*m*b,this._z=d*m*b+v*_*g,this._w=d*m*g-v*_*b;break;case"YXZ":this._x=v*m*g+d*_*b,this._y=d*_*g-v*m*b,this._z=d*m*b-v*_*g,this._w=d*m*g+v*_*b;break;case"ZXY":this._x=v*m*g-d*_*b,this._y=d*_*g+v*m*b,this._z=d*m*b+v*_*g,this._w=d*m*g-v*_*b;break;case"ZYX":this._x=v*m*g-d*_*b,this._y=d*_*g+v*m*b,this._z=d*m*b-v*_*g,this._w=d*m*g+v*_*b;break;case"YZX":this._x=v*m*g+d*_*b,this._y=d*_*g+v*m*b,this._z=d*m*b-v*_*g,this._w=d*m*g-v*_*b;break;case"XZY":this._x=v*m*g-d*_*b,this._y=d*_*g-v*m*b,this._z=d*m*b+v*_*g,this._w=d*m*g+v*_*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],r=t[8],o=t[1],c=t[5],f=t[9],d=t[2],m=t[6],g=t[10],v=n+c+g;if(v>0){const _=.5/Math.sqrt(v+1);this._w=.25/_,this._x=(m-f)*_,this._y=(r-d)*_,this._z=(o-s)*_}else if(n>c&&n>g){const _=2*Math.sqrt(1+n-c-g);this._w=(m-f)/_,this._x=.25*_,this._y=(s+o)/_,this._z=(r+d)/_}else if(c>g){const _=2*Math.sqrt(1+c-n-g);this._w=(r-d)/_,this._x=(s+o)/_,this._y=.25*_,this._z=(f+m)/_}else{const _=2*Math.sqrt(1+g-n-c);this._w=(o-s)/_,this._x=(r+d)/_,this._y=(f+m)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Tn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,r=e._z,o=e._w,c=t._x,f=t._y,d=t._z,m=t._w;return this._x=n*m+o*c+s*d-r*f,this._y=s*m+o*f+r*c-n*d,this._z=r*m+o*d+n*f-s*c,this._w=o*m-n*c-s*f-r*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,r=this._z,o=this._w;let c=o*e._w+n*e._x+s*e._y+r*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=o,this._x=n,this._y=s,this._z=r,this;const f=1-c*c;if(f<=Number.EPSILON){const _=1-t;return this._w=_*o+t*this._w,this._x=_*n+t*this._x,this._y=_*s+t*this._y,this._z=_*r+t*this._z,this.normalize(),this}const d=Math.sqrt(f),m=Math.atan2(d,c),g=Math.sin((1-t)*m)/d,v=Math.sin(t*m)/d;return this._w=o*g+this._w*v,this._x=n*g+this._x*v,this._y=s*g+this._y*v,this._z=r*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vt{constructor(e=0,t=0,n=0){Vt.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(CN.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(CN.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*s,this.y=r[1]*t+r[4]*n+r[7]*s,this.z=r[2]*t+r[5]*n+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*s+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*s+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*s+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,r=e.x,o=e.y,c=e.z,f=e.w,d=2*(o*s-c*n),m=2*(c*t-r*s),g=2*(r*n-o*t);return this.x=t+f*d+o*g-c*m,this.y=n+f*m+c*d-r*g,this.z=s+f*g+r*m-o*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*s,this.y=r[1]*t+r[5]*n+r[9]*s,this.z=r[2]*t+r[6]*n+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Tn(this.x,e.x,t.x),this.y=Tn(this.y,e.y,t.y),this.z=Tn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Tn(this.x,e,t),this.y=Tn(this.y,e,t),this.z=Tn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Tn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,r=e.z,o=t.x,c=t.y,f=t.z;return this.x=s*f-r*c,this.y=r*o-n*f,this.z=n*c-s*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return $E.copy(this).projectOnVector(e),this.sub($E)}reflect(e){return this.sub($E.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Tn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const $E=new Vt,CN=new hU;class jl{constructor(e,t,n,s,r,o,c,f,d,m,g,v,_,b,A,M){jl.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,o,c,f,d,m,g,v,_,b,A,M)}set(e,t,n,s,r,o,c,f,d,m,g,v,_,b,A,M){const T=this.elements;return T[0]=e,T[4]=t,T[8]=n,T[12]=s,T[1]=r,T[5]=o,T[9]=c,T[13]=f,T[2]=d,T[6]=m,T[10]=g,T[14]=v,T[3]=_,T[7]=b,T[11]=A,T[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new jl().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/wp.setFromMatrixColumn(e,0).length(),r=1/wp.setFromMatrixColumn(e,1).length(),o=1/wp.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,r=e.z,o=Math.cos(n),c=Math.sin(n),f=Math.cos(s),d=Math.sin(s),m=Math.cos(r),g=Math.sin(r);if(e.order==="XYZ"){const v=o*m,_=o*g,b=c*m,A=c*g;t[0]=f*m,t[4]=-f*g,t[8]=d,t[1]=_+b*d,t[5]=v-A*d,t[9]=-c*f,t[2]=A-v*d,t[6]=b+_*d,t[10]=o*f}else if(e.order==="YXZ"){const v=f*m,_=f*g,b=d*m,A=d*g;t[0]=v+A*c,t[4]=b*c-_,t[8]=o*d,t[1]=o*g,t[5]=o*m,t[9]=-c,t[2]=_*c-b,t[6]=A+v*c,t[10]=o*f}else if(e.order==="ZXY"){const v=f*m,_=f*g,b=d*m,A=d*g;t[0]=v-A*c,t[4]=-o*g,t[8]=b+_*c,t[1]=_+b*c,t[5]=o*m,t[9]=A-v*c,t[2]=-o*d,t[6]=c,t[10]=o*f}else if(e.order==="ZYX"){const v=o*m,_=o*g,b=c*m,A=c*g;t[0]=f*m,t[4]=b*d-_,t[8]=v*d+A,t[1]=f*g,t[5]=A*d+v,t[9]=_*d-b,t[2]=-d,t[6]=c*f,t[10]=o*f}else if(e.order==="YZX"){const v=o*f,_=o*d,b=c*f,A=c*d;t[0]=f*m,t[4]=A-v*g,t[8]=b*g+_,t[1]=g,t[5]=o*m,t[9]=-c*m,t[2]=-d*m,t[6]=_*g+b,t[10]=v-A*g}else if(e.order==="XZY"){const v=o*f,_=o*d,b=c*f,A=c*d;t[0]=f*m,t[4]=-g,t[8]=d*m,t[1]=v*g+A,t[5]=o*m,t[9]=_*g-b,t[2]=b*g-_,t[6]=c*m,t[10]=A*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(BY,e,FY)}lookAt(e,t,n){const s=this.elements;return Ra.subVectors(e,t),Ra.lengthSq()===0&&(Ra.z=1),Ra.normalize(),ef.crossVectors(n,Ra),ef.lengthSq()===0&&(Math.abs(n.z)===1?Ra.x+=1e-4:Ra.z+=1e-4,Ra.normalize(),ef.crossVectors(n,Ra)),ef.normalize(),Wx.crossVectors(Ra,ef),s[0]=ef.x,s[4]=Wx.x,s[8]=Ra.x,s[1]=ef.y,s[5]=Wx.y,s[9]=Ra.y,s[2]=ef.z,s[6]=Wx.z,s[10]=Ra.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,o=n[0],c=n[4],f=n[8],d=n[12],m=n[1],g=n[5],v=n[9],_=n[13],b=n[2],A=n[6],M=n[10],T=n[14],C=n[3],D=n[7],N=n[11],I=n[15],L=s[0],P=s[4],G=s[8],B=s[12],U=s[1],j=s[5],ae=s[9],ne=s[13],de=s[2],he=s[6],F=s[10],W=s[14],Z=s[3],fe=s[7],X=s[11],ie=s[15];return r[0]=o*L+c*U+f*de+d*Z,r[4]=o*P+c*j+f*he+d*fe,r[8]=o*G+c*ae+f*F+d*X,r[12]=o*B+c*ne+f*W+d*ie,r[1]=m*L+g*U+v*de+_*Z,r[5]=m*P+g*j+v*he+_*fe,r[9]=m*G+g*ae+v*F+_*X,r[13]=m*B+g*ne+v*W+_*ie,r[2]=b*L+A*U+M*de+T*Z,r[6]=b*P+A*j+M*he+T*fe,r[10]=b*G+A*ae+M*F+T*X,r[14]=b*B+A*ne+M*W+T*ie,r[3]=C*L+D*U+N*de+I*Z,r[7]=C*P+D*j+N*he+I*fe,r[11]=C*G+D*ae+N*F+I*X,r[15]=C*B+D*ne+N*W+I*ie,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],r=e[12],o=e[1],c=e[5],f=e[9],d=e[13],m=e[2],g=e[6],v=e[10],_=e[14],b=e[3],A=e[7],M=e[11],T=e[15];return b*(+r*f*g-s*d*g-r*c*v+n*d*v+s*c*_-n*f*_)+A*(+t*f*_-t*d*v+r*o*v-s*o*_+s*d*m-r*f*m)+M*(+t*d*g-t*c*_-r*o*g+n*o*_+r*c*m-n*d*m)+T*(-s*c*m-t*f*g+t*c*v+s*o*g-n*o*v+n*f*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],c=e[5],f=e[6],d=e[7],m=e[8],g=e[9],v=e[10],_=e[11],b=e[12],A=e[13],M=e[14],T=e[15],C=g*M*d-A*v*d+A*f*_-c*M*_-g*f*T+c*v*T,D=b*v*d-m*M*d-b*f*_+o*M*_+m*f*T-o*v*T,N=m*A*d-b*g*d+b*c*_-o*A*_-m*c*T+o*g*T,I=b*g*f-m*A*f-b*c*v+o*A*v+m*c*M-o*g*M,L=t*C+n*D+s*N+r*I;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/L;return e[0]=C*P,e[1]=(A*v*r-g*M*r-A*s*_+n*M*_+g*s*T-n*v*T)*P,e[2]=(c*M*r-A*f*r+A*s*d-n*M*d-c*s*T+n*f*T)*P,e[3]=(g*f*r-c*v*r-g*s*d+n*v*d+c*s*_-n*f*_)*P,e[4]=D*P,e[5]=(m*M*r-b*v*r+b*s*_-t*M*_-m*s*T+t*v*T)*P,e[6]=(b*f*r-o*M*r-b*s*d+t*M*d+o*s*T-t*f*T)*P,e[7]=(o*v*r-m*f*r+m*s*d-t*v*d-o*s*_+t*f*_)*P,e[8]=N*P,e[9]=(b*g*r-m*A*r-b*n*_+t*A*_+m*n*T-t*g*T)*P,e[10]=(o*A*r-b*c*r+b*n*d-t*A*d-o*n*T+t*c*T)*P,e[11]=(m*c*r-o*g*r-m*n*d+t*g*d+o*n*_-t*c*_)*P,e[12]=I*P,e[13]=(m*A*s-b*g*s+b*n*v-t*A*v-m*n*M+t*g*M)*P,e[14]=(b*c*s-o*A*s-b*n*f+t*A*f+o*n*M-t*c*M)*P,e[15]=(o*g*s-m*c*s+m*n*f-t*g*f-o*n*v+t*c*v)*P,this}scale(e){const t=this.elements,n=e.x,s=e.y,r=e.z;return t[0]*=n,t[4]*=s,t[8]*=r,t[1]*=n,t[5]*=s,t[9]*=r,t[2]*=n,t[6]*=s,t[10]*=r,t[3]*=n,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),r=1-n,o=e.x,c=e.y,f=e.z,d=r*o,m=r*c;return this.set(d*o+n,d*c-s*f,d*f+s*c,0,d*c+s*f,m*c+n,m*f-s*o,0,d*f-s*c,m*f+s*o,r*f*f+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,r,o){return this.set(1,n,r,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,r=t._x,o=t._y,c=t._z,f=t._w,d=r+r,m=o+o,g=c+c,v=r*d,_=r*m,b=r*g,A=o*m,M=o*g,T=c*g,C=f*d,D=f*m,N=f*g,I=n.x,L=n.y,P=n.z;return s[0]=(1-(A+T))*I,s[1]=(_+N)*I,s[2]=(b-D)*I,s[3]=0,s[4]=(_-N)*L,s[5]=(1-(v+T))*L,s[6]=(M+C)*L,s[7]=0,s[8]=(b+D)*P,s[9]=(M-C)*P,s[10]=(1-(v+A))*P,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let r=wp.set(s[0],s[1],s[2]).length();const o=wp.set(s[4],s[5],s[6]).length(),c=wp.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],Ho.copy(this);const d=1/r,m=1/o,g=1/c;return Ho.elements[0]*=d,Ho.elements[1]*=d,Ho.elements[2]*=d,Ho.elements[4]*=m,Ho.elements[5]*=m,Ho.elements[6]*=m,Ho.elements[8]*=g,Ho.elements[9]*=g,Ho.elements[10]*=g,t.setFromRotationMatrix(Ho),n.x=r,n.y=o,n.z=c,this}makePerspective(e,t,n,s,r,o,c=cf){const f=this.elements,d=2*r/(t-e),m=2*r/(n-s),g=(t+e)/(t-e),v=(n+s)/(n-s);let _,b;if(c===cf)_=-(o+r)/(o-r),b=-2*o*r/(o-r);else if(c===y1)_=-o/(o-r),b=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return f[0]=d,f[4]=0,f[8]=g,f[12]=0,f[1]=0,f[5]=m,f[9]=v,f[13]=0,f[2]=0,f[6]=0,f[10]=_,f[14]=b,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,n,s,r,o,c=cf){const f=this.elements,d=1/(t-e),m=1/(n-s),g=1/(o-r),v=(t+e)*d,_=(n+s)*m;let b,A;if(c===cf)b=(o+r)*g,A=-2*g;else if(c===y1)b=r*g,A=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return f[0]=2*d,f[4]=0,f[8]=0,f[12]=-v,f[1]=0,f[5]=2*m,f[9]=0,f[13]=-_,f[2]=0,f[6]=0,f[10]=A,f[14]=-b,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const wp=new Vt,Ho=new jl,BY=new Vt(0,0,0),FY=new Vt(1,1,1),ef=new Vt,Wx=new Vt,Ra=new Vt;class ao{constructor(e=0,t=0){ao.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Tn(this.x,e.x,t.x),this.y=Tn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Tn(this.x,e,t),this.y=Tn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Tn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Tn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*s+e.x,this.y=r*s+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class gf{constructor(e=0,t=0,n=0,s=1){gf.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*s+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*s+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*s+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*s+o[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,r;const f=e.elements,d=f[0],m=f[4],g=f[8],v=f[1],_=f[5],b=f[9],A=f[2],M=f[6],T=f[10];if(Math.abs(m-v)<.01&&Math.abs(g-A)<.01&&Math.abs(b-M)<.01){if(Math.abs(m+v)<.1&&Math.abs(g+A)<.1&&Math.abs(b+M)<.1&&Math.abs(d+_+T-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(d+1)/2,N=(_+1)/2,I=(T+1)/2,L=(m+v)/4,P=(g+A)/4,G=(b+M)/4;return D>N&&D>I?D<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(D),s=L/n,r=P/n):N>I?N<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(N),n=L/s,r=G/s):I<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(I),n=P/r,s=G/r),this.set(n,s,r,t),this}let C=Math.sqrt((M-b)*(M-b)+(g-A)*(g-A)+(v-m)*(v-m));return Math.abs(C)<.001&&(C=1),this.x=(M-b)/C,this.y=(g-A)/C,this.z=(v-m)/C,this.w=Math.acos((d+_+T-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Tn(this.x,e.x,t.x),this.y=Tn(this.y,e.y,t.y),this.z=Tn(this.z,e.z,t.z),this.w=Tn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Tn(this.x,e,t),this.y=Tn(this.y,e,t),this.z=Tn(this.z,e,t),this.w=Tn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Tn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}function WT(i,e=0){let t=3735928559^e,n=1103547991^e;if(i instanceof Array)for(let s=0,r;s<i.length;s++)r=i[s],t=Math.imul(t^r,2654435761),n=Math.imul(n^r,1597334677);else for(let s=0,r;s<i.length;s++)r=i.charCodeAt(s),t=Math.imul(t^r,2654435761),n=Math.imul(n^r,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)}const dU=(...i)=>WT(i);function HY(i,e=!1){const t=[];i.isNode===!0&&(t.push(i.id),i=i.getSelf());for(const{property:n,childNode:s}of ZT(i))t.push(WT(n.slice(0,-4)),s.getCacheKey(e));return WT(t)}function*ZT(i,e=!1){for(const t in i){if(t.startsWith("_")===!0)continue;const n=i[t];if(Array.isArray(n)===!0)for(let s=0;s<n.length;s++){const r=n[s];r&&(r.isNode===!0||e&&typeof r.toJSON=="function")&&(yield{property:t,index:s,childNode:r})}else if(n&&n.isNode===!0)yield{property:t,childNode:n};else if(typeof n=="object")for(const s in n){const r=n[s];r&&(r.isNode===!0||e&&typeof r.toJSON=="function")&&(yield{property:t,index:s,childNode:r})}}}function v1(i){if(i==null)return null;const e=typeof i;return i.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":i.isVector2===!0?"vec2":i.isVector3===!0?"vec3":i.isVector4===!0?"vec4":i.isMatrix2===!0?"mat2":i.isMatrix3===!0?"mat3":i.isMatrix4===!0?"mat4":i.isColor===!0?"color":i instanceof ArrayBuffer?"ArrayBuffer":null}function pU(i,...e){const t=i?i.slice(-4):void 0;return e.length===1&&(t==="vec2"?e=[e[0],e[0]]:t==="vec3"?e=[e[0],e[0],e[0]]:t==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),i==="color"?new gA(...e):t==="vec2"?new ao(...e):t==="vec3"?new Vt(...e):t==="vec4"?new gf(...e):t==="mat2"?new yA(...e):t==="mat3"?new Wl(...e):t==="mat4"?new jl(...e):i==="bool"?e[0]||!1:i==="float"||i==="int"||i==="uint"?e[0]||0:i==="string"?e[0]||"":i==="ArrayBuffer"?GY(e[0]):null}function VY(i){let e="";const t=new Uint8Array(i);for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function GY(i){return Uint8Array.from(atob(i),e=>e.charCodeAt(0)).buffer}class vA{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const s=n[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}}let kY=0;class Hn extends vA{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=bs.NONE,this.updateBeforeType=bs.NONE,this.updateAfterType=bs.NONE,this.uuid=AY.generateUUID(),this.version=0,this.global=!1,this.isNode=!0,this._cacheKey=null,this._cacheKeyVersion=0,Object.defineProperty(this,"id",{value:kY++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,bs.FRAME)}onRenderUpdate(e){return this.onUpdate(e,bs.RENDER)}onObjectUpdate(e){return this.onUpdate(e,bs.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of ZT(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=dU(HY(this,e),this.customCacheKey()),this._cacheKeyVersion=this.version),this._cacheKey}customCacheKey(){return 0}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const t=this.getNodeType(e);return e.getElementType(t)}getMemberType(){return"void"}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}setup(e){const t=e.getNodeProperties(this);let n=0;for(const s of this.getChildren())t["node"+n++]=s;return t.outputNode||null}analyze(e){if(e.increaseUsage(this)===1){const n=e.getNodeProperties(this);for(const s of Object.values(n))s&&s.isNode===!0&&s.build(e)}}generate(e,t){const{outputNode:n}=e.getNodeProperties(this);if(n&&n.isNode===!0)return n.build(e,t)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,t=null){const n=this.getShared(e);if(this!==n)return n.build(e,t);e.addNode(this),e.addChain(this);let s=null;const r=e.getBuildStage();if(r==="setup"){this.updateReference(e);const o=e.getNodeProperties(this);if(o.initialized!==!0){o.initialized=!0;const c=this.setup(e),f=c&&c.isNode===!0;for(const d of Object.values(o))d&&d.isNode===!0&&d.build(e);f&&c.build(e),o.outputNode=c}}else if(r==="analyze")this.analyze(e);else if(r==="generate")if(this.generate.length===1){const c=this.getNodeType(e),f=e.getDataFromNode(this);s=f.snippet,s===void 0?f.generated===void 0?(f.generated=!0,s=this.generate(e)||"",f.snippet=s):(console.warn("THREE.Node: Recursion detected.",this),s=""):f.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),s=e.format(s,c,t)}else s=this.generate(e,t)||"";return e.removeChain(this),e.addSequentialNode(this),s}getSerializeChildren(){return ZT(this)}serialize(e){const t=this.getSerializeChildren(),n={};for(const{property:s,index:r,childNode:o}of t)r!==void 0?(n[s]===void 0&&(n[s]=Number.isInteger(r)?[]:{}),n[s][r]=o.toJSON(e.meta).uuid):n[s]=o.toJSON(e.meta).uuid;Object.keys(n).length>0&&(e.inputNodes=n)}deserialize(e){if(e.inputNodes!==void 0){const t=e.meta.nodes;for(const n in e.inputNodes)if(Array.isArray(e.inputNodes[n])){const s=[];for(const r of e.inputNodes[n])s.push(t[r]);this[n]=s}else if(typeof e.inputNodes[n]=="object"){const s={};for(const r in e.inputNodes[n]){const o=e.inputNodes[n][r];s[r]=t[o]}this[n]=s}else{const s=e.inputNodes[n];this[n]=t[s]}}}toJSON(e){const{uuid:t,type:n}=this,s=e===void 0||typeof e=="string";s&&(e={textures:{},images:{},nodes:{}});let r=e.nodes[t];r===void 0&&(r={uuid:t,type:n,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},s!==!0&&(e.nodes[r.uuid]=r),this.serialize(r),delete r.meta);function o(c){const f=[];for(const d in c){const m=c[d];delete m.metadata,f.push(m)}return f}if(s){const c=o(e.textures),f=o(e.images),d=o(e.nodes);c.length>0&&(r.textures=c),f.length>0&&(r.images=f),d.length>0&&(r.nodes=d)}return r}}class gr extends Hn{static get type(){return"TempNode"}constructor(e=null){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if(e.getBuildStage()==="generate"){const s=e.getVectorType(this.getNodeType(e,t)),r=e.getDataFromNode(this);if(r.propertyName!==void 0)return e.format(r.propertyName,s,t);if(s!=="void"&&t!=="void"&&this.hasDependencies(e)){const o=super.build(e,s),c=e.getVarFromNode(this,null,s),f=e.getPropertyName(c);return e.addLineFlowCode(`${f} = ${o}`,this),r.snippet=o,r.propertyName=f,e.format(r.propertyName,s,t)}}return super.build(e,t)}}class my extends Hn{static get type(){return"ArrayElementNode"}constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=this.indexNode.getNodeType(e),n=this.node.build(e),s=this.indexNode.build(e,!e.isVector(t)&&e.isInteger(t)?t:"uint");return`${n}[ ${s} ]`}}class mU extends Hn{static get type(){return"ConvertNode"}constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let n=null;for(const s of this.convertTo.split("|"))(n===null||e.getTypeLength(t)===e.getTypeLength(s))&&(n=s);return n}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const n=this.node,s=this.getNodeType(e),r=n.build(e,s);return e.format(r,s,t)}}class $Y extends gr{static get type(){return"JoinNode"}constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,n)=>t+e.getTypeLength(n.getNodeType(e)),0))}generate(e,t){const n=this.getNodeType(e),s=e.getTypeLength(n),r=this.nodes,o=e.getComponentType(n),c=[];let f=0;for(const m of r){if(f>=s){console.error(`THREE.TSL: Length of parameters exceeds maximum length of function '${n}()' type.`);break}let g=m.getNodeType(e),v=e.getTypeLength(g),_;f+v>s&&(console.error(`THREE.TSL: Length of '${n}()' data exceeds maximum length of output type.`),v=s-f,g=e.getTypeFromLength(v)),f+=v,_=m.build(e,g);const b=e.getComponentType(g);b!==o&&(_=e.format(_,b,o)),c.push(_)}const d=`${e.getType(n)}( ${c.join(", ")} )`;return e.format(d,n,t)}}const XY=py.join("");class NN extends Hn{static get type(){return"SplitNode"}constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(py.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,t){const n=this.node,s=e.getTypeLength(n.getNodeType(e));let r=null;if(s>1){let o=null;this.getVectorLength()>=s&&(o=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const f=n.build(e,o);this.components.length===s&&this.components===XY.slice(0,this.components.length)?r=e.format(f,o,t):r=e.format(`${f}.${this.components}`,this.getNodeType(e),t)}else r=n.build(e,t);return r}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class qY extends gr{static get type(){return"SetNode"}constructor(e,t,n){super(),this.sourceNode=e,this.components=t,this.targetNode=n}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:n,targetNode:s}=this,r=this.getNodeType(e),o=e.getComponentType(s.getNodeType(e)),c=e.getTypeFromLength(n.length,o),f=s.build(e,c),d=t.build(e,r),m=e.getTypeLength(r),g=[];for(let v=0;v<m;v++){const _=py[v];_===n[0]?(g.push(f),v+=n.length-1):g.push(d+"."+_)}return`${e.getType(r)}( ${g.join(", ")} )`}}class jY extends gr{static get type(){return"FlipNode"}constructor(e,t){super(),this.sourceNode=e,this.components=t}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:t,sourceNode:n}=this,s=this.getNodeType(e),r=n.build(e),o=e.getVarFromNode(this),c=e.getPropertyName(o);e.addLineFlowCode(c+" = "+r,this);const f=e.getTypeLength(s),d=[];let m=0;for(let g=0;g<f;g++){const v=py[g];v===t[m]?(d.push("1.0 - "+(c+"."+v)),m++):d.push(c+"."+v)}return`${e.getType(s)}( ${d.join(", ")} )`}}class xA extends Hn{static get type(){return"InputNode"}constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?v1(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=v1(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=VY(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?pU(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}const DN=/float|u?int/;class Zc extends xA{static get type(){return"ConstNode"}constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const n=this.getNodeType(e);return DN.test(n)&&DN.test(t)?e.generateConst(t,this.value):e.format(this.generateConst(e),n,t)}}class YY extends Hn{static get type(){return"MemberNode"}constructor(e,t){super(),this.node=e,this.property=t,this.isMemberNode=!0}getNodeType(e){return this.node.getMemberType(e,this.property)}generate(e){return this.node.build(e)+"."+this.property}}let gU=null;const zp=new Map;function ze(i,e){if(zp.has(i)){console.warn(`THREE.TSL: Redefinition of method chaining '${i}'.`);return}if(typeof e!="function")throw new Error(`THREE.TSL: Node element ${i} is not a function`);zp.set(i,e)}const yU=i=>i.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),ON=i=>yU(i).split("").sort().join(""),vU={setup(i,e){const t=e.shift();return i(hb(t),...e)},get(i,e,t){if(typeof e=="string"&&i[e]===void 0){if(i.isStackNode!==!0&&e==="assign")return(...n)=>(gU.assign(t,...n),t);if(zp.has(e)){const n=zp.get(e);return i.isStackNode?(...s)=>t.add(n(...s)):(...s)=>n(t,...s)}else{if(e==="self")return i;if(e.endsWith("Assign")&&zp.has(e.slice(0,e.length-6))){const n=zp.get(e.slice(0,e.length-6));return i.isStackNode?(...s)=>t.assign(s[0],n(...s)):(...s)=>t.assign(n(t,...s))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=yU(e),at(new NN(t,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=ON(e.slice(3).toLowerCase()),n=>at(new qY(i,e,n));if(/^flip[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=ON(e.slice(4).toLowerCase()),()=>at(new jY(at(i),e));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),at(new NN(i,e));if(/^\d+$/.test(e)===!0)return at(new my(t,new Zc(Number(e),"uint")));if(/^get$/.test(e)===!0)return n=>at(new YY(t,n))}}}return Reflect.get(i,e,t)},set(i,e,t,n){return typeof e=="string"&&i[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(n[e].assign(t),!0):Reflect.set(i,e,t,n)}},XE=new WeakMap,LN=new WeakMap,WY=function(i,e=null){const t=v1(i);if(t==="node"){let n=XE.get(i);return n===void 0&&(n=new Proxy(i,vU),XE.set(i,n),XE.set(n,n)),n}else{if(e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string")return at(KT(i,e));if(t==="shader")return ls(i)}return i},ZY=function(i,e=null){for(const t in i)i[t]=at(i[t],e);return i},KY=function(i,e=null){const t=i.length;for(let n=0;n<t;n++)i[n]=at(i[n],e);return i},QY=function(i,e=null,t=null,n=null){const s=m=>at(n!==null?Object.assign(m,n):m);let r,o=e,c,f;function d(m){let g;return o?g=/[a-z]/i.test(o)?o+"()":o:g=i.type,c!==void 0&&m.length<c?(console.error(`THREE.TSL: "${g}" parameter length is less than minimum required.`),m.concat(new Array(c-m.length).fill(0))):f!==void 0&&m.length>f?(console.error(`THREE.TSL: "${g}" parameter length exceeds limit.`),m.slice(0,f)):m}return e===null?r=(...m)=>s(new i(...N0(d(m)))):t!==null?(t=at(t),r=(...m)=>s(new i(e,...N0(d(m)),t))):r=(...m)=>s(new i(e,...N0(d(m)))),r.setParameterLength=(...m)=>(m.length===1?c=f=m[0]:m.length===2&&([c,f]=m),r),r.setName=m=>(o=m,r),r},JY=function(i,...e){return at(new i(...N0(e)))};class eW extends Hn{constructor(e,t){super(),this.shaderNode=e,this.inputNodes=t}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}getMemberType(e,t){return this.getOutputNode(e).getMemberType(e,t)}call(e){const{shaderNode:t,inputNodes:n}=this,s=e.getNodeProperties(t);if(s.onceOutput)return s.onceOutput;let r=null;if(t.layout){let o=LN.get(e.constructor);o===void 0&&(o=new WeakMap,LN.set(e.constructor,o));let c=o.get(t);c===void 0&&(c=at(e.buildFunctionNode(t)),o.set(t,c)),e.addInclude(c),r=at(c.call(n))}else{const o=t.jsFunc,c=n!==null||o.length>1?o(n||[],e):o(e);r=at(c)}return t.once&&(s.onceOutput=r),r}getOutputNode(e){const t=e.getNodeProperties(this);return t.outputNode===null&&(t.outputNode=this.setupOutput(e)),t.outputNode}setup(e){return this.getOutputNode(e)}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,t){return this.getOutputNode(e).build(e,t)}}class tW extends Hn{constructor(e,t){super(t),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return hb(e),at(new eW(this,e))}setup(){return this.call()}}const nW=[!1,!0],iW=[0,1,2,3],sW=[-1,-2],xU=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],_A=new Map;for(const i of nW)_A.set(i,new Zc(i));const bA=new Map;for(const i of iW)bA.set(i,new Zc(i,"uint"));const SA=new Map([...bA].map(i=>new Zc(i.value,"int")));for(const i of sW)SA.set(i,new Zc(i,"int"));const ub=new Map([...SA].map(i=>new Zc(i.value)));for(const i of xU)ub.set(i,new Zc(i));for(const i of xU)ub.set(-i,new Zc(-i));const fb={bool:_A,uint:bA,ints:SA,float:ub},UN=new Map([..._A,...ub]),KT=(i,e)=>UN.has(i)?UN.get(i):i.isNode===!0?i:new Zc(i,e),rW=i=>{try{return i.getNodeType()}catch{return}},os=function(i,e=null){return(...t)=>{if((t.length===0||!["bool","float","int","uint"].includes(i)&&t.every(s=>typeof s!="object"))&&(t=[pU(i,...t)]),t.length===1&&e!==null&&e.has(t[0]))return at(e.get(t[0]));if(t.length===1){const s=KT(t[0],i);return rW(s)===i?at(s):at(new mU(s,i))}const n=t.map(s=>KT(s));return at(new $Y(n,i))}},aW=i=>i!=null?i.nodeType||i.convertTo||(typeof i=="string"?i:null):null;function oW(i,e){return new Proxy(new tW(i,e),vU)}const at=(i,e=null)=>WY(i,e),hb=(i,e=null)=>new ZY(i,e),N0=(i,e=null)=>new KY(i,e),it=(...i)=>new QY(...i),Tt=(...i)=>new JY(...i);let lW=0;const ls=(i,e=null)=>{let t=null;e!==null&&(typeof e=="object"?t=e.return:(typeof e=="string"?t=e:console.error("THREE.TSL: Invalid layout type."),e=null));const n=new oW(i,t),s=(...r)=>{let o;return hb(r),r[0]&&r[0].isNode?o=[...r]:o=r[0],n.call(o)};if(s.shaderNode=n,s.setLayout=r=>(n.setLayout(r),s),s.once=()=>(n.once=!0,s),e!==null){if(typeof e.inputs!="object"){const r={name:"fn"+lW++,type:t,inputs:[]};for(const o in e)o!=="return"&&r.inputs.push({name:o,type:e[o]});e=r}s.setLayout(e)}return s};ze("toGlobal",i=>(i.global=!0,i));const cW=(...i)=>gU.If(...i);function uW(i){return i}ze("append",uW);const fW=new os("color"),Oa=new os("float",fb.float),x1=new os("int",fb.ints),hW=new os("uint",fb.uint),dW=new os("bool",fb.bool),gy=new os("vec2"),pW=new os("ivec2"),mW=new os("uvec2"),gW=new os("bvec2"),Kn=new os("vec3"),yW=new os("ivec3"),vW=new os("uvec3"),xW=new os("bvec3"),Gc=new os("vec4"),_W=new os("ivec4"),bW=new os("uvec4"),SW=new os("bvec4"),_U=new os("mat2"),yy=new os("mat3"),EW=new os("mat4");ze("toColor",fW);ze("toFloat",Oa);ze("toInt",x1);ze("toUint",hW);ze("toBool",dW);ze("toVec2",gy);ze("toIVec2",pW);ze("toUVec2",mW);ze("toBVec2",gW);ze("toVec3",Kn);ze("toIVec3",yW);ze("toUVec3",vW);ze("toBVec3",xW);ze("toVec4",Gc);ze("toIVec4",_W);ze("toUVec4",bW);ze("toBVec4",SW);ze("toMat2",_U);ze("toMat3",yy);ze("toMat4",EW);const TW=it(my).setParameterLength(2),MW=(i,e)=>at(new mU(at(i),e));ze("element",TW);ze("convert",MW);class AW extends gr{static get type(){return"AssignNode"}constructor(e,t){super(),this.targetNode=e,this.sourceNode=t}hasDependencies(){return!1}getNodeType(e,t){return t!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(e.isAvailable("swizzleAssign")===!1&&t.isSplitNode&&t.components.length>1){const n=e.getTypeLength(t.node.getNodeType(e));return py.join("").slice(0,n)!==t.components}return!1}generate(e,t){const{targetNode:n,sourceNode:s}=this,r=this.needsSplitAssign(e),o=n.getNodeType(e),c=n.context({assign:!0}).build(e),f=s.build(e,o),d=s.getNodeType(e),m=e.getDataFromNode(this);let g;if(m.initialized===!0)t!=="void"&&(g=c);else if(r){const v=e.getVarFromNode(this,null,o),_=e.getPropertyName(v);e.addLineFlowCode(`${_} = ${f}`,this);const b=n.node.context({assign:!0}).build(e);for(let A=0;A<n.components.length;A++){const M=n.components[A];e.addLineFlowCode(`${b}.${M} = ${_}[ ${A} ]`,this)}t!=="void"&&(g=c)}else g=`${c} = ${f}`,(t==="void"||d==="void")&&(e.addLineFlowCode(g,this),t!=="void"&&(g=c));return m.initialized=!0,e.format(g,o,t)}}const wW=it(AW).setParameterLength(2);ze("assign",wW);class zN extends gr{static get type(){return"ArrayNode"}constructor(e,t,n=null){super(e),this.count=t,this.values=n,this.isArrayNode=!0}getNodeType(e){return this.nodeType===null&&(this.nodeType=this.values[0].getNodeType(e)),this.nodeType}getElementType(e){return this.getNodeType(e)}generate(e){const t=this.getNodeType(e);return e.generateArray(t,this.count,this.values)}}const RW=(...i)=>{let e;if(i.length===1){const t=i[0];e=new zN(null,t.length,t)}else{const t=i[0],n=i[1];e=new zN(t,n)}return at(e)};ze("toArray",(i,e)=>RW(Array(e).fill(i)));class bU extends Hn{static get type(){return"UniformGroupNode"}constructor(e,t=!1,n=1){super("string"),this.name=e,this.shared=t,this.order=n,this.isUniformGroup=!0}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const CW=i=>new bU(i),SU=(i,e=0)=>new bU(i,!0,e),sm=SU("render"),NW=CW("object");class vy extends xA{static get type(){return"UniformNode"}constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.name="",this.groupNode=NW}label(e){return this.name=e,this}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){const n=this.getSelf();return e=e.bind(n),super.onUpdate(s=>{const r=e(s,n);r!==void 0&&(this.value=r)},t)}generate(e,t){const n=this.getNodeType(e),s=this.getUniformHash(e);let r=e.getNodeFromHash(s);r===void 0&&(e.setHashNode(this,s),r=this);const o=r.getInputType(e),c=e.getUniformFromNode(r,o,e.shaderStage,this.name||e.context.label),f=e.getPropertyName(c);return e.context.label!==void 0&&delete e.context.label,e.format(f,n,t)}}const dr=(i,e)=>{const t=aW(e||i),n=i&&i.isNode===!0?i.node&&i.node.value||i.value:i;return at(new vy(n,t))};class EU extends Hn{static get type(){return"PropertyNode"}constructor(e,t=null,n=!1){super(e),this.name=t,this.varying=n,this.isPropertyNode=!0}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){let t;return this.varying===!0?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const DW=(i,e)=>at(new EU(i,e)),PN=Tt(EU,"vec4","Output");class OW extends gr{static get type(){return"FunctionCallNode"}constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const t=[],n=this.functionNode,s=n.getInputs(e),r=this.parameters,o=(f,d)=>{const m=d.type,g=m==="pointer";let v;return g?v="&"+f.build(e):v=f.build(e,m),v};if(Array.isArray(r)){if(r.length>s.length)console.error("THREE.TSL: The number of provided parameters exceeds the expected number of inputs in 'Fn()'."),r.length=s.length;else if(r.length<s.length)for(console.error("THREE.TSL: The number of provided parameters is less than the expected number of inputs in 'Fn()'.");r.length<s.length;)r.push(Oa(0));for(let f=0;f<r.length;f++)t.push(o(r[f],s[f]))}else for(const f of s){const d=r[f.name];d!==void 0?t.push(o(d,f)):(console.error(`THREE.TSL: Input '${f.name}' not found in 'Fn()'.`),t.push(o(Oa(0),f)))}return`${n.build(e,"property")}( ${t.join(", ")} )`}}const LW=(i,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?N0(e):hb(e[0]),at(new OW(at(i),e)));ze("call",LW);class bi extends gr{static get type(){return"OperatorNode"}constructor(e,t,n,...s){if(super(),s.length>0){let r=new bi(e,t,n);for(let o=0;o<s.length-1;o++)r=new bi(e,r,s[o]);t=r,n=s[s.length-1]}this.op=e,this.aNode=t,this.bNode=n,this.isOperatorNode=!0}getNodeType(e,t){const n=this.op,s=this.aNode,r=this.bNode,o=s.getNodeType(e),c=typeof r<"u"?r.getNodeType(e):null;if(o==="void"||c==="void")return"void";if(n==="%")return o;if(n==="~"||n==="&"||n==="|"||n==="^"||n===">>"||n==="<<")return e.getIntegerType(o);if(n==="!"||n==="=="||n==="!="||n==="&&"||n==="||"||n==="^^")return"bool";if(n==="<"||n===">"||n==="<="||n===">="){const f=t?e.getTypeLength(t):Math.max(e.getTypeLength(o),e.getTypeLength(c));return f>1?`bvec${f}`:"bool"}else{if(e.isMatrix(o)){if(c==="float")return o;if(e.isVector(c))return e.getVectorFromMatrix(o);if(e.isMatrix(c))return o}else if(e.isMatrix(c)){if(o==="float")return c;if(e.isVector(o))return e.getVectorFromMatrix(c)}return e.getTypeLength(c)>e.getTypeLength(o)?c:o}}generate(e,t){const n=this.op,s=this.aNode,r=this.bNode,o=this.getNodeType(e,t);let c=null,f=null;o!=="void"?(c=s.getNodeType(e),f=typeof r<"u"?r.getNodeType(e):null,n==="<"||n===">"||n==="<="||n===">="||n==="=="||n==="!="?e.isVector(c)?f=c:c!==f&&(c=f="float"):n===">>"||n==="<<"?(c=o,f=e.changeComponentType(f,"uint")):n==="%"?(c=o,f=e.isInteger(c)&&e.isInteger(f)?f:c):e.isMatrix(c)?f==="float"?f="float":e.isVector(f)?f=e.getVectorFromMatrix(c):e.isMatrix(f)||(c=f=o):e.isMatrix(f)?c==="float"?c="float":e.isVector(c)?c=e.getVectorFromMatrix(f):c=f=o:c=f=o):c=f=o;const d=s.build(e,c),m=typeof r<"u"?r.build(e,f):null,g=e.getTypeLength(t),v=e.getFunctionOperator(n);if(t!=="void"){const _=e.renderer.coordinateSystem===cf;if(n==="==")return _?g>1?e.format(`${e.getMethod("equal",t)}( ${d}, ${m} )`,o,t):e.format(`( ${d} ${n} ${m} )`,o,t):g>1||!e.isVector(c)?e.format(`( ${d} == ${m} )`,o,t):e.format(`all( ${d} == ${m} )`,o,t);if(n==="<"&&g>1)return _?e.format(`${e.getMethod("lessThan",t)}( ${d}, ${m} )`,o,t):e.format(`( ${d} < ${m} )`,o,t);if(n==="<="&&g>1)return _?e.format(`${e.getMethod("lessThanEqual",t)}( ${d}, ${m} )`,o,t):e.format(`( ${d} <= ${m} )`,o,t);if(n===">"&&g>1)return _?e.format(`${e.getMethod("greaterThan",t)}( ${d}, ${m} )`,o,t):e.format(`( ${d} > ${m} )`,o,t);if(n===">="&&g>1)return _?e.format(`${e.getMethod("greaterThanEqual",t)}( ${d}, ${m} )`,o,t):e.format(`( ${d} >= ${m} )`,o,t);if(n==="%")return e.isInteger(f)?e.format(`( ${d} % ${m} )`,o,t):e.format(`${e.getMethod("mod",o)}( ${d}, ${m} )`,o,t);if(n==="!"||n==="~")return e.format(`(${n}${d})`,c,t);if(v)return e.format(`${v}( ${d}, ${m} )`,o,t);if(e.isMatrix(c)&&f==="float")return e.format(`( ${m} ${n} ${d} )`,o,t);if(c==="float"&&e.isMatrix(f))return e.format(`${d} ${n} ${m}`,o,t);{let b=`( ${d} ${n} ${m} )`;return!_&&o==="bool"&&e.isVector(c)&&e.isVector(f)&&(b=`all${b}`),e.format(b,o,t)}}else if(c!=="void")return v?e.format(`${v}( ${d}, ${m} )`,o,t):e.isMatrix(c)&&f==="float"?e.format(`${m} ${n} ${d}`,o,t):e.format(`${d} ${n} ${m}`,o,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const TU=it(bi,"+").setParameterLength(2,1/0).setName("add"),QT=it(bi,"-").setParameterLength(2,1/0).setName("sub"),EA=it(bi,"*").setParameterLength(2,1/0).setName("mul"),MU=it(bi,"/").setParameterLength(2,1/0).setName("div"),db=it(bi,"%").setParameterLength(2).setName("mod"),AU=it(bi,"==").setParameterLength(2).setName("equal"),UW=it(bi,"!=").setParameterLength(2).setName("notEqual"),zW=it(bi,"<").setParameterLength(2).setName("lessThan"),PW=it(bi,">").setParameterLength(2).setName("greaterThan"),IW=it(bi,"<=").setParameterLength(2).setName("lessThanEqual"),BW=it(bi,">=").setParameterLength(2).setName("greaterThanEqual"),FW=it(bi,"&&").setParameterLength(2,1/0).setName("and"),HW=it(bi,"||").setParameterLength(2,1/0).setName("or"),VW=it(bi,"!").setParameterLength(1).setName("not"),GW=it(bi,"^^").setParameterLength(2).setName("xor"),kW=it(bi,"&").setParameterLength(2).setName("bitAnd"),$W=it(bi,"~").setParameterLength(2).setName("bitNot"),XW=it(bi,"|").setParameterLength(2).setName("bitOr"),qW=it(bi,"^").setParameterLength(2).setName("bitXor"),jW=it(bi,"<<").setParameterLength(2).setName("shiftLeft"),YW=it(bi,">>").setParameterLength(2).setName("shiftRight");ze("add",TU);ze("sub",QT);ze("mul",EA);ze("div",MU);ze("mod",db);ze("equal",AU);ze("notEqual",UW);ze("lessThan",zW);ze("greaterThan",PW);ze("lessThanEqual",IW);ze("greaterThanEqual",BW);ze("and",FW);ze("or",HW);ze("not",VW);ze("xor",GW);ze("bitAnd",kW);ze("bitNot",$W);ze("bitOr",XW);ze("bitXor",qW);ze("shiftLeft",jW);ze("shiftRight",YW);const WW=(i,e)=>(console.warn('THREE.TSL: "remainder()" is deprecated. Use "mod( int( ... ) )" instead.'),db(i,e)),ZW=(i,e)=>(console.warn('THREE.TSL: "modInt()" is deprecated. Use "mod( int( ... ) )" instead.'),db(x1(i),x1(e)));ze("remainder",WW);ze("modInt",ZW);class ve extends gr{static get type(){return"MathNode"}constructor(e,t,n=null,s=null){if(super(),(e===ve.MAX||e===ve.MIN)&&arguments.length>3){let r=new ve(e,t,n);for(let o=2;o<arguments.length-1;o++)r=new ve(e,r,arguments[o]);t=r,n=arguments[arguments.length-1],s=null}this.method=e,this.aNode=t,this.bNode=n,this.cNode=s,this.isMathNode=!0}getInputType(e){const t=this.aNode.getNodeType(e),n=this.bNode?this.bNode.getNodeType(e):null,s=this.cNode?this.cNode.getNodeType(e):null,r=e.isMatrix(t)?0:e.getTypeLength(t),o=e.isMatrix(n)?0:e.getTypeLength(n),c=e.isMatrix(s)?0:e.getTypeLength(s);return r>o&&r>c?t:o>c?n:c>r?s:t}getNodeType(e){const t=this.method;return t===ve.LENGTH||t===ve.DISTANCE||t===ve.DOT?"float":t===ve.CROSS?"vec3":t===ve.ALL||t===ve.ANY?"bool":t===ve.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):this.getInputType(e)}generate(e,t){let n=this.method;const s=this.getNodeType(e),r=this.getInputType(e),o=this.aNode,c=this.bNode,f=this.cNode,d=e.renderer.coordinateSystem;if(n===ve.TRANSFORM_DIRECTION){let m=o,g=c;e.isMatrix(m.getNodeType(e))?g=Gc(Kn(g),0):m=Gc(Kn(m),0);const v=EA(m,g).xyz;return wU(v).build(e,t)}else{if(n===ve.NEGATE)return e.format("( - "+o.build(e,r)+" )",s,t);if(n===ve.ONE_MINUS)return QT(1,o).build(e,t);if(n===ve.RECIPROCAL)return MU(1,o).build(e,t);if(n===ve.DIFFERENCE)return TA(QT(o,c)).build(e,t);{const m=[];return n===ve.CROSS?m.push(o.build(e,s),c.build(e,s)):d===cf&&n===ve.STEP?m.push(o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":r),c.build(e,r)):d===cf&&(n===ve.MIN||n===ve.MAX)?m.push(o.build(e,r),c.build(e,e.getTypeLength(c.getNodeType(e))===1?"float":r)):n===ve.REFRACT?m.push(o.build(e,r),c.build(e,r),f.build(e,"float")):n===ve.MIX?m.push(o.build(e,r),c.build(e,r),f.build(e,e.getTypeLength(f.getNodeType(e))===1?"float":r)):(d===y1&&n===ve.ATAN&&c!==null&&(n="atan2"),m.push(o.build(e,r)),c!==null&&m.push(c.build(e,r)),f!==null&&m.push(f.build(e,r))),e.format(`${e.getMethod(n,s)}( ${m.join(", ")} )`,s,t)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}ve.ALL="all";ve.ANY="any";ve.RADIANS="radians";ve.DEGREES="degrees";ve.EXP="exp";ve.EXP2="exp2";ve.LOG="log";ve.LOG2="log2";ve.SQRT="sqrt";ve.INVERSE_SQRT="inversesqrt";ve.FLOOR="floor";ve.CEIL="ceil";ve.NORMALIZE="normalize";ve.FRACT="fract";ve.SIN="sin";ve.COS="cos";ve.TAN="tan";ve.ASIN="asin";ve.ACOS="acos";ve.ATAN="atan";ve.ABS="abs";ve.SIGN="sign";ve.LENGTH="length";ve.NEGATE="negate";ve.ONE_MINUS="oneMinus";ve.DFDX="dFdx";ve.DFDY="dFdy";ve.ROUND="round";ve.RECIPROCAL="reciprocal";ve.TRUNC="trunc";ve.FWIDTH="fwidth";ve.TRANSPOSE="transpose";ve.BITCAST="bitcast";ve.EQUALS="equals";ve.MIN="min";ve.MAX="max";ve.STEP="step";ve.REFLECT="reflect";ve.DISTANCE="distance";ve.DIFFERENCE="difference";ve.DOT="dot";ve.CROSS="cross";ve.POW="pow";ve.TRANSFORM_DIRECTION="transformDirection";ve.MIX="mix";ve.CLAMP="clamp";ve.REFRACT="refract";ve.SMOOTHSTEP="smoothstep";ve.FACEFORWARD="faceforward";const KW=Oa(Math.PI),QW=it(ve,ve.ALL).setParameterLength(1),JW=it(ve,ve.ANY).setParameterLength(1),eZ=it(ve,ve.RADIANS).setParameterLength(1),tZ=it(ve,ve.DEGREES).setParameterLength(1),nZ=it(ve,ve.EXP).setParameterLength(1),iZ=it(ve,ve.EXP2).setParameterLength(1),sZ=it(ve,ve.LOG).setParameterLength(1),rZ=it(ve,ve.LOG2).setParameterLength(1),aZ=it(ve,ve.SQRT).setParameterLength(1),oZ=it(ve,ve.INVERSE_SQRT).setParameterLength(1),lZ=it(ve,ve.FLOOR).setParameterLength(1),cZ=it(ve,ve.CEIL).setParameterLength(1),wU=it(ve,ve.NORMALIZE).setParameterLength(1),RU=it(ve,ve.FRACT).setParameterLength(1),CU=it(ve,ve.SIN).setParameterLength(1),uZ=it(ve,ve.COS).setParameterLength(1),fZ=it(ve,ve.TAN).setParameterLength(1),hZ=it(ve,ve.ASIN).setParameterLength(1),dZ=it(ve,ve.ACOS).setParameterLength(1),NU=it(ve,ve.ATAN).setParameterLength(1,2),TA=it(ve,ve.ABS).setParameterLength(1),DU=it(ve,ve.SIGN).setParameterLength(1),pZ=it(ve,ve.LENGTH).setParameterLength(1),mZ=it(ve,ve.NEGATE).setParameterLength(1),gZ=it(ve,ve.ONE_MINUS).setParameterLength(1),yZ=it(ve,ve.DFDX).setParameterLength(1),vZ=it(ve,ve.DFDY).setParameterLength(1),xZ=it(ve,ve.ROUND).setParameterLength(1),_Z=it(ve,ve.RECIPROCAL).setParameterLength(1),bZ=it(ve,ve.TRUNC).setParameterLength(1),SZ=it(ve,ve.FWIDTH).setParameterLength(1),EZ=it(ve,ve.TRANSPOSE).setParameterLength(1),TZ=(i,e)=>(console.warn('THREE.TSL: "equals" is deprecated. Use "equal" inside a vector instead, like: "bvec*( equal( ... ) )"'),AU(i,e)),MZ=it(ve,ve.MIN).setParameterLength(2,1/0),AZ=it(ve,ve.MAX).setParameterLength(2,1/0),wZ=it(ve,ve.STEP).setParameterLength(2),RZ=it(ve,ve.REFLECT).setParameterLength(2),CZ=it(ve,ve.DISTANCE).setParameterLength(2),NZ=it(ve,ve.DIFFERENCE).setParameterLength(2),MA=it(ve,ve.DOT).setParameterLength(2),DZ=it(ve,ve.CROSS).setParameterLength(2),OU=it(ve,ve.POW).setParameterLength(2),OZ=it(ve,ve.POW,2).setParameterLength(1),LZ=it(ve,ve.POW,3).setParameterLength(1),UZ=it(ve,ve.POW,4).setParameterLength(1),zZ=it(ve,ve.TRANSFORM_DIRECTION).setParameterLength(2),PZ=i=>EA(DU(i),OU(TA(i),1/3)),LU=i=>MA(i,i),AA=it(ve,ve.MIX).setParameterLength(3),UU=(i,e=0,t=1)=>at(new ve(ve.CLAMP,at(i),at(e),at(t))),IZ=i=>UU(i),BZ=it(ve,ve.REFRACT).setParameterLength(3),wA=it(ve,ve.SMOOTHSTEP).setParameterLength(3),FZ=it(ve,ve.FACEFORWARD).setParameterLength(3),HZ=ls(([i])=>{const n=43758.5453,s=MA(i.xy,gy(12.9898,78.233)),r=db(s,KW);return RU(CU(r).mul(n))}),VZ=(i,e,t)=>AA(e,t,i),GZ=(i,e,t)=>wA(e,t,i),kZ=(i,e)=>(console.warn('THREE.TSL: "atan2" is overloaded. Use "atan" instead.'),NU(i,e));ze("all",QW);ze("any",JW);ze("equals",TZ);ze("radians",eZ);ze("degrees",tZ);ze("exp",nZ);ze("exp2",iZ);ze("log",sZ);ze("log2",rZ);ze("sqrt",aZ);ze("inverseSqrt",oZ);ze("floor",lZ);ze("ceil",cZ);ze("normalize",wU);ze("fract",RU);ze("sin",CU);ze("cos",uZ);ze("tan",fZ);ze("asin",hZ);ze("acos",dZ);ze("atan",NU);ze("abs",TA);ze("sign",DU);ze("length",pZ);ze("lengthSq",LU);ze("negate",mZ);ze("oneMinus",gZ);ze("dFdx",yZ);ze("dFdy",vZ);ze("round",xZ);ze("reciprocal",_Z);ze("trunc",bZ);ze("fwidth",SZ);ze("atan2",kZ);ze("min",MZ);ze("max",AZ);ze("step",wZ);ze("reflect",RZ);ze("distance",CZ);ze("dot",MA);ze("cross",DZ);ze("pow",OU);ze("pow2",OZ);ze("pow3",LZ);ze("pow4",UZ);ze("transformDirection",zZ);ze("mix",VZ);ze("clamp",UU);ze("refract",BZ);ze("smoothstep",GZ);ze("faceForward",FZ);ze("difference",NZ);ze("saturate",IZ);ze("cbrt",PZ);ze("transpose",EZ);ze("rand",HZ);class $Z extends Hn{static get type(){return"ConditionalNode"}constructor(e,t,n=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=n}getNodeType(e){const{ifNode:t,elseNode:n}=e.getNodeProperties(this);if(t===void 0)return this.setup(e),this.getNodeType(e);const s=t.getNodeType(e);if(n!==null){const r=n.getNodeType(e);if(e.getTypeLength(r)>e.getTypeLength(s))return r}return s}setup(e){const t=this.condNode.cache(),n=this.ifNode.cache(),s=this.elseNode?this.elseNode.cache():null,r=e.context.nodeBlock;e.getDataFromNode(n).parentNodeBlock=r,s!==null&&(e.getDataFromNode(s).parentNodeBlock=r);const o=e.getNodeProperties(this);o.condNode=t,o.ifNode=n.context({nodeBlock:n}),o.elseNode=s?s.context({nodeBlock:s}):null}generate(e,t){const n=this.getNodeType(e),s=e.getDataFromNode(this);if(s.nodeProperty!==void 0)return s.nodeProperty;const{condNode:r,ifNode:o,elseNode:c}=e.getNodeProperties(this),f=e.currentFunctionNode,d=t!=="void",m=d?DW(n).build(e):"";s.nodeProperty=m;const g=r.build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${g} ) {

`).addFlowTab();let v=o.build(e,n);if(v&&(d?v=m+" = "+v+";":(v="return "+v+";",f===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),v="// "+v))),e.removeFlowTab().addFlowCode(e.tab+"	"+v+`

`+e.tab+"}"),c!==null){e.addFlowCode(` else {

`).addFlowTab();let _=c.build(e,n);_&&(d?_=m+" = "+_+";":(_="return "+_+";",f===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),_="// "+_))),e.removeFlowTab().addFlowCode(e.tab+"	"+_+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(m,n,t)}}const RA=it($Z).setParameterLength(2,3);ze("select",RA);const XZ=(...i)=>(console.warn("THREE.TSL: cond() has been renamed to select()."),RA(...i));ze("cond",XZ);class qZ extends Hn{static get type(){return"ContextNode"}constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.value=t}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}analyze(e){this.node.build(e)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.value});const n=this.node.build(e);return e.setContext(t),n}generate(e,t){const n=e.getContext();e.setContext({...e.context,...this.value});const s=this.node.build(e,t);return e.setContext(n),s}}const zU=it(qZ).setParameterLength(1,2),jZ=(i,e)=>zU(i,{label:e});ze("context",zU);ze("label",jZ);class YZ extends Hn{static get type(){return"VarNode"}constructor(e,t=null,n=!1){super(),this.node=e,this.name=t,this.global=!0,this.isVarNode=!0,this.readOnly=n}getMemberType(e,t){return this.node.getMemberType(e,t)}getElementType(e){return this.node.getElementType(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:t,name:n,readOnly:s}=this,{renderer:r}=e,o=r.backend.isWebGPUBackend===!0;let c=!1,f=!1;s&&(c=e.isDeterministic(t),f=o?s:c);const d=e.getVectorType(this.getNodeType(e)),m=t.build(e,d),g=e.getVarFromNode(this,n,d,void 0,f),v=e.getPropertyName(g);let _=v;if(f)if(o)_=c?`const ${v}`:`let ${v}`;else{const b=e.getArrayCount(t);_=`const ${e.getVar(g.type,v,b)}`}return e.addLineFlowCode(`${_} = ${m}`,this),v}}const CA=it(YZ),WZ=(i,e=null)=>CA(i,e).append(),ZZ=(i,e=null)=>CA(i,e,!0).append();ze("toVar",WZ);ze("toConst",ZZ);const KZ=i=>(console.warn('TSL: "temp( node )" is deprecated. Use "Var( node )" or "node.toVar()" instead.'),CA(i));ze("temp",KZ);class QZ extends Hn{static get type(){return"VaryingNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const t=e.getNodeProperties(this);let n=t.varying;if(n===void 0){const s=this.name,r=this.getNodeType(e);t.varying=n=e.getVaryingFromNode(this,s,r),t.node=this.node}return n.needsInterpolation||(n.needsInterpolation=e.shaderStage==="fragment"),n}setup(e){this.setupVarying(e)}analyze(e){return this.setupVarying(e),this.node.analyze(e)}generate(e){const t=e.getNodeProperties(this),n=this.setupVarying(e),s=e.shaderStage==="fragment"&&t.reassignPosition===!0&&e.context.needsPositionReassign;if(t.propertyName===void 0||s){const r=this.getNodeType(e),o=e.getPropertyName(n,xN.VERTEX);e.flowNodeFromShaderStage(xN.VERTEX,this.node,r,o),t.propertyName=o,s?t.reassignPosition=!1:t.reassignPosition===void 0&&e.context.isPositionNodeInput&&(t.reassignPosition=!0)}return e.getPropertyName(n)}}const Kc=it(QZ).setParameterLength(1,2),JZ=i=>Kc(i);ze("toVarying",Kc);ze("toVertexStage",JZ);ze("varying",(...i)=>(console.warn("THREE.TSL: .varying() has been renamed to .toVarying()."),Kc(...i)));ze("vertexStage",(...i)=>(console.warn("THREE.TSL: .vertexStage() has been renamed to .toVertexStage()."),Kc(...i)));const eK=ls(([i])=>{const e=i.mul(.9478672986).add(.0521327014).pow(2.4),t=i.mul(.0773993808),n=i.lessThanEqual(.04045);return AA(e,t,n)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),tK=ls(([i])=>{const e=i.pow(.41666).mul(1.055).sub(.055),t=i.mul(12.92),n=i.lessThanEqual(.0031308);return AA(e,t,n)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),xy="WorkingColorSpace",NA="OutputColorSpace";class pb extends gr{static get type(){return"ColorSpaceNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.source=t,this.target=n}resolveColorSpace(e,t){return t===xy?xs.workingColorSpace:t===NA?e.context.outputColorSpace||e.renderer.outputColorSpace:t}setup(e){const{colorNode:t}=this,n=this.resolveColorSpace(e,this.source),s=this.resolveColorSpace(e,this.target);let r=t;return xs.enabled===!1||n===s||!n||!s||(xs.getTransfer(n)===C0&&(r=Gc(eK(r.rgb),r.a)),xs.getPrimaries(n)!==xs.getPrimaries(s)&&(r=Gc(yy(xs._getMatrix(new Wl,n,s)).mul(r.rgb),r.a)),xs.getTransfer(s)===C0&&(r=Gc(tK(r.rgb),r.a))),r}}const nK=i=>at(new pb(at(i),xy,NA)),iK=i=>at(new pb(at(i),NA,xy)),sK=(i,e)=>at(new pb(at(i),xy,e)),PU=(i,e)=>at(new pb(at(i),e,xy));ze("toOutputColorSpace",nK);ze("toWorkingColorSpace",iK);ze("workingToColorSpace",sK);ze("colorSpaceToWorking",PU);let rK=class extends my{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),s=this.getNodeType();return e.format(t,n,s)}};class aK extends Hn{static get type(){return"ReferenceBaseNode"}constructor(e,t,n=null,s=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=s,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.updateType=bs.OBJECT}setGroup(e){return this.group=e,this}element(e){return at(new rK(this,at(e)))}setNodeType(e){const t=dr(null,e).getSelf();this.group!==null&&t.setGroup(this.group),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let s=1;s<t.length;s++)n=n[t[s]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}class oK extends aK{static get type(){return"RendererReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.renderer=n,this.setGroup(sm)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const lK=(i,e,t=null)=>at(new oK(i,e,t));class cK extends gr{static get type(){return"ToneMappingNode"}constructor(e,t=fK,n=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=n}customCacheKey(){return dU(this.toneMapping)}setup(e){const t=this.colorNode||e.context.color,n=this.toneMapping;if(n===YT)return t;let s=null;const r=e.renderer.library.getToneMappingFunction(n);return r!==null?s=Gc(r(t.rgb,this.exposureNode),t.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",n),s=t),s}}const uK=(i,e,t)=>at(new cK(i,at(e),at(t))),fK=lK("toneMappingExposure","float");ze("toneMapping",(i,e,t)=>uK(e,t,i));const ss=new Vt,Zx=new ao;let hK=0;class dK{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:hK++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=g1,this.updateRanges=[],this.gpuType=OY,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Zx.fromBufferAttribute(this,t),Zx.applyMatrix3(e),this.setXY(t,Zx.x,Zx.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ss.fromBufferAttribute(this,t),ss.applyMatrix3(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ss.fromBufferAttribute(this,t),ss.applyMatrix4(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ss.fromBufferAttribute(this,t),ss.applyNormalMatrix(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ss.fromBufferAttribute(this,t),ss.transformDirection(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=qo(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Zn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=qo(t,this.array)),t}setX(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=qo(t,this.array)),t}setY(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=qo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=qo(t,this.array)),t}setW(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array),s=Zn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array),s=Zn(s,this.array),r=Zn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==g1&&(e.usage=this.usage),e}}const Ur=new Vt;class DA{constructor(e,t,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ur.fromBufferAttribute(this,t),Ur.applyMatrix4(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ur.fromBufferAttribute(this,t),Ur.applyNormalMatrix(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ur.fromBufferAttribute(this,t),Ur.transformDirection(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=qo(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Zn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Zn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=qo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=qo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=qo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=qo(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array),s=Zn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array),s=Zn(s,this.array),r=Zn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new dK(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new DA(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class pK{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=g1,this.updateRanges=[],this.version=0,this.uuid=Hp()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[n+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hp()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hp()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}class mK extends xA{static get type(){return"BufferAttributeNode"}constructor(e,t=null,n=0,s=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=n,this.bufferOffset=s,this.usage=g1,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),n=this.value,s=e.getTypeLength(t),r=this.bufferStride||s,o=this.bufferOffset,c=n.isInterleavedBuffer===!0?n:new pK(n,r),f=new DA(c,s,o);c.setUsage(this.usage),this.attribute=f,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),n=e.getBufferAttributeFromNode(this,t),s=e.getPropertyName(n);let r=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=s,r=s):r=Kc(this).build(e,t),r}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const gK=(i,e=null,t=0,n=0)=>at(new mK(i,e,t,n));ze("toAttribute",i=>gK(i.value));class yK extends Hn{static get type(){return"ComputeNode"}constructor(e,t,n=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=t,this.workgroupSize=n,this.dispatchCount=0,this.version=1,this.name="",this.updateBeforeType=bs.OBJECT,this.onInitFunction=null,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}label(e){return this.name=e,this}updateDispatchCount(){const{count:e,workgroupSize:t}=this;let n=t[0];for(let s=1;s<t.length;s++)n*=t[s];this.dispatchCount=Math.ceil(e/n)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}setup(e){const t=this.computeNode.setup(e);if(t){const n=e.getNodeProperties(this);n.outputComputeNode=t.outputNode,t.outputNode=null}return t}generate(e,t){const{shaderStage:n}=e;if(n==="compute"){const s=this.computeNode.build(e,"void");s!==""&&e.addLineFlowCode(s,this)}else{const r=e.getNodeProperties(this).outputComputeNode;if(r)return r.build(e,t)}}}const vK=(i,e,t)=>at(new yK(at(i),e,t));ze("compute",vK);class xK extends Hn{static get type(){return"CacheNode"}constructor(e,t=!0){super(),this.node=e,this.parent=t,this.isCacheNode=!0}getNodeType(e){const t=e.getCache(),n=e.getCacheFromNode(this,this.parent);e.setCache(n);const s=this.node.getNodeType(e);return e.setCache(t),s}build(e,...t){const n=e.getCache(),s=e.getCacheFromNode(this,this.parent);e.setCache(s);const r=this.node.build(e,...t);return e.setCache(n),r}}const _K=(i,e)=>at(new xK(at(i),e));ze("cache",_K);class bK extends Hn{static get type(){return"BypassNode"}constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}const SK=it(bK).setParameterLength(2);ze("bypass",SK);class IU extends Hn{static get type(){return"RemapNode"}constructor(e,t,n,s=Oa(0),r=Oa(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=n,this.outLowNode=s,this.outHighNode=r,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:n,outLowNode:s,outHighNode:r,doClamp:o}=this;let c=e.sub(t).div(n.sub(t));return o===!0&&(c=c.clamp()),c.mul(r.sub(s)).add(s)}}const EK=it(IU,null,null,{doClamp:!1}).setParameterLength(3,5),TK=it(IU).setParameterLength(3,5);ze("remap",EK);ze("remapClamp",TK);class MK extends Hn{static get type(){return"ExpressionNode"}constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const n=this.getNodeType(e),s=this.snippet;if(n==="void")e.addLineFlowCode(s,this);else return e.format(s,n,t)}}const JT=it(MK).setParameterLength(1,2),AK=i=>(i?RA(i,JT("discard")):JT("discard")).append();ze("discard",AK);class wK extends gr{static get type(){return"RenderOutputNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.toneMapping=t,this.outputColorSpace=n,this.isRenderOutputNode=!0}setup({context:e}){let t=this.colorNode||e.color;const n=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||YT,s=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||m1;return n!==YT&&(t=t.toneMapping(n)),s!==m1&&s!==xs.workingColorSpace&&(t=t.workingToColorSpace(s)),t}}const RK=(i,e=null,t=null)=>at(new wK(at(i),e,t));ze("renderOutput",RK);class CK extends gr{static get type(){return"DebugNode"}constructor(e,t=null){super(),this.node=e,this.callback=t}getNodeType(e){return this.node.getNodeType(e)}setup(e){return this.node.build(e)}analyze(e){return this.node.build(e)}generate(e){const t=this.callback,n=this.node.build(e);let s="";return s+=`// #--- TSL Debug ---#
`,s+=e.flow.code.replace(/^\t/mg,"")+`
`,s+="/* ... */ "+n+` /* ... */
`,s+=`// #-----------------#
`,t!==null?t(s):console.log(s),n}}const NK=(i,e=null)=>at(new CK(at(i),e));ze("debug",NK);class DK extends Hn{static get type(){return"AttributeNode"}constructor(e,t=null){super(t),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=this.nodeType;if(t===null){const n=this.getAttributeName(e);if(e.hasGeometryAttribute(n)){const s=e.geometry.getAttribute(n);t=e.getTypeFromAttribute(s)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),n=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const r=e.geometry.getAttribute(t),o=e.getTypeFromAttribute(r),c=e.getAttribute(t,o);return e.shaderStage==="vertex"?e.format(c.name,o,n):Kc(this).build(e,n)}else return console.warn(`AttributeNode: Vertex attribute "${t}" not found on geometry.`),e.generateConst(n)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const OA=(i,e)=>at(new DK(i,e));class mi extends Hn{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isIndexNode=!0}generate(e){const t=this.getNodeType(e),n=this.scope;let s;if(n===mi.VERTEX)s=e.getVertexIndex();else if(n===mi.INSTANCE)s=e.getInstanceIndex();else if(n===mi.DRAW)s=e.getDrawIndex();else if(n===mi.INVOCATION_LOCAL)s=e.getInvocationLocalIndex();else if(n===mi.INVOCATION_SUBGROUP)s=e.getInvocationSubgroupIndex();else if(n===mi.SUBGROUP)s=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+n);let r;return e.shaderStage==="vertex"||e.shaderStage==="compute"?r=s:r=Kc(this).build(e,t),r}}mi.VERTEX="vertex";mi.INSTANCE="instance";mi.SUBGROUP="subgroup";mi.INVOCATION_LOCAL="invocationLocal";mi.INVOCATION_SUBGROUP="invocationSubgroup";mi.DRAW="draw";mi.VERTEX;mi.INSTANCE;mi.SUBGROUP;mi.INVOCATION_SUBGROUP;mi.INVOCATION_LOCAL;mi.DRAW;class BU{constructor(e=new Vt(1/0,1/0,1/0),t=new Vt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Vo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Vo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Vo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const r=n.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let o=0,c=r.count;o<c;o++)e.isMesh===!0?e.getVertexPosition(o,Vo):Vo.fromBufferAttribute(r,o),Vo.applyMatrix4(e.matrixWorld),this.expandByPoint(Vo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Kx.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Kx.copy(n.boundingBox)),Kx.applyMatrix4(e.matrixWorld),this.union(Kx)}const s=e.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Vo),Vo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(e0),Qx.subVectors(this.max,e0),Rp.subVectors(e.a,e0),Cp.subVectors(e.b,e0),Np.subVectors(e.c,e0),tf.subVectors(Cp,Rp),nf.subVectors(Np,Cp),Ah.subVectors(Rp,Np);let t=[0,-tf.z,tf.y,0,-nf.z,nf.y,0,-Ah.z,Ah.y,tf.z,0,-tf.x,nf.z,0,-nf.x,Ah.z,0,-Ah.x,-tf.y,tf.x,0,-nf.y,nf.x,0,-Ah.y,Ah.x,0];return!qE(t,Rp,Cp,Np,Qx)||(t=[1,0,0,0,1,0,0,0,1],!qE(t,Rp,Cp,Np,Qx))?!1:(Jx.crossVectors(tf,nf),t=[Jx.x,Jx.y,Jx.z],qE(t,Rp,Cp,Np,Qx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Vo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Vo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Rc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Rc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Rc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Rc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Rc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Rc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Rc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Rc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Rc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Rc=[new Vt,new Vt,new Vt,new Vt,new Vt,new Vt,new Vt,new Vt],Vo=new Vt,Kx=new BU,Rp=new Vt,Cp=new Vt,Np=new Vt,tf=new Vt,nf=new Vt,Ah=new Vt,e0=new Vt,Qx=new Vt,Jx=new Vt,wh=new Vt;function qE(i,e,t,n,s){for(let r=0,o=i.length-3;r<=o;r+=3){wh.fromArray(i,r);const c=s.x*Math.abs(wh.x)+s.y*Math.abs(wh.y)+s.z*Math.abs(wh.z),f=e.dot(wh),d=t.dot(wh),m=n.dot(wh);if(Math.max(-Math.max(f,d,m),Math.min(f,d,m))>c)return!1}return!0}const OK=new BU,t0=new Vt,jE=new Vt;class LK{constructor(e=new Vt,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):OK.setFromPoints(e).getCenter(n);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;t0.subVectors(e,this.center);const t=t0.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(t0,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(jE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(t0.copy(e.center).add(jE)),this.expandByPoint(t0.copy(e.center).sub(jE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const IN=new LK;class ui extends Hn{static get type(){return"Object3DNode"}constructor(e,t=null){super(),this.scope=e,this.object3d=t,this.updateType=bs.OBJECT,this._uniformNode=new vy(null)}getNodeType(){const e=this.scope;if(e===ui.WORLD_MATRIX)return"mat4";if(e===ui.POSITION||e===ui.VIEW_POSITION||e===ui.DIRECTION||e===ui.SCALE)return"vec3";if(e===ui.RADIUS)return"float"}update(e){const t=this.object3d,n=this._uniformNode,s=this.scope;if(s===ui.WORLD_MATRIX)n.value=t.matrixWorld;else if(s===ui.POSITION)n.value=n.value||new Vt,n.value.setFromMatrixPosition(t.matrixWorld);else if(s===ui.SCALE)n.value=n.value||new Vt,n.value.setFromMatrixScale(t.matrixWorld);else if(s===ui.DIRECTION)n.value=n.value||new Vt,t.getWorldDirection(n.value);else if(s===ui.VIEW_POSITION){const r=e.camera;n.value=n.value||new Vt,n.value.setFromMatrixPosition(t.matrixWorld),n.value.applyMatrix4(r.matrixWorldInverse)}else if(s===ui.RADIUS){const r=e.object.geometry;r.boundingSphere===null&&r.computeBoundingSphere(),IN.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),n.value=IN.radius}}generate(e){const t=this.scope;return t===ui.WORLD_MATRIX?this._uniformNode.nodeType="mat4":t===ui.POSITION||t===ui.VIEW_POSITION||t===ui.DIRECTION||t===ui.SCALE?this._uniformNode.nodeType="vec3":t===ui.RADIUS&&(this._uniformNode.nodeType="float"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}ui.WORLD_MATRIX="worldMatrix";ui.POSITION="position";ui.SCALE="scale";ui.VIEW_POSITION="viewPosition";ui.DIRECTION="direction";ui.RADIUS="radius";class FU extends vy{static get type(){return"BufferNode"}constructor(e,t,n=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=n}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const UK=(i,e,t)=>at(new FU(i,e,t));class zK extends my{static get type(){return"UniformArrayElementNode"}constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}generate(e){const t=super.generate(e),n=this.getNodeType(),s=this.node.getPaddedType();return e.format(t,s,n)}}class PK extends FU{static get type(){return"UniformArrayNode"}constructor(e,t=null){super(null),this.array=e,this.elementType=t===null?v1(e[0]):t,this.paddedType=this.getPaddedType(),this.updateType=bs.RENDER,this.isArrayBufferNode=!0}getNodeType(){return this.paddedType}getElementType(){return this.elementType}getPaddedType(){const e=this.elementType;let t="vec4";return e==="mat2"?t="mat2":/mat/.test(e)===!0?t="mat4":e.charAt(0)==="i"?t="ivec4":e.charAt(0)==="u"&&(t="uvec4"),t}update(){const{array:e,value:t}=this,n=this.elementType;if(n==="float"||n==="int"||n==="uint")for(let s=0;s<e.length;s++){const r=s*4;t[r]=e[s]}else if(n==="color")for(let s=0;s<e.length;s++){const r=s*4,o=e[s];t[r]=o.r,t[r+1]=o.g,t[r+2]=o.b||0}else if(n==="mat2")for(let s=0;s<e.length;s++){const r=s*4,o=e[s];t[r]=o.elements[0],t[r+1]=o.elements[1],t[r+2]=o.elements[2],t[r+3]=o.elements[3]}else if(n==="mat3")for(let s=0;s<e.length;s++){const r=s*16,o=e[s];t[r]=o.elements[0],t[r+1]=o.elements[1],t[r+2]=o.elements[2],t[r+4]=o.elements[3],t[r+5]=o.elements[4],t[r+6]=o.elements[5],t[r+8]=o.elements[6],t[r+9]=o.elements[7],t[r+10]=o.elements[8],t[r+15]=1}else if(n==="mat4")for(let s=0;s<e.length;s++){const r=s*16,o=e[s];for(let c=0;c<o.elements.length;c++)t[r+c]=o.elements[c]}else for(let s=0;s<e.length;s++){const r=s*4,o=e[s];t[r]=o.x,t[r+1]=o.y,t[r+2]=o.z||0,t[r+3]=o.w||0}}setup(e){const t=this.array.length,n=this.elementType;let s=Float32Array;const r=this.paddedType,o=e.getTypeLength(r);return n.charAt(0)==="i"&&(s=Int32Array),n.charAt(0)==="u"&&(s=Uint32Array),this.value=new s(t*o),this.bufferCount=t,this.bufferType=r,super.setup(e)}element(e){return at(new zK(this,at(e)))}}const HU=(i,e)=>at(new PK(i,e)),IK=dr(0,"uint").setGroup(SU("cameraIndex")).toVarying("v_cameraIndex"),n0=dr("float").label("cameraNear").setGroup(sm).onRenderUpdate(({camera:i})=>i.near),i0=dr("float").label("cameraFar").setGroup(sm).onRenderUpdate(({camera:i})=>i.far),mb=ls(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const s of i.cameras)t.push(s.matrixWorldInverse);e=HU(t).setGroup(sm).label("cameraViewMatrices").element(IK).toVar("cameraViewMatrix")}else e=dr("mat4").label("cameraViewMatrix").setGroup(sm).onRenderUpdate(({camera:t})=>t.matrixWorldInverse);return e}).once()();class oo extends ui{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}oo.DIRECTION;const BK=Tt(oo,oo.WORLD_MATRIX);oo.POSITION;oo.SCALE;oo.VIEW_POSITION;oo.RADIUS;const FK=dr(new Wl).onObjectUpdate(({object:i},e)=>e.value.getNormalMatrix(i.matrixWorld)),HK=ls(i=>i.renderer.nodes.modelViewMatrix||VK).once()().toVar("modelViewMatrix"),VK=mb.mul(BK),kc=ls(i=>i.context.setupPositionView(),"vec3").once()().toVarying("v_positionView").context({needsPositionReassign:!0}),VU=kc.negate().toVarying("v_positionViewDirection").normalize().toVar("positionViewDirection");class GK extends Hn{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){const{renderer:t,material:n}=e;return t.coordinateSystem===cf&&n.side===wY?"false":e.getFrontFacing()}}const kK=Tt(GK),LA=Oa(kK).mul(2).sub(1),$K=OA("normal","vec3"),XK=ls(i=>i.geometry.hasAttribute("normal")===!1?(console.warn('THREE.TSL: Vertex attribute "normal" not found on geometry.'),Kn(0,1,0)):$K,"vec3").once()().toVar("normalLocal"),qK=kc.dFdx().cross(kc.dFdy()).normalize().toVar("normalFlat"),rm=ls(i=>{let e;return i.material.flatShading===!0?e=qK:e=Kc(kU(XK),"v_normalView").normalize(),e},"vec3").once()().toVar("normalView"),GU=ls(i=>i.context.setupNormal().context({getUV:null}),"vec3").once()().mul(LA).toVar("transformedNormalView"),kU=ls(([i],e)=>{const t=e.renderer.nodes.modelNormalViewMatrix;if(t!==null)return t.transformDirection(i);const n=FK.mul(i);return mb.transformDirection(n)});class jK extends vy{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=bs.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,t=e.images,n=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(n&&n.width!==void 0){const{width:s,height:r}=n;this.value=Math.log2(Math.max(s,r))}}}const YK=it(jK).setParameterLength(1);let s0,r0;class rs extends Hn{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===rs.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=bs.NONE;return(this.scope===rs.SIZE||this.scope===rs.VIEWPORT)&&(e=bs.RENDER),this.updateType=e,e}update({renderer:e}){const t=e.getRenderTarget();this.scope===rs.VIEWPORT?t!==null?r0.copy(t.viewport):(e.getViewport(r0),r0.multiplyScalar(e.getPixelRatio())):t!==null?(s0.width=t.width,s0.height=t.height):e.getDrawingBufferSize(s0)}setup(){const e=this.scope;let t=null;return e===rs.SIZE?t=dr(s0||(s0=new ao)):e===rs.VIEWPORT?t=dr(r0||(r0=new gf)):t=gy($U.div(BN)),t}generate(e){if(this.scope===rs.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const n=e.getNodeProperties(BN).outputNode.build(e);t=`${e.getType("vec2")}( ${t}.x, ${n}.y - ${t}.y )`}return t}return super.generate(e)}}rs.COORDINATE="coordinate";rs.VIEWPORT="viewport";rs.SIZE="size";rs.UV="uv";const UA=Tt(rs,rs.UV),BN=Tt(rs,rs.SIZE),$U=Tt(rs,rs.COORDINATE),XU=Tt(rs,rs.VIEWPORT);XU.zw;XU.xy;const gb=(i=0)=>OA("uv"+(i>0?i:""),"vec2");class WK extends Hn{static get type(){return"TextureSizeNode"}constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const n=this.textureNode.build(e,"property"),s=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${n}, ${s} )`,this.getNodeType(e),t)}}const FN=it(WK).setParameterLength(1,2);class yb extends vy{static get type(){return"TextureNode"}constructor(e,t=null,n=null,s=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=n,this.biasNode=s,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=bs.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(t===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===uU?"uvec4":this.value.type===DY?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return gb(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=dr(this.value.matrix)),this._matrixUniform.mul(Kn(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?bs.RENDER:bs.NONE,this}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.image instanceof ImageBitmap&&n.flipY===!0||n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0||n.isDepthTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(x1(FN(this,this.levelNode).y).sub(t.y).sub(1))),t}setup(e){const t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;const n=this.value;if(!n||n.isTexture!==!0)throw new Error("THREE.TSL: `texture( value )` function expects a valid instance of THREE.Texture().");let s=this.uvNode;(s===null||e.context.forceUVContext===!0)&&e.context.getUV&&(s=e.context.getUV(this)),s||(s=this.getDefaultUV()),this.updateMatrix===!0&&(s=this.getTransformedUV(s)),s=this.setupUV(e,s);let r=this.levelNode;r===null&&e.context.getTextureLevel&&(r=e.context.getTextureLevel(this)),t.uvNode=s,t.levelNode=r,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode}generateUV(e,t){return t.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,t,n,s,r,o,c,f){const d=this.value;let m;return s?m=e.generateTextureLevel(d,t,n,s,o):r?m=e.generateTextureBias(d,t,n,r,o):f?m=e.generateTextureGrad(d,t,n,f,o):c?m=e.generateTextureCompare(d,t,n,c,o):this.sampler===!1?m=e.generateTextureLoad(d,t,n,o):m=e.generateTexture(d,t,n,o),m}generate(e,t){const n=this.value,s=e.getNodeProperties(this),r=super.generate(e,"property");if(/^sampler/.test(t))return r+"_sampler";if(e.isReference(t))return r;{const o=e.getDataFromNode(this);let c=o.propertyName;if(c===void 0){const{uvNode:m,levelNode:g,biasNode:v,compareNode:_,depthNode:b,gradNode:A}=s,M=this.generateUV(e,m),T=g?g.build(e,"float"):null,C=v?v.build(e,"float"):null,D=b?b.build(e,"int"):null,N=_?_.build(e,"float"):null,I=A?[A[0].build(e,"vec2"),A[1].build(e,"vec2")]:null,L=e.getVarFromNode(this);c=e.getPropertyName(L);const P=this.generateSnippet(e,r,M,T,C,D,N,I);e.addLineFlowCode(`${c} = ${P}`,this),o.snippet=P,o.propertyName=c}let f=c;const d=this.getNodeType(e);return e.needsToWorkingColorSpace(n)&&(f=PU(JT(f,d),n.colorSpace).setup(e).build(e,d)),e.format(f,d,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){return console.warn("THREE.TextureNode: .uv() has been renamed. Use .sample() instead."),this.sample(e)}sample(e){const t=this.clone();return t.uvNode=at(e),t.referenceNode=this.getSelf(),at(t)}blur(e){const t=this.clone();t.biasNode=at(e).mul(YK(t)),t.referenceNode=this.getSelf();const n=t.value;return(n&&n.generateMipmaps===!1||n.minFilter===im||n.magFilter===im)&&(console.warn("THREE.TSL: texture().blur() requires mipmaps and sampling. Use .generateMipmaps=true and .minFilter/.magFilter=THREE.LinearFilter in the Texture."),t.biasNode=null),at(t)}level(e){const t=this.clone();return t.levelNode=at(e),t.referenceNode=this.getSelf(),at(t)}size(e){return FN(this,e)}bias(e){const t=this.clone();return t.biasNode=at(e),t.referenceNode=this.getSelf(),at(t)}compare(e){const t=this.clone();return t.compareNode=at(e),t.referenceNode=this.getSelf(),at(t)}grad(e,t){const n=this.clone();return n.gradNode=[at(e),at(t)],n.referenceNode=this.getSelf(),at(n)}depth(e){const t=this.clone();return t.depthNode=at(e),t.referenceNode=this.getSelf(),at(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,t=this._matrixUniform;t!==null&&(t.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e}}const ZK=it(yb).setParameterLength(1,4);function HN(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}let Dp;class KK{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Dp===void 0&&(Dp=HN("canvas")),Dp.width=e.width,Dp.height=e.height;const s=Dp.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),n=Dp}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=HN("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=Vc(r[o]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Vc(t[n]/255)*255):t[n]=Vc(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let QK=0;class zA{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:QK++}),this.uuid=Hp(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,c=s.length;o<c;o++)s[o].isDataTexture?r.push(YE(s[o].image)):r.push(YE(s[o]))}else r=YE(s);n.url=r}return t||(e.images[this.uuid]=n),n}}function YE(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?KK.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let JK=0;class Gl extends vA{constructor(e=Gl.DEFAULT_IMAGE,t=Gl.DEFAULT_MAPPING,n=jx,s=jx,r=lU,o=cU,c=UY,f=NY,d=Gl.DEFAULT_ANISOTROPY,m=m1){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:JK++}),this.uuid=Hp(),this.name="",this.source=new zA(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=f,this.offset=new ao(0,0),this.repeat=new ao(1,1),this.center=new ao(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wl,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==mA)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case bN:e.x=e.x-Math.floor(e.x);break;case jx:e.x=e.x<0?0:1;break;case SN:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case bN:e.y=e.y-Math.floor(e.y);break;case jx:e.y=e.y<0?0:1;break;case SN:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Gl.DEFAULT_IMAGE=null;Gl.DEFAULT_MAPPING=mA;Gl.DEFAULT_ANISOTROPY=1;class eQ extends Gl{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=im,this.minFilter=im,this.generateMipmaps=!1,this.needsUpdate=!0}}const a0=new ao;class tQ extends yb{static get type(){return"ViewportTextureNode"}constructor(e=UA,t=null,n=null){n===null&&(n=new eQ,n.minFilter=cU),super(n,e,t),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=bs.FRAME}updateBefore(e){const t=e.renderer;t.getDrawingBufferSize(a0);const n=this.value;(n.image.width!==a0.width||n.image.height!==a0.height)&&(n.image.width=a0.width,n.image.height=a0.height,n.needsUpdate=!0);const s=n.generateMipmaps;n.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(n),n.generateMipmaps=s}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}class PA extends Gl{constructor(e,t,n=uU,s,r,o,c=im,f=im,d,m=EN){if(m!==EN&&m!==zY)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,s,r,o,c,f,m,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new zA(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}let WE=null;class nQ extends tQ{static get type(){return"ViewportDepthTextureNode"}constructor(e=UA,t=null){WE===null&&(WE=new PA),super(e,t,WE)}}const iQ=it(nQ).setParameterLength(0,2);class oa extends Hn{static get type(){return"ViewportDepthNode"}constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===oa.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:t}=this,n=this.valueNode;let s=null;if(t===oa.DEPTH_BASE)n!==null&&(s=jU().assign(n));else if(t===oa.DEPTH)e.isPerspectiveCamera?s=sQ(kc.z,n0,i0):s=c_(kc.z,n0,i0);else if(t===oa.LINEAR_DEPTH)if(n!==null)if(e.isPerspectiveCamera){const r=qU(n,n0,i0);s=c_(r,n0,i0)}else s=n;else s=c_(kc.z,n0,i0);return s}}oa.DEPTH_BASE="depthBase";oa.DEPTH="depth";oa.LINEAR_DEPTH="linearDepth";const c_=(i,e,t)=>i.add(e).div(e.sub(t)),sQ=(i,e,t)=>e.add(i).mul(t).div(t.sub(e).mul(i)),qU=(i,e,t)=>e.mul(t).div(t.sub(e).mul(i).sub(t)),jU=it(oa,oa.DEPTH_BASE),rQ=Tt(oa,oa.DEPTH),aQ=it(oa,oa.LINEAR_DEPTH).setParameterLength(0,1);iQ();rQ.assign=i=>jU(i);const ZE=new Vt,oQ=new Vt,lQ=new Wl;class cQ{constructor(e=new Vt(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=ZE.subVectors(n,t).cross(oQ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(ZE),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||lQ.getNormalMatrix(e),s=this.coplanarPoint(ZE).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const VN=new jl,GN=new hU;class _y{constructor(e=0,t=0,n=0,s=_y.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,r=s[0],o=s[4],c=s[8],f=s[1],d=s[5],m=s[9],g=s[2],v=s[6],_=s[10];switch(t){case"XYZ":this._y=Math.asin(Tn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,_),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(v,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Tn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(c,_),this._z=Math.atan2(f,d)):(this._y=Math.atan2(-g,r),this._z=0);break;case"ZXY":this._x=Math.asin(Tn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(f,r));break;case"ZYX":this._y=Math.asin(-Tn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,_),this._z=Math.atan2(f,r)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(Tn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-m,d),this._y=Math.atan2(-g,r)):(this._x=0,this._y=Math.atan2(c,_));break;case"XZY":this._z=Math.asin(-Tn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(v,d),this._y=Math.atan2(c,r)):(this._x=Math.atan2(-m,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return VN.makeRotationFromQuaternion(e),this.setFromRotationMatrix(VN,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return GN.setFromEuler(this),this.setFromQuaternion(GN,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}_y.DEFAULT_ORDER="XYZ";class YU extends vA{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new gf(0,0,e,t),this.scissorTest=!1,this.viewport=new gf(0,0,e,t);const s={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:lU,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const r=new Gl(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let c=0;c<o;c++)this.textures[c]=r.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const s=Object.assign({},e.textures[t].image);this.textures[t].source=new zA(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}new cQ;new Vt;new Vt;new Vt;new jl;new Vt(0,0,-1);new gf;new Vt;new Vt;new gf;new ao;const uQ=new YU;UA.flipX();uQ.depthTexture=new PA(1,1);const kN=new _y,KE=new jl,fQ=dr(0).onReference(({material:i})=>i).onObjectUpdate(({material:i})=>i.refractionRatio),hQ=dr(new jl).onReference(function(i){return i.material}).onObjectUpdate(function({material:i,scene:e}){const t=e.environment!==null&&i.envMap===null?e.environmentRotation:i.envMapRotation;return t?(kN.copy(t),KE.makeRotationFromEuler(kN)):KE.identity(),KE}),dQ=VU.negate().reflect(GU),pQ=VU.negate().refract(GU,fQ),mQ=dQ.transformDirection(mb).toVar("reflectVector"),gQ=pQ.transformDirection(mb).toVar("reflectVector");class yQ extends yb{static get type(){return"CubeTextureNode"}constructor(e,t=null,n=null,s=null){super(e,t,n,s),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===RY?mQ:e.mapping===CY?gQ:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),Kn(0,0,0))}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return(e.renderer.coordinateSystem===y1||!n.isRenderTargetTexture)&&(t=Kn(t.x.negate(),t.yz)),hQ.mul(t)}generateUV(e,t){return t.build(e,"vec3")}}const vQ=it(yQ).setParameterLength(1,4).setName("cubeTexture");class xQ extends my{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),s=this.getNodeType();return e.format(t,n,s)}}class WU extends Hn{static get type(){return"ReferenceNode"}constructor(e,t,n=null,s=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=s,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.name=null,this.updateType=bs.OBJECT}element(e){return at(new xQ(this,at(e)))}setGroup(e){return this.group=e,this}label(e){return this.name=e,this}setNodeType(e){let t=null;this.count!==null?t=UK(null,e,this.count):Array.isArray(this.getValueFromReference())?t=HU(null,e):e==="texture"?t=ZK(null):e==="cubeTexture"?t=vQ(null):t=dr(null,e),this.group!==null&&t.setGroup(this.group),this.name!==null&&t.label(this.name),this.node=t.getSelf()}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let s=1;s<t.length;s++)n=n[t[s]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const _1=(i,e,t)=>at(new WU(i,e,t));class _Q extends WU{static get type(){return"MaterialReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.material=n,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const bQ=(i,e,t=null)=>at(new _Q(i,e,t)),ZU=ls(i=>(i.geometry.hasAttribute("tangent")===!1&&i.geometry.computeTangents(),OA("tangent","vec4")))(),SQ=ZU.xyz.toVar("tangentLocal"),KU=HK.mul(Gc(SQ,0)).xyz.toVarying("v_tangentView").normalize().toVar("tangentView"),EQ=i=>i.mul(ZU.w).xyz,TQ=Kc(EQ(rm.cross(KU)),"v_bitangentView").normalize().toVar("bitangentView"),MQ=yy(KU,TQ,rm),AQ=ls(i=>{const{eye_pos:e,surf_norm:t,mapN:n,uv:s}=i,r=e.dFdx(),o=e.dFdy(),c=s.dFdx(),f=s.dFdy(),d=t,m=o.cross(d),g=d.cross(r),v=m.mul(c.x).add(g.mul(f.x)),_=m.mul(c.y).add(g.mul(f.y)),b=v.dot(v).max(_.dot(_)),A=LA.mul(b.inverseSqrt());return TU(v.mul(n.x,A),_.mul(n.y,A),d.mul(n.z)).normalize()});class wQ extends gr{static get type(){return"NormalMapNode"}constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=TN}setup(e){const{normalMapType:t,scaleNode:n}=this;let s=this.node.mul(2).sub(1);n!==null&&(s=Kn(s.xy.mul(n),s.z));let r=null;return t===PY?r=kU(s):t===TN&&(e.hasGeometryAttribute("tangent")===!0?r=MQ.mul(s).normalize():r=AQ({eye_pos:kc,surf_norm:rm,mapN:s,uv:gb()})),r}}const $N=it(wQ).setParameterLength(1,2),RQ=ls(({textureNode:i,bumpScale:e})=>{const t=s=>i.cache().context({getUV:r=>s(r.uvNode||gb()),forceUVContext:!0}),n=Oa(t(s=>s));return gy(Oa(t(s=>s.add(s.dFdx()))).sub(n),Oa(t(s=>s.add(s.dFdy()))).sub(n)).mul(e)}),CQ=ls(i=>{const{surf_pos:e,surf_norm:t,dHdxy:n}=i,s=e.dFdx().normalize(),r=e.dFdy().normalize(),o=t,c=r.cross(o),f=o.cross(s),d=s.dot(c).mul(LA),m=d.sign().mul(n.x.mul(c).add(n.y.mul(f)));return d.abs().mul(t).sub(m).normalize()});class NQ extends gr{static get type(){return"BumpMapNode"}constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=RQ({textureNode:this.textureNode,bumpScale:e});return CQ({surf_pos:kc,surf_norm:rm,dHdxy:t})}}const DQ=it(NQ).setParameterLength(1,2),XN=new Map;class Le extends Hn{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,t){let n=XN.get(e);return n===void 0&&(n=bQ(e,t),XN.set(e,n)),n}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const t=e.context.material,n=this.scope;let s=null;if(n===Le.COLOR){const r=t.color!==void 0?this.getColor(n):Kn();t.map&&t.map.isTexture===!0?s=r.mul(this.getTexture("map")):s=r}else if(n===Le.OPACITY){const r=this.getFloat(n);t.alphaMap&&t.alphaMap.isTexture===!0?s=r.mul(this.getTexture("alpha")):s=r}else if(n===Le.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?s=this.getTexture("specular").r:s=Oa(1);else if(n===Le.SPECULAR_INTENSITY){const r=this.getFloat(n);t.specularIntensityMap&&t.specularIntensityMap.isTexture===!0?s=r.mul(this.getTexture(n).a):s=r}else if(n===Le.SPECULAR_COLOR){const r=this.getColor(n);t.specularColorMap&&t.specularColorMap.isTexture===!0?s=r.mul(this.getTexture(n).rgb):s=r}else if(n===Le.ROUGHNESS){const r=this.getFloat(n);t.roughnessMap&&t.roughnessMap.isTexture===!0?s=r.mul(this.getTexture(n).g):s=r}else if(n===Le.METALNESS){const r=this.getFloat(n);t.metalnessMap&&t.metalnessMap.isTexture===!0?s=r.mul(this.getTexture(n).b):s=r}else if(n===Le.EMISSIVE){const r=this.getFloat("emissiveIntensity"),o=this.getColor(n).mul(r);t.emissiveMap&&t.emissiveMap.isTexture===!0?s=o.mul(this.getTexture(n)):s=o}else if(n===Le.NORMAL)t.normalMap?(s=$N(this.getTexture("normal"),this.getCache("normalScale","vec2")),s.normalMapType=t.normalMapType):t.bumpMap?s=DQ(this.getTexture("bump").r,this.getFloat("bumpScale")):s=rm;else if(n===Le.CLEARCOAT){const r=this.getFloat(n);t.clearcoatMap&&t.clearcoatMap.isTexture===!0?s=r.mul(this.getTexture(n).r):s=r}else if(n===Le.CLEARCOAT_ROUGHNESS){const r=this.getFloat(n);t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?s=r.mul(this.getTexture(n).r):s=r}else if(n===Le.CLEARCOAT_NORMAL)t.clearcoatNormalMap?s=$N(this.getTexture(n),this.getCache(n+"Scale","vec2")):s=rm;else if(n===Le.SHEEN){const r=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?s=r.mul(this.getTexture("sheenColor").rgb):s=r}else if(n===Le.SHEEN_ROUGHNESS){const r=this.getFloat(n);t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?s=r.mul(this.getTexture(n).a):s=r,s=s.clamp(.07,1)}else if(n===Le.ANISOTROPY)if(t.anisotropyMap&&t.anisotropyMap.isTexture===!0){const r=this.getTexture(n);s=_U(o0.x,o0.y,o0.y.negate(),o0.x).mul(r.rg.mul(2).sub(gy(1)).normalize().mul(r.b))}else s=o0;else if(n===Le.IRIDESCENCE_THICKNESS){const r=_1("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const o=_1("0","float",t.iridescenceThicknessRange);s=r.sub(o).mul(this.getTexture(n).g).add(o)}else s=r}else if(n===Le.TRANSMISSION){const r=this.getFloat(n);t.transmissionMap?s=r.mul(this.getTexture(n).r):s=r}else if(n===Le.THICKNESS){const r=this.getFloat(n);t.thicknessMap?s=r.mul(this.getTexture(n).g):s=r}else if(n===Le.IOR)s=this.getFloat(n);else if(n===Le.LIGHT_MAP)s=this.getTexture(n).rgb.mul(this.getFloat("lightMapIntensity"));else if(n===Le.AO)s=this.getTexture(n).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else{const r=this.getNodeType(e);s=this.getCache(n,r)}return s}}Le.ALPHA_TEST="alphaTest";Le.COLOR="color";Le.OPACITY="opacity";Le.SHININESS="shininess";Le.SPECULAR="specular";Le.SPECULAR_STRENGTH="specularStrength";Le.SPECULAR_INTENSITY="specularIntensity";Le.SPECULAR_COLOR="specularColor";Le.REFLECTIVITY="reflectivity";Le.ROUGHNESS="roughness";Le.METALNESS="metalness";Le.NORMAL="normal";Le.CLEARCOAT="clearcoat";Le.CLEARCOAT_ROUGHNESS="clearcoatRoughness";Le.CLEARCOAT_NORMAL="clearcoatNormal";Le.EMISSIVE="emissive";Le.ROTATION="rotation";Le.SHEEN="sheen";Le.SHEEN_ROUGHNESS="sheenRoughness";Le.ANISOTROPY="anisotropy";Le.IRIDESCENCE="iridescence";Le.IRIDESCENCE_IOR="iridescenceIOR";Le.IRIDESCENCE_THICKNESS="iridescenceThickness";Le.IOR="ior";Le.TRANSMISSION="transmission";Le.THICKNESS="thickness";Le.ATTENUATION_DISTANCE="attenuationDistance";Le.ATTENUATION_COLOR="attenuationColor";Le.LINE_SCALE="scale";Le.LINE_DASH_SIZE="dashSize";Le.LINE_GAP_SIZE="gapSize";Le.LINE_WIDTH="linewidth";Le.LINE_DASH_OFFSET="dashOffset";Le.POINT_SIZE="size";Le.DISPERSION="dispersion";Le.LIGHT_MAP="light";Le.AO="ao";Le.ALPHA_TEST;Le.COLOR;Le.SHININESS;Le.EMISSIVE;Le.OPACITY;Le.SPECULAR;Le.SPECULAR_INTENSITY;Le.SPECULAR_COLOR;Le.SPECULAR_STRENGTH;Le.REFLECTIVITY;Le.ROUGHNESS;Le.METALNESS;Le.NORMAL;Le.CLEARCOAT;Le.CLEARCOAT_ROUGHNESS;Le.CLEARCOAT_NORMAL;Le.ROTATION;Le.SHEEN;Le.SHEEN_ROUGHNESS;Le.ANISOTROPY;Le.IRIDESCENCE;Le.IRIDESCENCE_IOR;Le.IRIDESCENCE_THICKNESS;Le.TRANSMISSION;Le.THICKNESS;Le.IOR;Le.ATTENUATION_DISTANCE;Le.ATTENUATION_COLOR;Le.LINE_SCALE;Le.LINE_DASH_SIZE;Le.LINE_GAP_SIZE;Le.LINE_WIDTH;Le.LINE_DASH_OFFSET;Le.POINT_SIZE;Le.DISPERSION;Le.LIGHT_MAP;Le.AO;const o0=dr(new ao).onReference(function(i){return i.material}).onRenderUpdate(function({material:i}){this.value.set(i.anisotropy*Math.cos(i.anisotropyRotation),i.anisotropy*Math.sin(i.anisotropyRotation))}),l0=new _y,QE=new jl;class la extends Hn{static get type(){return"SceneNode"}constructor(e=la.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,n=this.scene!==null?this.scene:e.scene;let s;return t===la.BACKGROUND_BLURRINESS?s=_1("backgroundBlurriness","float",n):t===la.BACKGROUND_INTENSITY?s=_1("backgroundIntensity","float",n):t===la.BACKGROUND_ROTATION?s=dr("mat4").label("backgroundRotation").setGroup(sm).onRenderUpdate(()=>{const r=n.background;return r!==null&&r.isTexture&&r.mapping!==mA?(l0.copy(n.backgroundRotation),l0.x*=-1,l0.y*=-1,l0.z*=-1,QE.makeRotationFromEuler(l0)):QE.identity(),QE}):console.error("THREE.SceneNode: Unknown scope:",t),s}}la.BACKGROUND_BLURRINESS="backgroundBlurriness";la.BACKGROUND_INTENSITY="backgroundIntensity";la.BACKGROUND_ROTATION="backgroundRotation";la.BACKGROUND_BLURRINESS;la.BACKGROUND_INTENSITY;la.BACKGROUND_ROTATION;ls(({texture:i,uv:e})=>{const n=Kn().toVar();return cW(e.x.lessThan(1e-4),()=>{n.assign(Kn(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{n.assign(Kn(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{n.assign(Kn(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{n.assign(Kn(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{n.assign(Kn(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{n.assign(Kn(0,0,-1))}).Else(()=>{const r=i.sample(e.add(Kn(-.01,0,0))).r.sub(i.sample(e.add(Kn(.01,0,0))).r),o=i.sample(e.add(Kn(0,-.01,0))).r.sub(i.sample(e.add(Kn(0,.01,0))).r),c=i.sample(e.add(Kn(0,0,-.01))).r.sub(i.sample(e.add(Kn(0,0,.01))).r);n.assign(Kn(r,o,c))}),n.normalize()});const e_=new ao;class OQ extends yb{static get type(){return"PassTextureNode"}constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return e.object.isQuadMesh&&this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class qN extends OQ{static get type(){return"PassMultipleTextureNode"}constructor(e,t,n=!1){super(e,null),this.textureName=t,this.previousTexture=n}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){return new this.constructor(this.passNode,this.textureName,this.previousTexture)}}class vb extends gr{static get type(){return"PassNode"}constructor(e,t,n,s={}){super("vec4"),this.scope=e,this.scene=t,this.camera=n,this.options=s,this._pixelRatio=1,this._width=1,this._height=1;const r=new PA;r.isRenderTargetTexture=!0,r.name="depth";const o=new YU(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:LY,...s});o.texture.name="output",o.depthTexture=r,this.renderTarget=o,this._textures={output:o.texture,depth:r},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=dr(0),this._cameraFar=dr(0),this._mrt=null,this._layers=null,this._resolution=1,this.isPassNode=!0,this.updateBeforeType=bs.FRAME}setResolution(e){return this._resolution=e,this}getResolution(){return this._resolution}setLayers(e){return this._layers=e,this}getLayers(){return this._layers}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}isGlobal(){return!0}getTexture(e){let t=this._textures[e];return t===void 0&&(t=this.renderTarget.texture.clone(),t.name=e,this._textures[e]=t,this.renderTarget.textures.push(t)),t}getPreviousTexture(e){let t=this._previousTextures[e];return t===void 0&&(t=this.getTexture(e).clone(),this._previousTextures[e]=t),t}toggleTexture(e){const t=this._previousTextures[e];if(t!==void 0){const n=this._textures[e],s=this.renderTarget.textures.indexOf(n);this.renderTarget.textures[s]=t,this._textures[e]=t,this._previousTextures[e]=n,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let t=this._textureNodes[e];return t===void 0&&(t=at(new qN(this,e)),t.updateTexture(),this._textureNodes[e]=t),t}getPreviousTextureNode(e="output"){let t=this._previousTextureNodes[e];return t===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),t=at(new qN(this,e,!0)),t.updateTexture(),this._previousTextureNodes[e]=t),t}getViewZNode(e="depth"){let t=this._viewZNodes[e];if(t===void 0){const n=this._cameraNear,s=this._cameraFar;this._viewZNodes[e]=t=qU(this.getTextureNode(e),n,s)}return t}getLinearDepthNode(e="depth"){let t=this._linearDepthNodes[e];if(t===void 0){const n=this._cameraNear,s=this._cameraFar,r=this.getViewZNode(e);this._linearDepthNodes[e]=t=c_(r,n,s)}return t}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,e.backend.isWebGLBackend===!0&&(this.renderTarget.samples=0),this.renderTarget.texture.type=e.getColorBufferType(),this.scope===vb.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:n}=this;let s,r;const o=t.getOutputRenderTarget();o&&o.isXRRenderTarget===!0?(r=1,s=t.xr.getCamera(),t.xr.updateCamera(s),e_.set(o.width,o.height)):(s=this.camera,r=t.getPixelRatio(),t.getSize(e_)),this._pixelRatio=r,this.setSize(e_.width,e_.height);const c=t.getRenderTarget(),f=t.getMRT(),d=s.layers.mask;this._cameraNear.value=s.near,this._cameraFar.value=s.far,this._layers!==null&&(s.layers.mask=this._layers.mask);for(const m in this._previousTextures)this.toggleTexture(m);t.setRenderTarget(this.renderTarget),t.setMRT(this._mrt),t.render(n,s),t.setRenderTarget(c),t.setMRT(f),s.layers.mask=d}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio*this._resolution,s=this._height*this._pixelRatio*this._resolution;this.renderTarget.setSize(n,s)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}vb.COLOR="color";vb.DEPTH="depth";Kn(1.6605,-.1246,-.0182),Kn(-.5876,1.1329,-.1006),Kn(-.0728,-.0083,1.1187);Kn(.6274,.0691,.0164),Kn(.3293,.9195,.088),Kn(.0433,.0113,.8956);function QU(i){let e;const t=i.context.getViewZ;return t!==void 0&&(e=t(this)),(e||kc.z).negate()}ls(([i,e],t)=>{const n=QU(t);return wA(i,e,n)});ls(([i],e)=>{const t=QU(e);return i.mul(i,t,t).negate().exp().oneMinus()});ls(([i,e])=>Gc(e.toFloat().mix(PN.rgb,i.toVec3()),PN.a));class LQ extends Hn{constructor(e){super(),this.scope=e}generate(e){const{scope:t}=this,{renderer:n}=e;n.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${t}Barrier 
`):e.addLineFlowCode(`${t}Barrier()`,this)}}it(LQ);class Zl extends gr{static get type(){return"AtomicFunctionNode"}constructor(e,t,n){super("uint"),this.method=e,this.pointerNode=t,this.valueNode=n}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const t=this.method,n=this.getNodeType(e),s=this.getInputType(e),r=this.pointerNode,o=this.valueNode,c=[];c.push(`&${r.build(e,s)}`),o!==null&&c.push(o.build(e,s));const f=`${e.getMethod(t,n)}( ${c.join(", ")} )`;return o!==null&&e.addLineFlowCode(f,this),f}}Zl.ATOMIC_LOAD="atomicLoad";Zl.ATOMIC_STORE="atomicStore";Zl.ATOMIC_ADD="atomicAdd";Zl.ATOMIC_SUB="atomicSub";Zl.ATOMIC_MAX="atomicMax";Zl.ATOMIC_MIN="atomicMin";Zl.ATOMIC_AND="atomicAnd";Zl.ATOMIC_OR="atomicOr";Zl.ATOMIC_XOR="atomicXor";it(Zl);ls(([i=gb()],{renderer:e,material:t})=>{const n=Oa(1).toVar(),s=LU(i.mul(2).sub(1));if(t.alphaToCoverage&&e.samples>1){const r=Oa(s.fwidth()).toVar();n.assign(wA(r.oneMinus(),r.add(1),s).oneMinus())}else s.greaterThan(1).discard();return n});function UQ(){const i=V.useRef(!1),e=Sm(Cj,"images/models/environment.glb"),t=V.useRef({uTime:{value:0},uCausticSpeed:{value:1},uCausticColor:{value:new lt("#ffffff")},uCausticScale:{value:10},uCausticOffset:{value:.66},uCausticThickness:{value:.5},uCausticIntensity:{value:.28}}),n=new La({vertexShader:yN,fragmentShader:vN,uniforms:t.current});return i.current===!1&&(e.scene.traverse(s=>{if(s.isMesh&&s.material&&s.material.color){const r=new lt(s.material.color.r,s.material.color.g,s.material.color.b),o={uTime:n.uniforms.uTime,uCausticSpeed:n.uniforms.uCausticSpeed,uCausticColor:n.uniforms.uCausticColor,uCausticScale:n.uniforms.uCausticScale,uCausticOffset:n.uniforms.uCausticOffset,uCausticThickness:n.uniforms.uCausticThickness,uCausticIntensity:n.uniforms.uCausticIntensity,uColor:{value:r}},c=new La({vertexShader:yN,fragmentShader:vN,uniforms:o});s.material=c}}),i.current=!0),WL((s,r,o)=>{t.current.uTime.value+=r*.5}),Ze.jsx(Ze.Fragment,{children:Ze.jsx("primitive",{scale:.5,object:e.scene})})}function zQ(){const i=dA("/images/R.png"),e=V.useRef();return V.useRef({uTexture:{value:i},uTime:{value:0}}),WL((t,n,s)=>{e.current&&(e.current.material.uniforms.uTime.value+=n*.5)}),Ze.jsxs(Ze.Fragment,{children:[Ze.jsx("ambientLight",{intensity:1}),Ze.jsx(UQ,{})]})}function PQ(i){const e="English",t=[{img:"/images/github-mark.png",link:"https://github.com/Unnamedhat88",title:"Github",color:"lightgray"},{img:"/images/LI-In-Bug.png",link:"https://www.linkedin.com/in/brandon-pratama-kwee-354576302/",title:"LinkedIn",color:"#7092ff"},{img:"",link:"https://outlook.office.com/mail/deeplink/compose?to=is0805fh@ed.ritsumei.ac.jp",title:"Outlook",color:"#b3e4ff"}];return Ze.jsx("div",{className:`h-screen grid ${i.className}`,style:i.style,children:Ze.jsxs("div",{className:"relative mx-24 my-10",children:[Ze.jsx("div",{className:"absolute h-full w-full bg-red-100 rounded-xl",style:{opacity:"0.6"}}),Ze.jsxs("div",{className:"relative z-20  my-4",children:[Ze.jsx("div",{className:"text-5xl mx-8",style:{fontWeight:"600",letterSpacing:"-1px"},children:Il[e].Contact}),Ze.jsx("div",{className:"font-medium mt-2 mx-16 text-2xl semi-bold",children:Il[e].Contact_Me}),Ze.jsx("div",{className:"relative grid items-center gap-4 px-6 mt-10 mx-10",children:t.map((n,s)=>Ze.jsx("div",{className:"rounded-xl cursor-pointer bg-red-100 flex items-center justify-center py-4",style:{height:"100px",width:"300px",backgroundColor:t[s].color},onClick:()=>window.open(t[s].link,"_blank"),children:Ze.jsx("p",{className:"text-3xl",children:t[s].title})},s))})]})]})})}function IQ({scrollprogress:i}){const{camera:e}=YL();console.log(i);const t=-29*i+7.5;V.useEffect(()=>{window.scrollTo(0,0)},[]),V.useEffect(()=>{console.log(t),e.position.set(t,5,t),e.lookAt(new K(t-4,3.5,t-4))},[t])}function BQ(){const[i,e]=V.useState(0),[t,n]=V.useState(0),[s,r]=V.useState(0);console.log(s);const o=()=>{const c=window.pageYOffset;r(c/2377)};return V.useEffect(()=>(window.addEventListener("scroll",o,{passive:!0}),()=>{window.removeEventListener("scroll",o)}),[]),Ze.jsxs("div",{className:"relative",children:[Ze.jsxs("div",{className:"grid absolute z-10",style:{height:"500vh",gap:"55vh"},children:[Ze.jsx(Aj,{style:{opacity:s<.125?1:0},className:"transition-opacity duration-300"}),Ze.jsx(wj,{style:{opacity:s>.4&&s<.6?1:0},className:"transition-opacity duration-300",X:i,setX:e}),Ze.jsx(Rj,{style:{opacity:s>.9&&s<1.2?1:0},className:"transition-opacity duration-300",Y:t,setY:n}),Ze.jsx(PQ,{style:{opacity:s>1.3?1:0},className:"transition-opacity duration-300"})]}),Ze.jsxs(Sj,{className:"",style:{height:"100vh",position:"fixed",backgroundImage:"linear-gradient(rgb(255,197,253) ,rgb(246,155,213),rgb(216,90,91))"},shadows:!0,children:[Ze.jsx(IQ,{scrollprogress:s}),Ze.jsx(zQ,{})]})]})}Yz.createRoot(document.getElementById("root")).render(Ze.jsx(V.StrictMode,{children:Ze.jsx(BQ,{})}));
